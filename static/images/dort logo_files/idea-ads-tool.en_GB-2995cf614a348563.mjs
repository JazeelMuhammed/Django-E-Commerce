(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[16102,55378,28543,7701,58789,28689,5782,39395,33312,68743,70943,81165,2171,73812,23463,79523,47424,70492,15071,27021,741,48994,54996,29062],{873796:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterFormButtonQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],concreteType:null,kind:"LinkedField",name:"v3GetUserBoardInviteQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}],type:"V3GetUserBoardInvite",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BoardCollabInviterFormButtonQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetUserBoardInviteQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetUserBoardInvite",abstractKey:null}],storageKey:null}]},params:{id:"b4cc711b6f7528264247b354116c11866640e7b0e10f2aaeb2c7f1bf468197bc",metadata:{},name:"BoardCollabInviterFormButtonQuery",operationKind:"query",text:null}};s.hash="d83a81c7712d5d973b3cb4fea3c8f258",e.exports=s},611534:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterForm_emails_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"BoardCollabInviterForm_emails_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"88646fd167b035c47b7f2195ee6eaeb70c770276911a5fb25afd980c8376cd48",metadata:{},name:"BoardCollabInviterForm_emails_Mutation",operationKind:"mutation",text:null}};s.hash="d26533862c09ada00dbb435a2b8d52d4",e.exports=s},830075:e=>{var t,i,n,o,s,r,a={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"boardId"},i={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},n={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"BoardCollabInviterForm_users_Mutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,t,n],kind:"Operation",name:"BoardCollabInviterForm_users_Mutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[s,{kind:"InlineFragment",selections:[r],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"0c4d68cd6db5c3065630f04e7d46e0a603920b4c156a20acae1f3c8c2fad9bb2",metadata:{},name:"BoardCollabInviterForm_users_Mutation",operationKind:"mutation",text:null}};a.hash="cabd1f8fb250abc5c66fa2f4d3028495",e.exports=a},758395:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};s.hash="e0cd549ce31635291bd74113393edc53",e.exports=s},847902:e=>{var t,i,n,o,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};s.hash="7c32abc79b81b52b7c0d6582f9278b22",e.exports=s},266970:e=>{var t,i,n,o,s,r,a={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"ban"},i={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,n,t],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[s,{kind:"InlineFragment",selections:[r],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};a.hash="a3cb87deead5a06468a3b46652f22daa",e.exports=a},767656:e=>{var t,i,n,o,s,r,a,l,d={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},{kind:"InlineFragment",selections:[n,a={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s,r,l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},l],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},{kind:"InlineFragment",selections:[a],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};d.hash="f70efc59a3f6a73e0af36081d8552b3a",e.exports=d},526075:e=>{var t,i,n,o,s,r,a,l,d,c,u={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:i=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:s=[o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:s,storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},{kind:"InlineFragment",selections:[n,d={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:c=[o,l],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:c,storageKey:null},r,a,l,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:c,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},{kind:"InlineFragment",selections:[d],type:"Error",abstractKey:"__isError"}],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}};u.hash="38716861de712c68561883b0d58d8bc6",e.exports=u},240684:(e,t,i)=>{i.d(t,{TA:()=>S,ZP:()=>T});var n=i(667294),o=i(263366),s=i(487462),r=i(497326),a=i(875068),l=i(659864),d=i(108679),c=i.n(d);function u(e,t){if(!e){var i=new Error("loadable: "+t);throw i.framesToPop=1,i.name="Invariant Violation",i}}function h(e){console.warn("loadable: "+e)}var p=n.createContext(),_="__LOADABLE_REQUIRED_CHUNKS__";function g(e){return""+e+_}var m={initialChunks:{}},f="PENDING",x="REJECTED";var b=function(e){return e};function y(e){var t=e.defaultResolveComponent,i=void 0===t?b:t,d=e.render,h=e.onLoad;function _(e,t){void 0===t&&(t={});var _=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),g={};function b(e){return t.cacheKey?t.cacheKey(e):_.resolve?_.resolve(e):"static"}function y(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):i(e);if(t.resolveComponent&&!(0,l.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return c()(o,s,{preload:!0}),s}var v,P=function(e){function i(i){var n;return(n=e.call(this,i)||this).state={result:null,error:null,loading:!0,cacheKey:b(i)},u(!i.__chunkExtractor||_.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),i.__chunkExtractor?(!1===t.ssr||(_.requireAsync(i).catch((function(){return null})),n.loadSync(),i.__chunkExtractor.addChunk(_.chunkName(i))),(0,r.Z)(n)):(!1!==t.ssr&&(_.isReady&&_.isReady(i)||_.chunkName&&m.initialChunks[_.chunkName(i)])&&n.loadSync(),n)}(0,a.Z)(i,e),i.getDerivedStateFromProps=function(e,t){var i=b(e);return(0,s.Z)({},t,{cacheKey:i,loading:t.loading||t.cacheKey!==i})};var n=i.prototype;return n.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===x&&this.setCache(),this.state.loading&&this.loadAsync()},n.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},n.componentWillUnmount=function(){this.mounted=!1},n.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},n.getCacheKey=function(){return b(this.props)},n.getCache=function(){return g[this.getCacheKey()]},n.setCache=function(e){void 0===e&&(e=void 0),g[this.getCacheKey()]=e},n.triggerOnLoad=function(){var e=this;h&&setTimeout((function(){h(e.state.result,e.props)}))},n.loadSync=function(){if(this.state.loading)try{var e=y(_.requireSync(this.props),this.props,I);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:_.resolve(this.props),chunkName:_.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},n.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var i=y(t,e.props,{Loadable:I});e.safeSetState({result:i,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},n.resolveAsync=function(){var e=this,t=this.props,i=(t.__chunkExtractor,t.forwardedRef,(0,o.Z)(t,["__chunkExtractor","forwardedRef"])),n=this.getCache();return n||((n=_.requireAsync(i)).status=f,this.setCache(n),n.then((function(){n.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:_.resolve(e.props),chunkName:_.chunkName(e.props),error:t?t.message:t}),n.status=x}))),n},n.render=function(){var e=this.props,i=e.forwardedRef,n=e.fallback,r=(e.__chunkExtractor,(0,o.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,l=a.error,c=a.loading,u=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===f)throw this.loadAsync();if(l)throw l;var h=n||t.fallback||null;return c?h:d({fallback:h,result:u,options:t,props:(0,s.Z)({},r,{ref:i})})},i}(n.Component),w=(v=P,function(e){return n.createElement(p.Consumer,null,(function(t){return n.createElement(v,Object.assign({__chunkExtractor:t},e))}))}),I=n.forwardRef((function(e,t){return n.createElement(w,Object.assign({forwardedRef:t},e))}));return I.preload=function(e){_.requireAsync(e)},I.load=function(e){return _.requireAsync(e)},I}return{loadable:_,lazy:function(e,t){return _(e,(0,s.Z)({},t,{suspense:!0}))}}}var v=y({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,i=e.props;return n.createElement(t,i)}}),P=v.loadable,w=v.lazy,I=y({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,i=e.props;return i.children?i.children(t):null}}),A=I.loadable,E=I.lazy,C="undefined"!=typeof window;function S(e,t){void 0===e&&(e=function(){});var i=(void 0===t?{}:t).namespace,n=void 0===i?"":i;if(!C)return h("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(C){var s=g(n),r=document.getElementById(s);if(r){o=JSON.parse(r.textContent);var a=document.getElementById(s+"_ext");if(!a)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(a.textContent).namedChunks.forEach((function(e){m.initialChunks[e]=!0}))}}if(!o)return h("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var l=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,i=t.push.bind(t);function n(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(l||(l=!0,e()))}t.push=function(){i.apply(void 0,arguments),n()},n()})).then(e)}var j=P;j.lib=A,w.lib=E;const T=j},169272:(e,t,i)=>{var n=i(310723),o=[],s=[],r=n.makeRequestCallFromTimer((function(){if(s.length)throw s.shift()}));function a(e){var t;(t=o.length?o.pop():new l).task=e,n(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(s.push(e),r())}finally{this.task=null,o[o.length]=this}}},310723:(e,t,i)=>{function n(e){s.length||(o(),!0),s[s.length]=e}e.exports=n;var o,s=[],r=0;function a(){for(;r<s.length;){var e=r;if(r+=1,s[e].call(),r>1024){for(var t=0,i=s.length-r;t<i;t++)s[t]=s[t+r];s.length-=r,r=0}}s.length=0,r=0,!1}var l,d,c,u=void 0!==i.g?i.g:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(n,0),i=setInterval(n,50);function n(){clearTimeout(t),clearInterval(i),e()}}}"function"==typeof h?(l=1,d=new h(a),c=document.createTextNode(""),d.observe(c,{characterData:!0}),o=function(){l=-l,c.data=l}):o=p(a),n.requestFlush=o,n.makeRequestCallFromTimer=p},294184:(e,t)=>{var i;!function(){var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var s=typeof i;if("string"===s||"number"===s)e.push(i);else if(Array.isArray(i)&&i.length){var r=o.apply(null,i);r&&e.push(r)}else if("object"===s)for(var a in i)n.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()},58545:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(983946),o=i(51820),s=i(13882),r=6e4;function a(e,t){(0,s.Z)(2,arguments);var i=(0,n.Z)(t);return(0,o.Z)(e,i*r)}},959910:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e,t){(0,o.Z)(2,arguments);var i=(0,n.Z)(e),s=(0,n.Z)(t);return i.getTime()-s.getTime()}},969690:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(959910),o=i(13882),s=6e4;function r(e,t){(0,o.Z)(2,arguments);var i=(0,n.Z)(e,t)/s;return i>0?Math.floor(i):Math.ceil(i)}},383894:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e){(0,o.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(23,59,59,999),t}},69119:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(619013),o=i(13882);function s(e){(0,o.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(0,0,0,0),t}},538334:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(120975),o=i(649610),s=i(116434),r=i(325921),a=i(284125);var l=function(){function e(e,t,i){var s=this;void 0===t&&(t={}),void 0===i&&(i=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=s.store.getState().refCount>0;e&&!s.isSetUp?(s.backend.setup(),s.isSetUp=!0):!e&&s.isSetUp&&(s.backend.teardown(),s.isSetUp=!1)};var l=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return n.createStore(o.default,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(i);this.store=l,this.monitor=new r.default(l,new a.default(l)),this.backend=e(this),l.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch;var i=s.default(this);return Object.keys(i).reduce((function(n,o){var s,r=i[o];return n[o]=(s=r,function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=s.apply(e,i);void 0!==o&&t(o)}),n}),{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=l},325921:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(640809),o=i(952705),s=i(442520),r=i(441143),a=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var i=this;void 0===t&&(t={handlerIds:void 0});var n=t.handlerIds;r("function"==typeof e,"listener must be a function."),r(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId;return this.store.subscribe((function(){var t=i.store.getState(),r=t.stateId;try{r===o||r===o+1&&!s.areDirty(t.dirtyHandlerIds,n)||e()}finally{o=r}}))},e.prototype.subscribeToOffsetChange=function(e){var t=this;r("function"==typeof e,"listener must be a function.");var i=this.store.getState().dragOffset;return this.store.subscribe((function(){var n=t.store.getState().dragOffset;n!==i&&(i=n,e())}))},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return r(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(r(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(e),o=this.getItemType();return n.default(i,o)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return Boolean(this.getItemType())},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return r(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var i=t.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(e),s=this.getItemType();if(s&&!n.default(o,s))return!1;var r=this.getTargetIds();if(!r.length)return!1;var a=r.indexOf(e);return i?a===r.length-1:a>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return o.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return o.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=a},284125:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(4963),o=i(547227),s=i(556141),r=i(834314),a=i(441143),l=i(169272);function d(e){switch(e[0]){case"S":return s.HandlerRole.SOURCE;case"T":return s.HandlerRole.TARGET;default:a(!1,"Cannot parse handler ID: "+e)}}function c(e,t){var i=e.entries(),n=!1;do{var o=i.next(),s=o.done;if(o.value[1]===t)return!0;n=s}while(!n);return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){r.validateType(e),r.validateSourceContract(t);var i=this.addHandler(s.HandlerRole.SOURCE,e,t);return this.store.dispatch(n.addSource(i)),i},e.prototype.addTarget=function(e,t){r.validateType(e,!0),r.validateTargetContract(t);var i=this.addHandler(s.HandlerRole.TARGET,e,t);return this.store.dispatch(n.addTarget(i)),i},e.prototype.containsHandler=function(e){return c(this.dragSources,e)||c(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),a(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return a(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return a(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return d(e)===s.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return d(e)===s.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;a(this.getSource(e),"Expected an existing source."),this.store.dispatch(n.removeSource(e)),l((function(){t.dragSources.delete(e),t.types.delete(e)}))},e.prototype.removeTarget=function(e){a(this.getTarget(e),"Expected an existing target."),this.store.dispatch(n.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);a(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){a(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,i){var n=function(e){var t=o.default().toString();switch(e){case s.HandlerRole.SOURCE:return"S"+t;case s.HandlerRole.TARGET:return"T"+t;default:throw new Error("Unknown Handler Role: "+e)}}(e);return this.types.set(n,t),e===s.HandlerRole.SOURCE?this.dragSources.set(n,i):e===s.HandlerRole.TARGET&&this.dropTargets.set(n,i),n},e}();t.default=u},84554:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(446714),o=i(315033),s=i(441143),r=i(59980),a={type:r.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,i){void 0===t&&(t=[]),void 0===i&&(i={publishSource:!0});var l=i.publishSource,d=void 0===l||l,c=i.clientOffset,u=i.getSourceClientOffset,h=e.getMonitor(),p=e.getRegistry();e.dispatch(n.setClientOffset(c)),function(e,t,i){s(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var n=0,o=e;n<o.length;n++){var r=o[n];s(i.getSource(r),"Expected sourceIds to be registered.")}}(t,h,p);var _=function(e,t){for(var i=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){i=e[n];break}return i}(t,h);if(null!==_){var g=null;c&&(!function(e){s("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(u),g=u(_)),e.dispatch(n.setClientOffset(c,g));var m=p.getSource(_).beginDrag(h,_);!function(e){s(o.isObject(e),"Item must be an object.")}(m),p.pinSource(_);var f=p.getSourceType(_);return{type:r.BEGIN_DRAG,payload:{itemType:f,item:m,sourceId:_,clientOffset:c||null,sourceClientOffset:g||null,isSourcePublic:!!d}}}e.dispatch(a)}}},676402:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(59980),s=i(315033),r=i(441143);t.default=function(e){return function(t){void 0===t&&(t={});var i=e.getMonitor(),a=e.getRegistry();!function(e){r(e.isDragging(),"Cannot call drop while not dragging."),r(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(i);var l=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(i);l.forEach((function(l,d){var c=function(e,t,i,n){var o=i.getTarget(e),a=o?o.drop(n,e):void 0;(function(e){r(void 0===e||s.isObject(e),"Drop result must either be an object or undefined.")})(a),void 0===a&&(a=0===t?{}:n.getDropResult());return a}(l,d,a,i),u={type:o.DROP,payload:{dropResult:n({},t,c)}};e.dispatch(u)}))}}},852126:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980),o=i(441143);t.default=function(e){return function(){var t=e.getMonitor(),i=e.getRegistry();!function(e){o(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var s=t.getSourceId();return i.getSource(s,!0).endDrag(t,s),i.unpinSource(),{type:n.END_DRAG}}}},645140:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(640809),o=i(59980),s=i(441143);t.default=function(e){return function(t,i){var r=(void 0===i?{}:i).clientOffset;!function(e){s(Array.isArray(e),"Expected targetIds to be an array.")}(t);var a=t.slice(0),l=e.getMonitor(),d=e.getRegistry();return function(e,t,i){s(t.isDragging(),"Cannot call hover while not dragging."),s(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];s(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var r=i.getTarget(o);s(r,"Expected targetIds to be registered.")}}(a,l,d),function(e,t,i){for(var o=e.length-1;o>=0;o--){var s=e[o],r=t.getTargetType(s);n.default(r,i)||e.splice(o,1)}}(a,d,l.getItemType()),function(e,t,i){for(var n=0,o=e;n<o.length;n++){var s=o[n];i.getTarget(s).hover(t,s)}}(a,l,d),{type:o.HOVER,payload:{targetIds:a,clientOffset:r||null}}}}},116434:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(84554),o=i(86045),s=i(645140),r=i(676402),a=i(852126);!function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(59980)),t.default=function(e){return{beginDrag:n.default(e),publishDragSource:o.default(e),hover:s.default(e),drop:r.default(e),endDrag:a.default(e)}}},446714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980);t.setClientOffset=function(e,t){return{type:n.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},86045:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980);t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:n.PUBLISH_DRAG_SOURCE}}}},59980:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},4963:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},834314:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(441143);t.validateSourceContract=function(e){n("function"==typeof e.canDrag,"Expected canDrag to be a function."),n("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),n("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){n("function"==typeof e.canDrop,"Expected canDrop to be a function."),n("function"==typeof e.hover,"Expected hover to be a function."),n("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,i){i&&Array.isArray(t)?t.forEach((function(t){return e(t,!1)})):n("string"==typeof t||"symbol"==typeof t,i?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},294662:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(538334);t.createDragDropManager=function(e,t,i){return new n.default(e,t,i)}},720369:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(556141)),n(i(294662))},556141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(t.HandlerRole||(t.HandlerRole={}))},354014:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(116434),o=i(4963),s=i(171939),r=i(442520),a=i(315033);t.default=function(e,t){switch(void 0===e&&(e=r.NONE),t.type){case n.HOVER:break;case o.ADD_SOURCE:case o.ADD_TARGET:case o.REMOVE_TARGET:case o.REMOVE_SOURCE:return r.NONE;case n.BEGIN_DRAG:case n.PUBLISH_DRAG_SOURCE:case n.END_DRAG:case n.DROP:default:return r.ALL}var i=t.payload,l=i.targetIds,d=void 0===l?[]:l,c=i.prevTargetIds,u=void 0===c?[]:c,h=a.xor(d,u);if(!(h.length>0||!s.areArraysEqual(d,u)))return r.NONE;var p=u[u.length-1],_=d[d.length-1];return p!==_&&(p&&h.push(p),_&&h.push(_)),h}},14095:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(116434),s=i(171939),r={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=r);var i=t.payload;switch(t.type){case o.INIT_COORDS:case o.BEGIN_DRAG:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case o.HOVER:return s.areCoordsEqual(e.clientOffset,i.clientOffset)?e:n({},e,{clientOffset:i.clientOffset});case o.END_DRAG:case o.DROP:return r;default:return e}}},345596:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(116434),s=i(4963),r=i(315033),a={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=a);var i=t.payload;switch(t.type){case o.BEGIN_DRAG:return n({},e,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case o.PUBLISH_DRAG_SOURCE:return n({},e,{isSourcePublic:!0});case o.HOVER:return n({},e,{targetIds:i.targetIds});case s.REMOVE_TARGET:return-1===e.targetIds.indexOf(i.targetId)?e:n({},e,{targetIds:r.without(e.targetIds,i.targetId)});case o.DROP:return n({},e,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case o.END_DRAG:return n({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},649610:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(14095),s=i(345596),r=i(378508),a=i(354014),l=i(938910),d=i(315033);t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:a.default(e.dirtyHandlerIds,{type:t.type,payload:n({},t.payload,{prevTargetIds:d.get(e,"dragOperation.targetIds",[])})}),dragOffset:o.default(e.dragOffset,t),refCount:r.default(e.refCount,t),dragOperation:s.default(e.dragOperation,t),stateId:l.default(e.stateId)}}},378508:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(4963);t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case n.ADD_SOURCE:case n.ADD_TARGET:return e+1;case n.REMOVE_SOURCE:case n.REMOVE_TARGET:return e-1;default:return e}}},938910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},952705:(e,t)=>{function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function n(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=i,t.subtract=n,t.getSourceClientOffset=function(e){var t=e.clientOffset,o=e.initialClientOffset,s=e.initialSourceClientOffset;return t&&o&&s?n(i(t,s),o):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,i=e.initialClientOffset;return t&&i?n(t,i):null}},442520:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(315033);t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,i){return e!==t.NONE&&(e===t.ALL||void 0===i||n.intersection(i,e).length>0)}},315033:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,i){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:i||null}),e)},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var i=new Map,n=function(e){return i.set(e,i.has(e)?i.get(e)+1:1)};e.forEach(n),t.forEach(n);var o=[];return i.forEach((function(e,t){1===e&&o.push(t)})),o},t.intersection=function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))}},171939:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)},t.areArraysEqual=function(e,i,n){if(void 0===n&&(n=t.strictEquality),e.length!==i.length)return!1;for(var o=0;o<e.length;++o)if(!n(e[o],i[o]))return!1;return!0}},547227:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.default=function(){return i++}},640809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}},120975:(e,t,i)=>{i.r(t),i.d(t,{__DO_NOT_USE__ActionTypes:()=>s,applyMiddleware:()=>g,bindActionCreators:()=>u,combineReducers:()=>d,compose:()=>_,createStore:()=>a});var n=i(98123),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function r(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function a(e,t,i){var o;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(a)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,d=t,c=[],u=c,h=!1;function p(){u===c&&(u=c.slice())}function _(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return d}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),u.push(e),function(){if(t){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var i=u.indexOf(e);u.splice(i,1),c=null}}}function m(e){if(!r(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,d=l(d,e)}finally{h=!1}for(var t=c=u,i=0;i<t.length;i++){(0,t[i])()}return e}return m({type:s.INIT}),(o={dispatch:m,subscribe:g,getState:_,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,m({type:s.REPLACE})}})[n.Z]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function i(){e.next&&e.next(_())}return i(),{unsubscribe:t(i)}}})[n.Z]=function(){return this},e},o}function l(e,t){var i=t&&t.type;return"Given "+(i&&'action "'+String(i)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function d(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(i[o]=e[o])}var r,a=Object.keys(i);try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:s.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===i(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(i)}catch(d){r=d}return function(e,t){if(void 0===e&&(e={}),r)throw r;for(var n=!1,o={},s=0;s<a.length;s++){var d=a[s],c=i[d],u=e[d],h=c(u,t);if(void 0===h){var p=l(d,t);throw new Error(p)}o[d]=h,n=n||h!==u}return(n=n||a.length!==Object.keys(e).length)?o:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var i={};for(var n in e){var o=e[n];"function"==typeof o&&(i[n]=c(o,t))}return i}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){var i=Object.keys(e);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(e)),t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i}function _(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function g(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},i,{dispatch:n=_.apply(void 0,s)(i.dispatch)})}}}},701305:e=>{var t=[],i=[];function n(e,t,i,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;var s=Object.prototype.toString,r=s.call(e);if(r!=s.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return!isNaN(e)&&!isNaN(t)&&e==Number(t);case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}for(var a=i.length;a--;)if(i[a]==e)return o[a]==t;i.push(e),o.push(t);var l=0;if("[object Array]"===r){if((l=e.length)!==t.length)return!1;for(;l--;)if(!n(e[l],t[l],i,o))return!1}else{if(e.constructor!==t.constructor)return!1;if(e.hasOwnProperty("valueOf")&&t.hasOwnProperty("valueOf"))return e.valueOf()==t.valueOf();var d=Object.keys(e);if(d.length!=Object.keys(t).length)return!1;for(var c=0;c<d.length;c++)if(!n(e[d[c]],t[d[c]],i,o))return!1}return i.pop(),o.pop(),!0}e.exports=function(e,o){var s=t.length?t.pop():[],r=i.length?i.pop():[],a=n(e,o,s,r);return s.length=0,r.length=0,t.push(s),i.push(r),a}},60139:e=>{function t(e){return function(){return e}}var i=function(){};i.thatReturns=t,i.thatReturnsFalse=t(!1),i.thatReturnsTrue=t(!0),i.thatReturnsNull=t(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},663620:(e,t,i)=>{var n=i(60139);e.exports=n},655340:e=>{e.exports="https://s.pinimg.com/webapp/birthday-4428bee8.png"},367139:e=>{e.exports="https://s.pinimg.com/webapp/cropper-fb5d0473.png"},844889:e=>{e.exports="https://s.pinimg.com/webapp/logo-7f5cc1ae.png"},825444:e=>{e.exports="https://s.pinimg.com/webapp/pin-a407120e.png"},121313:e=>{e.exports="https://s.pinimg.com/webapp/onboarding_multiPin-400ce8d9.png"},556213:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_01-3c400e5c.png"},530137:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_02-1b06bf7a.png"},226474:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_03-4756334c.png"},326880:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_04-c66ec495.png"},351267:e=>{e.exports="https://s.pinimg.com/webapp/examplePins_05-f1db39d2.png"},537347:e=>{!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function o(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function s(e,i){function n(){var e=s;o(e)&&e.a.parentNode&&i(e.g)}var s=e;t(e.b,n),t(e.c,n),o(e)}function r(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var a=null,l=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function h(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(t){}d=""!==e.style.font}return d}function p(e,t){return[e.style,e.weight,h()?e.stretch:"","100px",t].join(" ")}r.prototype.load=function(e,t){var o=this,r=e||"BESbswy",d=0,c=t||3e3,h=(new Date).getTime();return new Promise((function(e,t){if(u()&&!function(){if(null===l)if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var _=new Promise((function(e,t){!function i(){(new Date).getTime()-h>=c?t(Error(c+"ms timeout exceeded")):document.fonts.load(p(o,'"'+o.family+'"'),r).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),g=new Promise((function(e,t){d=setTimeout((function(){t(Error(c+"ms timeout exceeded"))}),c)}));Promise.race([g,_]).then((function(){clearTimeout(d),e(o)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=m&&-1!=f||-1!=m&&-1!=x||-1!=f&&-1!=x)&&((t=m!=f&&m!=x&&f!=x)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(m==b&&f==b&&x==b||m==y&&f==y&&x==y||m==v&&f==v&&x==v)),t=!t),t&&(P.parentNode&&P.parentNode.removeChild(P),clearTimeout(d),e(o))}var u=new i(r),_=new i(r),g=new i(r),m=-1,f=-1,x=-1,b=-1,y=-1,v=-1,P=document.createElement("div");P.dir="ltr",n(u,p(o,"sans-serif")),n(_,p(o,"serif")),n(g,p(o,"monospace")),P.appendChild(u.a),P.appendChild(_.a),P.appendChild(g.a),document.body.appendChild(P),b=u.a.offsetWidth,y=_.a.offsetWidth,v=g.a.offsetWidth,function e(){if((new Date).getTime()-h>=c)P.parentNode&&P.parentNode.removeChild(P),t(Error(c+"ms timeout exceeded"));else{var i=document.hidden;!0!==i&&void 0!==i||(m=u.a.offsetWidth,f=_.a.offsetWidth,x=g.a.offsetWidth,l()),d=setTimeout(e,50)}}(),s(u,(function(e){m=e,l()})),n(u,p(o,'"'+o.family+'",sans-serif')),s(_,(function(e){f=e,l()})),n(_,p(o,'"'+o.family+'",serif')),s(g,(function(e){x=e,l()})),n(g,p(o,'"'+o.family+'",monospace'))}))}))},e.exports=r}()},108679:(e,t,i)=>{var n=i(121296),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=r;var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(_){var o=p(i);o&&o!==_&&e(t,o,n)}var r=c(i);u&&(r=r.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<r.length;++m){var f=r[m];if(!(s[f]||n&&n[f]||g&&g[f]||a&&a[f])){var x=h(i,f);try{d(t,f,x)}catch(b){}}}}return t}},396103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case l:return e;default:return t}}case g:case _:case o:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=_,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===s},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===r},t.isSuspense=function(e){return m(e)===p}},121296:(e,t,i)=>{e.exports=i(396103)},288709:e=>{e.exports=/[\-0-9a-z\xB7\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0135\u0137\u0138\u013A\u013C\u013E\u0142\u0144\u0146\u0148\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BB\u01BD-\u01C3\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u02AF\u02B9-\u02C1\u02C6-\u02D1\u02EC\u02EE\u0300-\u033F\u0342\u0346-\u034E\u0350-\u036F\u0371\u0373\u0375\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF\u03F3\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u0483-\u0487\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0559\u0561-\u0586\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\u0610-\u061A\u0620-\u063F\u0641-\u0669\u066E-\u0674\u0679-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u0800-\u082D\u0840-\u085B\u0900-\u0957\u0960-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09E0-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A35\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A5C\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E32\u0E34-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB2\u0EB4-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F00\u0F0B\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F42\u0F44-\u0F47\u0F49-\u0F4C\u0F4E-\u0F51\u0F53-\u0F56\u0F58-\u0F5B\u0F5D-\u0F68\u0F6A-\u0F6C\u0F71\u0F72\u0F74\u0F7A-\u0F80\u0F82-\u0F84\u0F86-\u0F92\u0F94-\u0F97\u0F99-\u0F9C\u0F9E-\u0FA1\u0FA3-\u0FA6\u0FA8-\u0FAB\u0FAD-\u0FB8\u0FBA-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10D0-\u10FA\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BAA\u1BAE-\u1BB9\u1BC0-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF2\u1D00-\u1D2B\u1D2F\u1D3B\u1D4E\u1D6B-\u1D77\u1D79-\u1D9A\u1DC0-\u1DE6\u1DFC-\u1DFF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E99\u1E9C\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70\u1F72\u1F74\u1F76\u1F78\u1F7A\u1F7C\u1FB0\u1FB1\u1FB6\u1FC6\u1FD0-\u1FD2\u1FD6\u1FD7\u1FE0-\u1FE2\u1FE4-\u1FE7\u1FF6\u200C\u200D\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE-\u2CF1\u2D00-\u2D25\u2D30-\u2D65\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3041-\u3096\u3099\u309A\u309D\u309E\u30A1-\u30FE\u3105-\u312D\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D-\uA66F\uA67C\uA67D\uA67F\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA6A0-\uA6E5\uA6F0\uA6F1\uA717-\uA71F\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA788\uA78C\uA78E\uA791\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29\uFB1E\uFE20-\uFE26\uFE73]|\uD800[\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD802[\uDC40-\uDC55\uDD00-\uDD15\uDD20-\uDD39\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC80-\uDCBA]|\uD808[\uDC00-\uDF6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38]|\uD82C[\uDC00\uDC01]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]/},618552:(e,t,i)=>{var n=i(610852)(i(555639),"DataView");e.exports=n},853818:(e,t,i)=>{var n=i(610852)(i(555639),"Promise");e.exports=n},458525:(e,t,i)=>{var n=i(610852)(i(555639),"Set");e.exports=n},288668:(e,t,i)=>{var n=i(883369),o=i(90619),s=i(572385);function r(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}r.prototype.add=r.prototype.push=o,r.prototype.has=s,e.exports=r},562705:(e,t,i)=>{var n=i(555639).Symbol;e.exports=n},70577:(e,t,i)=>{var n=i(610852)(i(555639),"WeakMap");e.exports=n},896874:e=>{e.exports=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},477412:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}},234963:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=0,s=[];++i<n;){var r=e[i];t(r,i,e)&&(s[o++]=r)}return s}},862488:e=>{e.exports=function(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}},282908:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},286556:(e,t,i)=>{var n=i(789465),o=i(977813);e.exports=function(e,t,i){(void 0!==i&&!o(e[t],i)||void 0===i&&!(t in e))&&n(e,t,i)}},234865:(e,t,i)=>{var n=i(789465),o=i(977813),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var r=e[t];s.call(e,t)&&o(r,i)&&(void 0!==i||t in e)||n(e,t,i)}},744037:(e,t,i)=>{var n=i(698363),o=i(3674);e.exports=function(e,t){return e&&n(t,o(t),e)}},163886:(e,t,i)=>{var n=i(698363),o=i(481704);e.exports=function(e,t){return e&&n(t,o(t),e)}},789465:(e,t,i)=>{var n=i(538777);e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},285990:(e,t,i)=>{var n=i(646384),o=i(477412),s=i(234865),r=i(744037),a=i(163886),l=i(364626),d=i(200278),c=i(318805),u=i(201911),h=i(458234),p=i(946904),_=i(664160),g=i(43824),m=i(529148),f=i(738517),x=i(701469),b=i(644144),y=i(356688),v=i(513218),P=i(472928),w=i(3674),I=i(481704),A="[object Arguments]",E="[object Function]",C="[object Object]",S={};S[A]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S[C]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[E]=S["[object WeakMap]"]=!1,e.exports=function e(t,i,j,T,D,k){var z,O=1&i,R=2&i,L=4&i;if(j&&(z=D?j(t,T,D,k):j(t)),void 0!==z)return z;if(!v(t))return t;var M=x(t);if(M){if(z=g(t),!O)return d(t,z)}else{var B=_(t),N=B==E||"[object GeneratorFunction]"==B;if(b(t))return l(t,O);if(B==C||B==A||N&&!D){if(z=R||N?{}:f(t),!O)return R?u(t,a(z,t)):c(t,r(z,t))}else{if(!S[B])return D?t:{};z=m(t,B,O)}}k||(k=new n);var Z=k.get(t);if(Z)return Z;k.set(t,z),P(t)?t.forEach((function(n){z.add(e(n,i,j,n,t,k))})):y(t)&&t.forEach((function(n,o){z.set(o,e(n,i,j,o,t,k))}));var F=M?void 0:(L?R?p:h:R?I:w)(t);return o(F||t,(function(n,o){F&&(n=t[o=n]),s(z,o,e(n,i,j,o,t,k))})),z}},603118:(e,t,i)=>{var n=i(513218),o=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();e.exports=s},989881:(e,t,i)=>{var n=i(247816),o=i(899291)(n);e.exports=o},121078:(e,t,i)=>{var n=i(862488),o=i(137285);e.exports=function e(t,i,s,r,a){var l=-1,d=t.length;for(s||(s=o),a||(a=[]);++l<d;){var c=t[l];i>0&&s(c)?i>1?e(c,i-1,s,r,a):n(a,c):r||(a[a.length]=c)}return a}},228483:(e,t,i)=>{var n=i(225063)();e.exports=n},247816:(e,t,i)=>{var n=i(228483),o=i(3674);e.exports=function(e,t){return e&&n(e,t,o)}},297786:(e,t,i)=>{var n=i(671811),o=i(240327);e.exports=function(e,t){for(var i=0,s=(t=n(t,e)).length;null!=e&&i<s;)e=e[o(t[i++])];return i&&i==s?e:void 0}},868866:(e,t,i)=>{var n=i(862488),o=i(701469);e.exports=function(e,t,i){var s=t(e);return o(e)?s:n(s,i(e))}},644239:(e,t,i)=>{var n=i(562705),o=i(789607),s=i(902333),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?o(e):s(e)}},200013:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},690939:(e,t,i)=>{var n=i(902492),o=i(637005);e.exports=function e(t,i,s,r,a){return t===i||(null==t||null==i||!o(t)&&!o(i)?t!=t&&i!=i:n(t,i,s,r,e,a))}},902492:(e,t,i)=>{var n=i(646384),o=i(967114),s=i(518351),r=i(916096),a=i(664160),l=i(701469),d=i(644144),c=i(936719),u="[object Arguments]",h="[object Array]",p="[object Object]",_=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,g,m,f){var x=l(e),b=l(t),y=x?h:a(e),v=b?h:a(t),P=(y=y==u?p:y)==p,w=(v=v==u?p:v)==p,I=y==v;if(I&&d(e)){if(!d(t))return!1;x=!0,P=!1}if(I&&!P)return f||(f=new n),x||c(e)?o(e,t,i,g,m,f):s(e,t,y,i,g,m,f);if(!(1&i)){var A=P&&_.call(e,"__wrapped__"),E=w&&_.call(t,"__wrapped__");if(A||E){var C=A?e.value():e,S=E?t.value():t;return f||(f=new n),m(C,S,i,g,f)}}return!!I&&(f||(f=new n),r(e,t,i,g,m,f))}},225588:(e,t,i)=>{var n=i(664160),o=i(637005);e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},702958:(e,t,i)=>{var n=i(646384),o=i(690939);e.exports=function(e,t,i,s){var r=i.length,a=r,l=!s;if(null==e)return!a;for(e=Object(e);r--;){var d=i[r];if(l&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++r<a;){var c=(d=i[r])[0],u=e[c],h=d[1];if(l&&d[2]){if(void 0===u&&!(c in e))return!1}else{var p=new n;if(s)var _=s(u,h,c,e,t,p);if(!(void 0===_?o(h,u,3,s,p):_))return!1}}return!0}},829221:(e,t,i)=>{var n=i(664160),o=i(637005);e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},267206:(e,t,i)=>{var n=i(191573),o=i(716432),s=i(406557),r=i(701469),a=i(139601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?r(e)?o(e[0],e[1]):n(e):a(e)}},400280:(e,t,i)=>{var n=i(225726),o=i(86916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var i in Object(e))s.call(e,i)&&"constructor"!=i&&t.push(i);return t}},710313:(e,t,i)=>{var n=i(513218),o=i(225726),s=i(133498),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=o(e),i=[];for(var a in e)("constructor"!=a||!t&&r.call(e,a))&&i.push(a);return i}},269199:(e,t,i)=>{var n=i(989881),o=i(498612);e.exports=function(e,t){var i=-1,s=o(e)?Array(e.length):[];return n(e,(function(e,n,o){s[++i]=t(e,n,o)})),s}},191573:(e,t,i)=>{var n=i(702958),o=i(301499),s=i(542634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(i){return i===e||n(i,e,t)}}},716432:(e,t,i)=>{var n=i(690939),o=i(227361),s=i(379095),r=i(115403),a=i(689162),l=i(542634),d=i(240327);e.exports=function(e,t){return r(e)&&a(t)?l(d(e),t):function(i){var r=o(i,e);return void 0===r&&r===t?s(i,e):n(t,r,3)}}},642980:(e,t,i)=>{var n=i(646384),o=i(286556),s=i(228483),r=i(559783),a=i(513218),l=i(481704),d=i(636390);e.exports=function e(t,i,c,u,h){t!==i&&s(i,(function(s,l){if(h||(h=new n),a(s))r(t,i,l,c,e,u,h);else{var p=u?u(d(t,l),s,l+"",t,i,h):void 0;void 0===p&&(p=s),o(t,l,p)}}),l)}},559783:(e,t,i)=>{var n=i(286556),o=i(364626),s=i(477133),r=i(200278),a=i(738517),l=i(135694),d=i(701469),c=i(229246),u=i(644144),h=i(623560),p=i(513218),_=i(968630),g=i(936719),m=i(636390),f=i(959881);e.exports=function(e,t,i,x,b,y,v){var P=m(e,i),w=m(t,i),I=v.get(w);if(I)n(e,i,I);else{var A=y?y(P,w,i+"",e,t,v):void 0,E=void 0===A;if(E){var C=d(w),S=!C&&u(w),j=!C&&!S&&g(w);A=w,C||S||j?d(P)?A=P:c(P)?A=r(P):S?(E=!1,A=o(w,!0)):j?(E=!1,A=s(w,!0)):A=[]:_(w)||l(w)?(A=P,l(P)?A=f(P):p(P)&&!h(P)||(A=a(w))):E=!1}E&&(v.set(w,A),b(A,w,x,y,v),v.delete(w)),n(e,i,A)}}},882689:(e,t,i)=>{var n=i(829932),o=i(297786),s=i(267206),r=i(269199),a=i(571131),l=i(307518),d=i(285022),c=i(406557),u=i(701469);e.exports=function(e,t,i){t=t.length?n(t,(function(e){return u(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=n(t,l(s));var p=r(e,(function(e,i,o){return{criteria:n(t,(function(t){return t(e)})),index:++h,value:e}}));return a(p,(function(e,t){return d(e,t,i)}))}},840371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},379152:(e,t,i)=>{var n=i(297786);e.exports=function(e){return function(t){return n(t,e)}}},105976:(e,t,i)=>{var n=i(406557),o=i(545357),s=i(430061);e.exports=function(e,t){return s(o(e,t,n),e+"")}},356560:(e,t,i)=>{var n=i(575703),o=i(538777),s=i(406557),r=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=r},571131:e=>{e.exports=function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}},727561:(e,t,i)=>{var n=i(567990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},274757:e=>{e.exports=function(e,t){return e.has(t)}},671811:(e,t,i)=>{var n=i(701469),o=i(115403),s=i(555514),r=i(479833);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:s(r(e))}},274318:(e,t,i)=>{var n=i(611149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},364626:(e,t,i)=>{e=i.nmd(e);var n=i(555639),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,r=s&&s.exports===o?n.Buffer:void 0,a=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n}},257157:(e,t,i)=>{var n=i(274318);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}},593147:e=>{var t=/\w*$/;e.exports=function(e){var i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}},540419:(e,t,i)=>{var n=i(562705),o=n?n.prototype:void 0,s=o?o.valueOf:void 0;e.exports=function(e){return s?Object(s.call(e)):{}}},477133:(e,t,i)=>{var n=i(274318);e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}},626393:(e,t,i)=>{var n=i(733448);e.exports=function(e,t){if(e!==t){var i=void 0!==e,o=null===e,s=e==e,r=n(e),a=void 0!==t,l=null===t,d=t==t,c=n(t);if(!l&&!c&&!r&&e>t||r&&a&&d&&!l&&!c||o&&a&&d||!i&&d||!s)return 1;if(!o&&!r&&!c&&e<t||c&&i&&s&&!o&&!r||l&&i&&s||!a&&s||!d)return-1}return 0}},285022:(e,t,i)=>{var n=i(626393);e.exports=function(e,t,i){for(var o=-1,s=e.criteria,r=t.criteria,a=s.length,l=i.length;++o<a;){var d=n(s[o],r[o]);if(d)return o>=l?d:d*("desc"==i[o]?-1:1)}return e.index-t.index}},200278:e=>{e.exports=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}},698363:(e,t,i)=>{var n=i(234865),o=i(789465);e.exports=function(e,t,i,s){var r=!i;i||(i={});for(var a=-1,l=t.length;++a<l;){var d=t[a],c=s?s(i[d],e[d],d,i,e):void 0;void 0===c&&(c=e[d]),r?o(i,d,c):n(i,d,c)}return i}},318805:(e,t,i)=>{var n=i(698363),o=i(799551);e.exports=function(e,t){return n(e,o(e),t)}},201911:(e,t,i)=>{var n=i(698363),o=i(151442);e.exports=function(e,t){return n(e,o(e),t)}},321463:(e,t,i)=>{var n=i(105976),o=i(816612);e.exports=function(e){return n((function(t,i){var n=-1,s=i.length,r=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(r=e.length>3&&"function"==typeof r?(s--,r):void 0,a&&o(i[0],i[1],a)&&(r=s<3?void 0:r,s=1),t=Object(t);++n<s;){var l=i[n];l&&e(t,l,n,r)}return t}))}},899291:(e,t,i)=>{var n=i(498612);e.exports=function(e,t){return function(i,o){if(null==i)return i;if(!n(i))return e(i,o);for(var s=i.length,r=t?s:-1,a=Object(i);(t?r--:++r<s)&&!1!==o(a[r],r,a););return i}}},225063:e=>{e.exports=function(e){return function(t,i,n){for(var o=-1,s=Object(t),r=n(t),a=r.length;a--;){var l=r[e?a:++o];if(!1===i(s[l],l,s))break}return t}}},538777:(e,t,i)=>{var n=i(610852),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},967114:(e,t,i)=>{var n=i(288668),o=i(282908),s=i(274757);e.exports=function(e,t,i,r,a,l){var d=1&i,c=e.length,u=t.length;if(c!=u&&!(d&&u>c))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var _=-1,g=!0,m=2&i?new n:void 0;for(l.set(e,t),l.set(t,e);++_<c;){var f=e[_],x=t[_];if(r)var b=d?r(x,f,_,t,e,l):r(f,x,_,e,t,l);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!o(t,(function(e,t){if(!s(m,t)&&(f===e||a(f,e,i,r,l)))return m.push(t)}))){g=!1;break}}else if(f!==x&&!a(f,x,i,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},518351:(e,t,i)=>{var n=i(562705),o=i(611149),s=i(977813),r=i(967114),a=i(668776),l=i(321814),d=n?n.prototype:void 0,c=d?d.valueOf:void 0;e.exports=function(e,t,i,n,d,u,h){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a;case"[object Set]":var _=1&n;if(p||(p=l),e.size!=t.size&&!_)return!1;var g=h.get(e);if(g)return g==t;n|=2,h.set(e,t);var m=r(p(e),p(t),n,d,u,h);return h.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},916096:(e,t,i)=>{var n=i(458234),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,s,r,a){var l=1&i,d=n(e),c=d.length;if(c!=n(t).length&&!l)return!1;for(var u=c;u--;){var h=d[u];if(!(l?h in t:o.call(t,h)))return!1}var p=a.get(e),_=a.get(t);if(p&&_)return p==t&&_==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++u<c;){var f=e[h=d[u]],x=t[h];if(s)var b=l?s(x,f,h,t,e,a):s(f,x,h,e,t,a);if(!(void 0===b?f===x||r(f,x,i,s,a):b)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(g=!1)}return a.delete(e),a.delete(t),g}},431957:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},458234:(e,t,i)=>{var n=i(868866),o=i(799551),s=i(3674);e.exports=function(e){return n(e,s,o)}},946904:(e,t,i)=>{var n=i(868866),o=i(151442),s=i(481704);e.exports=function(e){return n(e,s,o)}},301499:(e,t,i)=>{var n=i(689162),o=i(3674);e.exports=function(e){for(var t=o(e),i=t.length;i--;){var s=t[i],r=e[s];t[i]=[s,r,n(r)]}return t}},385924:(e,t,i)=>{var n=i(205569)(Object.getPrototypeOf,Object);e.exports=n},789607:(e,t,i)=>{var n=i(562705),o=Object.prototype,s=o.hasOwnProperty,r=o.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),i=e[a];try{e[a]=void 0;var n=!0}catch(l){}var o=r.call(e);return n&&(t?e[a]=i:delete e[a]),o}},799551:(e,t,i)=>{var n=i(234963),o=i(770479),s=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(e){return null==e?[]:(e=Object(e),n(r(e),(function(t){return s.call(e,t)})))}:o;e.exports=a},151442:(e,t,i)=>{var n=i(862488),o=i(385924),s=i(799551),r=i(770479),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,s(e)),e=o(e);return t}:r;e.exports=a},664160:(e,t,i)=>{var n=i(618552),o=i(357071),s=i(853818),r=i(458525),a=i(70577),l=i(644239),d=i(680346),c="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",_="[object DataView]",g=d(n),m=d(o),f=d(s),x=d(r),b=d(a),y=l;(n&&y(new n(new ArrayBuffer(1)))!=_||o&&y(new o)!=c||s&&y(s.resolve())!=u||r&&y(new r)!=h||a&&y(new a)!=p)&&(y=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,n=i?d(i):"";if(n)switch(n){case g:return _;case m:return c;case f:return u;case x:return h;case b:return p}return t}),e.exports=y},900222:(e,t,i)=>{var n=i(671811),o=i(135694),s=i(701469),r=i(565776),a=i(541780),l=i(240327);e.exports=function(e,t,i){for(var d=-1,c=(t=n(t,e)).length,u=!1;++d<c;){var h=l(t[d]);if(!(u=null!=e&&i(e,h)))break;e=e[h]}return u||++d!=c?u:!!(c=null==e?0:e.length)&&a(c)&&r(h,c)&&(s(e)||o(e))}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var i=e.length,n=new e.constructor(i);return i&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},529148:(e,t,i)=>{var n=i(274318),o=i(257157),s=i(593147),r=i(540419),a=i(477133);e.exports=function(e,t,i){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,i);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return s(e);case"[object Symbol]":return r(e)}}},738517:(e,t,i)=>{var n=i(603118),o=i(385924),s=i(225726);e.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(o(e))}},137285:(e,t,i)=>{var n=i(562705),o=i(135694),s=i(701469),r=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(r&&e&&e[r])}},816612:(e,t,i)=>{var n=i(977813),o=i(498612),s=i(565776),r=i(513218);e.exports=function(e,t,i){if(!r(i))return!1;var a=typeof t;return!!("number"==a?o(i)&&s(t,i.length):"string"==a&&t in i)&&n(i[t],e)}},115403:(e,t,i)=>{var n=i(701469),o=i(733448),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!o(e))||(r.test(e)||!s.test(e)||null!=t&&e in Object(t))}},689162:(e,t,i)=>{var n=i(513218);e.exports=function(e){return e==e&&!n(e)}},668776:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}},542634:e=>{e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},624523:(e,t,i)=>{var n=i(288306);e.exports=function(e){var t=n(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},86916:(e,t,i)=>{var n=i(205569)(Object.keys,Object);e.exports=n},133498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},902333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},545357:(e,t,i)=>{var n=i(896874),o=Math.max;e.exports=function(e,t,i){return t=o(void 0===t?e.length-1:t,0),function(){for(var s=arguments,r=-1,a=o(s.length-t,0),l=Array(a);++r<a;)l[r]=s[t+r];r=-1;for(var d=Array(t+1);++r<t;)d[r]=s[r];return d[t]=i(l),n(e,this,d)}}},555639:(e,t,i)=>{var n=i(431957),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();e.exports=s},636390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},572385:e=>{e.exports=function(e){return this.__data__.has(e)}},321814:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},430061:(e,t,i)=>{var n=i(356560),o=i(521275)(n);e.exports=o},521275:e=>{var t=Date.now;e.exports=function(e){var i=0,n=0;return function(){var o=t(),s=16-(o-n);if(n=o,s>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},555514:(e,t,i)=>{var n=i(624523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,r=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,i,n,o){t.push(n?o.replace(s,"$1"):i||e)})),t}));e.exports=r},240327:(e,t,i)=>{var n=i(733448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},567990:e=>{var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},150361:(e,t,i)=>{var n=i(285990);e.exports=function(e){return n(e,5)}},575703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,i)=>{var n=i(513218),o=i(707771),s=i(14841),r=Math.max,a=Math.min;e.exports=function(e,t,i){var l,d,c,u,h,p,_=0,g=!1,m=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var i=l,n=d;return l=d=void 0,_=t,u=e.apply(n,i)}function b(e){var i=e-p;return void 0===p||i>=t||i<0||m&&e-_>=c}function y(){var e=o();if(b(e))return v(e);h=setTimeout(y,function(e){var i=t-(e-p);return m?a(i,c-(e-_)):i}(e))}function v(e){return h=void 0,f&&l?x(e):(l=d=void 0,u)}function P(){var e=o(),i=b(e);if(l=arguments,d=this,p=e,i){if(void 0===h)return function(e){return _=e,h=setTimeout(y,t),g?x(e):u}(p);if(m)return clearTimeout(h),h=setTimeout(y,t),x(p)}return void 0===h&&(h=setTimeout(y,t)),u}return t=s(t)||0,n(i)&&(g=!!i.leading,c=(m="maxWait"in i)?r(s(i.maxWait)||0,t):c,f="trailing"in i?!!i.trailing:f),P.cancel=function(){void 0!==h&&clearTimeout(h),_=0,l=p=d=h=void 0},P.flush=function(){return void 0===h?u:v(o())},P}},227361:(e,t,i)=>{var n=i(297786);e.exports=function(e,t,i){var o=null==e?void 0:n(e,t);return void 0===o?i:o}},379095:(e,t,i)=>{var n=i(200013),o=i(900222);e.exports=function(e,t){return null!=e&&o(e,t,n)}},406557:e=>{e.exports=function(e){return e}},701469:e=>{var t=Array.isArray;e.exports=t},229246:(e,t,i)=>{var n=i(498612),o=i(637005);e.exports=function(e){return o(e)&&n(e)}},618446:(e,t,i)=>{var n=i(690939);e.exports=function(e,t){return n(e,t)}},356688:(e,t,i)=>{var n=i(225588),o=i(307518),s=i(531167),r=s&&s.isMap,a=r?o(r):n;e.exports=a},637005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},968630:(e,t,i)=>{var n=i(644239),o=i(385924),s=i(637005),r=Function.prototype,a=Object.prototype,l=r.toString,d=a.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var i=d.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==c}},472928:(e,t,i)=>{var n=i(829221),o=i(307518),s=i(531167),r=s&&s.isSet,a=r?o(r):n;e.exports=a},3674:(e,t,i)=>{var n=i(14636),o=i(400280),s=i(498612);e.exports=function(e){return s(e)?n(e):o(e)}},481704:(e,t,i)=>{var n=i(14636),o=i(710313),s=i(498612);e.exports=function(e){return s(e)?n(e,!0):o(e)}},288306:(e,t,i)=>{var n=i(883369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],s=i.cache;if(s.has(o))return s.get(o);var r=e.apply(this,n);return i.cache=s.set(o,r)||s,r};return i.cache=new(o.Cache||n),i}o.Cache=n,e.exports=o},682492:(e,t,i)=>{var n=i(642980),o=i(321463)((function(e,t,i){n(e,t,i)}));e.exports=o},707771:(e,t,i)=>{var n=i(555639);e.exports=function(){return n.Date.now()}},139601:(e,t,i)=>{var n=i(840371),o=i(379152),s=i(115403),r=i(240327);e.exports=function(e){return s(e)?n(r(e)):o(e)}},189734:(e,t,i)=>{var n=i(121078),o=i(882689),s=i(105976),r=i(816612),a=s((function(e,t){if(null==e)return[];var i=t.length;return i>1&&r(e,t[0],t[1])?t=[]:i>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])}));e.exports=a},770479:e=>{e.exports=function(){return[]}},14841:(e,t,i)=>{var n=i(727561),o=i(513218),s=i(733448),r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=a.test(e);return i||l.test(e)?d(e.slice(2),i?2:8):r.test(e)?NaN:+e}},959881:(e,t,i)=>{var n=i(698363),o=i(481704);e.exports=function(e){return n(e,o(e))}},16243:e=>{if(!t)var t={map:function(e,t){var i={};return t?e.map((function(e,n){return i.index=n,t.call(i,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var i={};return e.reduce(t?function(e,n,o){return i.index=o,e+t.call(i,n)}:function(e,t){return e+t},0)},max:function(e,i){return Math.max.apply(null,i?t.map(e,i):e)}};var i=function(){var e=5,i=8-e;function n(t,i,n){return(t<<2*e)+(i<<e)+n}function o(e){var t=[],i=!1;function n(){t.sort(e),i=!0}return{push:function(e){t.push(e),i=!1},peek:function(e){return i||n(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return i||n(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return i||n(),t}}}function s(e,t,i,n,o,s,r){var a=this;a.r1=e,a.r2=t,a.g1=i,a.g2=n,a.b1=o,a.b2=s,a.histo=r}function r(){this.vboxes=new o((function(e,i){return t.naturalOrder(e.vbox.count()*e.vbox.volume(),i.vbox.count()*i.vbox.volume())}))}function a(e,i){if(i.count()){var o=i.r2-i.r1+1,s=i.g2-i.g1+1,r=i.b2-i.b1+1,a=t.max([o,s,r]);if(1==i.count())return[i.copy()];var l,d,c,u,h=0,p=[],_=[];if(a==o)for(l=i.r1;l<=i.r2;l++){for(u=0,d=i.g1;d<=i.g2;d++)for(c=i.b1;c<=i.b2;c++)u+=e[n(l,d,c)]||0;h+=u,p[l]=h}else if(a==s)for(l=i.g1;l<=i.g2;l++){for(u=0,d=i.r1;d<=i.r2;d++)for(c=i.b1;c<=i.b2;c++)u+=e[n(d,l,c)]||0;h+=u,p[l]=h}else for(l=i.b1;l<=i.b2;l++){for(u=0,d=i.r1;d<=i.r2;d++)for(c=i.g1;c<=i.g2;c++)u+=e[n(d,c,l)]||0;h+=u,p[l]=h}return p.forEach((function(e,t){_[t]=h-e})),g(a==o?"r":a==s?"g":"b")}function g(e){var t,n,o,s,r,a=e+"1",d=e+"2",c=0;for(l=i[a];l<=i[d];l++)if(p[l]>h/2){for(o=i.copy(),s=i.copy(),r=(t=l-i[a])<=(n=i[d]-l)?Math.min(i[d]-1,~~(l+n/2)):Math.max(i[a],~~(l-1-t/2));!p[r];)r++;for(c=_[r];!c&&p[r-1];)c=_[--r];return o[d]=r,s[a]=o[d]+1,[o,s]}}}return s.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(e){var t=this,i=t.histo;if(!t._count_set||e){var o,s,r,a=0;for(o=t.r1;o<=t.r2;o++)for(s=t.g1;s<=t.g2;s++)for(r=t.b1;r<=t.b2;r++)a+=i[n(o,s,r)]||0;t._count=a,t._count_set=!0}return t._count},copy:function(){var e=this;return new s(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var i=this,o=i.histo;if(!i._avg||t){var s,r,a,l,d=0,c=1<<8-e,u=0,h=0,p=0;for(r=i.r1;r<=i.r2;r++)for(a=i.g1;a<=i.g2;a++)for(l=i.b1;l<=i.b2;l++)d+=s=o[n(r,a,l)]||0,u+=s*(r+.5)*c,h+=s*(a+.5)*c,p+=s*(l+.5)*c;i._avg=d?[~~(u/d),~~(h/d),~~(p/d)]:[~~(c*(i.r1+i.r2+1)/2),~~(c*(i.g1+i.g2+1)/2),~~(c*(i.b1+i.b2+1)/2)]}return i._avg},contains:function(e){var t=this,n=e[0]>>i;return gval=e[1]>>i,bval=e[2]>>i,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},r.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,i=0;i<t.size();i++)if(t.peek(i).vbox.contains(e))return t.peek(i).color;return this.nearest(e)},nearest:function(e){for(var t,i,n,o=this.vboxes,s=0;s<o.size();s++)((i=Math.sqrt(Math.pow(e[0]-o.peek(s).color[0],2)+Math.pow(e[1]-o.peek(s).color[1],2)+Math.pow(e[2]-o.peek(s).color[2],2)))<t||void 0===t)&&(t=i,n=o.peek(s).color);return n},forcebw:function(){var e=this.vboxes;e.sort((function(e,i){return t.naturalOrder(t.sum(e.color),t.sum(i.color))}));var i=e[0].color;i[0]<5&&i[1]<5&&i[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(l,d){if(!l.length||d<2||d>256)return!1;var c=function(t){var o,s,r,a,l=new Array(1<<3*e);return t.forEach((function(e){s=e[0]>>i,r=e[1]>>i,a=e[2]>>i,o=n(s,r,a),l[o]=(l[o]||0)+1})),l}(l);c.forEach((function(){0}));var u=function(e,t){var n,o,r,a=1e6,l=0,d=1e6,c=0,u=1e6,h=0;return e.forEach((function(e){n=e[0]>>i,o=e[1]>>i,r=e[2]>>i,n<a?a=n:n>l&&(l=n),o<d?d=o:o>c&&(c=o),r<u?u=r:r>h&&(h=r)})),new s(a,l,d,c,u,h,t)}(l,c),h=new o((function(e,i){return t.naturalOrder(e.count(),i.count())}));function p(e,t){for(var i,n=1,o=0;o<1e3;)if((i=e.pop()).count()){var s=a(c,i),r=s[0],l=s[1];if(!r)return;if(e.push(r),l&&(e.push(l),n++),n>=t)return;if(o++>1e3)return}else e.push(i),o++}h.push(u),p(h,.75*d);for(var _=new o((function(e,i){return t.naturalOrder(e.count()*e.volume(),i.count()*i.volume())}));h.size();)_.push(h.pop());p(_,d-_.size());for(var g=new r;_.size();)g.push(_.pop());return g}}}();e.exports=i.quantize},860682:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(946580);t.isFirefox=n.memoize((function(){return/firefox/i.test(navigator.userAgent)})),t.isSafari=n.memoize((function(){return Boolean(window.safari)}))},527594:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(946580),o=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,i=this.entered.length;return this.entered=n.union(this.entered.filter((function(i){return t.isNodeInDocument(i)&&(!i.contains||i.contains(e))})),[e]),0===i&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=n.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=o},613087:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(527594),s=i(860682),r=i(796538),a=i(36076),l=i(278201),d=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return r.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;t.isNodeInDocument(e)||t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var i=t.dragStartSourceIds;t.dragStartSourceIds=null;var n=r.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:n});var o=e.dataTransfer,s=a.matchNativeItemType(o);if(t.monitor.isDragging()){if(o&&"function"==typeof o.setDragImage){var l=t.monitor.getSourceId(),d=t.sourceNodes.get(l),c=t.sourcePreviewNodes.get(l)||d;if(c){var u=t.getCurrentSourcePreviewNodeOptions(),h={anchorX:u.anchorX,anchorY:u.anchorY},p={offsetX:u.offsetX,offsetY:u.offsetY},_=r.getDragPreviewOffset(d,c,n,h,p);o.setDragImage(c,_.x,_.y)}}try{o.setData("application/json",{})}catch(g){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout((function(){return t.actions.publishDragSource()}),0)}else if(s)t.beginDragNativeItem(s);else{if(o&&!o.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],t.enterLeaveCounter.enter(e.target)&&!t.monitor.isDragging()){var i=e.dataTransfer,n=a.matchNativeItemType(i);n&&t.beginDragNativeItem(n)}},this.handleTopDragEnter=function(e){var i=t.dragEnterTargetIds;(t.dragEnterTargetIds=[],t.monitor.isDragging())&&(t.altKeyPressed=e.altKey,s.isFirefox()||t.actions.hover(i,{clientOffset:r.getEventClientOffset(e)}),i.some((function(e){return t.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var i=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));t.altKeyPressed=e.altKey,t.actions.hover(i||[],{clientOffset:r.getEventClientOffset(e)}),(i||[]).some((function(e){return t.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var i=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(i,{clientOffset:r.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new o.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,i){var n=this;return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),function(){n.sourcePreviewNodes.delete(e),n.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,i){var n=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);var o=function(t){return n.handleDragStart(t,e)},s=function(e){return n.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",o),t.addEventListener("selectstart",s),function(){n.sourceNodes.delete(e),n.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",s),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var i=this,n=function(t){return i.handleDragEnter(t,e)},o=function(t){return i.handleDragOver(t,e)},s=function(t){return i.handleDrop(t,e)};return t.addEventListener("dragenter",n),t.addEventListener("dragover",o),t.addEventListener("drop",s),function(){t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o),t.removeEventListener("drop",s)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return n({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return n({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(l).some((function(t){return l[t]===e}))},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=a.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=d},328775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=e.length,n=[],o=0;o<i;o++)n.push(o);n.sort((function(t,i){return e[t]<e[i]?-1:1}));var s,r,a=[],l=[],d=[];for(o=0;o<i-1;o++)s=e[o+1]-e[o],r=t[o+1]-t[o],l.push(s),a.push(r),d.push(r/s);var c=[d[0]];for(o=0;o<l.length-1;o++){var u=d[o],h=d[o+1];if(u*h<=0)c.push(0);else{s=l[o];var p=l[o+1],_=s+p;c.push(3*_/((_+p)/u+(_+s)/h))}}c.push(d[d.length-1]);var g,m=[],f=[];for(o=0;o<c.length-1;o++){g=d[o];var x=c[o],b=1/l[o];_=x+c[o+1]-g-g;m.push((g-x-_)*b),f.push(_*b*b)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=m,this.c3s=f}return e.prototype.interpolate=function(e){var t=this,i=t.xs,n=t.ys,o=t.c1s,s=t.c2s,r=t.c3s,a=i.length-1;if(e===i[a])return n[a];for(var l,d=0,c=r.length-1;d<=c;){var u=i[l=Math.floor(.5*(d+c))];if(u<e)d=l+1;else{if(!(u>e))return n[l];c=l-1}}var h=e-i[a=Math.max(0,c)],p=h*h;return n[a]+o[a]*h+s[a]*p+r[a]*h*p},e}();t.default=i},50013:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach((function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})}))}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,i={};e&&Object.keys(this.config.exposeProperties).forEach((function(n){i[n]={value:t.config.exposeProperties[n](e,t.config.matchesTypes)}})),Object.defineProperties(this.item,i)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=i},345349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,i){var n=t.reduce((function(t,i){return t||e.getData(i)}),"");return null!=n?n:i}},36076:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(226851),o=i(50013);t.createNativeDragSource=function(e){return new o.NativeDragSource(n.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(n.nativeTypesConfig).filter((function(e){return n.nativeTypesConfig[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}},226851:(e,t,i)=>{var n;Object.defineProperty(t,"__esModule",{value:!0});var o=i(278201),s=i(345349);t.nativeTypesConfig=((n={})[o.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},n[o.URL]={exposeProperties:{urls:function(e,t){return s.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},n[o.TEXT]={exposeProperties:{text:function(e,t){return s.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},n)},278201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},796538:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(860682),o=i(328775),s=1;function r(e){var t=e.nodeType===s?e:e.parentElement;if(!t)return null;var i=t.getBoundingClientRect(),n=i.top;return{x:i.left,y:n}}t.getNodeClientOffset=r,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,i,s,a){var l,d,c="IMG"===(l=t).nodeName&&(n.isFirefox()||!document.documentElement.contains(l)),u=r(c?e:t),h={x:i.x-u.x,y:i.y-u.y},p=e.offsetWidth,_=e.offsetHeight,g=s.anchorX,m=s.anchorY,f=function(e,t,i,o){var s=e?t.width:i,r=e?t.height:o;return n.isSafari()&&e&&(r/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:r}}(c,t,p,_),x=f.dragPreviewWidth,b=f.dragPreviewHeight,y=a.offsetX,v=a.offsetY,P=0===v||v;return{x:0===y||y?y:new o.default([0,.5,1],[h.x,h.x/p*x,h.x+x-p]).interpolate(g),y:P?v:(d=new o.default([0,.5,1],[h.y,h.y/_*b,h.y+b-_]).interpolate(m),n.isSafari()&&c&&(d+=(window.devicePixelRatio-1)*b),d)}}},19402:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i||((i=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i}},395141:(e,t,i)=>{var n=i(613087);i(19402).default;var o=i(278201);t.NativeTypes=o,t.ZP=function(e){return new n.default(e)}},946580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter((function(e){return e!==t}))},t.union=function(e,t){var i=new Set,n=function(e){return i.add(e)};e.forEach(n),t.forEach(n);var o=[];return i.forEach((function(e){return o.push(e)})),o}},925237:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},r=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0});var a=i(667294),l=i(720369),d=i(496395),c=i(489745),u=i(114774),h=i(215956);function p(e,t,i){return{dragDropManager:l.createDragDropManager(e,t,i)}}t.context=a.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=p,t.DragDropContextProvider=function(e){var i=e.children,n=r(e,["children"]),o="manager"in n?{dragDropManager:n.manager}:p(n.backend,n.context,n.debugMode);return a.createElement(t.Provider,{value:o},i)},t.DragDropContext=function(e,i,n){d.default("DragDropContext","backend",e);var r=p(e,i,n);return function(e){var i=e,n=i.displayName||i.name||"Component",l=function(l){function d(){var e=null!==l&&l.apply(this,arguments)||this;return e.ref=a.createRef(),e.getManager=function(){return r.dragDropManager},e}return o(d,l),d.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},d.prototype.render=function(){return a.createElement(t.Provider,{value:r},a.createElement(i,s({},this.props,{ref:c.isRefable(i)?this.ref:null})))},d.DecoratedComponent=e,d.displayName="DragDropContext("+n+")",d}(a.Component);return h(l,e)}}},328202:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),a=i(496395),l=i(925237),d=i(489745),c=i(353924),u=i(215956),h=i(114774),p=i(596774);t.default=function(e,t){return void 0===t&&(t={}),a.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(c.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(i){var n=i,a=t.arePropsEqual,c=void 0===a?p:a,_=n.displayName||n.name||"Component",g=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=r.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();p(t,e.state)||e.setState(t)}},e}return o(a,t),a.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},a.prototype.shouldComponentUpdate=function(e,t){return!c(e,this.props)||!p(t,this.state)},a.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},a.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},a.prototype.render=function(){var e=this;return r.createElement(l.Consumer,null,(function(t){var i=t.dragDropManager;return void 0===i?null:(e.receiveDragDropManager(i),e.isCurrentlyMounted?r.createElement(n,s({},e.props,e.state,{ref:d.isRefable(n)?e.ref:null})):null)}))},a.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",_,_);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},a.prototype.getCurrentState=function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)},a.displayName="DragLayer("+_+")",a.DecoratedComponent=i,a}(r.Component);return u(g,i)}}},344319:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294).memo((function(e){var t=e.connect,i=e.src;if("undefined"!=typeof Image){var n=new Image;n.src=i,n.onload=function(){return t(n)}}return null}));n.displayName="DragPreviewImage",t.default=n},450793:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(496395),o=i(42742),s=i(910513),r=i(626706),a=i(391081),l=i(147277),d=i(270942),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),n.default("DragSource","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(d.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var _=r.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),function(e){return o.default({containerDisplayName:"DragSource",createHandler:_,registerHandler:s.default,createConnector:function(e){return new l.default(e)},createMonitor:function(e){return new a.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},391081:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(114774),o=!1,s=!1,r=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){n(!o,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{o=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;n(!s,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return s=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{s=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=r},206059:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(496395),o=i(42742),s=i(548537),r=i(329492),a=i(270942),l=i(596177),d=i(750986),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),n.default("DropTarget","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(a.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var _=r.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),function(e){return o.default({containerDisplayName:"DropTarget",createHandler:_,registerHandler:s.default,createMonitor:function(e){return new l.default(e)},createConnector:function(e){return new d.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},596177:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(114774),o=!1,s=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;n(!o,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return o=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{o=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=s},147277:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(65435),o=i(965525),s=i(596774),r=function(){function e(e){var t=this;this.backend=e,this.hooks=n.default({dragSource:function(e,i){t.dragSourceOptions=i||null,o.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,i){t.dragPreviewOptions=i||null,o.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)):this.lastConnectedDragSource=t)},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!s(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!s(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=r},750986:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(65435),o=i(965525),s=i(596774),r=function(){function e(e){var t=this;this.backend=e,this.hooks=n.default({dropTarget:function(e,i){t.dropTargetOptions=i,o.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!s(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=r},626706:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(487943),o=(i(353924),i(114774)),s=["canDrag","beginDrag","isDragging","endDrag"],r=["beginDrag"],a=function(){function e(e,t,i){var n=this;this.spec=e,this.monitor=t,this.ref=i,this.props=null,this.beginDrag=function(){if(n.props)return n.spec.beginDrag(n.props,n.monitor,n.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,n.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(s.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',s.join(", "),t),o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),r.forEach((function(t){o("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])})),function(t,i){return new a(e,t,i)}}},329492:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(487943),o=(i(353924),i(114774)),s=["canDrop","hover","drop"],r=function(){function e(e,t,i){this.spec=e,this.monitor=t,this.ref=i,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,n.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach((function(t){o(s.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',s.join(", "),t),o("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])})),function(t,i){return new r(e,t,i)}}},42742:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),a=i(925237),l=i(386998),d=i(489745),c=(i(353924),i(114774)),u=i(215956),h=i(596774);t.default=function(e){var t=e.DecoratedComponent,i=e.createHandler,n=e.createMonitor,p=e.createConnector,_=e.registerHandler,g=e.containerDisplayName,m=e.getType,f=e.collect,x=e.options.arePropsEqual,b=void 0===x?h:x,y=t,v=t.displayName||t.name||"Component",P=function(e){function u(t){var i=e.call(this,t)||this;return i.decoratedRef=r.createRef(),i.handleChange=function(){var e=i.getCurrentState();h(e,i.state)||i.setState(e)},i.disposable=new l.SerialDisposable,i.receiveProps(t),i.dispose(),i}return o(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return c(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!b(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new l.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){b(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(m(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=_(e,this.handler,this.manager),i=t[0],n=t[1];this.handlerId=i,this.handlerMonitor.receiveHandlerId(i),this.handlerConnector.receiveHandlerId(i);var o=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[i]});this.disposable.setDisposable(new l.CompositeDisposable(new l.Disposable(o),new l.Disposable(n)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?f(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return r.createElement(a.Consumer,null,(function(t){var i=t.dragDropManager;return e.receiveDragDropManager(i),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame((function(){return e.handlerConnector.reconnect()})),r.createElement(y,s({},e.props,e.getCurrentState(),{ref:d.isRefable(y)?e.decoratedRef:null}))}))},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(c(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",v,v),void 0!==e&&(this.manager=e,this.handlerMonitor=n(e),this.handlerConnector=p(e.getBackend()),this.handler=i(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=g+"("+v+")",u}(r.Component);return u(P,t)}},76108:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(774399)),n(i(387559)),n(i(459296))},741365:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(910513),s=i(998008),r=i(391081),a=i(147277),l=i(114774);t.useDragSourceMonitor=function(){var e=s.useDragDropManager();return[n.useMemo((function(){return new r.default(e)}),[e]),n.useMemo((function(){return new a.default(e.getBackend())}),[e])]},t.useDragHandler=function(e,t,i){var r=s.useDragDropManager(),a=n.useMemo((function(){return{beginDrag:function(){var i=e.current,n=i.begin,o=i.item;if(n){var s=n(t);return l(null==s||"object"==typeof s,"dragSpec.begin() must either return an object, undefined, or null"),s||o||{}}return o||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(i,n){var o=e.current.isDragging;return o?o(t):n===i.getSourceId()},endDrag:function(){var n=e.current.end;n&&n(t.getItem(),t),i.reconnect()}}}),[]);n.useEffect((function(){var n=o.default(e.current.item.type,a,r),s=n[0],l=n[1];return t.receiveHandlerId(s),i.receiveHandlerId(s),l}),[])}},787458:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(548537),s=i(998008),r=i(750986),a=i(596177);t.useDropTargetMonitor=function(){var e=s.useDragDropManager();return[n.useMemo((function(){return new a.default(e)}),[e]),n.useMemo((function(){return new r.default(e.getBackend())}),[e])]},t.useDropHandler=function(e,t,i){var r=s.useDragDropManager(),a=n.useMemo((function(){return{canDrop:function(){var i=e.current.canDrop;return!i||i(t.getItem(),t)},hover:function(){var i=e.current.hover;i&&i(t.getItem(),t)},drop:function(){var i=e.current.drop;if(i)return i(t.getItem(),t)}}}),[t]);n.useEffect((function(){var n=o.default(e.current.accept,a,r),s=n[0],l=n[1];return t.receiveHandlerId(s),i.receiveHandlerId(s),l}),[t,i])}},365353:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(596774),o=i(667294);t.useCollector=function(e,t,i){var s=o.useState((function(){return t(e)})),r=s[0],a=s[1],l=o.useCallback((function(){var o=t(e);n(r,o)||(a(o),i&&i())}),[r,e,i]);return[r,l]}},998008:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(925237),s=i(114774);t.useDragDropManager=function(){var e=n.useContext(o.context).dragDropManager;return s(null!=e,"Expected drag drop context"),e}},179411:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(365353);t.useMonitorOutput=function(e,t,i){var s=o.useCollector(e,t,i),r=s[0],a=s[1];return n.useEffect((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(a,{handlerIds:[t]})}),[e,a]),r}},774399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(179411),o=i(741365),s=i(667294),r=i(114774);t.useDrag=function(e){var t=s.useRef(e);t.current=e,r(null!=e.item,"item must be defined"),r(null!=e.item.type,"item type must be defined");var i=o.useDragSourceMonitor(),a=i[0],l=i[1];o.useDragHandler(t,a,l);var d=n.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=s.useMemo((function(){return l.hooks.dragSource()}),[l]),u=s.useMemo((function(){return l.hooks.dragPreview()}),[l]);return s.useEffect((function(){l.dragSourceOptions=t.current.options||null,l.reconnect()}),[l]),s.useEffect((function(){l.dragPreviewOptions=t.current.previewOptions||null,l.reconnect()}),[l]),[d,c,u]}},459296:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(998008),s=i(365353);t.useDragLayer=function(e){var t=o.useDragDropManager().getMonitor(),i=s.useCollector(t,e),r=i[0],a=i[1];return n.useEffect((function(){return t.subscribeToOffsetChange(a)})),n.useEffect((function(){return t.subscribeToStateChange(a)})),r}},387559:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(179411),o=i(787458),s=i(667294),r=i(114774);t.useDrop=function(e){var t=s.useRef(e);t.current=e,r(null!=e.accept,"accept must be defined");var i=o.useDropTargetMonitor(),a=i[0],l=i[1];o.useDropHandler(t,a,l);var d=n.useMonitorOutput(a,t.current.collect||function(){return{}},(function(){return l.reconnect()})),c=s.useMemo((function(){return l.hooks.dropTarget()}),[l]);return s.useEffect((function(){l.dropTargetOptions=e.options||null,l.reconnect()}),[e.options]),[d,c]}},60598:(e,t,i)=>{var n=i(925237);t.Z5=n.DragDropContext,n.DragDropContextProvider,n.Consumer,i(328202).default;var o=i(450793);t.Ej=o.default;var s=i(206059);t.GR=s.default,i(344319).default;var r=i(76108);r.useDrag,r.useDragLayer,r.useDrop},910513:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=i.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}},548537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var n=i.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}},496395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n]}},957523:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(114774);function s(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var i=e.ref;return o("string"!=typeof i,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),i?n.cloneElement(e,{ref:function(e){s(t,e),i&&s(i,e)}}):n.cloneElement(e,{ref:t})}},353924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!function(e){return"object"==typeof e&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},590539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var i=this.disposables.indexOf(e);-1!==i&&(t=!0,this.disposables.splice(i,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(i=0;i<e;i++)t[i].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(i=0;i<e;i++)t[i].dispose()}},e}();t.CompositeDisposable=i},653473:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(353924),o=function(){function e(e){this.isDisposed=!1,this.action=n.isFunction(e)?e:n.noop}return e.isDisposable=function(e){return e&&n.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:n.noop},e}();t.Disposable=o},409591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var i=this.current;this.current=e,i&&i.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=i},386998:(e,t,i)=>{function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i(653473)),n(i(409591)),n(i(590539))},487943:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},965525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},489745:(e,t)=>{function i(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=i,t.isRefable=function(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||i(e);var t}},270942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i){return"string"==typeof t||"symbol"==typeof t||!!i&&Array.isArray(t)&&t.every((function(t){return e(t,!1)}))}},152548:()=>{String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},65435:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=i(667294),o=i(957523);function s(e){return function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),!n.isValidElement(t)){var s=t;return e(s,i),s}var r=t;!function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}(r);var a=i?function(t){return e(t,i)}:e;return o.default(r,a)}}i(152548),t.default=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];if(i.endsWith("Ref"))t[i]=e[i];else{var o=s(n);t[i]=function(){return o}}})),t}},215956:(e,t,i)=>{var n=i(876618),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?r:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(_){var o=p(i);o&&o!==_&&e(t,o,n)}var r=c(i);u&&(r=r.concat(u(i)));for(var a=l(t),g=l(i),m=0;m<r.length;++m){var f=r[m];if(!(s[f]||n&&n[f]||g&&g[f]||a&&a[f])){var x=h(i,f);try{d(t,f,x)}catch(b){}}}return t}return t}},114774:e=>{e.exports=function(e,t,i,n,o,s,r,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,n,o,s,r,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},121255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case l:return e;default:return t}}case g:case _:case o:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=_,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===s},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===a},t.isStrictMode=function(e){return m(e)===r},t.isSuspense=function(e){return m(e)===p}},876618:(e,t,i)=>{e.exports=i(121255)},869921:(e,t)=>{var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,r=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,f=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,y=i?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case u:case s:case a:case r:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case m:case g:case l:return e;default:return t}}case o:return t}}}function P(e){return v(e)===u}t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=r,t.Suspense=p,t.isAsyncMode=function(e){return P(e)||v(e)===c},t.isConcurrentMode=P,t.isContextConsumer=function(e){return v(e)===d},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return v(e)===h},t.isFragment=function(e){return v(e)===s},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===g},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===a},t.isStrictMode=function(e){return v(e)===r},t.isSuspense=function(e){return v(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===u||e===a||e===r||e===p||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y||e.$$typeof===f)},t.typeOf=v},659864:(e,t,i)=>{e.exports=i(869921)},615071:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(487462),o=i(263366),s=i(875068);i(45697);function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var a=i(667294),l=i(973935);const d=!1;var c=i(500220),u="unmounted",h="exited",p="entering",_="entered",g="exiting",m=function(e){function t(t,i){var n;n=e.call(this,t,i)||this;var o,s=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?s?(o=h,n.appearStatus=p):o=_:o=t.unmountOnExit||t.mountOnEnter?u:h,n.state={status:o},n.nextCallback=null,n}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:h}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==p&&i!==_&&(t=p):i!==p&&i!==_||(t=g)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,n=this.props.timeout;return e=t=i=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,i=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===p?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===h&&this.setState({status:u})},i.performEnter=function(e){var t=this,i=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[l.findDOMNode(this),n],s=o[0],r=o[1],a=this.getTimeouts(),c=n?a.appear:a.enter;!e&&!i||d?this.safeSetState({status:_},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,r),this.safeSetState({status:p},(function(){t.props.onEntering(s,r),t.onTransitionEnd(c,(function(){t.safeSetState({status:_},(function(){t.props.onEntered(s,r)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),n=this.props.nodeRef?void 0:l.findDOMNode(this);t&&!d?(this.props.onExit(n),this.safeSetState({status:g},(function(){e.props.onExiting(n),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:h},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:h},(function(){e.props.onExited(n)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(n){i&&(i=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:l.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(i&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=o[0],r=o[1];this.props.addEndListener(s,r)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,i=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,o.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(c.Z.Provider,{value:null},"function"==typeof i?i(e,n):a.cloneElement(a.Children.only(i),n))},t}(a.Component);function f(){}m.contextType=c.Z,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},m.UNMOUNTED=u,m.EXITED=h,m.ENTERING=p,m.ENTERED=_,m.EXITING=g;const x=m;var b=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((i=e).classList?i.classList.remove(n):"string"==typeof i.className?i.className=r(i.className,n):i.setAttribute("class",r(i.className&&i.className.baseVal||"",n)));var i,n}))},y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1];t.removeClasses(o,"exit"),t.addClass(o,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1]?"appear":"enter";t.addClass(o,s,"active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var n=t.resolveArguments(e,i),o=n[0],s=n[1]?"appear":"enter";t.removeClasses(o,s),t.addClass(o,s,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,n="string"==typeof i,o=n?""+(n&&i?i+"-":"")+e:i[e];return{baseClassName:o,activeClassName:n?o+"-active":i[e+"Active"],doneClassName:n?o+"-done":i[e+"Done"]}},t}(0,s.Z)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var n=this.getClassNames(t)[i+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&o&&(n+=" "+o),"active"===i&&e&&e.scrollTop,n&&(this.appliedClasses[t][i]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((i=e).classList?i.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(i,n)||("string"==typeof i.className?i.className=i.className+" "+n:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+n)));var i,n}))}(e,n))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],n=i.base,o=i.active,s=i.done;this.appliedClasses[t]={},n&&b(e,n),o&&b(e,o),s&&b(e,s)},i.render=function(){var e=this.props,t=(e.classNames,(0,o.Z)(e,["classNames"]));return a.createElement(x,(0,n.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(a.Component);y.defaultProps={classNames:""},y.propTypes={};const v=y},500220:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(667294).createContext(null)},442279:(e,t)=>{function i(e,t){return e===t}function n(e){var t=arguments.length<=1||void 0===arguments[1]?i:arguments[1],n=null,o=null;return function(){for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return null!==n&&n.length===s.length&&s.every((function(e,i){return t(e,n[i])}))||(o=e.apply(void 0,s)),n=s,o}}function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var s=0,r=n.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var i=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+i+"]")}return t}(n),l=e.apply(void 0,[function(){return s++,r.apply(void 0,arguments)}].concat(i)),d=function(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];var s=a.map((function(i){return i.apply(void 0,[e,t].concat(n))}));return l.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(s))};return d.resultFunc=r,d.recomputations=function(){return s},d.resetRecomputations=function(){return s=0},d}}var s=t.P1=o(n)},560053:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,o=e[n];if(!(0<s(o,t)))break e;e[n]=t,e[i]=o,i=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,o=e.length,r=o>>>1;n<r;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>s(l,i))d<o&&0>s(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<o&&0>s(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function s(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],u=1,h=null,p=3,_=!1,g=!1,m=!1,f="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var t=n(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function v(e){if(m=!1,y(e),!g)if(null!==n(d))g=!0,z(P);else{var t=n(c);null!==t&&O(v,t.startTime-e)}}function P(e,i){g=!1,m&&(m=!1,x(E),E=-1),_=!0;var s=p;try{for(y(i),h=n(d);null!==h&&(!(h.expirationTime>i)||e&&!j());){var r=h.callback;if("function"==typeof r){h.callback=null,p=h.priorityLevel;var a=r(h.expirationTime<=i);i=t.unstable_now(),"function"==typeof a?h.callback=a:h===n(d)&&o(d),y(i)}else o(d);h=n(d)}if(null!==h)var l=!0;else{var u=n(c);null!==u&&O(v,u.startTime-i),l=!1}return l}finally{h=null,p=s,_=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,I=!1,A=null,E=-1,C=5,S=-1;function j(){return!(t.unstable_now()-S<C)}function T(){if(null!==A){var e=t.unstable_now();S=e;var i=!0;try{i=A(!0,e)}finally{i?w():(I=!1,A=null)}}else I=!1}if("function"==typeof b)w=function(){b(T)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,k=D.port2;D.port1.onmessage=T,w=function(){k.postMessage(null)}}else w=function(){f(T,0)};function z(e){A=e,I||(I=!0,w())}function O(e,i){E=f((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||_||(g=!0,z(P))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,o,s){var r=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?r+s:r:s=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>r?(e.sortIndex=s,i(c,e),null===n(d)&&e===n(c)&&(m?(x(E),E=-1):m=!0,O(v,s-r))):(e.sortIndex=a,i(d,e),g||_||(g=!0,z(P))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},363840:(e,t,i)=>{e.exports=i(560053)},596774:e=>{e.exports=function(e,t,i,n){var o=i?i.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var d=s[l];if(!a(d))return!1;var c=e[d],u=t[d];if(!1===(o=i?i.call(n,c,u,d):void 0)||void 0===o&&c!==u)return!1}return!0}},98123:(e,t,i)=>{i.d(t,{Z:()=>n}),e=i.hmd(e);const n=function(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i.g?i.g:e)},645298:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});const n=function(e,t){}},644551:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/idea-ads-tool"]=function(){return i(714922).Z}},367677:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/idea-pin-builder"]=function(){return i(216834).Z}},61746:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin-creation-tool"]=function(){return i(76510).Z}},302667:(e,t,i)=>{i.d(t,{As:()=>l,Ed:()=>d,X_:()=>o,h_:()=>r,vF:()=>s,x3:()=>a});var n=i(172071);const o=e=>{e&&e.utm_campaign&&n.Z.increment("client.partner.account.convert_attempt.utm_campaign.exists",1,e)},s=(e,t,i,o,s,r,a={})=>{((e,t)=>{const i=`client.partner.quick_promote_button.${e}`;n.Z.increment(i,1,{app_type:"web",location:t})})(t,i),((e,t,i,n={},o)=>{o({event_type:e,component:t,element:10148,view_type:i,aux_data:{...n}})})(o,s,r,a,e)},r=e=>{e({event_type:8217})},a=()=>{n.Z.increment("client.partner.biz_nux_v2.nux_start",1,{app_type:"web"})},l=()=>{n.Z.increment("client.partner.biz_nux_v2.nux_end",1,{app_type:"web"})},d=e=>{const t=`client.partner.biz_nux_v2.render.${e}`;n.Z.increment(t,1,{app_type:"web"})}},480542:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(883119),s=i(251183),r=i(700380),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={gradientBackground:{left:{backgroundImage:"linear-gradient(to left, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"},right:{backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"}},innerScrollContainer:{marginBottom:-17,overflowX:"auto",overflowY:"hidden",paddingBottom:17}};class c extends n.PureComponent{constructor(...e){super(...e),l(this,"state",{canScrollLeft:!1,canScrollRight:!1,isContainerHover:!1,isLeftHover:!1,isRightHover:!1}),l(this,"scroll",(e=>{const{scrollbar:t}=this,{extendToEdgeDistanceX:i,scrollSpeedPxPerMs:n,minScrollDuration:o,easingFunction:r}=this.props;t&&0!==e&&(this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=(0,s.Z)(t,e,0,{easingFunction:r,extendToEdgeDistanceX:i,scrollSpeedPxPerMs:n,minScrollDuration:o,onAnimationComplete:()=>{this.refreshScroll(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())})),l(this,"refreshScroll",(()=>{const{canScrollLeft:e,canScrollRight:t}=this.state;if(!this.scrollbar)return;const{scrollLeft:i,scrollWidth:n,clientWidth:o}=this.scrollbar,s={};if(o<n){const r=i>0,a=i<n-o;e===r&&t===a||(s.canScrollLeft=r,s.canScrollRight=a)}else(e||t)&&(s.canScrollLeft=!1,s.canScrollRight=!1);Object.keys(s).length&&this.setState(s)})),l(this,"refreshScrollThrottled",(0,r.Z)(this.refreshScroll,50)),l(this,"handleLeftArrowClick",(()=>this.handleArrowClick("left"))),l(this,"handleRightArrowClick",(()=>this.handleArrowClick("right"))),l(this,"handleArrowClick",(e=>{if(!this.scrollbar)return;const{scrollDistanceRatio:t,scrollDistanceMin:i}=this.props,{clientWidth:n}=this.scrollbar,o="left"===e?-1:1;this.scroll(o*Math.max(Math.floor(t*n),i))})),l(this,"handleContainerMouseEnter",(()=>{this.setState({isContainerHover:!0})})),l(this,"handleContainerMouseLeave",(()=>{this.setState({isContainerHover:!1})})),l(this,"handleLeftArrowMouseEnter",(()=>this.handleArrowHover("left",!0))),l(this,"handleLeftArrowMouseLeave",(()=>this.handleArrowHover("left",!1))),l(this,"handleRightArrowMouseEnter",(()=>this.handleArrowHover("right",!0))),l(this,"handleRightArrowMouseLeave",(()=>this.handleArrowHover("right",!1))),l(this,"handleArrowHover",((e,t)=>{const i="left"===e?"isLeftHover":"isRightHover";this.setState({[i]:t})})),l(this,"saveScrollBarRef",(e=>{this.scrollbar=e})),l(this,"Style",{...d,arrowBackground:{backgroundColor:"wide"===this.props.variant?"rgba(255, 255, 255, .97)":"rgba(0, 0, 0, .1)",boxShadow:"wide"===this.props.variant?"0 1px 20px 0 rgba(0, 0, 0, .1)":void 0},arrow:{default:{position:"absolute",top:"50%",transform:"wide"===this.props.variant?"translateY(-115%)":"translateY(-50%)"},left:{left:"wide"===this.props.variant?-84:-12},right:{right:"wide"===this.props.variant?-72:-12}}}),l(this,"renderArrow",(e=>{var t;const{canScrollLeft:i,canScrollRight:n}=this.state,{variant:s}=this.props,r="wide"===s;let l=("left"===e?this.state.isLeftHover:this.state.isRightHover)?"darkGray":"gray";r&&(l="left"===e&&i||"right"===e&&n?"darkGray":"gray");const d="left"===e?"arrow-back":"arrow-forward",c="left"===e?this.Style.arrow.left:this.Style.arrow.right;return(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...this.Style.arrow.default,...c}},children:(0,a.jsx)(o.iP,{onMouseEnter:"left"===e?this.handleLeftArrowMouseEnter:this.handleRightArrowMouseEnter,onMouseLeave:"left"===e?this.handleLeftArrowMouseLeave:this.handleRightArrowMouseLeave,onTap:"left"===e?this.handleLeftArrowClick:this.handleRightArrowClick,rounding:"circle",children:(0,a.jsx)(o.xu,{padding:1,rounding:"circle",dangerouslySetInlineStyle:{__style:this.Style.arrowBackground},children:(0,a.jsx)(o.Sj,{icon:d,iconColor:null!==(t=l)&&void 0!==t?t:"gray",bgColor:"white",size:r?"lg":"sm"})})},e)})}))}componentDidMount(){window.addEventListener("resize",this.refreshScrollThrottled),this.refreshScroll()}componentDidUpdate(){this.refreshScroll()}componentWillUnmount(){window.removeEventListener("resize",this.refreshScrollThrottled),this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}render(){const{canScrollLeft:e,canScrollRight:t,isContainerHover:i}=this.state,{alwaysShowArrows:n,children:s,showArrowsOnlyOnHover:r}=this.props,l=!r||i,d=e&&l,c=t&&l;return(0,a.jsxs)(o.xu,{onMouseEnter:this.handleContainerMouseEnter,onMouseLeave:this.handleContainerMouseLeave,position:"relative",children:[(0,a.jsx)(o.xu,{overflow:"hidden",children:(0,a.jsx)(o.xu,{ref:this.saveScrollBarRef,onScroll:this.refreshScrollThrottled,dangerouslySetInlineStyle:{__style:this.Style.innerScrollContainer},children:s})}),d&&!n&&(0,a.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,width:60,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.left}}),c&&!n&&(0,a.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,right:!0,width:60,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.right}}),(d||n)&&this.renderArrow("left"),(c||n)&&this.renderArrow("right")]})}}l(c,"defaultProps",{easingFunction:"ease-in-out",extendToEdgeDistanceX:160,minScrollDuration:200,scrollDistanceMin:200,scrollDistanceRatio:3/4,scrollSpeedPxPerMs:1.2,showArrowsOnlyOnHover:!0,variant:"default"})},261130:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(288709),o=i.n(n);const s=new RegExp(/^(https?:\/\/){0,1}/.source+"("+o().source+"){1,}"+/(\.){1,}/.source+"("+o().source+"){1,}"+/(\/){0,1}/.source,"gi")},464657:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);const o="undefined"!=typeof document?document:{},s=()=>{const e=(0,n.useRef)(),t=o.documentElement,{body:i}=o;if(!t)return[];return[()=>{if(!i||!i.style||e.current)return;const n=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(i).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",i.style.position="relative",i.style.overflow="hidden",i.style.paddingRight=`${o+n}px`,e.current=!0},()=>{i&&i.style&&e.current&&(t.style.position="",t.style.overflow="",i.style.position="",i.style.overflow="",i.style.paddingRight="",e.current=!1)}]}},915206:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(667294),o=i(702664),s=i(883119),r=i(214494),a=i(898781),l=i(780280),d=i(19121),c=i(717615),u=i(333206),h=i(846760),p=i(505132),_=i(785893);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m={alignItems:"center",backgroundColor:"#efefef",border:"none",cursor:"pointer",display:"flex",flexGrow:1,height:40,justifyContent:"space-between",minWidth:0,outline:0,padding:"0 14px",position:"relative"},f={backgroundColor:"#e60023",border:"none",cursor:"pointer",flex:"none",height:40,outline:0,padding:"0 14px"},x=(e,t)=>({dropdown:{alignItems:"center",backgroundColor:""+(t?"#efefef":"#ffffff"),border:"2px solid "+(e?"var(--color-border-error)":"var(--color-border-container)"),cursor:"pointer",display:"flex",flexGrow:1,height:48,justifyContent:"space-between",minWidth:0,outline:0,position:"relative",borderRadius:16}}),b=e=>({color:e?"#111":"#6c6c6c"});class y extends n.Component{constructor(...e){super(...e),g(this,"state",{selectedBoard:null,showBoardCreate:!1,showFlyout:!1,suggestedBoardName:""}),g(this,"_setDefaultBoard",(()=>{r.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0}).callGet({showError:!1}).then((e=>{const t=(((e||{}).resource_response||{}).data||{}).all_boards;if(t&&t.length>0){const{id:e,image_cover_url:i,owner:n,privacy:o,name:s,url:r}=t[0];this.handleItemChosen({boardId:e,imageCoverUrl:i,ownerUsername:null==n?void 0:n.username,privacy:o,title:s||"",url:r},!1)}}))})),g(this,"setButtonRef",(e=>{this.buttonRef=e})),g(this,"handleBoardDropdownClick",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),g(this,"handleSaveButtonClick",(()=>{const{onSaveClick:e,selectedItem:t}=this.props;t&&e?e():this.setState({showFlyout:!0})})),g(this,"handleFlyoutClose",(()=>{this.setState({showFlyout:!1})})),g(this,"handleItemChosen",((e,t=!0)=>{const{onItemChosen:i}=this.props;i(e),t&&this.handleFlyoutClose()})),g(this,"handleCreateSection",(e=>{const{selectedBoard:t}=this.state;if(t){const{id:i,privacy:n}=t,{id:o,title:s}=e;this.handleItemChosen({boardId:i,privacy:n,sectionId:o,title:s||""})}this.handleBoardCreateClose()})),g(this,"handleBoardCreateShow",(({title:e})=>{this.setState({showBoardCreate:!0,showFlyout:!1,suggestedBoardName:e})})),g(this,"handleBoardCreateClose",(()=>{this.setState({showBoardCreate:!1,selectedBoard:null})})),g(this,"handleBoardCreate",(e=>{this.props.invalidateBoardPickerBoardsResource();const{id:t,name:i,privacy:n,url:o}=e;this.handleItemChosen({boardId:t,privacy:n,title:i||"",url:o}),this.handleBoardCreateClose()})),g(this,"handleSetBoardWithSection",(e=>{this.setState({selectedBoard:e})}))}componentDidMount(){const{selectedItem:e,useDefaultBoard:t=!1,disableDefaultBoard:i=!1}=this.props;i||(t?this._setDefaultBoard():e||this._setDefaultBoard())}render(){const{accessibilityLabelText:e,buttonText:t,customItem:i,disabled:o,flyoutSize:r,flyoutZIndex:a,hasError:l,idealDirection:d,onSaveClick:c,placeholder:g,requestContext:y,selectedItem:v,showBoardCover:P,showButton:w,showCreateBoardButton:I,showFlyoutSaveButton:A,showSections:E,showSectionSaveButton:C,useLayer:S,useStoryboardStyle:j,useCreateModalWithNoLayer:T}=this.props,{selectedBoard:D,showBoardCreate:k,showFlyout:z,suggestedBoardName:O}=this.state,R={__style:{borderRadius:8,boxShadow:l&&!j?"0 0 0 1px #e60023":void 0,zIndex:z?a:void 0}},{isRTL:L}=y,M=j?16:8,B=`${M}px 0 0 ${M}px`,N=`0 ${M}px ${M}px 0`,{title:Z}=v||{},F=L?N:B,U=P&&!!v&&Z,V={...j?x(l,o).dropdown:m,borderRadius:z||!w?M:F,padding:U?"0 14px 0 7px":"0 14px",cursor:o?"default":"pointer",pointerEvents:o?"none":"auto"},H={...f,borderRadius:L?B:N,...o?{backgroundColor:"#efefef",cursor:"default"}:{},pointerEvents:o?"none":"auto"};return(0,_.jsxs)(s.xu,{column:12,position:"relative",dangerouslySetInlineStyle:R,children:[(0,_.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",width:"100%",children:[(0,_.jsxs)("button",{style:V,onClick:this.handleBoardDropdownClick,ref:this.setButtonRef,"data-test-id":"board-dropdown-select-button",disabled:o,"aria-disabled":o,children:[(0,_.jsxs)(s.xu,{marginEnd:2,minWidth:0,overflow:"hidden",display:"flex",alignItems:"center",children:[U&&(0,_.jsx)(s.xu,{marginEnd:2,children:(0,_.jsx)(s.zd,{height:32,width:32,rounding:2,children:(0,_.jsx)(s.Ee,{alt:this.props.i18n.bt("Board cover", "Board cover", "boardDropdown.button.selectedBoard.boardCover", undefined, true),color:"lightGray",naturalHeight:1,naturalWidth:1,src:(null==v?void 0:v.imageCoverUrl)||"",fit:"cover"})})}),(0,_.jsx)(s.xv,{lineClamp:1,children:(0,_.jsx)("span",{style:b(!!v),children:v&&Z?Z:g})})]}),(0,_.jsx)(s.xu,{flex:"none",marginEnd:-1,children:(0,_.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Choose a board", "Choose a board", "Instructions to open board picker", undefined, true),color:o?"subtle":"default",icon:"arrow-down",size:12})})]}),!z&&w&&(0,_.jsx)("button",{style:H,onClick:this.handleSaveButtonClick,"data-test-id":"board-dropdown-save-button",disabled:o,"aria-disabled":o,children:(0,_.jsx)(s.xv,{color:o?"subtle":"inverse",weight:"bold",children:t||this.props.i18n.bt("Save", "Save", "Button to create new Pin", undefined, true)})})]}),z&&(0,_.jsx)(s.J2,{anchor:this.buttonRef,idealDirection:d||"down",onDismiss:this.handleFlyoutClose,size:r,children:(0,_.jsx)(h.sR,{accessibilityLabelText:e,buttonText:t,customItem:i&&(0,n.cloneElement)(i,{onItemChosen:this.handleFlyoutClose}),onBoardCreate:this.handleBoardCreateShow,onButtonClick:c,onItemChosen:this.handleItemChosen,paneWidth:"number"==typeof r?r:void 0,setBoardWithSection:this.handleSetBoardWithSection,showCreateBoardButton:I,showFlyoutSaveButton:A,showSections:E,showSectionSaveButton:C,useStoryboardStyle:j,useLegoLayout:!1,showSaveToProfile:!1})}),k&&!D&&(0,_.jsx)(u.Z,{onBoardCreate:this.handleBoardCreate,onClose:this.handleBoardCreateClose,suggestedBoardName:O,useModalWithNoLayer:T}),k&&!!D&&(0,_.jsx)(p.Z,{selectedBoard:D,onClose:this.handleBoardCreateClose,onSectionCreate:this.handleCreateSection,useLayer:S})]})}}function v(e){const t=(0,a.ZP)(),i=(0,o.useDispatch)(),n=(0,d.Z)(),s=(0,c.Z)();return(0,_.jsx)(y,{...e,invalidateBoardPickerBoardsResource:()=>i((0,h.DR)(n,s)),requestContext:(0,l.B)(),i18n:t})}g(y,"defaultProps",{flyoutSize:"lg",flyoutZIndex:1,showButton:!0,disabled:!1})},790904:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),s=i(941646),r=i(785893);function a({accessibilityLabel:e,handleClick:t,icon:i,iconColor:a,iconOnly:l,testId:d,buttonText:c,tabIndex:u}){const[h,p]=(0,n.useState)(!1),_=(0,n.useRef)(),g=l?"md":"lg",m=a||"darkGray",f=()=>{p((e=>!e)),t()},x=e=>{var t;_&&e.target instanceof Element&&(null===(t=_.current)||void 0===t||!t.contains(e.target))&&p(!1)};return(0,n.useEffect)((()=>(window.addEventListener("mousedown",x),()=>{window.removeEventListener("mousedown",x)})),[]),(0,r.jsx)(s.Z,{id:d||"closeup-action-bar-button",children:(0,r.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,r.jsx)(o.hU,{accessibilityLabel:e,iconColor:m,onClick:f,selected:h,icon:i,size:g,ref:_,tabIndex:u}),c&&(0,r.jsx)(o.iP,{onTap:f,rounding:2,children:(0,r.jsx)(o.X6,{color:"light",overflow:"normal",size:"400",children:c})})]})})}},668627:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:i?i.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...t?{orbac_subject_id:t}:Object.freeze({})})},237056:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(773285),o=i(50286);const s="sce_lightswitch_organic",r="sce_lightswitch_monetized",a=Object.freeze({dweb:{organic:"web_sce_organic_pinbuilder_dep",monetized:"web_sce_monetized_pinbuilder_dep"},mweb:{organic:"mweb_sce_organic_pinbuilder_dep",monetized:"mweb_sce_monetized_pinbuilder_dep"}});function l(e){const t=(0,o.HG)(),{checkExperiment:i}=(0,n.F)(),l=a[t?"dweb":"mweb"];return e&&(i(s),i(r)),i(l.organic).anyEnabled||i(l.monetized).anyEnabled}},382891:(e,t,i)=>{i.d(t,{Z:()=>r,m:()=>s});var n=i(719286),o=i(709622);const s=["female","male","unknown"],r=e=>{const{interests:t,ages:i,genders:r,country:a}=e;return{AGE_BUCKET:i||[],APPTYPE:n.jz,GENDER:r||s,INTEREST:(t||[]).map((e=>e.topic_id)),LOCATION:[...new Set((a||o.UF).split("+"))]}}},460985:(e,t,i)=>{i.d(t,{xT:()=>x,cX:()=>b,ZP:()=>y});var n=i(667294),o=i(883119),s=i(444445),r=i(898781);const a=(e,t=3,i=500)=>n=>{const o=n.target;t>0&&(setTimeout((()=>{o.src=`${e}?${Date.now()}${t}`}),i),t-=1,i*=2)};var l=i(152028),d=i(785893);const c=e=>{const t=(0,r.ZP)(),{skipImageReloadOnError:i=!1,pin:c,video:u,rounding:h}=e,p=(0,n.createRef)();(0,n.useEffect)((()=>{p.current&&u&&(p.current.currentTime=u.thumbnail)}),[u,p]);const _=void 0===e.containerWidth?s.yF:e.containerWidth,g=e.imgHeight||void 0;if(!c&&!u)return null;return Boolean(u)?(()=>{if(!u)return null;const e=u.customCoverImg;return(0,d.jsxs)(o.xu,{position:"relative",overflow:"hidden",display:"flex",direction:"column",justifyContent:"center",width:_,children:[(0,d.jsx)(o.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:e?(0,d.jsx)(o.Ee,{alt:e.name,naturalHeight:e.height,naturalWidth:e.width,src:e.src}):(0,d.jsx)(o.nk,{autoplay:!0,accessibilityMaximizeLabel:t.bt("Maximise", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:t.bt("Minimise", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:t.bt("Mute", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:t.bt("Pause", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:t.bt("Play", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:t.bt("Progress bar", "Progress bar", "displayPinImage.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:t.bt("Unmute", "Unmute", "Unmute button on video", undefined, true),aspectRatio:u.width/u.height,captions:"",onPlay:()=>{},onPlayError:()=>{},src:u.src})}),(0,d.jsx)(o.xu,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"end",display:"flex",justifyContent:"start",padding:2,position:"absolute",children:(0,d.jsx)(l.Z,{duration:1e3*u.duration})})]})})():(()=>{var e,t,n,s;const{images:r={}}=c,l=r["236x"]||void 0,u=r["474x"]||void 0,p=r["736x"]||void 0,m=r.orig||void 0||l||u||p||void 0;return m?(0,d.jsx)(o.xu,{rounding:null!=h?h:2,overflow:"hidden",display:"flex",direction:"column",justifyContent:"center",width:_,height:g,children:(0,d.jsx)(o.Ee,{alt:null!==(e=c.alt_text)&&void 0!==e?e:"",color:c.dominant_color||"#efefef",naturalWidth:null!==(t=m.width)&&void 0!==t?t:1,naturalHeight:null!==(n=m.height)&&void 0!==n?n:1,onError:i?()=>{}:()=>{var e;a(null!==(e=m.url)&&void 0!==e?e:"",5)},src:null!==(s=m.url)&&void 0!==s?s:"",fit:g?"cover":"none"})}):null})()};var u=i(987765),h=i(116303),p=i(883561);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g={base:({rounding:e,height:t})=>({borderRadius:e?4*e:4,display:"flex",flexDirection:"column",height:t,outline:"none",padding:8,transition:"background-color 0.25s cubic-bezier(0.31, 1, 0.34, 1)"}),focused:()=>({padding:4,border:"4px solid rgba(0, 132, 255, 0.5)"}),hovered:()=>({backgroundColor:"rgba(0, 0, 0, 0.05)",cursor:"pointer"}),selected:()=>({padding:6,border:"2px solid #e60023"})},m=(e,t)=>{const i=((e.rich_summary||{}).displayName||"").trim(),n=(e.description||"").trim(),o=(e.title||"").trim();return(0,p.ZP)(o||i||n,t)};class f extends n.Component{constructor(...e){super(...e),_(this,"state",{isHovered:!1,isFocused:!1}),_(this,"getIsActionable",(()=>!!this.props.onSelect)),_(this,"getStyle",(()=>{const{isFocused:e,isHovered:t}=this.state,{selected:i}=this.props,n=this.getIsActionable(),o={base:!0,focused:n&&e,hovered:n&&t,selected:i};return Object.entries(o).reduce(((e,[t,i])=>({...e,...i?g[t](this.props):{}})),{})})),_(this,"handleMouseEnter",(()=>{this.setState({isHovered:!0})})),_(this,"handleMouseLeave",(()=>{this.setState({isHovered:!1})})),_(this,"handleClick",(()=>{const{onSelect:e,pin:t}=this.props;e&&e(t)})),_(this,"handleKeyPress",(e=>{"Enter"===e.key&&this.handleClick()})),_(this,"handleFocus",(()=>{this.setState({isFocused:!0})})),_(this,"handleBlur",(()=>{this.setState({isFocused:!1})}))}render(){const{pin:e,imageHeight:t,hideAuthorAttribution:i,maxDescriptionLength:n,promoted:r,showDescription:a,skipImageReloadOnError:l,width:u,video:h,rounding:p,isMobile:_=!1}=this.props,g=m(e,n),f=this.props.i18n.bt("No description available", "No description available", "[m10n]quickPromote.pin.noDescription", undefined, true),y=this.getIsActionable()?{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleClick,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,role:"button",tabIndex:0}:{};return(0,d.jsxs)("div",{style:this.getStyle(),...y,"aria-label":g||f,children:[(0,d.jsx)(c,{pin:e,video:h,imgHeight:t,containerWidth:u,rounding:p,skipImageReloadOnError:l}),!r&&e.video_signature&&(0,d.jsx)(o.xu,{marginTop:1,children:(0,d.jsx)(o.JO,{icon:"play",accessibilityLabel:this.props.i18n.bt("Video play button", "Video play button", "[m10n] Accessibility label for a video play icon", undefined, true),color:"default",size:12,inline:!0})}),r&&!i&&!_&&(0,d.jsx)(x,{name:r.businessName}),a&&g.length>0&&(0,d.jsx)(o.xu,{padding:r?1:void 0,paddingX:r?void 0:1,paddingY:r?void 0:4,maxWidth:u||s.yF,children:(0,d.jsx)(o.xv,{size:_?"100":"200",weight:"bold",children:g})}),r&&(0,d.jsx)(b,{isMobile:_,avatarUrl:r.avatarImageSmallUrl,businessName:r.businessName})]})}}_(f,"defaultProps",{showDescription:!0});const x=({name:e})=>{const t=(0,r.ZP)();return(0,d.jsxs)(o.xu,{display:"flex",padding:1,children:[(0,d.jsx)(o.xu,{marginEnd:1,children:(0,d.jsx)(o.JO,{accessibilityLabel:t.bt("Pin link arrow", "Pin link arrow", "Accessibility label for pin preview link icon", undefined, true),icon:"arrow-up-right",color:"default",inline:!0,size:10})}),(0,d.jsx)(o.xu,{children:(0,d.jsx)(o.xv,{inline:!0,size:"200",children:e})})]})},b=({avatarUrl:e,businessName:t,isMobile:i=!1})=>{const n=(0,r.ZP)();return(0,d.jsxs)(o.xu,{display:"flex",justifyContent:i?"evenly":"start",alignItems:"center",paddingY:1,children:[(0,d.jsx)(o.xu,{children:(0,d.jsx)(h.Z,{name:t,src:e,size:i?"xs":"sm"})}),(0,d.jsxs)(o.xu,{marginStart:i?0:1,children:[(0,d.jsx)(u.Z,{size:i?"100":"200",weight:"bold",children:n.bt("Promoted by", "Promoted by", "Label for who promoted the pin", undefined, true)}),(0,d.jsx)(o.xv,{size:i?"100":"200",children:t})]})]})},y=function(e){const t=(0,r.ZP)(),{badgeMessage:i}=e;return(0,d.jsxs)(o.xu,{children:[(0,d.jsx)(f,{...e,i18n:t}),i&&(0,d.jsx)(o.xu,{"data-test-id":"recommended-pins",display:"inlineBlock",padding:4,position:"absolute",left:!0,top:!0,children:(0,d.jsx)(o.Ct,{text:i})})]})}},28956:(e,t,i)=>{i.d(t,{Z:()=>tt});var n=i(667294),o=i(883119),s=i(480542),r=i(237056),a=i(702664),l=i(186656),d=i(898781);function c(e,t){const i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";const n=["KB","MB","GB","TB","PB","EB","ZB","YB"];let o=-1;do{e/=i,o+=1}while(Math.abs(e)>=i&&o<n.length-1);let s=e.toFixed(1);return s.endsWith(".0")&&(s=s.substring(0,s.length-2)),s+" "+n[o]}var u=i(177471),h=i(780280),p=i(19121),_=i(116303);const g=(e,t,i)=>{const n=e.name.toLocaleLowerCase(),o=t.name.toLocaleLowerCase();return n<o?i?-1:1:n>o?i?1:-1:0},m=(e,t,i)=>e.lastModified||t.lastModified?e.lastModified?t.lastModified?e.lastModified<t.lastModified?i?-1:1:e.lastModified>t.lastModified?i?1:-1:g(e,t,!0):1:-1:g(e,t,!0);var f=i(785893);function x({path:e="",rootName:t="Home",onChangeDirectory:i}){let n=e;e&&"/"!==e.charAt(0)&&(n="/".concat(n)),e&&"/"===e.charAt(e.length-1)&&(n=n.substring(0,e.length-1));const s=n.split("/");return(0,f.jsx)(o.kC,{alignItems:"start",justifyContent:"start",children:s.map(((e,n)=>{const r=s.slice(0,n+1).join("/");return(0,f.jsxs)(o.xu,{display:"flex",children:[n>0&&(0,f.jsx)(o.xu,{paddingX:1,children:(0,f.jsx)(o.xv,{color:"subtle",children:">"})}),(0,f.jsx)(o.xu,{paddingX:1,children:(0,f.jsx)(o.iP,{onTap:()=>i(r),children:(0,f.jsx)(o.xv,{color:n===s.length-1?"default":"subtle",children:0===n?t:e})})})]},r)}))})}var b=i(795067);function y(e){return-1===e.indexOf(".")?"":e.trim().split(".").pop().toLowerCase()}var v=i(531245);function P(e){const t=y(e.name);return"dropboxFolder"===e.type||!!t&&v.P7.includes(t)||!!t&&v.sc.includes(t)}function w(e,t){const i=e.lastIndexOf(".")-3,n=e.substr(i);return e.length>t&&i-3>=1?`${e.substr(0,t-(n.length+3))}...${n}`:e}var I=i(938999);function A({item:e}){const{name:t,type:i}=e,n=e.thumbnail?"data:image/jpeg;base64,".concat(e.thumbnail):"",s=P(e);return(0,f.jsx)(o.zd,{rounding:2,height:"100%",width:"100%",children:(0,f.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:s&&n?(0,f.jsx)(o.Ee,{alt:t||"",fit:"cover",src:n,naturalHeight:1,naturalWidth:1}):(0,f.jsx)(o.JO,{icon:"dropboxFolder"===i?"folder":"file-unknown",accessibilityLabel:"dropboxFolder"===i?"Folder icon":"Unknown file icon",size:"60%"})})})}function E({color:e,duration:t,type:i}){const s=(0,d.ZP)();return(0,f.jsx)(o.xu,{color:e,display:"flex",rounding:"pill",paddingX:2,paddingY:1,children:"localVideo"===i||"dropboxVideo"===i?(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(o.JO,{accessibilityLabel:s.bt("Video icon", "Video icon", "Icon label to tell if media type is a video", undefined, true),color:"inverse",icon:"video-camera"}),!!t&&(0,f.jsx)(o.xu,{marginStart:1,children:(0,f.jsx)(o.xv,{color:"inverse",size:"200",children:t})})]}):(0,f.jsx)(o.xv,{color:"inverse",size:"200",children:s.bt("GIF", "GIF", "Text to represent media is a GIF image", undefined, true)})})}function C({number:e}){return(0,f.jsx)(o.xu,{alignItems:"center",color:"primary",display:"flex",height:24,justifyContent:"center",margin:3,right:!0,position:"absolute",rounding:"circle",top:!0,width:24,"data-test-id":"number-overlay",children:(0,f.jsx)(o.xv,{color:"inverse",size:"200",weight:"bold",children:e})})}const S=20,j={paddingInlineStyle:{__style:{padding:6}},disabledOverlayInlineStyle:{__style:{padding:2,opacity:.5}},marginInlineStyle:{margin:2},thumbnailInlineStyle:{padding:2,cursor:"pointer"}};function T({item:e,onClick:t,selected:i,selectedIndex:s}){const[r,a]=(0,n.useState)(!1),l=(0,n.useCallback)((()=>t(e)),[e,t]),d=(0,n.useCallback)((()=>a(!0)),[a]),c=(0,n.useCallback)((()=>a(!1)),[a]),u=P(e),h=(0,b.Z)(e),p=(0,f.jsxs)(o.xu,{rounding:2,height:153,width:153,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",color:r?"lightWash":"secondary",children:[(0,f.jsx)(A,{item:e}),s>=0&&(0,f.jsx)(C,{number:s+1}),!!h&&(0,f.jsx)(o.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,f.jsx)(E,{color:"transparentDarkGray",type:h})})]}),_=(0,f.jsxs)(o.xu,{paddingY:2,children:[(0,f.jsx)(o.xv,{size:"200",lineClamp:1,children:w(e.name,S)}),(0,f.jsxs)(o.xu,{paddingY:1,children:[!!e.items&&(0,f.jsx)(o.xv,{size:"100",lineClamp:1,children:`${e.items} items`}),!!e.size&&(0,f.jsx)(o.xv,{size:"100",lineClamp:1,children:e.size})]})]});return(0,f.jsx)(I.Z,{onClick:u?l:void 0,rounded:!0,style:j.marginInlineStyle,children:(0,f.jsx)(o.xu,{rounding:2,width:168,dangerouslySetInlineStyle:u?j.paddingInlineStyle:j.disabledOverlayInlineStyle,children:u?(0,f.jsxs)(o.st,{onMouseEnter:d,onMouseLeave:c,children:[(0,f.jsx)(I.Z,{selected:i,rounded:!0,style:j.thumbnailInlineStyle,children:p}),_]}):(0,f.jsxs)(n.Fragment,{children:[p,_]})})})}function D({items:e,selected:t,onClick:i}){return(0,f.jsx)(o.Rk,{renderItem:({data:e})=>{const n=t.map((e=>e.id));return(0,f.jsx)(T,{item:e,onClick:i,selected:n.includes(e.id),selectedIndex:n.indexOf(e.id)},e.id)},columnWidth:168,layout:"uniformRow",gutterWidth:4,items:e,minCols:5})}function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const z=["grid","list"],O={grid:0,list:1},R={__style:{zIndex:1e3}};class L extends n.Component{constructor(...e){super(...e),k(this,"state",{view:this.props.initialView,sort:"newest",query:"",isFlyoutOpen:!1}),k(this,"handleSearch",(({value:e})=>this.setState({query:e}))),k(this,"handleChangeView",(({activeIndex:e})=>{this.setState({view:z[e]})})),k(this,"handleSort",(({value:e})=>this.setState({sort:e}))),k(this,"handleSetRef",(e=>{this._ref=e})),k(this,"handleAvatarClick",(()=>{const{onFlyoutChange:e}=this.props,{isFlyoutOpen:t}=this.state;this.setState({isFlyoutOpen:!t}),e&&e(!t)})),k(this,"handleFlyoutDismiss",(()=>{const{onFlyoutChange:e}=this.props;this.setState({isFlyoutOpen:!1}),e&&e(!1)})),k(this,"options",[{label:this.props.i18n.bt("Newest", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Oldest", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("A to Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Z to A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),k(this,"getSort",(e=>{switch(e){case"oldest":return(e,t)=>m(e,t,!0);case"a-z":return(e,t)=>g(e,t,!0);case"z-a":return(e,t)=>g(e,t,!1);default:return(e,t)=>m(e,t,!1)}}))}render(){const{path:e,items:t,selected:i,name:n,avatarUrl:s,onChangeDirectory:r,onFileClick:a,onLogout:l}=this.props,{view:d,sort:c,query:u,isFlyoutOpen:h}=this.state,p=[...t].sort(this.getSort(c)),g=u.length>0?p.filter((e=>e.name.toLocaleLowerCase().includes(u.toLocaleLowerCase()))):p;return(0,f.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,f.jsxs)(o.xu,{direction:"row",display:"flex",paddingY:2,marginStart:-1,marginEnd:-1,children:[(0,f.jsx)(o.xu,{paddingX:2,ref:this.handleSetRef,children:(0,f.jsx)(o.iP,{onTap:this.handleAvatarClick,rounding:"circle",children:(0,f.jsx)(_.Z,{size:"sm",name:n,src:s})})}),(0,f.jsx)(o.xu,{flex:"grow",paddingX:2,children:(0,f.jsx)(o.Um,{accessibilityLabel:this.props.i18n.bt("Search", "Search", "Accessibility label for the searching through dropbox items and folders", undefined, true),id:"dropbox-search-field",onChange:this.handleSearch,placeholder:this.props.i18n.bt("Search", "Search", "Placeholder for search field", undefined, true),size:"lg",value:u})}),(0,f.jsx)(o.xu,{paddingX:2,children:(0,f.jsx)(o.sY,{items:[(0,f.jsx)(o.JO,{icon:"view-type-default",accessibilityLabel:"Switch to Grid View"}),(0,f.jsx)(o.JO,{icon:"view-type-list",accessibilityLabel:"Switch to List View"})],selectedItemIndex:O[d],onChange:this.handleChangeView})}),(0,f.jsx)(o.xu,{paddingX:2,width:174,children:(0,f.jsx)(o.EI,{id:"asset-picker-dropbox-sort-select-list",onChange:this.handleSort,value:c,children:this.options.map((({label:e,value:t})=>(0,f.jsx)(o.EI.Option,{label:e,value:t},e)))})})]}),(0,f.jsx)(o.xu,{paddingY:2,children:(0,f.jsx)(x,{path:e,rootName:"Dropbox",onChangeDirectory:r})}),(0,f.jsx)(o.xu,{marginStart:-2,marginEnd:-2,width:0,children:(0,f.jsx)(D,{items:g,selected:i,onClick:a})}),h&&(0,f.jsx)(o.mh,{children:(0,f.jsx)(o.xu,{position:"absolute",top:!0,dangerouslySetInlineStyle:R,children:(0,f.jsx)(o.J2,{anchor:this._ref,onDismiss:this.handleFlyoutDismiss,idealDirection:"down",positionRelativeToAnchor:!1,children:(0,f.jsx)(o.xu,{width:"100%",padding:4,children:(0,f.jsxs)(o.xu,{width:"100%",display:"flex",direction:"column",justifyContent:"center",marginTop:-2,marginBottom:-2,children:[(0,f.jsxs)(o.xu,{display:"flex",paddingY:2,alignItems:"center",children:[(0,f.jsx)(_.Z,{size:"sm",name:n,src:s}),(0,f.jsx)(o.xu,{paddingX:2,children:(0,f.jsx)(o.xv,{children:n})})]}),(0,f.jsx)(o.iz,{}),(0,f.jsxs)(o.xu,{paddingY:2,children:[(0,f.jsx)(o.xu,{paddingY:2,children:(0,f.jsx)(o.rU,{href:"https://www.dropbox.com",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,f.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,f.jsx)(o.xv,{weight:"bold",children:this.props.i18n.bt("Go to Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)}),(0,f.jsx)(o.JO,{icon:"visit",color:"default",accessibilityLabel:this.props.i18n.bt("Go to Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)})]})})}),(0,f.jsx)(o.xu,{paddingY:2,children:(0,f.jsx)(o.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>{e(),l()},children:(0,f.jsx)(o.xv,{weight:"bold",children:this.props.i18n.bt("Sign out", "Sign out", "Button to unlink user from their Dropbox account", undefined, true)})})})]})]})})})})})]})}}function M(e){const t=(0,d.ZP)();return(0,f.jsx)(L,{...e,i18n:t})}function B({onClick:e}){return(0,f.jsx)(o.xu,{height:"100%",children:(0,f.jsxs)(o.xu,{height:"100%",alignItems:"center",direction:"column",display:"flex",justifyContent:"center",padding:3,children:[(0,f.jsx)("svg",{width:100,height:100,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{d:"M6 1.75l6 3.844-6 3.844 6 3.844-6 3.844-6-3.844 6-3.844-6-3.844L6 1.75zm12 0l6 3.844-6 3.844-6-3.844 6-3.844zm-6 11.532l6-3.844 6 3.844-6 3.844-6-3.844zm-6 5.124l6-3.843 6 3.843-6 3.844-6-3.844z",fill:"#0061FF"})}),(0,f.jsx)(o.xu,{paddingY:5,children:(0,f.jsx)(o.xv,{weight:"bold",children:"Connect to your Dropbox account"})}),(0,f.jsx)(o.zx,{text:"Sign in",color:"gray",onClick:e})]})})}k(L,"defaultProps",{items:[],selected:[],initialView:"grid",path:"",name:"Dropbox User",avatarUrl:""});var N=i(205992);function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class F extends n.Component{constructor(...e){super(...e),Z(this,"state",{path:"",userName:"",userAvatarURL:"",items:[],isLoading:!1}),Z(this,"_isMounted",!1),Z(this,"startDropboxAuthorization",(()=>{const{socialManager:e,updateSocialNetwork:t,setError:i}=this.props;e.handleConnect("dropbox",!0,{success:()=>{this._isMounted&&(t("dropbox",!0),this.setState({isLoading:!0},this.getUserAccountInfo))},error:()=>{this._isMounted&&i(this.props.i18n.bt("Your Dropbox sign-in didn't work. Give it another try.", "Hmm... your Dropbox sign in didn't work. Give it another try.", "Error message to indicate that there was error happened while signing into Dropbox", undefined, true))}},this.props.i18n)})),Z(this,"listPathContent",(()=>{const{setError:e}=this.props,{path:t}=this.state;(0,l.Z)({url:"/v3/dropbox/folder/",data:{path:t}}).then((e=>{const{entries:t}=e.resource_response.data,i=t.map((e=>e.id)),n=t.reduce(((e,t)=>("file"===t[".tag"]?e[t.id]={id:t.id,type:"dropboxFile",name:t.name,size:c(t.size,!1),lastModified:new Date(t.client_modified),isDownloadable:t.is_downloadable}:e[t.id]={id:t.id,type:"dropboxFolder",name:t.name},e)),{});(0,l.Z)({url:"/v3/dropbox/files/",data:{paths:i,add_fields:["dropboxfile.thumbnail"]}}).then((e=>{e.resource_response.data.forEach((e=>{"success"===e.thumbnail[".tag"]&&(n[e.id]={...n[e.id],thumbnail:e.thumbnail.thumbnail})}));const t=Object.values(n).filter((e=>"dropboxFolder"===e.type)).map((e=>(0,l.Z)({url:"/v3/dropbox/folder/",data:{path:e.id}})));return Promise.all(t)})).then((e=>{e.forEach((e=>{const{data:t}=e.resource_response;n[t.path].items=t.size}))})).then((()=>{if(this._isMounted){const e=Object.values(n);this.setState({items:e},(()=>this.setState({isLoading:!1})))}}))})).catch((t=>{this._isMounted&&this.setState({isLoading:!1},(()=>e(this.props.i18n.bt("Your files from Dropbox didn't upload. Try again.", "Hmm... your files from Dropbox didn't upload. Try again.", "Error message to indicate that there was error happened while retrieving files in user’s Dropbox", undefined, true))))}))})),Z(this,"handleClick",(e=>{const{onSelect:t}=this.props,{path:i}=this.state;"dropboxFolder"===e.type?this.handleChangeDirectory(`${i}/${e.name}`):t(e)})),Z(this,"handleChangeDirectory",(e=>{this.setState({path:e,isLoading:!0},this.listPathContent)})),Z(this,"getUserAccountInfo",(()=>{(0,l.Z)({url:"/v3/dropbox/users/me/"}).then((e=>{if(this._isMounted){const{data:t}=e.resource_response;this.setState({userName:t.name.display_name,userAvatarURL:t.profile_photo_url},this.listPathContent)}})).catch((e=>{const{setError:t}=this.props;t("Hmm... We didn't get your Dropbox account information. Try again.")}))})),Z(this,"handleLogout",(()=>{const{updateSocialNetwork:e}=this.props;e("dropbox",!1),(0,l.Z)({url:"/v3/connect/dropbox/",method:"DELETE"})}))}componentDidMount(){const{viewer:e}=this.props;this._isMounted=!0,e.isAuth&&e.socialNetwork.dropbox.connected&&this.setState({isLoading:!0},this.getUserAccountInfo)}componentWillUnmount(){this._isMounted=!1}render(){const{viewer:e,visible:t,selectedAssets:i,onFlyoutChange:n}=this.props,{items:s,path:r,userName:a,userAvatarURL:l,isLoading:d}=this.state,c=e.isAuth&&e.socialNetwork.dropbox.connected;return(0,f.jsxs)(o.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,children:[(0,f.jsx)(o.xu,{height:"100%",paddingX:3,paddingY:1,children:c?(0,f.jsx)(M,{initialView:"grid",items:s,selected:i,name:a,avatarUrl:l,path:r,onChangeDirectory:this.handleChangeDirectory,onFileClick:this.handleClick,onFlyoutChange:n,onLogout:this.handleLogout}):(0,f.jsx)(B,{onClick:this.startDropboxAuthorization})}),d&&(0,f.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",children:(0,f.jsx)(o.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Dropbox loading spinner", "Dropbox Loading Spinner", "description for loading spinner inside AssetPicker Dropbox tab", undefined, true)})})]})}}function U(e){const t=(0,a.useDispatch)(),i=(0,d.ZP)(),n=(0,u.k)();return(0,f.jsx)(F,{...e,i18n:i,socialManager:n,updateSocialNetwork:(e,i)=>t((0,N.V6)(e,i)),viewer:(0,p.Z)(),requestContext:(0,h.B)()})}var V=i(784590),H=i(717615),G=i(596505),W=i(81226),$=i(299295),q=i(665866),X=i(925797),Y=i(454074),K=i(281139);function J({addAssets:e}){const t=(0,d.ZP)(),i=(0,n.useCallback)((t=>e?e(t):()=>{}),[e]);return(0,f.jsx)(o.xu,{height:160,marginBottom:4,rounding:2,width:160,children:(0,f.jsx)(K.Z,{accept:[...v.xl,...v.ss].join(","),allowMultipleFiles:!0,id:"asset-empty-view-upload",onChange:e=>{const t=Array.from(e.target.files);i(t)},onDrop:e=>{const t=(0,Y.Z)(e.dataTransfer);i(t)},children:()=>(0,f.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,f.jsx)(o.JO,{accessibilityLabel:t.bt("Add assets", "Add assets", "Accessibility label for adding images and videos", undefined, true),icon:"add-circle",size:32})})})})}var Q=i(783879);function ee({height:e,image:t,width:i}){const{height:n,src:s,width:r}=t;return(0,f.jsxs)(o.zd,{rounding:2,height:"100%",width:"100%",children:[(0,f.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(Q.Z,{fillColor:"rgba(0, 0, 0, 0.12)"})}),(0,f.jsx)(o.Ee,{alt:t.name||"",fit:e||i?"cover":void 0,naturalHeight:e||n||1,src:s,naturalWidth:i||r||1})]})}function te({height:e,pin:t,width:i}){const{description:n,images:s,title:r}=t,{height:a,width:l,url:d}=(null==s?void 0:s["474x"])||(null==s?void 0:s["236x"])||{};return(0,f.jsx)(o.zd,{rounding:2,height:e||"100%",width:i||"100%",children:(0,f.jsx)(o.Ee,{alt:r||n||"",fit:e||i?"cover":void 0,naturalHeight:null!=a?a:1,naturalWidth:null!=l?l:1,src:null!=d?d:""})})}function ie({height:e,width:t,video:i}){const{customCoverImg:n}=i;return(0,f.jsx)(o.zd,{height:e,rounding:2,width:t,children:(0,f.jsx)(o.Ee,{alt:n&&n.name||"",fit:e||t?"cover":void 0,naturalHeight:e||n&&n.height||0,src:n&&n.src||"",naturalWidth:t||n&&n.width||0})})}function ne({asset:e,height:t,width:i}){return"localImage"===e.type||"webImage"===e.type?(0,f.jsx)(ee,{image:e,height:t,width:i}):"pin"===e.type?(0,f.jsx)(te,{pin:e,height:t,width:i}):"localVideo"===e.type?(0,f.jsx)(ie,{height:t,width:i,video:e}):"dropboxFile"===e.type||"dropboxFolder"===e.type?(0,f.jsx)(A,{item:e}):null}var oe=i(984268);const se=20;function re({addAssets:e,asset:t,onSelect:i,selected:s,selectedIndex:r}){const a=(0,n.useCallback)((()=>i(t)),[t]);if("blank"===t.type)return(0,f.jsx)(J,{addAssets:e});const l="localVideo"===t.type?1e3*t.duration:void 0,{video_list:d}="pin"===t.type&&t.videos?t.videos:{},{duration:c}=d&&d.V_720P||{},u=(0,b.Z)(t),h=l||c?(0,W.Z)(l||c||0):void 0,p=q.Z.enabled("shop_the_pin")&&"pin"===t.type,_=p?(0,oe.mt)(t):"",g=p?(0,oe.BE)(t):"";return(0,f.jsxs)(o.xu,{"data-group-id":"asset-picker-view-grid-group-item",column:12,children:[(0,f.jsxs)(I.Z,{onClick:a,rounded:!0,selected:s,children:[(0,f.jsxs)(o.xu,{position:"relative","data-test-id":"asset-picker-view-item",children:[(0,f.jsx)(ne,{asset:t}),!!u&&(0,f.jsx)(o.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,f.jsx)(E,{color:"transparentDarkGray",duration:h,type:u})})]}),r>=0&&(0,f.jsx)(C,{number:r+1})]}),p&&(0,f.jsxs)(o.xu,{children:[!!_&&(0,f.jsx)(o.xu,{children:(0,f.jsx)(o.xu,{paddingY:1,display:"flex",children:(0,f.jsx)(X.Z,{text:_,icon:"tag"})})}),!!g&&(0,f.jsx)(o.xu,{width:$.MN,children:(0,f.jsx)(o.xv,{overflow:"breakWord",size:"200",weight:"bold",children:g})})]}),!!t.name&&(0,f.jsx)(o.xu,{paddingY:1,title:t.name,children:(0,f.jsx)(o.xv,{size:"200",children:w(String(t.name),se)})})]})}function ae(e){const{assets:t,loadItems:i,scrollContainer:n}=e;return(0,f.jsx)(o.Rk,{renderItem:({data:t,itemIdx:i})=>{const{addAssets:n,onSelect:o,selectedAssets:s,showAddAssetButton:r=!0}=e,a=r&&0===i;return(0,f.jsx)(re,{addAssets:n,asset:a?{id:"pinbuilder_asset_picker_blank",type:"blank"}:t,onSelect:a?()=>{}:o,selected:!a&&(!!s.includes(t)||!!s.find((e=>t.id===e.id))),selectedIndex:a?-1:(()=>{const e=s.indexOf(t);return e>-1?e:s.findIndex((e=>e.id===t.id))})()})},columnWidth:158,gutterWidth:16,items:t,loadItems:i,scrollContainer:n,minCols:5})}function le({onSelect:e,pins:t,selectedAssets:i,shouldShowProductsOnly:s,searchFilterText:r,addAssets:a}){const l=(0,d.ZP)(),[c,u]=(0,n.useState)(!1);(0,n.useEffect)((()=>u(t&&!t.isLoaded)));const h=s?oe.VX:oe.Bc,p=t&&t.data&&t.data.reduce(((e,t)=>(t&&"pin"===t.type&&h(t)&&(0,oe.ir)(t,r)&&e.push(t),e)),[])||[];return(0,f.jsxs)(o.xu,{alignItems:"center",display:"flex","data-test-id":"asset-picker-pins-pane",height:c?"100%":void 0,justifyContent:"center",children:[(0,f.jsx)(o.$j,{accessibilityLabel:l.bt("Loading...", "Loading...", "Loading", undefined, true),show:c}),t&&t.data&&t.data.length>0&&(0,f.jsx)(ae,{addAssets:a,assets:p,onSelect:e,loadItems:t.fetchMore,scrollContainer:()=>window,selectedAssets:i,showAddAssetButton:!1})]})}function de({addAssets:e,onSelect:t,searchFilterText:i,selectedAssets:n,shouldShowProductsOnly:o,username:s}){const r=(0,V.Z)({name:"UserPinsResource",options:{field_set_key:"detailed",username:s,prepend:!1,include_protected_pins:!0,limit:1e3,page_size:150}});return(0,f.jsx)(le,{addAssets:e,onSelect:t,pins:r,searchFilterText:i,selectedAssets:n,shouldShowProductsOnly:o})}function ce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ue={PRODUCTS:"PRODUCTS",ALL_PINS:"ALL_PINS"};class he extends n.PureComponent{constructor(...e){super(...e),ce(this,"state",{shouldShowProductsOnly:!0,searchText:"",showDropdownFlyout:!1,currentSelection:ue.PRODUCTS}),ce(this,"setContainerRef",(e=>{this.containerRef=e})),ce(this,"handleHideDropdownFlyout",(e=>{e.target instanceof HTMLElement&&this.setState((t=>({showDropdownFlyout:!!(this.containerRef&&e.target instanceof HTMLElement&&this.containerRef.contains(e.target))&&!t.showDropdownFlyout})))})),ce(this,"dropdownOnChange",(e=>{e&&this.setState({shouldShowProductsOnly:e.value===ue.PRODUCTS,showDropdownFlyout:!1,currentSelection:e.value})})),ce(this,"handleSearchQueryUpdates",(e=>{this.setState({searchText:e.value})})),ce(this,"handleAssetSelect",(e=>{const{onSelect:t}=this.props;t(e)}))}componentDidMount(){document.addEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}render(){const{selectedAssets:e,visible:t,viewer:i,user:{data:n}}=this.props,{shouldShowProductsOnly:s,searchText:r,showDropdownFlyout:a,currentSelection:l}=this.state,d=(c=this.props.i18n,new Map([[ue.PRODUCTS,c.bt("Product Pins", "Product Pins", "Dropdown filter to show products only", undefined, true)],[ue.ALL_PINS,c.bt("All Pins", "All Pins", "Dropdown filter to show all pins", undefined, true)]]));var c;let u=(n?n.username:i&&i.isAuth&&i.username)||"";return this.props.orbacActingAs&&this.props.orbacActingAs.user&&this.props.orbacActingAs.user.username&&(u=this.props.orbacActingAs.user.username),(0,f.jsxs)(o.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,"data-test-id":"asset-picker-tagging-pane",children:[(0,f.jsx)(o.xu,{marginStart:4,children:(0,f.jsx)(o.X6,{size:"500",children:this.props.i18n.bt("Use your Pins", "Use your Pins", "Select products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,f.jsx)(o.xu,{marginStart:4,marginTop:3,children:(0,f.jsx)(o.xv,{children:this.props.i18n.bt("Keep it simple – use your existing Pins to add products to your image. Add products in the order you want people to see them.", "Keep it simple—use your existing Pins to add products to your image. Add products in the order you want people to see them.", "Description of the functionalities in the pins picker tab", undefined, true)})}),(0,f.jsxs)(o.xu,{margin:4,alignItems:"center",direction:"row",display:"flex",children:[(0,f.jsx)(o.xu,{rounding:2,column:10,children:(0,f.jsx)(o.nv,{id:"search",onChange:this.handleSearchQueryUpdates,placeholder:this.props.i18n.bt("Search Pin title or description", "Search Pin title or description", "Placeholder search bar text to search the pins", undefined, true),size:"lg",type:"text",value:r})}),(0,f.jsx)(o.xu,{ref:this.setContainerRef,children:(0,f.jsx)(o.xu,{column:3,rounding:2,marginStart:4,"data-test-id":"pins-filter-dropdown",children:(0,f.jsx)(G.Z,{onOpen:this.dropdownOnChange,onClose:this.dropdownOnChange,isOpen:a,onChange:this.dropdownOnChange,options:Object.keys(ue).map((e=>ue[e])).map((e=>({label:d.get(e),value:e}))),value:{label:d.get(l),value:{currentSelection:l}}})})})]}),(0,f.jsx)(o.xu,{children:t&&(0,f.jsx)(de,{addAssets:void 0,onSelect:this.handleAssetSelect,selectedAssets:e,username:u,shouldShowProductsOnly:s,searchFilterText:r})})]})}}function pe(e){const t=(0,a.useSelector)((({advertiser:e})=>e)),i=(0,d.ZP)(),n=(0,p.Z)(),o=(0,H.Z)(),s=(0,V.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!t&&t.owner_user_id||n.isAuth&&n.id||""}});return(0,f.jsx)(he,{...e,advertiser:t,i18n:i,user:s,viewer:n,orbacActingAs:o})}var _e=i(66699),ge=i(966113),me=i(77891),fe=i(916655),xe=i(407043);function be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ye={__style:{zIndex:$.v9}};class ve extends n.Component{constructor(...e){super(...e),be(this,"state",{sort:"newest",query:""}),be(this,"handleSearch",(e=>{this.props.logContextEvent({event_type:7472,component:13392,element:11270}),this.setState({query:e.value})})),be(this,"getSort",(e=>{switch(e){case"oldest":return()=>-1;case"a-z":return(e,t)=>{const i=e.name.toLocaleLowerCase(),n=t.name.toLocaleLowerCase();return i<n?-1:i>n?1:0};case"z-a":return(e,t)=>{const i=e.name.toLocaleLowerCase(),n=t.name.toLocaleLowerCase();return i>n?-1:i<n?1:0};default:return()=>0}})),be(this,"handleSort",(({value:e})=>{this.props.logContextEvent({event_type:3828,component:13392,element:11273}),this.setState({sort:e})})),be(this,"options",[{label:this.props.i18n.bt("Newest", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Oldest", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("A to Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Z to A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),be(this,"handleDrop",(e=>{const{addAssets:t,logContextEvent:i}=this.props,n=(0,Y.Z)(e.dataTransfer);i({event_type:3502,component:13392,element:11275}),t(n)})),be(this,"handleSearchFieldFocus",(()=>{this.props.logContextEvent({event_type:101,component:13392,element:11270})}))}render(){const{addAssets:e,assets:t,onSelect:i,selectedAssets:n}=this.props,{sort:s,query:r}=this.state,a=[...t].sort(this.getSort(s)),l=r.length>0?a.filter((e=>e.name.toLocaleLowerCase().includes(r.toLocaleLowerCase()))):a;return(0,f.jsxs)(o.xu,{"data-test-id":"asset-picker-uploaded-pane",direction:"column",display:"flex",height:"100%",children:[(0,f.jsxs)(o.xu,{"data-test-id":"uploaded-pane-filter-box",display:"flex",padding:2,children:[(0,f.jsx)(o.xu,{flex:"grow",paddingX:1,children:(0,f.jsx)(o.Um,{accessibilityLabel:this.props.i18n.bt("Search", "Search", "Accessibility label for the searching through uploaded images and videos", undefined, true),id:"asset-search-field",onChange:this.handleSearch,onFocus:this.handleSearchFieldFocus,placeholder:this.props.i18n.bt("Search", "Search", "Placeholder for search field", undefined, true),size:"lg",value:r})}),(0,f.jsx)(o.xu,{paddingX:1,width:168,children:(0,f.jsx)(o.EI,{id:"asset-picker-sort-select-list",onChange:this.handleSort,value:s,children:this.options.map((({label:e,value:t})=>(0,f.jsx)(o.EI.Option,{label:e,value:t},e)))})})]}),(0,f.jsx)(o.xu,{height:"100%",position:"relative",width:"100%",children:(0,f.jsx)(K.Z,{accept:[...v.xl,...v.ss].join(","),allowMultipleFiles:!0,color:"white",id:"asset-picker-upload-pane",onDrop:this.handleDrop,children:t=>(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:t?void 0:ye,paddingY:2,position:"relative",children:(0,f.jsx)(ae,{addAssets:e,assets:[{id:"pinbuilder_asset_picker_blank",type:"blank"},...l],onSelect:i,selectedAssets:n})})})})]})}}function Pe(e){const{logContextEvent:t}=(0,xe.v)(),i=(0,d.ZP)();return(0,f.jsx)(ve,{...e,i18n:i,logContextEvent:t})}var we=i(172045),Ie=i(69183),Ae=i(623320);var Ee=i(474394);function Ce({onSelect:e,setLoading:t,setError:i,selectedAssets:s,visible:l}){const c=(0,d.ZP)(),u=(0,r.Z)(),[h,p]=(0,n.useState)(""),_=(0,a.useDispatch)(),g=(0,a.useSelector)((({pinbuilder:e})=>e.assets)),m=t=>(i(""),p(""),(0,me.Z)({i18n:c,ideaPinRenamingEnabled:u,files:t,options:{allowVideo:!0}}).then((t=>{const n=t.reduce(((e,t)=>{var i;return"localVideo"===t.type?e.push((i=t,(0,Ie.v)(i,0).then((e=>({...i,customCoverImg:{id:(0,we.Z)(),fileSrc:i.fileSrc,name:i.name,size:(0,Ae.Mi)(e).size,src:e,width:i.width,height:i.height,type:"localImage"}}))))):"localImage"!==t.type&&"error"!==t.type||e.push(t),e}),[]);return Promise.all(n).then((t=>{const n=t.reduce(((e,t)=>("error"===t.type&&e.push(t),e)),[]),s=t.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);n.length>0&&((g.length>0||s.length>0)&&i((0,_e.Z)(c.nbt(["Sorry, {{numOfErrors}} file could not be uploaded.", "Sorry, {{numOfErrors}} files could not be uploaded."], n.length, "Error message saying how many files could not be uploaded", true),{numOfErrors:n.length}),null,(0,f.jsx)(o.rU,{target:"blank",href:ge.Cm,onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,f.jsx)(o.zx,{color:"transparent",text:c.bt("Learn more", "Learn more", "Learn more about error", undefined, true)})})),p(n[0].message)),s.forEach((t=>{(e=>{_((0,Ee.addPinBuilderAsset)(e))})(t),e(t)}))}))})));return(0,f.jsx)(o.xu,{column:12,height:"100%",display:l?"block":"none",children:g.length>0?(0,f.jsx)(o.xu,{height:"100%",paddingY:1,paddingX:3,children:(0,f.jsx)(Pe,{addAssets:m,assets:g,onSelect:e,selectedAssets:s})}):(0,f.jsx)(o.xu,{height:"100%",padding:3,children:(0,f.jsx)(fe.Z,{addAssets:m,errorMessage:h})})})}var Se=i(121151);function je(e){switch(e){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";case"mp4":return"video/mp4";case"m4v":return"video/x-m4v";case"mov":return"video/quicktime";default:return""}}var Te=i(123463),De=i(566101),ke=i(231947);function ze(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Oe={border:"none",bottom:0,borderRadius:"0px 16px 16px 0px",height:"100%",width:"40px"};class Re extends n.Component{constructor(...e){super(...e),ze(this,"state",{value:this.props.initialValue||""}),ze(this,"handleOnChange",(({value:e})=>{this.setState({value:e})})),ze(this,"handleOnSubmit",(e=>{const{onSubmit:t}=this.props,{value:i}=this.state;e.preventDefault(),t({event:e,value:i})}))}render(){const{id:e,placeholder:t,type:i}=this.props,{value:n}=this.state;return(0,f.jsx)(o.xu,{color:"secondary",rounding:4,children:(0,f.jsx)("form",{onSubmit:this.handleOnSubmit,noValidate:!0,children:(0,f.jsxs)(o.xu,{marginStart:-1,marginEnd:-1,display:"flex",children:[(0,f.jsx)(o.xu,{position:"relative",width:"100%",paddingX:1,flex:"grow",children:(0,f.jsx)(o.nv,{id:e,onChange:this.handleOnChange,placeholder:t,size:"lg",type:i,value:n})}),(0,f.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,f.jsx)("button",{style:Oe,type:"submit",right:"",children:(0,f.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Submit", "Submit", "Icon Button for submitting a text field value", undefined, true),icon:"arrow-forward",inline:!0})})})]})})})}}function Le(e){const t=(0,d.ZP)();return(0,f.jsx)(Re,{...e,i18n:t})}function Me({itemId:e,onSelect:t,onSubmit:i,selectedAssets:n}){const s=(0,d.ZP)(),r=(0,h.B)(),a=(0,H.Z)(),l=(0,p.Z)(),c=(0,ke.lJ)(l,a)||l.isAuth&&l.id,{data:u,isLoaded:_}=(0,V.Z)({name:"ProductGroupItemIdPinResource",options:{merchantId:(0,ke._P)(r,l,a),...c!==l.id?{orbacSubjectId:c}:{},itemId:e,filters:{1:[e]}}});if(!_)return(0,f.jsx)(o.$j,{accessibilityLabel:s.bt("Loading...", "Loading...", "Loading", undefined, true),show:!0});const g=(null!=u?u:[]).reduce(((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){const e=t.rich_metadata.url||t.rich_metadata.id;(0,De.Z)({url:e||""})&&(t.link=e)}e.push(t)}return e}),[]);return(0,f.jsxs)(o.xu,{children:[(0,f.jsx)(o.xu,{paddingX:3,marginBottom:4,children:(0,f.jsx)(Le,{id:"asset-picker-itemid",initialValue:e,onSubmit:i,placeholder:s.bt("Enter product item ID", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),g.length>0?(0,f.jsx)(ae,{assets:g,onSelect:t,selectedAssets:n,showAddAssetButton:!1}):(0,f.jsx)(o.xu,{padding:5,maxWidth:468,children:(0,f.jsx)(o.xv,{align:"center",color:"error",size:"200",children:s.bt("Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "Error message when no pins are returned after searching via catalogs item ID", undefined, true)})})]})}function Be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ne extends n.Component{constructor(...e){super(...e),Be(this,"state",{itemId:"",validationError:null}),Be(this,"handleOnSubmit",(({value:e})=>{const t=e.trim().toLowerCase();t?(this.props.logContextEvent({event_type:7472,component:13392,element:11451}),this.setState({itemId:t,validationError:""})):this.setState({validationError:this.props.i18n.bt("There’s no Pin for that. Correct any item ID formatting errors and try again.", "Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "AssetPickerCatalogTab.NoPinError", undefined, true)})}))}render(){const{onSelect:e,selectedAssets:t,visible:i}=this.props,{itemId:n,validationError:s}=this.state;return(0,f.jsx)(o.xu,{column:12,height:"100%",display:i?"block":"none",padding:3,children:n.length>0?(0,f.jsx)(Me,{itemId:n,onSubmit:this.handleOnSubmit,onSelect:e,selectedAssets:t}):(0,f.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,f.jsxs)(o.xu,{marginBottom:3,children:[(0,f.jsx)(o.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Add a product with its item ID", "Add a product with its item ID", "Prompt for adding a product from a catalog using an item ID", undefined, true)}),(0,f.jsx)(o.xv,{align:"center",children:this.props.i18n.bt("Product item IDs can be found in your data source", "Product item IDs can be found in your data source", "Helper text for where to find a product's item ID in a catalog", undefined, true)})]}),(0,f.jsx)(o.xu,{width:486,children:(0,f.jsx)(Le,{id:"asset-picker-itemid",onSubmit:this.handleOnSubmit,placeholder:this.props.i18n.bt("Enter product item ID", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),s&&(0,f.jsx)(o.xu,{padding:5,maxWidth:468,children:(0,f.jsx)(o.xv,{align:"center",color:"error",size:"200",children:s})})]})})}}function Ze(e){const{logContextEvent:t}=(0,xe.v)(),i=(0,d.ZP)();return(0,f.jsx)(Ne,{...e,i18n:i,logContextEvent:t})}var Fe=i(134906);function Ue({onSubmit:e,title:t,description:i,validationError:n}){const s=(0,d.ZP)();return(0,f.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,f.jsxs)(o.xu,{marginBottom:3,children:[(0,f.jsx)(o.xv,{align:"center",weight:"bold",children:t||s.bt("Upload an image from your website", "Upload an image from your website", "Prompt for scraping media from site", undefined, true)}),i&&(0,f.jsx)(o.xv,{children:i})]}),(0,f.jsx)(o.xu,{width:486,children:(0,f.jsx)(Le,{id:"asset-picker-url",onSubmit:e,placeholder:s.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),n&&(0,f.jsx)(o.xu,{padding:5,maxWidth:468,children:(0,f.jsx)(o.xv,{align:"center",color:"error",size:"200",children:n})})]})}var Ve=i(122097);var He=i(954931),Ge=i(131555);function We({allowPinFetch:e,onSelect:t,onSubmit:i,selectedAssets:n,url:s,validationError:r}){const a=(0,d.ZP)(),l=(0,He.Z)(s)?/\/pin\/([\w-]+)\/?$/.exec(s):null;return(0,f.jsx)(o.xu,{height:"100%","data-test-id":"asset-picker-scraping-pane",children:l&&e?(0,f.jsx)(Ge.Z,{pinId:l[1],fieldSetKey:"images_only_item",children:({pin:e,error:r,loading:l})=>l&&!r?(0,f.jsxs)(o.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,f.jsx)(o.$j,{accessibilityLabel:a.bt("Loading", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,f.jsx)(o.xu,{padding:2,children:(0,f.jsx)(o.xv,{children:a.bt("Loading image", "Loading image", "Loading message for image loading", undefined, true)})})]}):(0,f.jsxs)(o.xu,{children:[(0,f.jsx)(o.xu,{paddingX:3,marginBottom:4,children:(0,f.jsx)(Le,{id:"asset-picker-url",initialValue:s,onSubmit:i,placeholder:a.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),r?(0,f.jsx)(o.xu,{padding:5,maxWidth:468,children:(0,f.jsx)(o.xv,{align:"center",color:"error",size:"200",children:a.bt("That link didn’t work. Try entering it again or use a different link.", "Hmm, that link didn’t work. Try entering it again or use a different link.", "Error message when scraping a link does not work.", undefined, true)})}):(0,f.jsx)(ae,{assets:e?[e]:[],onSelect:t,selectedAssets:n,showAddAssetButton:!1})]})}):(0,f.jsx)(Ve.Z,{source:"product_tags",url:s,children:({images:e,loading:l,error:d})=>!l||r||d?(e.forEach((e=>Object.assign(e,{id:e.url,src:e.url,type:"webImage",sourceURL:s}))),(0,f.jsxs)(o.xu,{children:[(0,f.jsx)(o.xu,{paddingX:3,marginBottom:4,children:(0,f.jsx)(Le,{id:"asset-picker-url",initialValue:s,onSubmit:i,placeholder:a.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),r||d?(0,f.jsx)(o.xu,{padding:5,maxWidth:468,"data-test-id":"scrape-validation-error",children:(0,f.jsx)(o.xv,{align:"center",color:"error",size:"200",children:r||d})}):(0,f.jsx)(ae,{assets:e,onSelect:t,selectedAssets:n,showAddAssetButton:!1})]})):(0,f.jsxs)(o.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,f.jsx)(o.$j,{accessibilityLabel:a.bt("Loading", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,f.jsx)(o.xu,{padding:2,children:(0,f.jsx)(o.xv,{children:a.bt("Loading images", "Loading images", "Loading message for image loading", undefined, true)})})]})})})}function $e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class qe extends n.Component{constructor(...e){super(...e),$e(this,"state",{url:"",validationError:null}),$e(this,"validateUrl",(e=>{const{usedUrls:t}=this.props;return this.validateWebsiteUrl(e)||(t.includes(e)?this.props.i18n.bt("You can't tag from the same page twice.", "You can't tag from the same page twice.", "AssetPickerScrapeTab.repeatedURL", undefined, true):null)})),$e(this,"validateWebsiteUrl",(e=>{const t=this.props.i18n.bt("Please enter a valid URL", "Please enter a valid URL", "AssetPickerScrapeTab.invalidURL", undefined, true);if(!e)return t;const i=(0,Fe.Jx)({message:t});return(0,Fe.a3)(e,[i])})),$e(this,"handleOnSubmit",(({value:e})=>{this.props.logContextEvent({event_type:7472,component:13392,element:11267,aux_data:{url:e}});const t=e.trim(),i=this.validateUrl(t);this.setState({url:t,validationError:i})})),$e(this,"handleOnSelect",(e=>{const{resetOnSelect:t=!1,onSelect:i}=this.props;t&&this.setState({url:""}),i(e)}))}render(){const{selectedAssets:e,visible:t,title:i,description:n}=this.props,{url:s,validationError:r}=this.state;return(0,f.jsx)(o.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,children:s.length>0?(0,f.jsx)(We,{onSelect:this.handleOnSelect,allowPinFetch:!0,onSubmit:this.handleOnSubmit,selectedAssets:e,url:s,validationError:r}):(0,f.jsx)(Ue,{onSubmit:this.handleOnSubmit,title:i,description:n,validationError:r})})}}function Xe(e){const{logContextEvent:t}=(0,xe.v)(),i=(0,d.ZP)();return(0,f.jsx)(qe,{...e,i18n:i,logContextEvent:t})}var Ye=i(725108),Ke=i(265696);function Je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Qe=({condition:e,children:t})=>e?(0,f.jsx)(o.xu,{position:"absolute",zIndex:Se.b7,children:t}):t;class et extends n.Component{constructor(e){super(e),Je(this,"state",{activeTabIndex:this.props.initialTab&&this.props.shownTabs?this.props.shownTabs.indexOf(this.props.initialTab):0,assets:this.props.selectedPins||[],isLoading:!1,isDropboxFlyoutOpen:!1,error:null,usedUrls:[]}),Je(this,"downloadDropboxAssets",(()=>{const{assets:e}=this.state,{i18n:t,ideaPinRenamingEnabled:i}=this.props;return Promise.all(e.map((e=>"dropboxFile"===e.type?(0,l.Z)({url:"/v3/dropbox/files/",data:{paths:[e.id],add_fields:["dropboxfile.file_base64"]}}).then((n=>{const o=function(e,t="",i=512){const n=atob(e),o=[];for(let s=0;s<n.length;s+=i){const e=n.slice(s,s+i),t=new Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);const r=new Uint8Array(t);o.push(r)}return new Blob(o,{type:t})}(n.resource_response.data[0].file_base64);return(0,Te.Z)({i18n:t,ideaPinRenamingEnabled:i,file:new File([o],e.name,{type:je(y(e.name)),lastModified:e.lastModified.getTime()}),options:{allowVideo:!0}})})).catch((()=>null)):e)))})),Je(this,"handleChangeTab",(({activeTabIndex:e,event:t})=>{t.preventDefault(),this.setState({activeTabIndex:e})})),Je(this,"handleAssetSelect",(e=>{this.props.logContextEvent({event_type:101,component:13392,element:11272});const{maxAssetsToSelect:t}=this.props,{assets:i,usedUrls:n}=this.state;if(e.id)if(i.some((t=>t.id===e.id)))this.setState({assets:i.filter((t=>t.id!==e.id)),usedUrls:n.filter((t=>t!==this.getUrl(e)))});else if(t<=0||i.length<t){const t=this.getUrl(e);this.setState({assets:[...i,e],usedUrls:t?[...n,t]:n})}})),Je(this,"getUrl",(e=>{switch(e.type){case"pin":return e.link;case"webImage":return e.sourceURL;default:return null}})),Je(this,"handleSecondaryAction",(()=>{const{onSecondaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:n}=this.state;e&&(i({event_type:101,component:13392,element:11271,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),this.setState({isLoading:!0},(()=>{this.downloadDropboxAssets().then((i=>{if(i){const t=i.filter((e=>!!e&&"error"!==e.type));t.length>0&&e(t)}t()}))})))})),Je(this,"handlePrimaryAction",(()=>{const{onPrimaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:n}=this.state;i({event_type:101,component:13392,element:11269,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),this.setState({isLoading:!0},(()=>{this.downloadDropboxAssets().then((i=>{if(i){const t=i.filter((e=>!!e&&"error"!==e.type));t.length>0&&e(t)}t()}))}))})),Je(this,"handleRemoveAsset",(e=>{if(this.props.logContextEvent({event_type:101,component:13392,element:11274}),e.id){const t=this.getUrl(e),i=t?[...this.state.usedUrls,t]:this.state.usedUrls;this.setState((n=>({assets:n.assets.some((t=>t.id===e.id))?n.assets.filter((t=>t.id!==e.id)):[...n.assets,e],usedUrls:n.usedUrls.some((e=>e===t))?n.usedUrls.filter((e=>e!==t)):i})))}})),Je(this,"removeError",(()=>{this.props.logContextEvent({event_type:101,component:13392,element:11264}),this.setState({error:null})})),Je(this,"handleSetLoading",((e,t)=>{t?this.setState({isLoading:e},t):this.setState({isLoading:e})})),Je(this,"handleSetError",((e,t,i)=>{if(e||t||i){const n=(0,f.jsx)(o.zx,{color:"white",onClick:this.removeError,text:this.props.i18n.bt("Got it", "Got it", "Button text to indicate a user understands action", undefined, true)});this.setState({error:(0,f.jsx)(Ye.Z,{errorMessage:e,primaryAction:t||n,secondaryAction:i})})}else this.setState({error:null})})),Je(this,"handleDismiss",(()=>{const{onDismiss:e}=this.props,{isDropboxFlyoutOpen:t}=this.state;t||e()})),Je(this,"handleDropboxFlyoutChange",(e=>this.setState({isDropboxFlyoutOpen:e}))),Je(this,"defaultPrimaryText",(e=>(0,_e.Z)(this.props.i18n.nbt(["Create {{ numPins }} Pin", "Create {{ numPins }} Pins"], e, "Button to create Pins out of selected assets", true),{numPins:e}))),(0,Ke.Z)()}componentDidMount(){const e=this.props.selectedPins?this.props.selectedPins.map((e=>this.getUrl(e)||"")).filter((e=>e.length>0)):[];this.setState({usedUrls:e})}render(){const{closeOnOutsideClick:e,isSecondaryButtonDisabled:t,onSecondaryAction:i,primaryButtonText:r=this.defaultPrimaryText,pinItemId:a,resetScrapeOnSelect:l,scrapeDescription:d,scrapeTitle:c,secondaryButtonText:u,useModalWithNoLayer:h=!1}=this.props,p=this.props.shownTabs?this.props.shownTabs:["upload","scrape"],{activeTabIndex:_,assets:g,usedUrls:m,isLoading:x,error:y}=this.state,v="string"==typeof r?r:r(g.length),P=u||this.props.i18n.bt("Create carousel Pin", "Create carousel Pin", "Button to create carousel Pin out of selected assets", undefined, true),w=[];p.includes("product_pins")&&w.push({text:this.props.i18n.bt("Your Pins", "Your Pins", "Tab on asset picker to select from user's product pins.", undefined, true),href:"#"}),p.includes("upload")&&w.push({text:this.props.i18n.bt("Assets", "Assets", "Tab on asset picker to select from uploaded assets", undefined, true),href:"#"}),p.includes("scrape")&&w.push({text:this.props.i18n.bt("URL", "URL", "Tab on asset picker to select from scraped URL", undefined, true),href:"#"}),p.includes("dropbox")&&w.push({text:this.props.i18n.bt("Dropbox", "Dropbox", "Tab on asset picker to select from Dropbox", undefined, true),href:"#"}),p.includes("catalog")&&w.push({text:this.props.i18n.bt("Catalogue", "Catalog", "Tab on asset picker to upload pin from product catalog", undefined, true),href:"#"});const I=h?o.u_:Se.ZP;return(0,f.jsx)(Qe,{condition:!!h,children:(0,f.jsx)(I,{accessibilityModalLabel:this.props.i18n.bt("Select assets", "Select assets", "Label to describe the asset picker", undefined, true),closeOnOutsideClick:e,heading:(0,f.jsx)(o.xu,{padding:4,display:"flex",alignItems:"center",justifyContent:"center","data-test-id":"tabs-header-list",children:(0,f.jsx)(o.mQ,{tabs:w,activeTabIndex:_,onChange:this.handleChangeTab})}),onDismiss:this.handleDismiss,footer:(0,f.jsxs)(o.xu,{display:"flex",marginBottom:-4,children:[(0,f.jsx)(o.xu,{display:"flex",flex:"grow",height:"100%",marginEnd:8,children:(0,f.jsx)(o.xu,{width:"100%",marginTop:-4,children:(0,f.jsx)(s.Z,{showArrowsOnlyOnHover:!1,children:(0,f.jsx)(o.xu,{display:"flex",height:48,paddingY:1,"data-group-id":"asset-picker-thumbnails-carousel-group",children:g.map(((e,t)=>{const i=(0,b.Z)(e);return(0,f.jsxs)(o.xu,{"data-test-id":"asset-picker-thumbnail",display:"flex",flex:"none",height:44,padding:1,position:"relative",width:44,children:[(0,f.jsx)(ne,{asset:e,height:40,width:40}),(0,f.jsx)(o.xu,{color:"tertiary",height:16,marginEnd:-1,marginTop:-1,padding:1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,f.jsx)(o.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>this.handleRemoveAsset(e),children:(0,f.jsx)(o.JO,{color:"inverse",icon:"cancel",size:8,accessibilityLabel:this.props.i18n.bt("Remove asset", "Remove Asset", "Icon button to remove selected media file", undefined, true)})})}),!!i&&(0,f.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",children:(0,f.jsx)(E,{type:i})})]},`asset-picker-thumbnail-${t}`)}))})})})}),(0,f.jsxs)(o.xu,{display:"flex",flex:"none",margin:-3,marginTop:1,children:[!!i&&(0,f.jsx)(o.xu,{"data-test-id":"asset-picker-secondary-action-button",paddingX:1,children:(0,f.jsx)(o.zx,{color:"gray",disabled:!!t&&(g.length<2||g.length>$.dS||g.some((e=>"localImage"!==e.type))),onClick:this.handleSecondaryAction,text:P})}),(0,f.jsx)(o.xu,{"data-test-id":"asset-picker-primary-action-button",paddingX:1,children:(0,f.jsx)(o.zx,{color:"red",disabled:0===g.length,onClick:this.handlePrimaryAction,text:v})})]})]}),size:912,children:(0,f.jsxs)(n.Fragment,{children:[(0,f.jsxs)(o.xu,{height:460,overflow:"auto",children:[!!y&&y,p.includes("upload")&&(0,f.jsx)(Ce,{onSelect:this.handleAssetSelect,setError:this.handleSetError,setLoading:this.handleSetLoading,selectedAssets:g,visible:_===p.indexOf("upload")}),p.includes("scrape")&&(0,f.jsx)(Xe,{onSelect:this.handleAssetSelect,selectedAssets:g,visible:_===p.indexOf("scrape"),title:c,description:d,resetOnSelect:l,usedUrls:m}),p.includes("dropbox")&&(0,f.jsx)(U,{onSelect:this.handleAssetSelect,setError:this.handleSetError,selectedAssets:g,visible:_===p.indexOf("dropbox"),onFlyoutChange:this.handleDropboxFlyoutChange}),p.includes("product_pins")&&(0,f.jsx)(pe,{onSelect:this.handleAssetSelect,selectedAssets:g,visible:_===p.indexOf("product_pins"),pinItemId:a}),p.includes("catalog")&&(0,f.jsx)(Ze,{onSelect:this.handleAssetSelect,selectedAssets:g,visible:_===p.indexOf("catalog")})]}),x&&(0,f.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",children:(0,f.jsx)(o.$j,{show:!0,accessibilityLabel:"Dropbox Loading Spinner"})})]})})})}}function tt(e){const t=(0,d.ZP)(),i=(0,r.Z)(),{logContextEvent:n}=(0,xe.v)();return(0,f.jsx)(et,{...e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n})}Je(et,"defaultProps",{shownTabs:["upload","scrape"],maxAssetsToSelect:0})},519325:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(702664),o=i(883119),s=i(510476),r=i(898781),a=i(349700),l=i(785893);const d=105;function c(){return[...new Array(8)].map(((e,t)=>(0,l.jsx)(o.xu,{borderStyle:"sm",height:d,marginEnd:3===t||7===t?0:2,marginTop:t>=4?4:0,rounding:3,width:d},t)))}var u=i(490072);const h=445;function p(e){const t=(0,r.ZP)(),{pinTagId:i,taggedObjects:d}=e,p=(0,n.useSelector)((t=>(0,u.Xe)(t,e))),_=d.length>0,g=(0,a.nk)(t.bt("{{ count }}/8", "{{ count }}/8", "pinbuilder.taggedProducts.count", undefined, true),{count:d.length}).join(""),m="collectionsTag"===p;return(0,l.jsxs)(o.xu,{column:12,"data-test-id":"stl-tagged-items-grid",children:[(!i||i&&0===d.length)&&m&&(0,l.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:(0,l.jsx)(c,{})}),!m&&(0,l.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(o.xv,{size:"100",children:t.bt("Tag up to 8 products in the scene", "Tag up to 8 products in the scene", "pinbuilder.taggedProducts.limit", undefined, true)}),(0,l.jsx)(o.xv,{size:"100",children:g})]}),(0,l.jsx)(o.xu,{marginTop:_?10:0,marginBottom:_?10:void 0,display:"flex",wrap:!0,width:h,children:!!i&&_&&d.map(((e,t)=>(0,l.jsx)(o.xu,{children:(0,l.jsx)(s.Z,{index:t,pinTagId:e.pinTagId,size:"md",status:e.status,taggedObjectId:e.taggedObjectId})},e.taggedObjectId)))})]})}},146173:(e,t,i)=>{i.r(t),i.d(t,{PinBuilderEditor:()=>ze,default:()=>Oe});var n=i(667294),o=i(702664),s=i(883119),r=i(237056),a=i(214494),l=i(28956),d=i(407043),c=i(898781),u=i(299295),h=i(966113),p=i(531245),_=i(281139),g=i(77891),m=i(785893);const f=84;function x(e){var t,i,n,o;const{isSelected:r,disabled:a,onClick:l,ratio:d,width:c=f}=e,u={width:c,backgroundColor:r?"#fff":"#efefef",border:r?"2px solid #e50c29":"2px solid #efefef",borderRadius:8,boxSizing:"border-box",cursor:a?"default":"pointer",height:c*(null!==(t=d.h)&&void 0!==t?t:1)/(null!==(i=d.w)&&void 0!==i?i:1),outline:"none",opacity:a?.5:void 0,padding:0};return(0,m.jsx)("button",{onClick:l,disabled:a,style:u,children:(0,m.jsx)(s.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,m.jsx)(s.xv,{color:"default",size:"200",weight:"bold",children:`${null!==(n=d.w)&&void 0!==n?n:1}:${null!==(o=d.h)&&void 0!==o?o:1}`})})})}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class y extends n.Component{constructor(e){super(e),b(this,"onClickAspectRatio",(e=>{const{aspectRatioIndex:t,aspectRatios:i,canDeselectAspectRatio:n,onSelectAspectRatioIndex:o,numImages:s,pinCanvas:r,logContextEvent:a}=this.props;if(r){var l,d;const c=i[e],u=e===t&&n&&1===s;u?(r.setAspectRatio(null),o(null)):(r.setAspectRatio(c),o(e));a({event_type:101,component:13780,element:12137,aux_data:{aspect_ratio:c?`${null!==(l=c.w)&&void 0!==l?l:1}:${null!==(d=c.h)&&void 0!==d?d:1}`:null,selected:!u}})}})),b(this,"onClickRotateImage",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.rotateImage("clockwise"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"rotate"}})})),b(this,"onClickFlipImageHorizontal",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("horizontal"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"horizontal_flip"}})})),b(this,"onClickFlipImageVertical",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("vertical"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"vertical_flip"}})})),b(this,"onClickScaleImage",(()=>{const{isScalingMode:e,pinCanvas:t,logContextEvent:i}=this.props;t&&(e?t.exitScalingMode():t.enterScalingMode()),i({event_type:101,component:13780,element:12138,aux_data:{editor_option:"scale_mode_"+(e?"exit":"enter")}})})),b(this,"onClickAddImage",(()=>{const{numImages:e,logContextEvent:t}=this.props;this.setState({isAssetPickerOpen:!0,isReplace:!1,maxAssetsToSelect:u.Xy-e}),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})})),b(this,"onClickReplaceImage",(()=>{this.setState({isAssetPickerOpen:!0,isReplace:!0}),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})})),b(this,"onClickDeleteImage",(()=>{const{pinCanvas:e,logContextEvent:t}=this.props;e&&e.removeImage(),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"delete_image"}})})),b(this,"onAddImageInputChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props,n=Array.from(e.target.files);(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:n,options:{allowVideo:!1}}).then((e=>{const t=e.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);this.handleAddImage(t)})),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})})),b(this,"onReplaceImageInputChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props,n=Array.from(e.target.files);(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:n,options:{allowVideo:!1}}).then((e=>{const t=e.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);this.handleReplaceImage(t)})),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})})),b(this,"handleAddImage",(e=>{const{pinCanvas:t}=this.props,i=e.reduce(((e,t)=>t.src?[...e,t.src]:e),[]);t&&i.length>0&&i.forEach((e=>{t.addImage(e)}))})),b(this,"handleReplaceImage",(e=>{const{pinCanvas:t}=this.props,i=e.reduce(((e,t)=>t.src?[...e,t.src]:e),[]);t&&i.length>0&&t.replaceImage(i[0])})),b(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})})),b(this,"onClickReset",(()=>{const{aspectRatios:e,canDeselectAspectRatio:t,pinCanvas:i,onReset:n,logContextEvent:o}=this.props;i&&(i.resetCrop(),i.setAspectRatio(t?null:e[0]),n()),o({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"crop"}})})),this.state={isAssetPickerOpen:!1,isReplace:!1,maxAssetsToSelect:0}}render(){const{aspectRatioIndex:e,aspectRatios:t,isImageSelected:i,isScalingMode:n,numImages:o,mediaType:r,videoStartText:a,videoEndText:d,validateStartTime:c,validateEndTime:g,handleEndTimeChange:f,handleStartTimeChange:b}=this.props,{isAssetPickerOpen:y,isReplace:v,maxAssetsToSelect:P}=this.state,w=!i,I=o>1&&n,A=1===o||!i,E=this.props.i18n.bt("Rotate 90°", "Rotate 90°", "Rotate the angle of the image by 90 degrees", undefined, true),C=this.props.i18n.bt("Flip image horizontally", "Flip image horizontally", "Flip the image on the horizontal axis", undefined, true),S=this.props.i18n.bt("Flip image vertically", "Flip image vertically", "Flip the image on the vertical axis", undefined, true),j=this.props.i18n.bt("Resize image", "Resize image", "Resize an image in the collage Pin", undefined, true),T=this.props.i18n.bt("Add image", "Add image", "Add image to the collage Pin", undefined, true),D=this.props.i18n.bt("Replace image", "Replace image", "Replace image in the collage Pin", undefined, true),k=this.props.i18n.bt("Delete image", "Delete image", "Delete image from the collage Pin", undefined, true);return(0,m.jsxs)(s.xu,{column:12,display:"flex",direction:"column",children:[(0,m.jsxs)(s.xu,{padding:8,flex:"grow",position:"relative",overflow:"auto",children:[(0,m.jsx)(s.xu,{marginBottom:3,children:(0,m.jsx)(s.X6,{size:"500",children:"video"===r?this.props.i18n.bt("Trim & crop", "Trim & Crop", "cropPane.heading", undefined, true):this.props.i18n.bt("Crop", "Crop", "cropPane.heading", undefined, true)})}),(0,m.jsx)(s.xu,{marginBottom:8,children:(0,m.jsx)(s.xv,{children:this.props.i18n.bt("Crop and adjust your image to focus on the most interesting part", "Crop and adjust your image to focus on the most interesting part", "Describing what this tool is about.", undefined, true)})}),(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Aspect ratio", "Aspect ratio", "Adjust the aspect ratio of the cropping.", undefined, true)}),(0,m.jsx)(s.xu,{paddingY:1,children:(0,m.jsx)(s.xv,{color:"subtle",size:"200",children:this.props.i18n.bt("We recommend a 2:3 aspect ratio for most Pins on Pinterest", "We recommend a 2:3 aspect ratio for most Pins on Pinterest", "Recommendation for the best aspect ratio for an image on Pinterest", undefined, true)})}),(0,m.jsx)(s.xu,{display:"flex",marginTop:2,marginStart:-2,marginEnd:-2,children:t.map(((t,i)=>(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-aspect-ratio-crop-button",flex:"none",paddingX:2,children:(0,m.jsx)(x,{disabled:I,isSelected:i===e,onClick:()=>this.onClickAspectRatio(i),ratio:t})},i)))})]}),(0,m.jsxs)(s.xu,{marginTop:8,children:[(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Adjust", "Adjust", "Adjust the rotation of the image", undefined, true)}),(0,m.jsxs)(s.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-rotate-right-button",paddingX:1,children:(0,m.jsx)(s.u,{text:E,children:(0,m.jsx)(s.hU,{accessibilityLabel:E,bgColor:"lightGray",disabled:w,icon:"rotate",iconColor:"darkGray",onClick:this.onClickRotateImage,size:"md"})})}),"video"!==r&&(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-flip-button-horizontal",paddingX:1,children:(0,m.jsx)(s.u,{text:C,children:(0,m.jsx)(s.hU,{accessibilityLabel:C,bgColor:"lightGray",disabled:w,icon:"flipHorizontal",iconColor:"darkGray",onClick:this.onClickFlipImageHorizontal,size:"md"})})}),"video"!==r&&(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-flip-button-vertical",paddingX:1,children:(0,m.jsx)(s.u,{text:S,children:(0,m.jsx)(s.hU,{accessibilityLabel:S,bgColor:"lightGray",disabled:w,icon:"flipVertical",iconColor:"darkGray",onClick:this.onClickFlipImageVertical,size:"md"})})}),"video"!==r&&(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-move-button",paddingX:1,children:(0,m.jsx)(s.u,{text:j,children:(0,m.jsx)(s.hU,{accessibilityLabel:j,bgColor:n?"transparentDarkGray":"lightGray",disabled:A,icon:"scale",iconColor:n?"white":"darkGray",onClick:this.onClickScaleImage,size:"md"})})})]})]}),"video"!==r&&(0,m.jsxs)(s.xu,{marginTop:8,children:[(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Change an image", "Change an image", "Heading for buttons that add, replace and remove an image", undefined, true)}),(0,m.jsxs)(s.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-add-image-button",paddingX:1,children:(0,m.jsx)(s.u,{text:T,children:o<u.Xy?(0,m.jsx)(_.Z,{accept:[...p.xl].join(","),allowMultipleFiles:!0,color:"white",id:"layouts-add-image-input",onChange:this.onAddImageInputChange,children:()=>(0,m.jsx)(s.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:o>=u.Xy,icon:"add-layout",iconColor:"darkGray",size:"md"})}):(0,m.jsx)(s.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:o>=u.Xy,icon:"add-layout",iconColor:"darkGray",onClick:this.onClickAddImage,size:"md"})})}),(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-replace-image-button",paddingX:1,children:(0,m.jsx)(s.u,{text:D,children:w?(0,m.jsx)(s.hU,{accessibilityLabel:D,bgColor:"lightGray",disabled:w,icon:"replace",iconColor:"darkGray",onClick:this.onClickReplaceImage,size:"md"}):(0,m.jsx)(_.Z,{accept:[...p.xl].join(","),allowMultipleFiles:!1,color:"white",id:"layouts-replace-image-input",onChange:this.onReplaceImageInputChange,children:()=>(0,m.jsx)(s.hU,{accessibilityLabel:D,bgColor:"lightGray",disabled:w,icon:"replace",iconColor:"darkGray",size:"md"})})})}),(0,m.jsx)(s.xu,{"data-test-id":"pinbuilder-editor-delete-image-button",paddingX:1,children:(0,m.jsx)(s.u,{text:k,children:(0,m.jsx)(s.hU,{accessibilityLabel:k,bgColor:"lightGray",disabled:w||1===o,icon:"trash-can",iconColor:"darkGray",onClick:this.onClickDeleteImage,size:"md"})})})]})]}),"video"===r&&(0,m.jsxs)(s.xu,{marginTop:8,children:[(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Trim", "Trim", "Adjust the start and end time of the video", undefined, true)}),(0,m.jsx)(s.xu,{paddingY:1,children:(0,m.jsxs)(s.xv,{color:"subtle",size:"200",children:[this.props.i18n.bt("Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ", "Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ", "Recommendation for the best video length for video on Pinterest", undefined, true),(0,m.jsx)(s.rU,{display:"inlineBlock",href:h.Mo,target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:this.props.i18n.bt("Learn more.", "Learn More.", "Link to Pinterest help center about creative best practices", undefined, true)})]})}),(0,m.jsxs)(s.xu,{display:"flex",marginTop:4,marginStart:-1,marginEnd:-1,children:[(0,m.jsxs)(s.xu,{paddingX:2,children:[(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.__,{htmlFor:"videoStartText",children:(0,m.jsx)(s.xv,{size:"100",children:"Start"})})}),(0,m.jsx)(s.nv,{errorMessage:a?c(a):"",id:"videoStartText",onChange:b,size:"lg",type:"text",value:a})]}),(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.__,{htmlFor:"videoEndText",children:(0,m.jsx)(s.xv,{size:"100",children:"End"})})}),(0,m.jsx)(s.nv,{errorMessage:d?g(d):"",id:"videoEndText",onChange:f,size:"lg",type:"text",value:d})]})]})]})]}),(0,m.jsxs)(s.xu,{display:"flex",direction:"column",column:12,children:[(0,m.jsx)(s.iz,{}),(0,m.jsx)(s.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,m.jsx)(s.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",text:"video"===r?this.props.i18n.bt("Clear crop", "Clear crop", "Resets cropping changes", undefined, true):this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true),onClick:this.onClickReset})})]}),y&&(0,m.jsx)(l.Z,{onPrimaryAction:v?this.handleReplaceImage:this.handleAddImage,onDismiss:this.handleDismiss,primaryButtonText:v?this.props.i18n.bt("Use image", "Use image", "Button text for use another image to replace the selected image in the collage Pin.", undefined, true):this.props.i18n.bt("Add image", "Add image", "Button text for adding some other images to the collage Pin", undefined, true),maxAssetsToSelect:P})]})}}function v(e){const{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)(),n=(0,r.Z)(),s=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].type));return(0,m.jsx)(y,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,type:s})}var P=i(66743),w=i(665866),I=i(309256),A=i(984244),E=i(780280),C=i(414327),S=i(784590),j=i(415480),T=i(815542);function D({marginIndex:e,onSelectMargin:t}){const i=(0,c.ZP)(),n=i.bt("Apply narrow margins", "Apply narrow margins", "Adjust the margin to small.", undefined, true),o=i.bt("Apply medium margins", "Apply medium margins", "Adjust the margin to medium.", undefined, true),r=i.bt("Apply wide margins", "Apply wide margins", "Adjust the margin to large.", undefined, true),a=[(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-small-button",children:(0,m.jsx)(s.u,{text:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:n,icon:"margins-small",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-medium-button",children:(0,m.jsx)(s.u,{text:o,children:(0,m.jsx)(s.JO,{accessibilityLabel:o,icon:"margins-medium",color:1===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-large-button",children:(0,m.jsx)(s.u,{text:r,children:(0,m.jsx)(s.JO,{accessibilityLabel:r,icon:"margins-large",color:2===e?"default":"subtle",size:18})})})];return(0,m.jsx)(s.sY,{selectedItemIndex:e,onChange:t,items:a})}var k=i(618446),z=i.n(k),O=i(454074);function R(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const L={__style:{tabindex:0,margin:2}};class M extends n.Component{constructor(...e){super(...e),R(this,"handleLoadFiles",(e=>{const{i18n:t,ideaPinRenamingEnabled:i,onLoadLogos:n}=this.props,o={minHeight:u.P0,minWidth:u.zr};(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:o}).then((e=>{const t=e.reduce(((e,t)=>("localImage"===t.type&&e.push(t),e)),[]);n(t)}))})),R(this,"handleDrop",(e=>{const t=(0,O.Z)(e.dataTransfer);this.handleLoadFiles(t)})),R(this,"handleChange",(e=>{const t=Array.from(e.target.files);this.handleLoadFiles(t)}))}render(){const{width:e,height:t}=this.props;return(0,m.jsx)(s.xu,{height:t,rounding:2,width:e,dangerouslySetInlineStyle:L,children:(0,m.jsx)(_.Z,{accept:p.xl.join(","),allowMultipleFiles:!0,id:"add-button-placeholder",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,m.jsx)(s.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,m.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Import local images", "Import local images", "Add local images to Pin builder", undefined, true),icon:"add-circle",size:24})})})})}}function B(e){const t=(0,c.ZP)(),i=(0,r.Z)();return(0,m.jsx)(M,{...e,i18n:t,ideaPinRenamingEnabled:i})}R(M,"defaultProps",{height:147,width:147});var N=i(938999);function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const F={__style:{padding:"2px"}};class U extends n.Component{constructor(...e){super(...e),Z(this,"state",{isHovering:!1}),Z(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),Z(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{imgSrc:e,imgWidth:t,imgHeight:i,fit:n,title:o,selected:r,onClick:a,onDelete:l}=this.props,{isHovering:d}=this.state;return(0,m.jsxs)(s.xu,{"data-test-id":"pinbuilder-asset-preview",position:"relative",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:F,children:[(0,m.jsx)(N.Z,{selected:r,onClick:a,children:(0,m.jsxs)(s.xu,{rounding:2,color:"secondary",position:"relative",width:t,height:i,overflow:"hidden",children:[(0,m.jsx)(s.Ee,{alt:o||"",src:e,fit:n,naturalWidth:1,naturalHeight:1}),o&&(0,m.jsx)(s.xu,{marginTop:2,marginBottom:1,children:(0,m.jsx)(s.xv,{lineClamp:1,size:"100",children:o})})]})}),d&&(0,m.jsx)(s.xu,{color:"tertiary","data-test-id":"remove-asset-icon-button",height:16,padding:1,marginEnd:-1,marginTop:-1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,m.jsx)(s.iP,{fullHeight:!0,fullWidth:!0,onTap:l,children:(0,m.jsx)(s.JO,{color:"inverse",icon:"cancel",size:8,accessibilityLabel:this.props.i18n.bt("Remove asset", "Remove Asset", "Icon button to remove selected media file", undefined, true)})})})]})}}function V(e){const t=(0,c.ZP)();return(0,m.jsx)(U,{...e,i18n:t})}function H(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G extends n.Component{constructor(...e){super(...e),H(this,"state",{selectedIndex:void 0}),H(this,"onSelectLogo",(e=>{const{onSelectLogo:t}=this.props;t(e),this.setState((t=>({selectedIndex:t.selectedIndex===e?null:e})))}))}shouldComponentUpdate(e,t){return!z()(this.props.logos,e.logos)||!z()(this.props.logoIndex,e.logoIndex)||!z()(this.state.selectedIndex,t.selectedIndex)}render(){const{logos:e}=this.props;return(0,m.jsx)(s.xu,{column:12,minHeight:70,maxHeight:165,paddingY:1,overflow:"scroll",children:(0,m.jsx)(s.Rk,{renderItem:({data:e,itemIdx:t})=>{const{logoIndex:i,onAddNewLogos:n,onDeleteLogo:o}=this.props,s=i!==this.state.selectedIndex?i:this.state.selectedIndex;return"placeholder"===e.type?(0,m.jsx)(B,{onLoadLogos:n,width:58,height:58}):(0,m.jsx)(V,{imgSrc:e.src,imgWidth:58,imgHeight:58,fit:"contain",onClick:()=>this.onSelectLogo(t-1),onDelete:()=>o(t-1),selected:s===t-1})},items:[{type:"placeholder"},...e],columnWidth:62,gutterWidth:9})})}}const W=18;function $({logoPositionIndex:e,onSelectLogoPosition:t}){const i=(0,c.ZP)(),n=i.bt("Position top left", "Position top left", "Adjust the location of the logo to top left.", undefined, true),o=i.bt("Position top centre", "Position top center", "Adjust the location of the logo to top center.", undefined, true),r=i.bt("Position top right", "Position top right", "Adjust the location of the logo to top right.", undefined, true),a=i.bt("Position bottom left", "Position bottom left", "Adjust the location of the logo to bottom left.", undefined, true),l=i.bt("Position bottom centre", "Position bottom center", "Adjust the location of the logo to bottom center.", undefined, true),d=i.bt("Position bottom right", "Position bottom right", "Adjust the location of the logo to bottom right.", undefined, true),u=[(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-left-button",children:(0,m.jsx)(s.u,{text:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:n,icon:"align-top-left",color:0===e?"default":"subtle",size:W})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-center-button",children:(0,m.jsx)(s.u,{text:o,children:(0,m.jsx)(s.JO,{accessibilityLabel:o,icon:"align-top-center",color:1===e?"default":"subtle",size:W})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-right-button",children:(0,m.jsx)(s.u,{text:r,children:(0,m.jsx)(s.JO,{accessibilityLabel:r,icon:"align-top-right",color:2===e?"default":"subtle",size:W})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-left-button",children:(0,m.jsx)(s.u,{text:a,children:(0,m.jsx)(s.JO,{accessibilityLabel:a,icon:"align-bottom-left",color:3===e?"default":"subtle",size:W})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-center-button",children:(0,m.jsx)(s.u,{text:l,children:(0,m.jsx)(s.JO,{accessibilityLabel:l,icon:"align-bottom-center",color:4===e?"default":"subtle",size:W})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-right-button",children:(0,m.jsx)(s.u,{text:d,children:(0,m.jsx)(s.JO,{accessibilityLabel:d,icon:"align-bottom-right",color:5===e?"default":"subtle",size:W})})})];return(0,m.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:i.bt("Position", "Position", "Adjust the position of the logo", undefined, true)})}),(0,m.jsx)(s.sY,{selectedItemIndex:e,onChange:t,items:u,responsive:!0})]})}function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class X extends n.Component{constructor(...e){super(...e),q(this,"onReset",(()=>{const{pinCanvas:e,onReset:t,logContextEvent:i}=this.props;t(),e&&e.removeLogo(),i({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"logo"}})})),q(this,"onDeleteLogo",(e=>{const{pinCanvas:t,onDeleteLogo:i,logo:n,logContextEvent:o}=this.props;i(e),n.logoIndex===e&&t&&t.removeLogo(),o({event_type:101,component:13780,element:12142})})),q(this,"setLogo",(e=>{const{pinCanvas:t,logo:i,logoImages:n}=this.props;t&&(null!=e?t.setLogo({assetId:n[e].assetId,src:n[e].src,size:i.logoSize,margin:u.mt[i.logoMarginIndex],position:u.n_[i.logoPositionIndex],backgroundColor:i.logoBackgroundColor,backgroundOpacity:u.AQ[i.logoTransparencyIndex]}):t.removeLogo())})),q(this,"onSelectLogo",(e=>{const{pinCanvas:t,onSelectLogo:i,logo:n,logContextEvent:o}=this.props;i(e),n.logoIndex===e?t&&t.removeLogo():t&&this.setLogo(e),o({event_type:101,component:13780,element:12141})})),q(this,"onChangeLogoSize",(e=>{const{pinCanvas:t,onChangeLogoSize:i,logContextEvent:n}=this.props;i(e),t&&t.setLogoSize(e),n({event_type:3828,component:13780,element:12147,aux_data:{value:e}})})),q(this,"onSelectLogoMargin",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoMargin:i,logContextEvent:n}=this.props,o=u.mt[e];i(e),t&&t.setLogoMargin(o),n({event_type:101,component:13780,element:12148,aux_data:{value:o}})})),q(this,"onSelectLogoPosition",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoPosition:i,logContextEvent:n}=this.props,o=u.n_[e];i(e),t&&t.setLogoPosition(o),n({event_type:101,component:13780,element:12149,aux_data:{value:o}})})),q(this,"onSelectLogoBackgroundColor",(({value:e})=>{const{pinCanvas:t,onSelectLogoBackgroundColor:i,logContextEvent:n}=this.props,o=e.startsWith("#")||""===e?e.toLowerCase():`#${e}`.toLowerCase();i(o),t&&t.setLogoBackgroundColor(o),n({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"color",value:o}})})),q(this,"onSelectLogoTransparency",(({activeIndex:e})=>{const{pinCanvas:t,onSelectLogoTransparency:i,logContextEvent:n}=this.props,o=u.AQ[e];i(e),t&&t.setLogoBackgroundOpacity(o),n({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"transparency",value:o}})}))}componentDidUpdate(e){const{logo:t,logoImages:i}=e,{logo:n,logoImages:o}=this.props;t.logoIndex===n.logoIndex&&i.length===o.length||this.setLogo(n.logoIndex)}render(){const{logo:e,logoImages:t,onUploadLogos:i,pinCanvas:n}=this.props,{logoIndex:o,logoSize:r,logoMarginIndex:a,logoPositionIndex:l,logoBackgroundColor:d,logoTransparencyIndex:c}=e;return(0,m.jsxs)(s.xu,{column:12,display:"flex",direction:"column",children:[(0,m.jsxs)(s.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,m.jsx)(s.xu,{paddingX:8,children:(0,m.jsx)(s.X6,{size:"500",children:this.props.i18n.bt("Logo", "Logo", "Add a logo to the image selected in Pin Builder.", undefined, true)})}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:3,children:(0,m.jsx)(s.xv,{children:this.props.i18n.bt("Add your logo to make this Pin look official", "Add your logo to make this Pin feel official", " - ", undefined, true)})}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:6,children:(0,m.jsx)(G,{logos:t,logoIndex:o,onAddNewLogos:i,onDeleteLogo:this.onDeleteLogo,onSelectLogo:this.onSelectLogo})}),(0,m.jsxs)(s.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:84,children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Size", "Size", "Adjust the size of the logo", undefined, true)})}),(0,m.jsx)(j.Z,{id:"pinbuilder-editor-logo-size-text-field",minValue:20,maxValue:80,step:10,iconName:"logo-large",value:r,onChange:this.onChangeLogoSize})]}),(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margins", "Margins", "Adjust the position of the text overlay", undefined, true)})}),(0,m.jsx)(D,{marginIndex:a,onSelectMargin:this.onSelectLogoMargin})]})]}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:10,position:"relative",children:(0,m.jsx)($,{logoPositionIndex:l,onSelectLogoPosition:this.onSelectLogoPosition})}),(0,m.jsxs)(s.xu,{paddingX:8,marginTop:10,children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Colour fill", "Color fill", "Pick the background color", undefined, true)})}),(0,m.jsx)(T.ZP,{id:"pinbuilder-editor-logo-background-color-picker",imagePalette:n&&n.getColorPalette(),width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:d,onSelectColor:this.onSelectLogoBackgroundColor,transparencyIndex:c,onSelectTransparency:this.onSelectLogoTransparency})]})]}),(0,m.jsxs)(s.xu,{display:"flex",direction:"column",column:12,children:[(0,m.jsx)(s.iz,{}),(0,m.jsx)(s.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,m.jsx)(s.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function Y(e){const{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)();return(0,m.jsx)(X,{...e,i18n:i,logContextEvent:t})}function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const J={__style:{maxHeight:"516px"}};class Q extends n.Component{constructor(...e){super(...e),K(this,"state",{hoveredOption:null,showFlyout:!1}),K(this,"setFlyoutAnchor",(e=>{this.anchor=e})),K(this,"handleTouch",(()=>{this.setState((e=>({showFlyout:!e.showFlyout})))})),K(this,"handleFlyoutClose",(()=>{this.setState({showFlyout:!1})})),K(this,"handleSelectOption",(e=>{const{onSelect:t}=this.props;t(e),this.handleFlyoutClose()})),K(this,"handleMouseEnter",(e=>{this.setState({hoveredOption:e})})),K(this,"handleMouseLeave",(()=>{this.setState({hoveredOption:null})}))}getFlyoutHeight(){if(window&&this.anchor){return`${Math.min(516,window.innerHeight-this.anchor.getBoundingClientRect().top-100)}px`}return"516px"}render(){const{placeholder:e,selectedOption:t,optionGroups:i}=this.props,{hoveredOption:o,showFlyout:r}=this.state,a=t?i.find((e=>e.groupName===t.groupName)):null,l=a&&t?a.options.find((e=>e.optionName===t.optionName)):null;return(0,m.jsxs)(s.xu,{column:12,"data-test-id":"styled-dropdown-list",children:[(0,m.jsx)(s.iP,{onTap:this.handleTouch,rounding:2,children:(0,m.jsxs)(s.xu,{rounding:2,overflow:"hidden",width:"100%",height:40,display:"flex",alignItems:"center",justifyContent:"between",color:"secondary",paddingX:3,ref:this.setFlyoutAnchor,children:[(0,m.jsx)(s.xu,{marginEnd:2,minWidth:0,overflow:"hidden",flex:"grow",children:(0,m.jsx)(s.xv,{children:l?(0,m.jsx)("div",{style:l.style,children:l.optionLabel}):e||this.props.i18n.bt("Select", "Select", "Select an option from the dropdown list", undefined, true)})}),(0,m.jsx)(s.xu,{flex:"none",children:(0,m.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Open drop-down list", "Open dropdown list", "Instructions to open the dropdown list", undefined, true),color:"default",icon:"arrow-down",size:12})})]})}),r&&(0,m.jsx)(s.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleFlyoutClose,size:"md",children:(0,m.jsx)(s.xu,{width:"100%",paddingY:4,dangerouslySetInlineStyle:{__style:{...J.__style,maxHeight:this.getFlyoutHeight()}},children:i.map(((e,t)=>(0,m.jsxs)(n.Fragment,{children:[i.length>1&&t>0&&(0,m.jsx)(s.xu,{paddingY:2,paddingX:4,children:(0,m.jsx)(s.iz,{})}),i.length>1&&(0,m.jsx)(s.xu,{paddingY:1,paddingX:4,children:(0,m.jsx)(s.xv,{size:"100",color:"subtle",children:e.groupLabel})}),e.options.map((t=>(0,m.jsx)(s.xu,{padding:1,color:l===t||o===t?"secondary":"default",children:(0,m.jsx)(s.iP,{onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave,onTap:()=>this.handleSelectOption({groupName:e.groupName,optionName:t.optionName}),children:(0,m.jsx)(s.xu,{width:"100%",paddingX:3,paddingY:1,children:(0,m.jsx)(s.xv,{children:(0,m.jsx)("div",{style:t.style,children:t.optionLabel})})})})},`${e.groupName}_${t.optionName}`))),e.groupFooter&&(0,m.jsx)(s.xu,{paddingX:4,paddingY:1,children:e.groupFooter()})]},e.groupName)))})})]})}}function ee(e){const t=(0,c.ZP)();return(0,m.jsx)(Q,{...e,i18n:t})}function te({selectedIndex:e,onSelect:t}){const i=(0,c.ZP)(),n=i.bt("Left align", "Left align", "Adjust the text to left alignment.", undefined, true),o=i.bt("Centre align", "Center align", "Adjust the text to center alignment.", undefined, true),r=[(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-left-button",children:(0,m.jsx)(s.u,{text:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:n,icon:"text-align-left",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-center-button",children:(0,m.jsx)(s.u,{text:o,children:(0,m.jsx)(s.JO,{accessibilityLabel:o,icon:"text-align-center",color:1===e?"default":"subtle",size:18})})})];return(0,m.jsx)(s.sY,{selectedItemIndex:e,onChange:t,items:r})}function ie({selectedIndex:e,onSelect:t}){const i=(0,c.ZP)(),n=i.bt("Position text on top", "Position text on top", "Adjust the location of the text to top.", undefined, true),o=i.bt("Position text in middle", "Position text in middle", "Adjust the location of the text to middle.", undefined, true),r=i.bt("Position text on bottom", "Position text on bottom", "Adjust the location of the text to bottom.", undefined, true),a=[(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-top-button",children:(0,m.jsx)(s.u,{text:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:n,icon:"align-top",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-middle-button",children:(0,m.jsx)(s.u,{text:o,children:(0,m.jsx)(s.JO,{accessibilityLabel:o,icon:"align-middle",color:1===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-bottom-button",children:(0,m.jsx)(s.u,{text:r,children:(0,m.jsx)(s.JO,{accessibilityLabel:r,icon:"align-bottom",color:2===e?"default":"subtle",size:18})})})];return(0,m.jsx)(s.sY,{selectedItemIndex:e,onChange:t,items:a})}function ne({selectedIndex:e,onSelect:t}){const i=(0,c.ZP)(),n=i.bt("Sentence case", "Sentence case", "Transform the text to sentence case.", undefined, true),o=i.bt("Uppercase", "Uppercase", "Transform the text to all uppercase.", undefined, true),r=[(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-sentence-case-button",children:(0,m.jsx)(s.u,{text:n,children:(0,m.jsx)(s.JO,{accessibilityLabel:n,icon:"text-sentence-case",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(s.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-all-caps-button",children:(0,m.jsx)(s.u,{text:o,children:(0,m.jsx)(s.JO,{accessibilityLabel:o,icon:"text-all-caps",color:1===e?"default":"subtle",size:18})})})];return(0,m.jsx)(s.sY,{selectedItemIndex:e,onChange:t,items:r})}function oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const se={fontColor:{__style:{zIndex:u.v9}},fontFamily:{__style:{zIndex:u.v9+1}}};class re extends n.Component{constructor(...e){super(...e),oe(this,"_getTextConfigs",(e=>{const{fontFamilyName:t,fontStyleName:i,fontWeight:n,fontSize:o,textColor:s,lineHeight:r,letterSpacing:a,transformIndex:l,alignmentIndex:d,marginIndex:c,backgroundColor:h,backgroundTransparencyIndex:p,positionIndex:_}=e,{fontGroups:g}=this.props,m=t,f=(0,I.$D)(g,t),{fontStyle:x}=f&&f.styles.find((e=>e.name===i))||{};return{fontFamily:m,fontStyle:x,fontSize:o,fontWeight:n,textColor:s,lineHeight:r,backgroundColor:h,characterSpacing:a,transform:u.np[l],alignment:u.aj[d],margin:u.mt[c],backgroundOpacity:u.AQ[p],position:u.yb[_]}})),oe(this,"onReset",(()=>{const{getDefaultTextState:e,pinCanvas:t,onReset:i,logContextEvent:n}=this.props;if(i(),t){t.removeTextLayer();const i=this._getTextConfigs(e());t.addTextLayer(i)}n({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"text"}})})),oe(this,"onSelectFontFamily",(e=>{const{fontGroups:t,pinCanvas:i,onSelectFontFamily:n,logContextEvent:o}=this.props;if(i){const n=(0,I.$D)(t,e.optionName);if(n){const{fontFamily:e,fontOverrides:t,defaultStyle:o,styles:s}=n,{fontStyle:r,fontWeight:a}=s[o];if(t){const e=t.textTransform?1:0;this.onSelectTransform({activeIndex:e}),t.lineHeight&&this.onChangeLineHeight(t.lineHeight),t.letterSpacing&&this.onChangeLetterSpacing(t.letterSpacing)}i.setFontFamily(null!=e?e:""),i.setFontStyle(r),i.setFontWeight(a)}}n(e),o({event_type:3828,component:13780,element:12151,aux_data:{value:`${e.groupName}: ${e.optionName}`}})})),oe(this,"onSelectTextColor",(({value:e})=>{const{pinCanvas:t,onSelectTextColor:i,logContextEvent:n}=this.props;t&&t.setTextColor(e),i(e),n({event_type:8721,component:13780,element:12153,aux_data:{value:e}})})),oe(this,"onChangeFontSize",(e=>{const{pinCanvas:t,onChangeFontSize:i,logContextEvent:n}=this.props;t&&t.setFontSize(e),i(e),n({event_type:3828,component:13780,element:12152,aux_data:{value:e}})})),oe(this,"onChangeLineHeight",(e=>{const{pinCanvas:t,onChangeLineHeight:i,logContextEvent:n}=this.props;t&&t.setTextLineHeight(e),i(e),n({event_type:3828,component:13780,element:12161,aux_data:{value:e}})})),oe(this,"onChangeLetterSpacing",(e=>{const{pinCanvas:t,onChangeLetterSpacing:i,logContextEvent:n}=this.props;t&&t.setTextCharacterSpacing(10*e),i(e),n({event_type:3828,component:13780,element:12162,aux_data:{value:e}})})),oe(this,"onSelectTransform",(({activeIndex:e})=>{const{pinCanvas:t,onSelectTransform:i,logContextEvent:n}=this.props,o=u.np[e];t&&t.setTextTransform(o),i(e),n({event_type:3828,component:13780,element:12163,aux_data:{value:o}})})),oe(this,"onSelectAlignment",(({activeIndex:e})=>{const{pinCanvas:t,onSelectAlignment:i,logContextEvent:n}=this.props,o=u.aj[e];t&&t.setTextAlignment(o),i(e),n({event_type:101,component:13780,element:12154,aux_data:{value:o}})})),oe(this,"onSelectMargin",(({activeIndex:e})=>{const{pinCanvas:t,onSelectMargin:i,logContextEvent:n}=this.props,o=u.mt[e];t&&t.setTextMargin(o),i(e),n({event_type:101,component:13780,element:12155,aux_data:{value:o}})})),oe(this,"onSelectBackgroundColor",(({value:e})=>{const{pinCanvas:t,onSelectBackgroundColor:i,logContextEvent:n}=this.props;t&&t.setTextBackgroundColor(e),i(e),n({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"color",value:e}})})),oe(this,"onSelectBackgroundTransparency",(({activeIndex:e})=>{const{pinCanvas:t,onSelectBackgroundTransparency:i,logContextEvent:n}=this.props,o=u.AQ[e];t&&t.setTextBackgroundOpacity(o),i(e),n({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"transparency",value:o}})})),oe(this,"onSelectPosition",(({activeIndex:e})=>{const{pinCanvas:t,onSelectPosition:i,logContextEvent:n}=this.props,o=u.yb[e];t&&t.setTextPosition(o),i(e),n({event_type:101,component:13780,element:12157,aux_data:{value:o}})})),oe(this,"getFontFamilyOptions",(()=>{const{fontGroups:e}=this.props;return e.map((e=>({groupLabel:e.groupLabel,groupName:e.groupName,groupFooter:e.groupFooter,options:e.fonts.map((e=>{var t,i;return{optionName:null!==(t=e.fontFamily)&&void 0!==t?t:"",optionLabel:null!==(i=e.fontFamily)&&void 0!==i?i:"",style:{fontFamily:e.fontFamily,fontStyle:e.styles[e.defaultStyle].fontStyle,fontWeight:e.styles[e.defaultStyle].fontWeight}}}))})))}))}componentDidMount(){const{pinCanvas:e,text:t}=this.props;if(e){const i=this._getTextConfigs(t);e.addTextLayer(i)}}render(){const{text:e,onToggleShowMoreOptions:t,pinCanvas:i}=this.props,{fontGroupName:n,fontFamilyName:o,fontSize:r,textColor:a,marginIndex:l,alignmentIndex:d,positionIndex:c,backgroundColor:u,backgroundTransparencyIndex:h,lineHeight:p,letterSpacing:_,transformIndex:g,showMoreOptions:f}=e,x=this.getFontFamilyOptions(),b=n===P.f9,y=i?i.getColorPalette():null;return(0,m.jsxs)(s.xu,{column:12,display:"flex",direction:"column",children:[(0,m.jsxs)(s.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,m.jsx)(s.xu,{paddingX:8,children:(0,m.jsx)(s.X6,{size:"500",children:this.props.i18n.bt("Text overlay", "Text Overlay", "Add text to the image selected in Pin Builder.", undefined, true)})}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:4,children:(0,m.jsx)(s.xv,{children:this.props.i18n.bt("Add text directly to your Pin", "Add text directly onto your Pin", " - ", undefined, true)})}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:6,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Style", "Style", "Text font style", undefined, true)})}),(0,m.jsx)(s.xu,{paddingX:8,marginTop:4,position:"relative",dangerouslySetInlineStyle:se.fontFamily,children:(0,m.jsx)(ee,{placeholder:this.props.i18n.bt("Select font family", "Select font family", " - ", undefined, true),optionGroups:x,selectedOption:{groupName:n,optionName:o},onSelect:this.onSelectFontFamily})}),(0,m.jsxs)(s.xu,{paddingX:8,marginTop:4,display:"flex",children:[(0,m.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(j.Z,{id:"pinbuilder-editor-font-size-text-field",minValue:18,maxValue:64,iconName:"text-size",value:r,onChange:this.onChangeFontSize}),(0,m.jsx)(s.xu,{marginTop:2,children:(0,m.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Size", "Size", "Text font size", undefined, true)})})]}),(0,m.jsxs)(s.xu,{marginStart:4,display:"flex",direction:"column",alignItems:"center",width:84,position:"relative",dangerouslySetInlineStyle:se.fontColor,children:[(0,m.jsx)(T.ZP,{colorSelected:a,id:"pinbuilder-editor-text-color-picker",imagePalette:y,onSelectColor:this.onSelectTextColor}),(0,m.jsx)(s.xu,{marginTop:2,children:(0,m.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Colour", "Color", "Text color", undefined, true)})})]})]}),b&&(0,m.jsxs)(s.xu,{paddingX:8,marginTop:4,position:"relative",children:[(0,m.jsx)(s.iz,{}),(0,m.jsxs)(s.xu,{paddingY:4,children:[(0,m.jsx)(s.iP,{onTap:t,children:(0,m.jsx)(s.xv,{color:"subtle",size:"100",weight:"bold",children:f?"- "+(this.props.i18n.bt("Hide options", "Hide options", "Hide text adjustment options.", undefined, true)):"+ "+(this.props.i18n.bt("Show more options", "Show more options", "Show more text adjustment options.", undefined, true))})}),f&&(0,m.jsxs)(s.xu,{marginTop:4,display:"flex",children:[(0,m.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(j.Z,{iconName:"text-line-height",id:"pinbuilder-editor-text-line-height",minValue:.5,maxValue:2.5,step:.1,value:p,onChange:this.onChangeLineHeight}),(0,m.jsx)(s.xu,{marginTop:2,children:(0,m.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Line", "Line", "Line height of the text", undefined, true)})})]}),(0,m.jsxs)(s.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,m.jsx)(j.Z,{id:"pinbuilder-editor-text-spacing-text-field",iconName:"text-spacing",minValue:-10,maxValue:50,step:1,value:_,onChange:this.onChangeLetterSpacing}),(0,m.jsx)(s.xu,{marginTop:2,children:(0,m.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Letter", "Letter", "Letter spaceing of the text", undefined, true)})})]}),(0,m.jsxs)(s.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,m.jsx)(ne,{selectedIndex:g,onSelect:this.onSelectTransform}),(0,m.jsx)(s.xu,{marginTop:2,children:(0,m.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Transform", "Transform", "Text transform between normal and all uppercase", undefined, true)})})]})]})]}),(0,m.jsx)(s.iz,{})]}),(0,m.jsxs)(s.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Alignment", "Alignment", "Adjust text alignment", undefined, true)})}),(0,m.jsx)(te,{selectedIndex:d,onSelect:this.onSelectAlignment})]}),(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margins", "Margins", "Adjust the margin.", undefined, true)})}),(0,m.jsx)(D,{marginIndex:l,onSelectMargin:this.onSelectMargin})]})]}),(0,m.jsxs)(s.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",children:[(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Background", "Background", "Adjust the background of the text overlay", undefined, true)})}),(0,m.jsx)(T.ZP,{id:"pinbuilder-editor-text-background-color-picker",imagePalette:y,width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:u,onSelectColor:this.onSelectBackgroundColor,transparencyIndex:h,onSelectTransparency:this.onSelectBackgroundTransparency})]}),(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Position", "Position", "Adjust the position of the text overlay", undefined, true)})}),(0,m.jsx)(ie,{selectedIndex:c,onSelect:this.onSelectPosition})]})]})]}),(0,m.jsxs)(s.xu,{display:"flex",direction:"column",column:12,children:[(0,m.jsx)(s.iz,{}),(0,m.jsx)(s.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,m.jsx)(s.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function ae(e){const{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)();return(0,m.jsx)(re,{...e,i18n:i,logContextEvent:t})}var le=i(623320);function de(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ce="#efefef";class ue extends n.Component{constructor(e){super(e),de(this,"_getInitialAspectRatioIndex",(()=>{const{canDeselectAspectRatio:e,canvasJson:t,type:i}=this.props;if(t){const e=(0,A.Z)(i).findIndex((({w:e,h:i})=>t.aspectRatio&&e===t.aspectRatio.w&&i===t.aspectRatio.h));return-1===e?null:e}return e?null:0})),de(this,"_getToolPanes",(e=>{const{mediaType:t}=this.props,i=[{icon:"crop",label:this.props.i18n.bt("Crop & rotate", "Crop & rotate", "Button to enter cropping tool", undefined, true),name:"crop"}];return"video"!==t&&(i.push({icon:"star",label:this.props.i18n.bt("Logo", "Logo", "Button to enter logo tool", undefined, true),name:"logo"}),e.length>0&&i.push({icon:"overlay-text",label:this.props.i18n.bt("Text overlay", "Text overlay", "Button to enter text overlay tool", undefined, true),name:"text"})),i})),de(this,"_getBrandFontDefaultTextState",((e,t)=>{const i=t.find((e=>e.groupName===P.f9));if(i){var n;const t=i.fonts[0];return{...e,fontFamilyName:null!==(n=t.fontFamily)&&void 0!==n?n:"",fontGroupName:t.fontGroup,fontStyleName:t.styles[0].name}}return e})),de(this,"getTextState",((e,t)=>{const{canvasJson:i}=this.props;if(i&&i.text){const{fontFamily:o,fontStyle:s,fontWeight:r}=i.text,a=(0,I.$D)(t,o);var n;if(a)return{...e,fontFamilyName:null!==(n=a.fontFamily)&&void 0!==n?n:"",fontGroupName:a.fontGroup,fontStyleName:(0,I.CP)(a,s,r)}}return this._getBrandFontDefaultTextState(e,t)})),de(this,"getDefaultTextState",(()=>{const{locale:e}=this.props.requestContext;return this._getBrandFontDefaultTextState((0,I.bs)(e),this.state.fontGroups)})),de(this,"onIconClick",(e=>{const{currentToolPane:t}=this.state,{pinCanvas:i,logContextEvent:n}=this.props;if(e!==t&&i&&("text"===t&&i.removeTextLayer(!0),["crop","logo","text"].includes(e))){i.setEditingMode(e);n({event_type:101,component:13780,element:{crop:12132,logo:12133,text:12134}[e]})}this.setState({currentToolPane:e})})),de(this,"onSelectAspectRatioIndex",(e=>{const{onAspectRatioChange:t,type:i}=this.props;this.setState({aspectRatioIndex:e}),void 0!==e&&t(null!==e?(0,A.Z)(i)[e]:null)})),de(this,"onCropReset",(()=>{this.setState({aspectRatioIndex:this._getInitialAspectRatioIndex()})})),de(this,"onDeleteLogo",(e=>{const{invalidateStickerResource:t}=this.props,{logo:i,logoImages:n}=this.state,{assetId:o}=n[e];if(o){a.Z.create("StickerAssetResource",{assetId:o}).callDelete().then(t);const n=(i||{}).logoIndex,s=n===e||null==n?null:n>e?n-1:n;this.setState((t=>({logo:{...t.logo,logoIndex:s},logoImages:t.logoImages.filter(((t,i)=>i!==e))})))}})),de(this,"onUploadLogos",(e=>{const{invalidateStickerResource:t,logContextEvent:i}=this.props,n=e.map((e=>(0,le.zp)(e.src).then((e=>a.Z.create("StickerAssetResource",{binary_data:e}).callCreate()))));Promise.all(n).then((i=>{if(i){const n=i.map((({resource_response:t},i)=>{const n=t.data,o=e[i];return{id:n.assetId,height:o.height,width:o.width,src:o.src,type:"assetImage",assetId:n.assetId}}));this.setState((e=>({logoImages:[...n,...e.logoImages],logo:{...e.logo,logoIndex:0}}))),t()}})),i({event_type:101,component:13780,element:12140})})),de(this,"onLogoReset",(()=>{this.setState({logo:{logoIndex:null,logoSize:50,logoMarginIndex:1,logoPositionIndex:0,logoBackgroundColor:"",logoTransparencyIndex:0}})})),de(this,"onSelectLogo",(e=>{this.setState((t=>({logo:{...t.logo,logoIndex:t.logo.logoIndex===e?null:e}})))})),de(this,"onChangeLogoSize",(e=>{this.setState((t=>({logo:{...t.logo,logoSize:e}})))})),de(this,"onSelectLogoMargin",(e=>{this.setState((t=>({logo:{...t.logo,logoMarginIndex:e}})))})),de(this,"onSelectLogoPosition",(e=>{this.setState((t=>({logo:{...t.logo,logoPositionIndex:e}})))})),de(this,"onSelectLogoBackgroundColor",(e=>{this.setState((t=>({logo:{...t.logo,logoBackgroundColor:e}})))})),de(this,"onSelectLogoTransparency",(e=>{this.setState((t=>({logo:{...t.logo,logoTransparencyIndex:e}})))})),de(this,"onSelectFontFamily",(e=>{const{fontGroups:t}=this.state,i=(0,I.$D)(t,e.optionName);if(i){const{name:t}=i.styles[i.defaultStyle],{fontOverrides:n}=i,o=n&&n.textTransform?1:0,s=n&&n.lineHeight||1.2,r=n&&n.letterSpacing||0;this.setState((i=>({text:{...i.text,fontGroupName:e.groupName,fontFamilyName:e.optionName,fontStyleName:t,letterSpacing:r,lineHeight:s,transformIndex:o}})))}})),de(this,"onSelectTextColor",(e=>{this.setState((t=>({text:{...t.text,textColor:e}})))})),de(this,"onChangeFontSize",(e=>{this.setState((t=>({text:{...t.text,fontSize:e}})))})),de(this,"onChangeLineHeight",(e=>{this.setState((t=>({text:{...t.text,lineHeight:e}})))})),de(this,"onChangeLetterSpacing",(e=>{this.setState((t=>({text:{...t.text,letterSpacing:e}})))})),de(this,"onSelectTransform",(e=>{this.setState((t=>({text:{...t.text,transformIndex:e}})))})),de(this,"onSelectAlignment",(e=>{this.setState((t=>({text:{...t.text,alignmentIndex:e}})))})),de(this,"onSelectMargin",(e=>{this.setState((t=>({text:{...t.text,marginIndex:e}})))})),de(this,"onSelectBackgroundColor",(e=>{this.setState((t=>({text:{...t.text,backgroundColor:e}})))})),de(this,"onSelectBackgroundTransparency",(e=>{this.setState((t=>({text:{...t.text,backgroundTransparencyIndex:e}})))})),de(this,"onSelectPosition",(e=>{this.setState((t=>({text:{...t.text,positionIndex:e}})))})),de(this,"onToggleShowMoreOptions",(()=>{const{logContextEvent:e}=this.props;this.setState((t=>{const i=!t.text.showMoreOptions;return e({event_type:101,component:13780,element:12158,aux_data:{value:i}}),{text:{...t.text,showMoreOptions:i}}}))})),de(this,"onTextReset",(()=>{this.setState({text:this.getDefaultTextState()})}));const{canDeselectAspectRatio:t,canvasJson:i}=e,{locale:n}=e.requestContext;if(this.state={aspectRatioIndex:t?null:0,brandFontsLoaded:!1,currentToolPane:"crop",fontGroups:[],isImageSelected:!1,isScalingMode:!1,logoImagesLoaded:!1,logo:{logoBackgroundColor:"",logoIndex:null,logoMarginIndex:1,logoPositionIndex:0,logoSize:50,logoTransparencyIndex:0},logoImages:[],numImages:0,text:(0,I.bs)(n)},i){if(this.state={...this.state,aspectRatioIndex:this._getInitialAspectRatioIndex()},i.logo){const{size:e,margin:t,position:n,backgroundColor:o,backgroundOpacity:s}=i.logo;this.state={...this.state,logo:{...this.state.logo,logoBackgroundColor:o,logoMarginIndex:u.mt.indexOf(t),logoPositionIndex:u.n_.indexOf(n),logoSize:e,logoTransparencyIndex:u.AQ.indexOf(s)}}}if(i.text){const{alignment:e,backgroundColor:t,backgroundOpacity:n,characterSpacing:o,fontSize:s,fontWeight:r,lineHeight:a,margin:l,position:d,textColor:c,transform:h}=i.text;this.state={...this.state,text:{...this.state.text,backgroundColor:t,fontSize:s,fontWeight:r,textColor:c,alignmentIndex:u.aj.indexOf(e),backgroundTransparencyIndex:u.AQ.indexOf(n),letterSpacing:o||this.state.text.letterSpacing,lineHeight:a||this.state.text.lineHeight,marginIndex:u.mt.indexOf(l),positionIndex:u.yb.indexOf(d),showMoreOptions:!1,transformIndex:u.np.indexOf(h)}}}}}componentDidMount(){if(w.Z.enabled("systemFonts")){const{locale:e}=this.props.requestContext;(0,I.vK)().then((()=>this.setState((t=>{const i=(0,I.j1)(),n=[...t.fontGroups.filter((e=>e.groupName===P.f9)),{groupName:P.gu,groupLabel:this.props.i18n.bt("Suggested", "Suggested", "Suggested fonts we expose to the user", undefined, true),fonts:i.filter((t=>t.fontGroup===P.gu&&!t.localeFilter||t.localeFilter===e))},{groupName:P.Rc,groupLabel:this.props.i18n.bt("Additional", "Additional", "Additional fonts we expose to the user", undefined, true),groupFooter:()=>(0,m.jsx)(s.xv,{size:"100",color:"subtle",children:(0,m.jsx)(s.rU,{href:"https://www.pinterest.com/_/_/help/business/article/build-a-pin",target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:this.props.i18n.bt("Licence info", "Licence info", "Link to legal information about system fonts", undefined, true)})}),fonts:i.filter((e=>e.fontGroup===P.Rc))}];return{fontGroups:n,text:this.getTextState(t.text,n)}}))))}}componentDidUpdate(e){const{canvasJson:t,pinCanvas:i,fontAssetResource:{data:n,isLoaded:o},stickerAssetResource:{data:s}}=this.props,{brandFontsLoaded:r,logoImagesLoaded:a}=this.state;if(i&&!e.pinCanvas&&i.on("after:render",this.onCanvasUpdate.bind(this)),o&&n&&n.length>0&&!r&&(0,I.KV)(n).then((()=>this.setState((e=>{const t=[{fonts:n,groupName:P.f9,groupLabel:this.props.i18n.bt("Uploaded fonts", "Uploaded Fonts", "fonts uploaded by the user", undefined, true)},...e.fontGroups.filter((e=>e.groupName!==P.f9))];return{fontGroups:t,brandFontsLoaded:!0,text:this.getTextState(e.text,t)}})))),s&&s.length>0&&!a){const e=s.map((e=>({id:e.assetId,type:"assetImage",src:e.source,width:e.width,height:e.height,assetId:e.assetId}))),{logo:i}=t||{},n=i?e.findIndex((e=>e.assetId===i.assetId)):null;this.setState((t=>({logoImages:e,logoImagesLoaded:!0,logo:{...t.logo,logoIndex:n}})))}}componentWillUnmount(){const{pinCanvas:e}=this.props;e&&e.off("after:render")}onCanvasUpdate(){const{pinCanvas:e}=this.props;e&&this.setState({numImages:e.getNumOfImages(),isImageSelected:e.isImageSelected(),isScalingMode:e.isScalingMode()})}render(){const{aspectRatioIndex:e,currentToolPane:t,fontGroups:i,isImageSelected:n,isScalingMode:o,logo:r,logoImages:a,numImages:l,text:d}=this.state,{canDeselectAspectRatio:c,pinCanvas:h,pinDraftId:p,type:_,mediaType:g,videoDuration:f,videoStartText:x,videoEndText:b,validateStartTime:y,validateEndTime:P,handleStartTimeChange:w,handleEndTimeChange:I}=this.props,E=(0,A.Z)(_),C=this._getToolPanes(i);return(0,m.jsxs)(s.xu,{minWidth:u.wj,width:u.wj,height:"100%",display:"flex",direction:"row",color:"default",flex:"none",children:[(0,m.jsx)(s.xu,{width:56,height:"100%",dangerouslySetInlineStyle:{__style:{borderRight:`1px solid ${ce}`}},display:"flex",direction:"column",color:"default",children:C.map(((e,i)=>(0,m.jsx)(s.xu,{"data-test-id":`pinbuilder-editor-${e.name}-pane-button`,"data-tutorial-id":`pinbuilder-editor-${e.name}-pane-button`,width:56,padding:2,dangerouslySetInlineStyle:{__style:{borderRight:t===e.name?"1px solid #fff":void 0,borderTop:0!==i&&t===e.name?`1px solid ${ce}`:"1px solid transparent",borderBottom:t===e.name?`1px solid ${ce}`:"1px solid transparent"}},children:(0,m.jsx)(s.u,{text:e.label,children:(0,m.jsx)(s.hU,{icon:e.icon,accessibilityLabel:e.label,onClick:()=>this.onIconClick(e.name),iconColor:t===e.name?"darkGray":"gray",size:"md"})})},e.name)))}),"crop"===t&&(0,m.jsx)(v,{aspectRatioIndex:e,aspectRatios:E,canDeselectAspectRatio:c,isImageSelected:n,isScalingMode:o,numImages:l,onReset:this.onCropReset,onSelectAspectRatioIndex:this.onSelectAspectRatioIndex,pinCanvas:h,pinDraftId:p,mediaType:g,videoDuration:f,videoStartText:x,videoEndText:b,validateStartTime:y,validateEndTime:P,handleStartTimeChange:w,handleEndTimeChange:I}),"logo"===t&&(0,m.jsx)(Y,{pinCanvas:h,logo:r,logoImages:a,onUploadLogos:this.onUploadLogos,onDeleteLogo:this.onDeleteLogo,onReset:this.onLogoReset,onSelectLogo:this.onSelectLogo,onChangeLogoSize:this.onChangeLogoSize,onSelectLogoMargin:this.onSelectLogoMargin,onSelectLogoPosition:this.onSelectLogoPosition,onSelectLogoBackgroundColor:this.onSelectLogoBackgroundColor,onSelectLogoTransparency:this.onSelectLogoTransparency}),"text"===t&&(0,m.jsx)(ae,{fontGroups:i,pinCanvas:h,text:d,getDefaultTextState:this.getDefaultTextState,onReset:this.onTextReset,onSelectFontFamily:this.onSelectFontFamily,onSelectTextColor:this.onSelectTextColor,onChangeFontSize:this.onChangeFontSize,onChangeLineHeight:this.onChangeLineHeight,onChangeLetterSpacing:this.onChangeLetterSpacing,onSelectTransform:this.onSelectTransform,onSelectAlignment:this.onSelectAlignment,onSelectMargin:this.onSelectMargin,onSelectBackgroundColor:this.onSelectBackgroundColor,onSelectBackgroundTransparency:this.onSelectBackgroundTransparency,onSelectPosition:this.onSelectPosition,onToggleShowMoreOptions:this.onToggleShowMoreOptions})]})}}function he(e){const{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)(),n=(0,o.useDispatch)(),{pinDraftId:s,type:r}=e,{pinItemIndex:a}=(0,o.useSelector)((({pinbuilder:e})=>e.pinDrafts[s])),l=(0,S.Z)({name:"FontAssetResource"}),u=(0,S.Z)({name:"StickerAssetResource"});return(0,m.jsx)(ue,{...e,canDeselectAspectRatio:"carousel"!==r&&!("story"===r&&0===a),fontAssetResource:l,invalidateStickerResource:()=>n((0,C.jB)("StickerAssetResource")),requestContext:(0,E.B)(),stickerAssetResource:u,i18n:i,logContextEvent:t})}var pe=i(724565),_e=i(734765),ge=i(223815),me=i(829407),fe=i(19121),xe=i(939853),be=i(634449),ye=i(537339),ve=i(833991),Pe=i(977558),we=i(333312);const Ie=function({height:e,onClick:t,selected:i,src:o,width:r}){const a=(0,c.ZP)(),l=(0,n.useRef)(null);if(!e&&!o&&!r)return null;const d=(null!=r?r:1)/(null!=e?e:1)>.5625?40:20;return(0,m.jsxs)(s.xu,{"data-test-id":"pinbuilder-editor-thumbnail",flex:"grow",height:"100%",marginStart:1,marginEnd:1,maxWidth:d,minHeight:40,children:[i&&(0,m.jsx)(we.default,{anchor:l.current,experienceIds:[501067],idealDirection:"up",placementId:1000135}),(0,m.jsx)(s.xu,{ref:l,children:(0,m.jsx)(N.Z,{onClick:t,rounded:!0,selected:i,children:(0,m.jsx)(s.zd,{rounding:2,children:(0,m.jsx)(s.Ee,{alt:a.bt("Carousel thumbnail", "Carousel thumbnail", "Description text for carousel image thumbnail when editing", undefined, true),naturalHeight:null!=e?e:1,naturalWidth:null!=r?r:1,src:o})})})})]},`carousel-thumbnail-${o}`)};var Ae=i(456463),Ee=i(699109),Ce=i(955625),Se=i(382964),je=i(305782);function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const De={__style:{zIndex:Pe.fe+1e3}},ke=new RegExp("\\d\\d:\\d\\d:\\d\\d");class ze extends n.Component{constructor(e){var t;super(e),t=this,Te(this,"updateCachedItems",(e=>{const{selectedId:t,cachedItems:i}=this.state,{media:n}=i[t],o=this.pinCanvas?{...n,...this.pinCanvas.getCanvasOutput()}:n,s=this.pinCanvas?this.pinCanvas.toJSON():null;s&&"localImage"===o.type&&this.setState({selectedId:e,cachedItems:{...i,[t]:{...i[t],media:o,canvasJson:s}}})})),Te(this,"setCarouselItem",(e=>{const{pinItemIds:t}=this.props,{selectedId:i,cachedItems:n}=this.state,o=t[e],{canvasJson:s,media:r}=n[o];o!==i&&n&&(this.updateCachedItems(o),this.pinCanvas&&s?this.pinCanvas.loadFromJSON(s):this.pinCanvas&&r&&r.src&&this.pinCanvas.setImage(r.src))})),Te(this,"onResize",(()=>{if(this._canvasContainer){const{width:e,height:t}=this._canvasContainer.getBoundingClientRect();this.pinCanvas&&this.pinCanvas.resize(e,t)}})),Te(this,"isVideo",(e=>!!e&&("localVideo"===e.type||"webVideo"===e.type))),Te(this,"onSaveChanges",(()=>{const{onDismiss:e,pinDraftId:t,updatePinItemImages:i,logContextEvent:n}=this.props,{selectedId:o,cachedItems:s,isVideoPlaying:r,videoStartText:a,videoEndText:l}=this.state,{media:d}=s[o]||{};let c=null;var u;this.pinCanvas&&(this.pinCanvas.removeTextLayer(!0),null!==(u=this.pinCanvas)&&void 0!==u&&u.isScalingMode&&(this.pinCanvas.exitScalingMode(),c={aux_data:{editor_option:"scale_mode_exit"}}));const h=this.pinCanvas?{...d,...this.pinCanvas.getCanvasOutput({width:d&&d.width||Ce.IU,maxImageSize:89478485}),signature:this.isVideo(d)&&d&&d.signature?d.signature:null}:d;i(t,o,s,this.isVideo(d)&&d?{...h,src:d.src,trimmedStartTime:(0,pe.SD)(a),trimmedEndTime:(0,pe.SD)(l)}:h,this.pinCanvas?this.pinCanvas.toJSON():null);const{pinCanvas:p}=this;p&&this.isVideo(d)&&r&&p.playOrPauseVideo(),e(),n({event_type:101,component:13780,element:12130,...c})})),Te(this,"onCancelChanges",(()=>{const{onDismiss:e,logContextEvent:t}=this.props,{selectedId:i,cachedItems:n,isVideoPlaying:o}=this.state,{media:s}=n[i]||{},{pinCanvas:r}=this;r&&this.isVideo(s)&&o&&r.playOrPauseVideo(),e(),t({event_type:101,component:13780,element:12131})})),Te(this,"onAspectRatioChange",(e=>{const{pinItemIds:t,type:i}=this.props;"carousel"===i&&e&&(0,Ee.Z)(t,this.state.cachedItems,e).then((e=>{const i=t.reduce(((t,i,n)=>({...t,[i]:e[n]})),{});this.setState({cachedItems:i})}))})),Te(this,"timeFormatError",(()=>this.props.i18n.bt("Time must be in the format 00:00:00", "Time must be in the format 00:00:00", "Error message for incorrect time format", undefined, true))),Te(this,"timeRangeError",(()=>this.props.i18n.bt("Video must be at least 4 seconds long.", "Video must be at least 4 seconds long.", "Error message indicating that video is too short", undefined, true))),Te(this,"validateEndTime",(e=>{if(!ke.test(e))return this.timeFormatError();const{videoStartText:t}=this.state;return ke.test(t)&&(0,pe.SD)(e)-(0,pe.SD)(t)<4?this.timeRangeError():""})),Te(this,"validateStartTime",(e=>{if(!ke.test(e))return this.timeFormatError();const{videoEndText:t}=this.state;return ke.test(t)&&(0,pe.SD)(t)-(0,pe.SD)(e)<4?this.timeRangeError():""})),Te(this,"handleEndTimeChange",(({value:e})=>{if(this.setState({videoEndText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12144,aux_data:{value:e}}),!ke.test(e))return;const{videoDuration:t}=this.state,i=(0,pe.SD)(e),n=!!t&&i>t;n&&this.setState({videoEndText:t?(0,pe.to)(t):""}),this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoEndTime:n?t:i})})),Te(this,"handleStartTimeChange",(({value:e})=>{this.setState({videoStartText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12143,aux_data:{value:e}}),ke.test(e)&&this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoStartTime:(0,pe.SD)(e)})})),Te(this,"onVideoTrimmerUpdate",(()=>{if(this.pinCanvas){const{videoStartTime:e,videoEndTime:t}=this.pinCanvas.getVideoTrimmerTimeRange(),i=(0,pe.to)(e),n=(0,pe.to)(t);this.setState({videoStartText:i,videoEndText:n}),this.props.logContextEvent({event_type:104,component:13780,element:12146,aux_data:{value:`start=${i},end=${n}`}})}})),Te(this,"onTogglePlayState",(()=>{this.pinCanvas&&this.pinCanvas.playOrPauseVideo(),this.props.logContextEvent({event_type:101,component:13780,element:12145})})),Te(this,"setCanvasContainerRef",(e=>{this._canvasContainer=e,this.onResize()})),Te(this,"handleKeyupEvents",(e=>{27===e.keyCode&&this.onCancelChanges()})),Te(this,"onPinCanvasLoaderLoaded",(async function(e){if(e){const{selectedId:i,cachedItems:n}=t.state,{canvasJson:o,media:s}=n[i]||{},{src:r}=s||{},a=t.isVideo(s)?"video":"image";t.pinCanvas=e,e.on("trimmer:dragged",t.onVideoTrimmerUpdate),e.on("video:play",(()=>t.setState({isVideoPlaying:!0}))),e.on("video:pause",(()=>t.setState({isVideoPlaying:!1}))),o?await e.loadFromJSON(o):w.Z.enabled("videoEditing")?await e.setMedia(r,a):await e.setImage(r),t.forceUpdate(),t.onResize()}}));const{pinItemId:i,pinItems:n}=e,{media:o}=n[i],s=o&&o.duration?o.duration:0;this.state={selectedId:i,cachedItems:n,videoDuration:s,videoStartText:(0,pe.to)(0),videoEndText:s?(0,pe.to)(s):(0,pe.to)(0),isVideoPlaying:!0}}componentDidMount(){const{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:n}=e;document.addEventListener("keyup",this.handleKeyupEvents,!1),window.addEventListener("resize",this.onResize),t(u.jh),i(400),n(1e3)}componentWillUnmount(){const{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:n}=e;document.removeEventListener("keyup",this.handleKeyupEvents,!1),window.removeEventListener("resize",this.onResize),t(null),i(null),n(null)}render(){const{pinDraftId:e,pinItemIds:t,type:i}=this.props,{selectedId:n,cachedItems:o,videoDuration:r,videoStartText:a,videoEndText:l,isVideoPlaying:d}=this.state,{canvasJson:c,media:h}=o[n]||{},p=this.isVideo(h)?"video":"image";return(0,m.jsx)(s.mh,{children:(0,m.jsxs)(ge.Z,{allowClickAndDrag:!0,children:[(0,m.jsx)(s.xu,{position:"fixed",top:!0,right:!0,bottom:!0,left:!0,dangerouslySetInlineStyle:De,children:(0,m.jsxs)(s.xu,{display:"flex",direction:"row",color:"secondary",height:"100%",children:[(0,m.jsxs)(s.xu,{ref:this.setCanvasContainerRef,display:"flex",flex:"grow",height:"100%",justifyContent:"center",alignItems:"center",overflow:"hidden",position:"relative",children:[(0,m.jsxs)(s.xu,{position:"absolute",top:!0,right:!0,marginTop:3,marginStart:4,marginEnd:4,dangerouslySetInlineStyle:{__style:{zIndex:u.v9}},children:[(0,m.jsx)(s.xu,{marginStart:2,marginEnd:2,display:"inlineBlock","data-test-id":"cancel-edit-button",children:(0,m.jsx)(s.zx,{name:"cancel",text:this.props.i18n.bt("Cancel", "Cancel", "Cancel pin edit", undefined, true),size:"md",onClick:this.onCancelChanges})}),(0,m.jsx)(s.xu,{marginStart:2,marginEnd:2,display:"inlineBlock","data-test-id":"save-edit-button","data-tutorial-id":"pin-builder-editor-save-edit-button",children:(0,m.jsx)(s.zx,{name:"saveChanges",disabled:this.isVideo(h)&&(this.validateStartTime(a).length>0||this.validateEndTime(l).length>0),text:this.props.i18n.bt("Update changes", "Update changes", "Update changes in pin edit", undefined, true),size:"md",color:"red",onClick:this.onSaveChanges})})]}),(0,m.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,m.jsx)(Se.Z,{onLoaded:this.onPinCanvasLoaderLoaded}),"carousel"===i&&(0,m.jsx)(s.xu,{bottom:!0,display:"flex",flex:"grow",justifyContent:"center",marginBottom:10,position:"absolute",width:196,children:t.map(((e,t)=>{const{media:i}=o&&o[e]||{},{height:s,src:r,width:a}=i||{};return(0,m.jsx)(Ie,{height:s,src:r,selected:n===e,onClick:()=>this.setCarouselItem(t),width:a},`carousel-thumbnail-${e}`)}))}),"video"===p&&(0,m.jsx)(s.xu,{bottom:!0,left:!0,flex:"none",rounding:"circle",marginBottom:6,marginStart:6,position:"absolute",children:(0,m.jsx)(s.hU,{icon:d?"pause":"play",accessibilityLabel:d?this.props.i18n.bt("Play", "Play", "Play video", undefined, true):this.props.i18n.bt("Pause", "Pause", "Pause video", undefined, true),iconColor:"darkGray",size:"sm",bgColor:"white",onClick:this.onTogglePlayState})})]})]}),(0,m.jsx)(he,{pinCanvas:this.pinCanvas,pinDraftId:e,canvasJson:c,onAspectRatioChange:this.onAspectRatioChange,type:i,mediaType:p,videoDuration:r,videoStartText:a,videoEndText:l,validateStartTime:this.validateStartTime,validateEndTime:this.validateEndTime,handleStartTimeChange:this.handleStartTimeChange,handleEndTimeChange:this.handleEndTimeChange})]})}),(0,m.jsx)(be.Z,{children:([e,t])=>{return e===u.jh&&(0,m.jsx)(ye.Z,{steps:(0,Ae.Z)((i=this.props.i18n,[{selector:'[data-tutorial-id="pinbuilder-editor-crop-pane-button"]',id:"guide-pin-builder-aspect",description:i.bt("Crop your image – a 2:3 aspect ratio works best.", "Crop your image - a 2:3 aspect ratio works best!", "EditingTourConfig.AspectRatioGuide", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-logo-pane-button"]',id:"guide-pin-builder-logo",description:i.bt("Add a logo to showcase your brand. Try a transparent .png file.", "Add a logo to showcase your brand. Try a transparent .png file.", "EditingTourConfig.Logo", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-text-pane-button"]',id:"guide-pin-builder-text",description:i.bt("Tell a story with a text overlay. Keep it snappy, and try a background colour if it's hard to read.", "Tell a story with a text overlay. Keep it snappy, and try a background color if it's hard to read.", "EditingTourConfig.TextOverlay", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-reset-button"]',id:"guide-pin-builder-edit-reset",description:i.bt("Want a refresh? Clear any changes you've made to start again.", "Want a refresh? Clear any changes you've made to start over.", "EditingTourConfig.ClearChanges", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-save-edit-button"]',id:"guide-pin-builder-edit-done",description:i.bt("Finished? Tap 'Update changes' to apply your changes.", "Finished? Tap Update Changes to apply your changes.", "EditingTourConfig.UpdateChanges", undefined, true),padding:0}])),onComplete:()=>t(xe.I),onDismiss:()=>t(xe.I)});var i}})]})})}}function Oe(e){const{logContextEvent:t}=(0,d.v)(),i=(0,_e.Z)(),n=(0,c.ZP)(),s=(0,r.Z)(),a=(0,o.useDispatch)(),l=(0,fe.Z)(),u=l.isAuth?l.id:"",h=l.isAuth?l.country:"",{pinDraftId:p}=e,_=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[p].type)),g=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[p].pinItemIds)),f=g[(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[p].pinItemIndex))],x=(0,o.useSelector)((({pinbuilder:e})=>"story"===_?e.storyPinItems:e.pinItems)),{canvasJson:b,media:y}=x[f];(0,me.Z)((()=>{t({event_type:120,component:13780})}));return(0,m.jsx)(ze,{...e,canvasJson:b,footerContext:(0,ve.YW)(),media:y,pinItemId:f,pinItemIds:g,pinItems:x,type:_,updatePinItemImages:(e,o,r,l,d)=>a((0,je.KF)({pinDraftId:e,selectedId:o,cachedItems:r,editedMedia:l,canvasJson:d,userId:u,country:h,i18n:n,logContextEvent:t,siteType:i,ideaPinRenamingEnabled:s})),i18n:n,logContextEvent:t})}},248060:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),s=i(883119),r=i(407043),a=i(898781),l=i(305782),d=i(785893);class c extends n.Component{constructor(...e){var t,i,n;super(...e),n=({checked:e})=>{const{setShareable:t,logContextEvent:i}=this.props;t(e),i({event_type:101,component:13308,element:12125,aux_data:{is_checked:e}})},(i="handleChange")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{checked:e}=this.props,t="pin-draft-carousel-control";return(0,d.jsxs)(s.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,d.jsx)(s.XZ,{checked:e,id:t,onChange:this.handleChange,size:"sm"}),(0,d.jsx)(s.__,{htmlFor:t,children:(0,d.jsx)(s.xu,{paddingX:2,children:(0,d.jsx)(s.xv,{size:"200",children:this.props.i18n.bt("Use the same text and URL for each image", "Use the same text and URL for each image", "Option to select if user wants to copy text and link to all carousel items", undefined, true)})})})]})}}function u(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,o.useDispatch)(),s=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].pinItemShareable));return(0,d.jsx)(c,{...e,checked:s,i18n:i,logContextEvent:t,setShareable:t=>n((0,l.u9)(e.pinDraftId,t))})}},912820:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(702664),o=i(883119),s=i(785893);const r=90;function a({taggedObjectId:e}){var t,i,a;const l=(0,n.useSelector)((({pinbuilder:t})=>t.taggedObjects[e].media));return l?(0,s.jsx)(o.xu,{paddingX:1,display:"inlineBlock",position:"relative",children:(0,s.jsx)(o.zd,{height:r,rounding:2,wash:!0,width:r,children:(0,s.jsx)(o.Ee,{alt:"",naturalHeight:null!==(t=l.height)&&void 0!==t?t:1,naturalWidth:null!==(i=l.width)&&void 0!==i?i:1,src:null!==(a=l.url)&&void 0!==a?a:"",fit:"cover"})})}):null}},84769:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(702664),s=i(883119),r=i(630767),a=i(969759),l=i(22182),d=i(898781),c=i(299295),u=i(773285),h=i(305782),p=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(...e){super(...e),_(this,"handleScheduledDateChange",(e=>{const{scheduledTime:t,setScheduledDate:i,setScheduledDateError:n,setScheduledTime:o,setScheduledTimeError:s}=this.props,{value:r}=e||{};i(r),n(null);const a=new Date;t&&r&&r.toDateString()===a.toDateString()&&(o(null),s(null))})),_(this,"handleScheduledTimeChange",(e=>{const{setScheduledTime:t,setScheduledTimeError:i}=this.props;t(e.value),i(null)})),_(this,"handleSwitchScheduleOption",(e=>()=>{const{setScheduledDate:t,setScheduledDateError:i,setPublishOption:n,setScheduledTime:o,setScheduledTimeError:s}=this.props;if(n(e),"publish-immediately"===e)t(null),i(null),o(null),s(null);else{const e=(0,a.Z)(new Date,1);t(e);const i=new Date(e);i.setHours(12,0,0,0),o(i)}}))}render(){const{displaySwitchUi:e,isIdeaPinSchedulingEnabled:t,inStlToolingExp:i,pinDraftId:n,publishOption:o,scheduledDate:d,scheduledDateError:u,scheduledTime:h,scheduledTimeError:_}=this.props,g=new Date,m=(0,a.Z)(g,t?c.$K:c.TZ);g.getMinutes()>=30?g.setHours(g.getHours()+1,0,0,0):g.setHours(g.getHours(),30,0,0);const f=d&&d.toDateString()===g.toDateString()?g:void 0,x=`pin-draft-schedule-publish-immediately-${n}`,b=`pin-draft-schedule-publish-later-${n}`;return(0,p.jsxs)(s.xu,{children:[e?(0,p.jsxs)(s.xu,{"data-test-id":"pin-draft-switch-group",display:"flex",paddingY:6,children:[(0,p.jsx)(s.rs,{id:"pin-draft-switch-group",onChange:this.handleSwitchScheduleOption("publish-later"===o?"publish-immediately":"publish-later"),switched:"publish-later"===o}),(0,p.jsx)(s.xu,{marginStart:2,children:(0,p.jsx)(s.xv,{children:this.props.i18n.bt("Publish at a later date", "Publish at a later date", "pinbuilder.switchButton.pinDraft", undefined, true)})})]}):(0,p.jsx)(s.FX,{id:"pin-draft-radio-group",legend:this.props.i18n.bt("Pin draft", "Pin draft", "pinbuilder.radioButton.pin_draft", undefined, true),legendDisplay:"hidden",direction:"row",children:(0,p.jsxs)(s.xu,{display:"flex",paddingY:4,justifyContent:i?"between":void 0,children:[(0,p.jsxs)(s.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(s.FX.RadioButton,{checked:"publish-immediately"===o,id:x,onChange:this.handleSwitchScheduleOption("publish-immediately"),size:"sm",value:"publish-immediately"}),(0,p.jsx)(s.xu,{children:(0,p.jsx)(s.__,{htmlFor:x,children:(0,p.jsx)(s.xu,{paddingX:2,children:(0,p.jsx)(s.xv,{size:"200",children:i?this.props.i18n.bt("Publish now", "Publish now", "pinbuilder.radioButton.publishNow", undefined, true):this.props.i18n.bt("Publish immediately", "Publish immediately", "Radio button label for publishing the pin immediately", undefined, true)})})})})]}),(0,p.jsxs)(s.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(s.FX.RadioButton,{checked:"publish-later"===o,id:b,onChange:this.handleSwitchScheduleOption("publish-later"),size:"sm",value:"publish-later"}),(0,p.jsx)(s.xu,{children:(0,p.jsx)(s.__,{htmlFor:b,children:(0,p.jsx)(s.xu,{paddingX:2,children:(0,p.jsx)(s.xv,{size:"200",children:i?this.props.i18n.bt("Publish later", "Publish later", "pinbuilder.radioButton.publishLater", undefined, true):this.props.i18n.bt("Publish at a later date", "Publish at a later date", "Radio button label by clicking which user will schedule a date and time to publish the pin later", undefined, true)})})})})]})]})}),"publish-later"===o&&(0,p.jsxs)(s.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,p.jsx)(s.xu,{column:6,paddingX:1,children:(0,p.jsx)(l.Z,{errorMessage:u&&"string"==typeof u?u:void 0,id:`pin-draft-schedule-date-field-${n}`,idealDirection:"up",maxDate:m,minDate:g,onChange:this.handleScheduledDateChange,value:d||void 0})}),(0,p.jsx)(s.xu,{column:6,paddingX:1,children:(0,p.jsx)(r.Z,{error:_,id:`pin-draft-schedule-time-field-${n}`,idealDirection:"up",minTime:f,onChange:this.handleScheduledTimeChange,placeholder:this.props.i18n.bt("Time", "Time", "Placeholder for time field", undefined, true),value:h})})]})]})}}function m(e){const t=(0,d.ZP)(),{pinDraftId:i}=e,n=(0,o.useDispatch)(),{checkExperiment:s}=(0,u.F)(),r=s("web_sce_idea_pin_scheduling").anyEnabled,a=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].publishOption)),l=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDate)),c=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDateError)),_=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTime)),m=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTimeError));return(0,p.jsx)(g,{...e,i18n:t,isIdeaPinSchedulingEnabled:r,publishOption:a,scheduledDate:l,scheduledDateError:c,scheduledTime:_,scheduledTimeError:m,setPublishOption:e=>n((0,h.RR)(i,e)),setScheduledDate:e=>{n((0,h.WT)(i)),n((0,h.I0)(i,e))},setScheduledDateError:e=>n((0,h.Yr)(i,e)),setScheduledTime:e=>{n((0,h.WT)(i)),n((0,h.$K)(i,e))},setScheduledTimeError:e=>n((0,h.Ve)(i,e))})}},898246:(e,t,i)=>{i.d(t,{ZP:()=>D});var n,o,s,r=i(667294),a=i(702664),l=i(23279),d=i.n(l),c=i(883119),u=i(214494),h=i(407043),p=i(333312),_=i(898781),g=i(349700),m=i(755742),f=i(294184),x=i.n(f),b=i(785893);class y extends r.PureComponent{render(){const{value:e,onDelete:t,readOnly:i}=this.props;return(0,b.jsxs)(c.xu,{rounding:2,color:"secondary",display:"flex",justifyContent:"center",alignItems:"center",padding:2,dangerouslySetInlineStyle:{__style:{userSelect:"none"}},children:[(0,b.jsx)(c.xv,{size:"200",weight:"bold",children:e}),!i&&(0,b.jsx)(c.xu,{marginStart:2,children:(0,b.jsx)(c.iP,{fullHeight:!1,fullWidth:!1,onTap:t,rounding:"circle",children:(0,b.jsx)(c.xu,{display:"flex",justifyContent:"center",alignItems:"center",color:"default",padding:1,rounding:"circle",children:(0,b.jsx)(c.JO,{accessibilityLabel:this.props.i18n.bt("Delete tag", "Delete Tag", "delete this tag", undefined, true),icon:"cancel",color:"default",size:8,inline:!0})})})})]})}}function v(e){const t=(0,_.ZP)();return(0,b.jsx)(y,{...e,i18n:t})}function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}s={readOnly:!1},(o="defaultProps")in(n=y)?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s;class w extends r.Component{constructor(...e){super(...e),P(this,"handleChange",(e=>{const{onChange:t}=this.props;t({value:e.target.value})})),P(this,"handleDeleteTag",(e=>()=>{const{onRemoveTag:t}=this.props;t(e)})),P(this,"getColor",(()=>{const{errorMessage:e,focused:t,showOnBlur:i,value:n}=this.props;return e?"#e60023":t?"#0074e8":n&&!i?"transparent":"rgba(142, 142, 142, 0.5)"}))}get textField(){return this._textField}componentDidUpdate(){this._textField&&this.props.focused&&this._textField.focus()}render(){const{disabled:e,errorMessage:t,id:i,onKeyDown:n,placeholder:o,size:s,showOnBlur:a,value:l="",tags:d,focused:u}=this.props,h={__style:{boxShadow:`0 ${u||!!t?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}};return(0,b.jsxs)(c.xu,{column:12,display:"flex",direction:"column",children:[(0,b.jsxs)(c.xu,{display:"flex",alignItems:"end",marginStart:-2,marginTop:-2,wrap:!0,children:[d&&d.map(((e,t)=>{const{id:i,value:n}=e;return(0,b.jsx)(c.xu,{marginStart:2,marginTop:2,marginBottom:-1,children:(0,b.jsx)(v,{value:n,onDelete:this.handleDeleteTag(i)})},t)})),!e&&(0,b.jsx)(c.xu,{flex:"grow",marginTop:2,marginStart:2,children:(0,b.jsx)("input",{ref:e=>this._textField=e,type:"text",className:x()("TextArea__textArea",{TextArea__dark:!0,TextArea__disabled:e,TextArea__enabled:!e,TextArea__large:"lg"===s,TextArea__medium:"md"===s,TextArea__wrap:!1,TextArea__nowrap:!0}),id:i,onChange:this.handleChange,onKeyDown:n,placeholder:o,value:l,maxLength:30,style:{height:"21px"}})})]}),(u||a||t||!l)&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(c.xu,{column:12,dangerouslySetInlineStyle:h}),(0,b.jsx)(c.xu,{column:12,marginTop:1,minHeight:15,children:(u||a||t)&&(0,b.jsx)(c.xu,{column:12,display:"flex",justifyContent:"between",children:(0,b.jsx)(c.xu,{flex:"grow",children:(0,b.jsx)(c.xv,{size:"100",color:"error",children:t})})})})]})]})}}function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}P(w,"defaultProps",{disabled:!1,size:"md",tags:[],focused:!1});const A={component:{display:"flex",position:"relative"},flyout:{backgroundColor:"#fff",border:"1px solid #efefef",borderRadius:"8px",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.1)",boxSizing:"border-box",display:"flex",flexDirection:"column",maxHeight:220,overflow:"scroll",position:"absolute",padding:"16px 0",width:"100%"}};class E extends r.Component{constructor(...e){super(...e),I(this,"state",{value:"",hoveredValue:"",flyoutHeight:0,hoveredSuggestionIndex:null,focused:!1}),I(this,"handleKeyDown",(e=>{const{value:t}=this.state,{tags:i}=this.props;if(e.keyCode===m.Z.BACKSPACE&&""===t&&i.length>0){const{id:e}=i[i.length-1];this.handleRemoveTag(e)}})),I(this,"handleChange",(({value:e})=>{const{onChange:t}=this.props;this.setState({value:e,hoveredValue:""}),t(e)})),I(this,"handleSuggestionMouseEnter",(e=>{const{suggestions:t}=this.props,i=t[e];this.setState({hoveredSuggestionIndex:e,hoveredValue:i.tagValue||i.value})})),I(this,"handleSuggestionMouseLeave",(()=>{this.setState({hoveredSuggestionIndex:null,hoveredValue:""})})),I(this,"handleAddTag",(e=>{const{onAddTag:t}=this.props;t(e),this.setState({value:"",hoveredValue:""}),this._textFieldRef&&this._textFieldRef.textField&&this._textFieldRef.textField.focus()})),I(this,"handleRemoveTag",(e=>{const{onRemoveTag:t}=this.props;t(e)})),I(this,"handleClick",(e=>{if(this._componentRef&&e){const{onChange:t}=this.props,i=e.target instanceof Node&&this._componentRef.contains(e.target);i?this.setState({focused:i}):(this.setState({focused:i,value:"",hoveredValue:"",hoveredSuggestionIndex:null}),t(""))}})),I(this,"setTextFieldRef",(e=>{this._textFieldRef=e})),I(this,"renderFlyout",(e=>{const{flyoutHeight:t,hoveredSuggestionIndex:i}=this.state,n=-1*t-10;return(0,b.jsxs)("div",{ref:e=>{this._flyoutRef=e},style:{...A.flyout,top:n},children:[(0,b.jsx)(c.xu,{paddingX:4,marginBottom:2,children:(0,b.jsx)(c.xv,{size:"200",color:"subtle",children:(0,g.nk)(this.props.i18n.nbt(["Pick relevant tags ({{ count }} result)", "Pick relevant tags ({{ count }} results)"], e.length, "Number of matching tags to the query.", true),{count:e.length})})}),e.map(((e,t)=>{const n=t===i;return(0,b.jsx)(c.iP,{onMouseEnter:()=>this.handleSuggestionMouseEnter(t),onMouseLeave:this.handleSuggestionMouseLeave,onTap:()=>this.handleAddTag(e),children:(0,b.jsx)(c.xu,{paddingX:4,paddingY:2,color:n?"secondary":"transparent","data-test-id":`TaggableFieldFlyout-${t}`,children:(0,b.jsx)(c.xv,{size:"200",weight:"bold",children:e.value})})},t)}))]})}))}componentDidMount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentWillUnmount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentDidUpdate(e,t){if(this._flyoutRef){const{height:e}=this._flyoutRef.getBoundingClientRect();t.flyoutHeight!==e&&this.setState({flyoutHeight:e})}}render(){const{disabled:e,errorMessage:t,pinDraftId:i,placeholder:n,suggestions:o,tags:s}=this.props,{focused:r,hoveredValue:a,value:l}=this.state,d=s.map((e=>({value:e.tagValue?e.tagValue:e.value,id:e.id}))),c=e||!r&&s.length>0;return(0,b.jsxs)("div",{ref:e=>{this._componentRef=e},style:A.component,children:[l&&!e&&r&&o.length>0&&this.renderFlyout(o),(0,b.jsx)(w,{ref:this.setTextFieldRef,disabled:c,focused:r,id:`${i}-TaggableTextField`,errorMessage:t,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onRemoveTag:this.handleRemoveTag,placeholder:n,value:a||l,tags:d,showOnBlur:!0})]})}}I(E,"defaultProps",{suggestions:[]});const C=function(e){const t=(0,_.ZP)();return(0,b.jsx)(E,{...e,i18n:t})};var S=i(305782);function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends r.Component{constructor(...e){super(...e),j(this,"state",{suggestions:[],noSuggestionsFromQuery:!1,containerRef:null}),j(this,"_hasStartTypingContextLogFired",!1),j(this,"saveRef",(e=>{this.setState({containerRef:e})})),j(this,"onAddTag",(e=>{const{addInterestTag:t}=this.props;t(e),this.setState({suggestions:[],noSuggestionsFromQuery:!1})})),j(this,"onRemoveTag",(e=>{const{removeInterestTag:t}=this.props;t(e)})),j(this,"onChange",d()((e=>{if(e){const{pinDraftId:t,logContextEvent:i}=this.props,n="InterestTaggingResource",o={query:e,minLevel:1};u.Z.create(n,o).callGet().then((e=>{const{data:{suggestions:t}}=e.resource_response,i=t.map((e=>({id:e.id,value:e.name,tagValue:e.interest_name}))),n=this._getUnselectedSuggestions(i);this.setState({suggestions:i,noSuggestionsFromQuery:0===n.length})})),this._hasStartTypingContextLogFired||(this._hasStartTypingContextLogFired=!0,i({event_type:7383,component:13209,element:11449,aux_data:{pin_draft_id:t}}))}else this.setState({suggestions:[],noSuggestionsFromQuery:!1})}),250)),j(this,"_getUnselectedSuggestions",(e=>{const{interestTags:t}=this.props,i=t.map((e=>e.id));return e.reduce(((e,t)=>i.includes(t.id)?e:[...e,t]),[])})),j(this,"getErrorMessage",(()=>{const{interestTags:e}=this.props,{noSuggestionsFromQuery:t}=this.state;return 10===e.length?this.props.i18n.bt("You have reached the maximum number of tags allowed.", "You have reached the maximum number of tags allowed.", "The maximum number of tags user can add to a pin is reached.", undefined, true):t?this.props.i18n.bt("There are no tags that match your query.", "There are no tags that match your query.", "No suggested results found based on the user query.", undefined, true):""}))}render(){const{interestTags:e,pinDraftId:t}=this.props,{containerRef:i,suggestions:n}=this.state,o=this._getUnselectedSuggestions(n),s=this.getErrorMessage(),r=e.length>0?"":this.props.i18n.bt("Add tags", "Add tags", "text area placeholder to prompt user to tags to the pin.", undefined, true);return(0,b.jsxs)(c.xu,{ref:this.saveRef,children:[(0,b.jsx)(C,{disabled:10===e.length,pinDraftId:t,errorMessage:s,placeholder:r,suggestions:o,tags:e,onAddTag:this.onAddTag,onRemoveTag:this.onRemoveTag,onChange:this.onChange}),(0,b.jsx)(p.default,{experienceIds:[501388],placementId:1000135,anchor:i,idealDirection:"up",flyoutSize:"lg",textOverflow:"normal"})]})}}function D(e){const{logContextEvent:t}=(0,h.v)(),i=(0,_.ZP)(),n=(0,a.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].interestTags)),o=(0,a.useDispatch)();return(0,b.jsx)(T,{...e,i18n:i,logContextEvent:t,interestTags:n,addInterestTag:t=>o((0,S.YN)(e.pinDraftId,t)),removeInterestTag:t=>o((0,S.Ug)(e.pinDraftId,t))})}},553558:(e,t,i)=>{i.d(t,{ZP:()=>wi});var n=i(667294),o=i(702664),s=i(616550),r=i(883119),a=i(653769),l=i(172071),d=i(237056),c=i(746547),u=i(313580),h=i(898781),p=i(299295),_=i(785893);function g({coverImageHeight:e,pinDraftId:t}){const i=(0,h.ZP)();return(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:"100%",children:[(0,_.jsx)(r.xu,{paddingY:4,children:(0,_.jsx)(r.xv,{lineClamp:1,weight:"bold",align:"center",children:i.bt("Select more images", "Select more images", "pinBuilder.pinDraftBodyExternalView.multiselect.subheader.text", undefined, true)})}),(0,_.jsx)(r.xu,{height:p.sD-(null!=e?e:0)-48,children:(0,_.jsx)(u.Z,{pinDraftId:t})})]})}var m=i(945212),f=i(407043),x=i(402171),b=i(349700),y=i(373695),v=i(54574),P=i(665866),w=i(616672),I=i(773285),A=i(780280),E=i(734765),C=i(19121),S=i(333206),j=i(846760),T=i(505132),D=i(305782),k=i(838548),z=i(350118);const O={__style:{paddingTop:p.XB}},R=1e4;function L({pinDraftId:e,pinItemId:t}){var i;const a=(0,h.ZP)(),u=(0,d.Z)(),{logContextEvent:L}=(0,f.v)(),M=(0,o.useDispatch)(),B=(0,A.B)(),N=(0,s.useHistory)(),Z=(0,C.Z)(),F=Z.isAuth?Z.id:"",U=Z.isAuth?Z.country:"",V=Z.isAuth&&Z.isPartner,[H,G]=(0,n.useState)(!1),[W,$]=(0,n.useState)(null),[q,X]=(0,n.useState)(""),Y=(0,E.Z)(),{checkExperiment:K}=(0,I.F)(),J=(0,o.useSelector)((({pinbuilder:{pinDrafts:t,pinItems:i}})=>{const{pinItemIds:n}=t[e],{media:o}=i[n[0]];return o?(0,w.Z)(o):p.sD})),Q=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].pinId)),ee=(0,z.S6)()(null!=Q?Q:""),te=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>Q&&"create"===t[e].mode?ee:null)),ie=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteDefaultImageUrl||"")),ne=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink)),oe=(0,v.Z)({url:ne}),se=!!P.Z.enabled("offsite_pin_creation_multi_select")&&((null===(i=oe.data)||void 0===i?void 0:i.items.length)||0)>0;(0,n.useEffect)((()=>{l.Z.increment("offsite_pin_creation.view",1,{type:P.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"})}),[]),(0,n.useEffect)((()=>{if(te){const e=setTimeout(window.close,R);return()=>{e&&clearTimeout(e)}}}),[te]);const re=t=>{var i;i=t,M((0,D.Nv)(e,i)),P.Z.enabled("offsite_pin_creation_multi_select")?M((0,D.m_)({pinDraftId:e,userId:F,country:U,isPartner:V,i18n:a,logContextEvent:L,orbacSubjectId:void 0,checkExperiment:K,siteType:Y,ideaPinRenamingEnabled:u})):M((0,k.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:F,orbacSubjectId:void 0,country:U,isPartner:V,i18n:a,logContextEvent:L,ideaPinRenamingEnabled:u})),l.Z.increment("offsite_pin_creation.create_pin",1,{type:P.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"})},ae=({title:e})=>{X(e),G(!0)},le=()=>{$(null),G(!1)},de=e=>{M((0,j.DR)(Z)),re({boardId:e.id,url:e.url,title:e.name||""}),le()},ce=e=>{$(e)},ue=e=>{W&&re({boardId:W.id,title:e.title||"",sectionId:e.id}),le()},he=()=>{const e=`${m.r}=${m.O}`,t=`${window.location.href}&${e}`;return encodeURIComponent(t)},pe=p.LM,_e=e=>"number"!=typeof e.height||"number"!=typeof e.width?{width:e.width,height:e.height}:e.height>=e.width?{width:227/e.height*e.width,height:227}:{width:pe,height:pe/e.width*e.height};return(0,_.jsxs)(r.xu,{display:"flex",direction:"row","data-test-id":"pindraft-external-body",marginTop:P.Z.enabled("offsite_pin_creation_multi_select")?8:0,children:[(0,_.jsx)(r.xu,{paddingX:5,display:"flex",direction:"column",alignItems:P.Z.enabled("offsite_pin_creation_multi_select")?"end":"center",justifyContent:"center",children:P.Z.enabled("offsite_pin_creation_multi_select")?(0,_.jsx)(r.xu,{width:p.LM,children:(0,_.jsx)(y.Z,{url:ie,children:({image:t})=>{var i;return(0,_.jsx)(n.Fragment,{children:t&&t.length>0&&(0,_.jsx)(n.Fragment,{children:(0,_.jsxs)(r.xu,{width:p.LM,children:[(0,_.jsx)(r.xu,{"data-test-id":"media-image-view",width:_e(t[0]).width,height:_e(t[0]).height,marginStart:"auto",marginEnd:"auto",overflow:"hidden",rounding:2,children:(0,_.jsx)(r.Ee,{alt:a.bt("Uploaded image", "Uploaded image", "pinbuilder.PinDraftBodyExternalView.image", undefined, true),src:null!==(i=t[0].url)&&void 0!==i?i:"",naturalHeight:t[0].height||1,naturalWidth:t[0].width||1,fit:"cover"})}),se&&(0,_.jsx)(g,{coverImageHeight:_e(t[0]).height,pinDraftId:e})]})})})}},ie)}):(0,_.jsx)(c.Z,{height:J,pinDraftId:e,pinItemId:t})}),(0,_.jsx)(r.xu,{color:"secondary",width:2,marginTop:-5}),B.isAuthenticated?te?(()=>{var e;const t=te?null===(e=te.board)||void 0===e?void 0:e.name:"";return(0,_.jsxs)(r.kC,{alignItems:"center",direction:"column",height:530,justifyContent:"center",width:"100%",children:[(0,_.jsx)(r.xu,{padding:6,children:(0,_.jsx)(r.xv,{lineClamp:1,weight:"bold",children:(0,b.nk)(a.bt("Saved 1 idea to {{ boardName }}! ", "Saved 1 idea to {{ boardName }}! ", "Tell user number of pins that he/she saved in a board", undefined, true),{boardName:t})})}),(0,_.jsx)(r.xu,{padding:2,width:300,children:(0,_.jsx)(r.zx,{fullWidth:!0,color:"red",text:a.bt("See it now", "See it now", "Button label for navigating to the scheduled pins", undefined, true),size:"lg",onClick:()=>Q?N.push(`/pin/${Q}/`):N.push("/pins/")})}),(0,_.jsx)(r.xu,{padding:2,width:300,children:(0,_.jsx)(r.zx,{fullWidth:!0,color:"gray",text:a.bt("Share this Pin", "Share this pin", "Button label for sharing this pin", undefined, true),size:"lg",onClick:()=>Q?N.push(`/pin/${Q}/?share=true`):N.push("/pins/")})})]})})():(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(r.xu,{flex:"grow",minHeight:Math.max(J,p.sD),paddingX:5,width:"100%",dangerouslySetInlineStyle:O,children:(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,_.jsx)(r.xu,{paddingY:1,children:(0,_.jsx)(r.xv,{lineClamp:1,weight:"bold",children:a.bt("Choose a board", "Choose a board", "pinbuilder.PinDraftBodyExternalView.renderBoardPicker", undefined, true)})}),(0,_.jsx)(j.uC,{onBoardCreate:ae,onItemChosen:re,paneWidth:430,displayShortlistMostRecentBoard:!0,useLegoLayout:!1,setBoardWithSection:ce})]})}),H&&!W&&(0,_.jsx)(S.Z,{onBoardCreate:de,onClose:le,suggestedBoardName:q}),H&&!!W&&(0,_.jsx)(T.Z,{selectedBoard:W,onClose:le,onSectionCreate:ue})]}):(0,_.jsx)(r.xu,{"data-test-id":"unauth-offsite-pin-creation-signup",children:(0,_.jsx)(x.default,{container:"pinBookmarklet",signupSource:"pinBookmarklet",signupFlow:{type:"login"},nextUrlParam:"undefined"!=typeof window?he():""})})]})}var M=i(245569),B=i(323201),N=i(854156),Z=i(519325),F=i(248060),U=i(294184),V=i.n(U),H=i(717615),G=i(231947),W=i(857752);function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class q extends n.Component{constructor(...e){super(...e),$(this,"state",{focused:!1}),$(this,"handleBlur",(e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)})),$(this,"handleFocus",(()=>{this.setState({focused:!0});const{onFocus:e}=this.props;e&&e()})),$(this,"getColor",(()=>{const{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:n,value:o}=this.props,{focused:s}=this.state;return e?"#e60023":s||n&&t?"#0074e8":o&&!i?"transparent":"rgba(142, 142, 142, 0.5)"})),$(this,"handleTextChange",(({text:e,mentions:t})=>{this.props.onChange({value:e,userMentionTags:t})}))}render(){const{bold:e,disabled:t,errorMessage:i,warningMessage:n,height:o,helperMessage:s,id:a,instanceId:l,maxLength:d,placeholder:c,requestContext:u,size:h,showOnBlur:p,showWarningOnBlur:g,value:m="",viewer:f,wrap:x,logContextEvent:b,orbacActingAs:y}=this.props,{focused:v}=this.state,w={__style:{boxShadow:`0 ${v||!!i||g&&!!n?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},I=(0,G.nl)(f,y)&&"ad_creation"!==P.Z.scenario()&&u.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,_.jsxs)(r.xu,{column:12,display:"flex",direction:"column",children:[(0,_.jsx)(r.xu,{column:12,position:"relative",children:(0,_.jsx)("div",{id:a,className:V()("TextArea__"+(I?"experimentalTextArea":"textArea"),"TextArea__dark",{TextArea__bold:e,TextArea__large:"lg"===h,TextArea__medium:"md"===h,TextArea__wrap:x,TextArea__nowrap:!x,TextArea__smHeight:"sm"===o,TextArea__mdHeight:"md"===o}),children:(0,_.jsx)(W.Z,{onAddMention:()=>{b({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleTextChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{b({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:()=>{b({event_type:8907,element:116,aux_data:{tag_type:1}})},initialMentions:[],initialText:m,instanceId:l,placeholder:c,readOnly:t})})}),(0,_.jsxs)("div",{className:v||p||i||g&&n||!m?"":"TextArea__hidden",children:[!I&&(0,_.jsx)(r.xu,{column:12,dangerouslySetInlineStyle:w}),(0,_.jsx)(r.xu,{column:12,marginTop:I?0:1,minHeight:15,children:(v||p||!!i||g&&!!n)&&(0,_.jsxs)(r.xu,{column:12,display:"flex",justifyContent:"between",children:[!!i&&(0,_.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-error",children:(0,_.jsx)(r.xv,{size:"100",color:"error",children:i})}),(g||v)&&!i&&!!n&&(0,_.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-warning",children:(0,_.jsx)(r.xv,{size:"100",color:"subtle",children:n})}),(p||v)&&!i&&!n&&(0,_.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-helper",children:(0,_.jsx)(r.xv,{size:"100",color:"subtle",children:s})}),v&&null!=d&&(0,_.jsx)(r.xu,{flex:"none",children:(0,_.jsx)(r.xv,{size:"100",color:i?"error":"default",children:d-m.length})})]})})]})]})}}function X(e){const{logContextEvent:t}=(0,f.v)();return(0,_.jsx)(q,{...e,requestContext:(0,A.B)(),viewer:(0,C.Z)(),logContextEvent:t,orbacActingAs:(0,H.Z)()})}$(q,"defaultProps",{bold:!1,disabled:!1,size:"md",wrap:!0,value:"",orbacActingAs:{}});var Y=i(66699),K=i(841064),J=i(451105),Q=i(827628),ee=i(472278);function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ie extends n.Component{constructor(...e){super(...e),te(this,"defaultHelperMessage",this.props.i18n.bt("People will usually see the first 50 characters when they click on your Pin", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.input.pinDraftDescription.helper", undefined, true)),te(this,"defaultPlaceholder",this.props.i18n.bt("Tell everyone what your Pin is about", "Tell everyone what your Pin is about", "pinbuilder.input.pinDraftDescription.placeholder", undefined, true)),te(this,"handleChange",(({value:e,userMentionTags:t=[]})=>{const{i18n:i,ideaPinRenamingEnabled:n,logContextEvent:o,setDescriptionData:s,setStoryPinDescription:r,setStoryPinDescriptionError:a,setUserMentionTags:l,type:d}=this.props;t.length<this.props.userMentionTags.length&&o({event_type:8906,element:116,aux_data:{tag_type:1}});let c=null;e.length>p.JO?c=(0,J.ZP)({errorId:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",i18n:i,ideaPinRenamingEnabled:n}).message:t&&t.length>p.iR&&(c=(0,J.ZP)({errorId:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",i18n:i,ideaPinRenamingEnabled:n}).message),"story"===d?(r(e),a(c)):(s({description:e,descriptionError:c}),t&&l({userMentionTags:t}))}))}render(){const{helperMessage:e=this.defaultHelperMessage,description:t,descriptionError:i,disabled:n,editorInstanceId:o,pinDraftId:s,placeholder:r=this.defaultPlaceholder,pinType:a,requestContext:l,validateDescription:d,viewer:c,orbacActingAs:u}=this.props,h=(0,G.nl)(c,u)&&"ad_creation"!==P.Z.scenario()&&l.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,g=P.Z.enabled("pinQuality");return"carousel"!==a?(0,_.jsx)(X,{height:h?"md":void 0,disabled:n,id:`pin-draft-description-${s}`,instanceId:o,errorMessage:i,warningMessage:g&&t.length<p.G9?(0,Y.Z)(this.props.i18n.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], p.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:p.G9}):null,helperMessage:e||this.defaultHelperMessage,maxLength:p.JO,onBlur:d,onChange:this.handleChange,placeholder:r||this.defaultPlaceholder,value:t}):(0,_.jsx)(K.Z,{height:h?"md":void 0,disabled:n,id:`pin-draft-description-${s}`,errorMessage:i,warningMessage:g&&t.length<p.G9?(0,Y.Z)(this.props.i18n.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], p.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:p.G9}):null,helperMessage:e||this.defaultHelperMessage,maxLength:p.JO,onChange:this.handleChange,onBlur:d,placeholder:r||this.defaultPlaceholder,value:t,viewer:c})}}function ne(e){const{logContextEvent:t}=(0,f.v)(),i=(0,h.ZP)(),n=(0,d.Z)(),{pinDraftId:s,pinItemId:r}=e,a=(0,o.useDispatch)(),{pinDrafts:l,pinItems:c,storyPinItems:u}=(0,o.useSelector)((({pinbuilder:e})=>e)),{type:p,mode:g}=l[s],m="story"===p,x=m?u[r]:c[r],{description:b,descriptionError:y}=x;let v=[],P="";m||(v=c[r].userMentionTags,P=c[r].editorInstanceId);return(0,_.jsx)(ie,{...e,description:b,descriptionError:y,disabled:"create"!==g,editorInstanceId:P,pinType:p,requestContext:(0,A.B)(),setDescriptionData:e=>a((0,D.to)(s,e)),setStoryPinDescription:e=>a((0,ee.kh)(r,e)),setStoryPinDescriptionError:e=>a((0,ee.j8)(r,e)),setUserMentionTags:e=>a((0,D.to)(s,e)),userMentionTags:v,validateDescription:()=>a((0,Q.Z)({pinDraftId:s,validationKey:"signal",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,options:{fieldToCheck:"description"}})).catch((()=>{})),viewer:(0,C.Z)(),i18n:i,orbacActingAs:(0,H.Z)(),logContextEvent:t,ideaPinRenamingEnabled:n})}var oe=i(23279),se=i.n(oe),re=i(261130),ae=i(186656),le=i(502890);function de(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ce extends n.Component{constructor(...e){super(...e),de(this,"_debouncedCheckLinkIsTaggable",se()((e=>{const{advertiser:t,orbacActingAs:i,viewer:n}=this.props,o=(0,G.lJ)(n,i);(0,ae.Z)({url:"/v3/visual_links/can_tag/",data:{url:e,is_native:!e,for_advertiser_id:t&&t.owner_user_id,...o?{orbac_subject_id:o}:Object.freeze({})}}).then((e=>{const{setTaggable:t}=this.props,{data:i}=e.resource_response;t(i)}))}),300)),de(this,"handleChange",(({value:e})=>{const{setLink:t,setLinkError:i}=this.props;t(e),i(null),e&&e.match(re.Z)&&this._debouncedCheckLinkIsTaggable(e)})),de(this,"handleFocus",(()=>{this.props.logContextEvent({event_type:101,component:13308,element:11616})}))}render(){const{disabled:e,link:t,linkError:i,media:n,pinDraftId:o,requestContext:s,validateLink:r,viewer:a,orbacActingAs:l}=this.props,d=(0,G.nl)(a,l)&&"ad_creation"!==P.Z.scenario()&&s.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,c={disabled:e,id:`pin-draft-link-${o}`,errorMessage:i,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:r,placeholder:d?this.props.i18n.bt("www.website.com", "www.website.com", "pinbuilder.destinationLink.label", undefined, true):this.props.i18n.bt("Add a destination link", "Add a destination link", "Placeholder text for link on Pin creation", undefined, true),spellCheck:!1,value:t,wrap:!1},u=P.Z.enabled("pinQuality");return(0,_.jsx)(K.Z,{...c,height:d?"sm":void 0,warningMessage:u&&n&&!t?this.props.i18n.bt("We recommend a destination link", "We recommend a destination link", "pinbuilder.input.pinDraftLink.warning", undefined, true):null,viewer:a,showOnBlur:!0,hideScrollbars:!0})}}function ue(e){const{logContextEvent:t}=(0,f.v)(),i=(0,h.ZP)(),n=(0,d.Z)(),{pinDraftId:s,pinItemId:r}=e,a=(0,o.useDispatch)(),l=(0,o.useSelector)((({advertiser:e})=>e)),{pinDrafts:c,pinItems:u}=(0,o.useSelector)((({pinbuilder:e})=>e)),{mode:p}=c[s],{link:g,linkError:m,media:x}=u[r],{anyEnabled:b}=(0,I.F)().checkExperiment("web_m10n_business_access_orbac_www"),y=(0,H.Z)();return(0,_.jsx)(ce,{...e,advertiser:l,disabled:"create"!==p||!!x&&"webImage"===x.type,link:g,linkError:m,media:x,requestContext:(0,A.B)(),setLink:e=>a((0,D.to)(s,{link:e})),setLinkError:e=>a((0,le.lZ)(r,e)),setTaggable:e=>a((0,le.kf)(r,e)),validateLink:()=>a((0,Q.Z)({pinDraftId:s,validationKey:"link",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t})).catch((()=>{})),viewer:(0,C.Z)(),i18n:i,logContextEvent:t,orbacActingAs:b?y:{}})}var he=i(480542),pe=i(912820),_e=i(562501),ge=i(957025);function me({taggedObjectIds:e}){const t=(0,h.ZP)();return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(r.xu,{marginBottom:3,children:(0,_.jsx)(r.xv,{color:"default",lineClamp:1,weight:"bold",children:(0,b.nk)(t.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], e.length, "Heading for carousel of products you’ve tagged with count", true),{numProducts:e.length})})}),(0,_.jsx)(r.xu,{marginStart:-1,marginEnd:-1,children:(0,_.jsx)(he.Z,{children:(0,_.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:e.map((e=>(0,_.jsx)(pe.Z,{taggedObjectId:e},e)))})})})]})}function fe(e){const t=(0,_e.jk)(),i=(0,ge.A$)(),n=(0,o.useSelector)((t=>(0,_e.M)(t,e))),s=(0,o.useSelector)((o=>n?i(o,{pinTagId:n}):t(o,e)));return(0,_.jsx)(me,{...e,taggedObjectIds:s})}var xe=i(84769);function be({setTitleData:e,setStoryPinTitle:t,setStoryPinTitleError:i,type:n,disabled:o,helperMessage:s,pinDraftId:a,placeholder:l,title:c,titleError:u,validateTitle:g}){const m=(0,h.ZP)(),f=(0,d.Z)(),x=(0,C.Z)(),{checkExperiment:b}=(0,I.F)(),y=(0,H.Z)(),v=(0,G.nl)(x,y)&&"ad_creation"!==P.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,w=m.bt("The first 40 characters are what usually show up in feeds", "Your first 40 characters are what usually show up in feeds", "pinbuilder.input.pinDraftTitle.helper", undefined, true),A=m.bt("Add your title", "Add your title", "pinbuilder.input.pinDraftTitle.placeholder", undefined, true),E=m.bt("Pin title", "Pin title", "pinbuilder.input.title.placeholder", undefined, true),S=P.Z.enabled("pinQuality");return(0,_.jsx)(r.xu,{children:(0,_.jsx)(K.Z,{height:v?"sm":void 0,bold:!v||void 0,disabled:o,errorMessage:u,warningMessage:S&&c.length<p.bA?(0,Y.Z)(m.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], p.bA, "pinbuilder.input.pinDraftTitle.warning", true),{length:p.bA}):null,helperMessage:s||w,id:`pin-draft-title-${a}`,maxLength:p.Ke,onChange:({value:o})=>{const s=o.replace(/\n/g," "),r=s.length>p.Ke?(0,J.ZP)({errorId:"TITLE_OVER_MAX_CHARACTER_LIMIT",i18n:m,ideaPinRenamingEnabled:f}).message:null;"story"===n?(t(s),i(r)):e({title:s,titleError:r})},onBlur:g,placeholder:l||(v?E:A),size:v?"md":"lg",value:c,viewer:x})})}function ye(e){const t=(0,h.ZP)(),i=(0,d.Z)(),{logContextEvent:n}=(0,f.v)(),{mode:s,type:r}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{title:a,titleError:l}=(0,o.useSelector)((t=>"story"===r?t.pinbuilder.storyPinItems[e.pinItemId]:t.pinbuilder.pinItems[e.pinItemId])),c="create"!==s,u=(0,o.useDispatch)();return(0,_.jsx)(be,{...e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,title:a,titleError:l,disabled:c,setTitleData:t=>u((0,D.to)(e.pinDraftId,t)),setStoryPinTitle:t=>u((0,ee.Dt)(e.pinItemId,t)),setStoryPinTitleError:t=>u((0,ee.h4)(e.pinItemId,t)),validateTitle:()=>u((0,Q.Z)({pinDraftId:e.pinDraftId,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,options:{fieldToCheck:"title"}})).catch((()=>{}))})}var ve=i(784590),Pe=i(312918);function we(){const e=(0,H.Z)(),t=(0,o.useSelector)((({advertiser:e})=>e)),i=(0,C.Z)(),{data:n}=(0,ve.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!e.id&&e.id||!!t&&t.owner_user_id||i.isAuth&&i.id||""}}),{full_name:s,image_medium_url:a,follower_count:l,verified_identity:d}=n||{},c=s||(t?t.name:i.isAuth&&i.fullName)||"",u=a||(t?"":i.isAuth&&i.imageMediumUrl)||"",h=l||0,p=d&&d.verified;return(0,_.jsx)(r.xu,{"data-test-id":"pin-draft-user",children:(0,_.jsx)(Pe.default,{followerCount:h,fullName:c,imageUrl:u,verified:p})})}var Ie=i(898246),Ae=i(424624),Ee=i(596284);function Ce({pinDraftId:e,pinItemId:t,pinTagId:i,pinTags:n,pinTagIds:o,showCarouselControl:s,showProductCarousel:a,showScheduleControl:l,showVideoTagging:d,unfilteredTaggedObjects:c}){const u=(0,h.ZP)(),p=(0,C.Z)(),g=(0,H.Z)(),{checkExperiment:m}=(0,I.F)(),f=(0,G.nl)(p,g)&&"ad_creation"!==P.Z.scenario()&&m("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,x=u.bt("Destination link", "Destination link", "pinbuilder.destination.link.label", undefined, true),b=(0,Ae.Z)({pinTagIds:o,pinTags:n,taggedObjects:c});return(0,_.jsx)(r.Zf,{overflow:"visible",children:(0,_.jsxs)(r.xu,{column:12,height:"100%",display:"flex",direction:"column",overflow:"visible",children:[(0,_.jsxs)(r.xu,{"data-tutorial-id":"pin-builder-title-and-description",height:f?void 0:"100%",width:"100%",children:[(0,_.jsxs)(r.xu,{column:12,marginTop:8,children:[f&&(0,_.jsx)(r.xu,{marginStart:1,marginBottom:1,children:(0,_.jsx)(r.xv,{size:"100",color:"default",children:u.bt("Title", "Title", "pinbuilder.title.input.label", undefined, true)})}),(0,_.jsx)(ye,{pinDraftId:e,pinItemId:t})]}),!f&&(0,_.jsx)(r.xu,{column:12,marginTop:4,children:(0,_.jsx)(we,{})}),f&&(0,_.jsx)(r.xu,{marginStart:1,marginBottom:1,marginTop:6,children:(0,_.jsx)(r.xv,{size:"100",color:"default",children:u.bt("Description", "Description", "pinbuilder.descriptoin.input.label", undefined, true)})}),(0,_.jsx)(r.xu,{column:12,marginTop:f?0:6,flex:"grow",display:"flex",children:(0,_.jsx)(ne,{pinDraftId:e,pinItemId:t})}),(0,_.jsx)(Ee.Z,{pinDraftId:e})]}),a&&!f&&(0,_.jsx)(r.xu,{column:12,marginTop:6,children:(0,_.jsx)(fe,{pinItemId:t})}),a&&f&&(0,_.jsx)(Z.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:b}),d&&(0,_.jsx)(r.xu,{column:12,marginTop:4,children:(0,_.jsx)(Ie.ZP,{pinDraftId:e})}),(0,_.jsxs)(r.xu,{"data-test-id":"pin-draft-link","data-tutorial-id":"pin-builder-destination-link",column:12,marginTop:f?"auto":4,children:[f&&(0,_.jsx)(r.xu,{marginStart:1,marginBottom:1,children:(0,_.jsx)(r.xv,{size:"100",color:"default",children:x})}),(0,_.jsx)(ue,{pinDraftId:e,pinItemId:t})]}),s&&(0,_.jsx)(r.xu,{column:12,marginTop:6,children:(0,_.jsx)(F.Z,{pinDraftId:e})}),l&&(0,_.jsx)(r.xu,{column:12,marginTop:4,children:(0,_.jsx)(xe.Z,{inStlToolingExp:f,pinDraftId:e})})]})})}function Se(e){const t=(0,_e.jk)(),i=(0,_e.vd)(),n=(0,o.useSelector)((t=>(0,_e.Bg)(t,e))),s=(0,o.useSelector)((t=>i(t,e))),r=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].type)),a=P.Z.enabled("scheduling"),l=(0,o.useSelector)((e=>e.pinbuilder.taggedObjects)),d=(0,o.useSelector)((e=>e.pinbuilder.pinTags)),c="localVideo"===(null==n?void 0:n.type)&&P.Z.enabled("videoTagging"),u="single"===r&&a&&(!n||0===s.length&&("localImage"===n.type||"localVideo"===n.type)),h=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId].selectedPinTagId||s.length>0?s[0]:null)),p=(0,o.useSelector)((i=>t(i,e).length>0));return(0,_.jsx)(Ce,{...e,pinTagId:h,pinTags:d,pinTagIds:s,showScheduleControl:u,showVideoTagging:c,showCarouselControl:"carousel"===r,showProductCarousel:p,unfilteredTaggedObjects:l})}var je=i(47615);function Te({height:e,pinDraftId:t,pinItemId:i}){return(0,_.jsx)(n.Fragment,{children:(0,_.jsxs)(r.xu,{display:"flex",dangerouslySetInlineStyle:{__style:{paddingBottom:p.uR}},children:[(0,_.jsx)(r.xu,{paddingX:5,children:(0,_.jsx)(c.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,_.jsx)(r.xu,{flex:"grow",minHeight:Math.max(e,p.sD),paddingX:5,width:"100%",children:(0,_.jsx)(Se,{pinDraftId:t,pinItemId:i})})]})})}function De(e){const{pinItemIds:t}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:i}=(0,o.useSelector)((e=>e.pinbuilder.pinItems[t[0]])),n=i?(0,w.Z)(i,p.LM,(0,je.Sl)(i)&&(0,je.PG)(i)?0:3):p.sD;return(0,_.jsx)(Te,{...e,height:n})}var ke=i(444445),ze=i(343341),Oe=i(970576),Re=i(798477),Le=i(850760);const Me={__style:{paddingTop:p.XB}};function Be({pinDraftId:e}){const{logContextEvent:t}=(0,f.v)(),i=(0,h.ZP)(),s=(0,d.Z)(),a=(0,o.useDispatch)(),l=(0,C.Z)(),c=(0,H.Z)(),u=(0,G.lJ)(l,c),g=(0,E.Z)(),{checkExperiment:m}=(0,I.F)(),x=l.isAuth?l.id:"",b=l.isAuth?l.country:"",y=l.isAuth&&l.isPartner,[v,P]=(0,n.useState)(!1),[A,z]=(0,n.useState)(null),[O,R]=(0,n.useState)(""),L=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>{const{websiteMedia:i}=t[e];return i.length>0?i:[]})),M=(0,o.useSelector)((({pinbuilder:{pinDrafts:t,pinItems:i}})=>{const{pinItemIds:n}=t[e],{media:o}=i[n[0]];return o?(0,w.Z)(o):p.sD})),B=n=>{var o;o=n,a((0,D.Nv)(e,o)),L.length>1?a((0,D.m_)({pinDraftId:e,userId:x,country:b,isPartner:y,i18n:i,logContextEvent:t,orbacSubjectId:u,checkExperiment:m,siteType:g,ideaPinRenamingEnabled:s})):a((0,k.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:x,orbacSubjectId:u,country:b,isPartner:y,i18n:i,logContextEvent:t,ideaPinRenamingEnabled:s}))},N=()=>{z(null),P(!1)};return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(r.xu,{flex:"grow",minHeight:Math.max(M,p.sD),paddingX:5,width:"100%",dangerouslySetInlineStyle:Me,children:(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,_.jsx)(r.xu,{paddingY:1,children:(0,_.jsx)(r.xv,{lineClamp:1,weight:"bold",align:"center",children:i.bt("Choose a board", "Choose a board", "pinbuilder.PinDraftBoardView.boardPickerTitle", undefined, true)})}),(0,_.jsx)(j.sR,{onBoardCreate:e=>{R(null==e?void 0:e.title),P(!0)},onItemChosen:B,paneWidth:430,displayShortlistMostRecentBoard:!0,useLegoLayout:!1,setBoardWithSection:e=>{z(e)}})]})}),v&&!A&&(0,_.jsx)(S.Z,{onBoardCreate:e=>{var t,i,n;a((0,j.DR)(l,c)),B({boardId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",url:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",title:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""}),N()},onClose:N,suggestedBoardName:O}),v&&!!A&&(0,_.jsx)(T.Z,{selectedBoard:A,onClose:N,onSectionCreate:e=>{A&&B({boardId:A.id,title:e.title||"",sectionId:e.id}),N()}})]})}function Ne({data:e}){const t=(0,h.ZP)();return(0,_.jsx)(r.xu,{"data-test-id":"media-image-view",dangerouslySetInlineStyle:{__style:{padding:"2px"}},children:(0,_.jsx)(r.zd,{rounding:4,wash:!0,children:(0,_.jsx)(r.Ee,{alt:t.bt("Image saved from site", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})}function Ze({pinDraftId:e}){var t;const i=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink)),{data:s,isLoaded:a}=(0,ve.Z)({name:"DomainResource",options:{domain:i,field_set_key:"owner"}}),{data:l,refresh:d}=(0,ve.Z)(a?{name:"UserResource",options:{user_id:(null==s||null===(t=s.official_user)||void 0===t?void 0:t.id)||""}}:null);return(0,n.useEffect)((()=>{d()}),[a,d]),l?(0,_.jsxs)(r.xu,{padding:2,children:[(0,_.jsx)(Le.Z,{user:l}),";"]}):null}function Fe({pinDraftId:e}){const t=(0,h.ZP)(),i=(0,o.useDispatch)(),s=(0,n.useRef)(),a=i((0,D.By)(e)),l=p.LM,d=(e,t)=>e>=t?{width:350/e*t,height:350}:{width:l,height:l/t*e};return 1===a.length?(0,_.jsx)(r.xu,{"data-test-id":"media-image-view",width:d(a[0].height,a[0].width).width,height:d(a[0].height,a[0].width).height,marginStart:"auto",marginEnd:"auto",overflow:"hidden",rounding:4,children:(0,_.jsx)(r.Ee,{alt:t.bt("Image saved from site", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),naturalHeight:a[0].height,naturalWidth:a[0].width,src:a[0].src,fit:"contain"})}):(0,_.jsx)(r.xu,{marginTop:2,height:420,ref:s,overflow:"auto",children:s&&(0,_.jsx)(r.Rk,{renderItem:({data:e})=>(0,_.jsx)(Ne,{data:e}),columnWidth:p.eZ,items:a,minCols:2,gutterWidth:ke.lX,scrollContainer:()=>s.current||window,virtualize:!0,layout:"flexible"})})}function Ue({pinDraftId:e,pinItemId:t}){const i=(0,o.useDispatch)(),a=(0,s.useHistory)(),l=(0,ze.F9)(),d=i((0,D.By)(e)),c=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>t[e].pinId)),u=(0,z.S6)()(null!=c?c:""),h=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>c&&"create"===t[e].mode?u:null)),g=.1*p.sD;(0,n.useEffect)((()=>{if(h){const e=setTimeout(window.close,1e4);return()=>{e&&clearTimeout(e)}}}),[h]);const m=()=>{if(1===d.length)c?a.push(`/pin/${c}/`):a.push("/");else if(h){const e=h.board?h.board.url:"";a.push(`${e||""}`)}else a.push("/")};return h&&(()=>{if(h&&h.board){const t=h.board.name,n=h.board.url,o=h.images?h.images["236x"]:null,s=o?o.url:"";i((0,Re.Z)(e)),l.showOneToast((({hideToast:e})=>(0,_.jsx)(Oe.Z,{boardName:t,boardUrl:n,isFromPinBuilder:!0,onHide:e,onVisitButtonClick:m,pinImageUrl:s||""}))),a.push("/")}})(),(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[(0,_.jsxs)(r.xu,{display:"flex",direction:"column",alignItems:"center",paddingX:5,children:[(0,_.jsx)(r.xu,{height:g,children:(0,_.jsx)(Ze,{pinDraftId:e,pinItemId:t})}),(0,_.jsx)(r.xu,{height:450,marginTop:4,width:344,children:(0,_.jsx)(Fe,{pinDraftId:e,pinItemId:t})})]}),(0,_.jsx)(r.xu,{color:"secondary",width:2,marginTop:-5}),!h&&(0,_.jsx)(Be,{pinDraftId:e,pinItemId:t})]})}var Ve=i(134906);function He({pinDraftId:e}){const t=(0,h.ZP)(),i=(0,o.useDispatch)(),[s,a]=(0,n.useState)(""),[l,d]=(0,n.useState)(""),c=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].view)),u=(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].websiteLink)),g=t.bt("Enter a website link", "Enter a website link", "pinbuilder.searchView.placeholdertext", undefined, true);return(0,_.jsxs)(r.xu,{paddingY:2,height:"scrape"===c?p.i2:p.UU,children:[(0,_.jsx)(r.xu,{position:"relative",children:(0,_.jsx)(r.Um,{accessibilityLabel:u?t.bt("Enter a website link", "Enter a website link", "[m10n] pinbuilder.searchView.searchField.accessibilityLabel", undefined, true):"",accessibilityClearButtonLabel:t.bt("Clear search field", "Clear search field", "[m10n] pinbuilder.searchView.clearButton.accessibilityLabel", undefined, true),errorMessage:""!==l?t.bt("No images found. Please check your URL and try again.", "No images found. Please check your URL and try again.", "pinbuilder.searchView.errorMessage", undefined, true):"",id:"save-from-site",onChange:({value:e})=>{a(e)},onKeyDown:n=>{const{event:o}=n;var r,a;"Enter"===o.key&&(d(""===s||(0,Ve.CB)(s)?"":(0,J.q0)(t)),r=s,a=l,i((0,D.f9)(e,r,a)),""!==s&&""===l&&i((0,D.c8)(e,"scrape")))},placeholder:u||g,size:"lg",value:s})}),"search"===c&&(0,_.jsx)(r.xu,{padding:2,children:(0,_.jsx)(r.xv,{color:"subtle",size:"100",children:t.bt("Example: http://www.websitename.com", "Example: http://www.websitename.com", "pinbuilder.PinDraftSearchView.searchFieldExample", undefined, true)})})]})}var Ge=i(490072);function We({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,_.jsx)(De,{pinDraftId:e,pinItemId:t});case"search":return(0,_.jsx)(He,{pinDraftId:e});case"scrape":return(0,_.jsx)(B.Z,{pinDraftId:e});case"board":return(0,_.jsx)(Ue,{pinDraftId:e,pinItemId:t});case"tag":case"selectTag":return(0,_.jsx)(N.Z,{pinDraftId:e,pinItemId:t,view:i});case"collectionsTag":return(0,_.jsx)(a.Z,{pinDraftId:e,pinItemId:t});case"reorder":return(0,_.jsx)(M.C,{pinDraftId:e});case"external":return(0,_.jsx)(L,{pinDraftId:e,pinItemId:t});default:return null}}function $e(e){const t=(0,Ge.nL)(),i=(0,o.useSelector)((t=>(0,Ge.Xe)(t,e))),n=(0,o.useSelector)((i=>t(i,e)));return(0,_.jsx)(We,{...e,view:i,pinItemId:n})}function qe({pinDraftId:e,websiteLink:t,setWebsiteLink:i}){const{logContextEvent:o}=(0,f.v)(),s=(0,h.ZP)();let a;const[l,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(t),[p,g]=(0,n.useState)("");return(0,_.jsxs)(r.xu,{position:"relative",children:[(0,_.jsx)(r.nv,{id:"scrape-view-website-link",errorMessage:p,placeholder:s.bt("Enter website", "Enter website", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.placeholder.text", undefined, true),ref:e=>{a=e,a&&(a.style.height="44px",a.style.borderRadius="24px",a.style.paddingRight="48px",a.style.background=l?"":"#EFEFEF")},size:"lg",type:"url",value:c,onChange:({value:e})=>{u(e)},onFocus:()=>{d(!0),a&&(a.style.background="")}}),(0,_.jsx)(r.xu,{position:"absolute",top:!0,right:!0,margin:2,children:(0,_.jsx)(r.hU,{onClick:()=>{if(l){const e=c&&!(0,Ve.CB)(c)?(0,J.q0)(s):"";g(e),c&&!e&&(i(c,e),d(!1),a&&(a.style.background="#EFEFEF"),o({event_type:101,component:13308,element:10969,aux_data:{url:c}}))}else u(""),a&&a.focus()},bgColor:"lightGray",icon:l?"arrow-forward":"cancel",iconColor:"darkGray",accessibilityLabel:s.bt("Submit", "Submit", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.submit.text", undefined, true),size:"sm"})})]})}function Xe(e){const t=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink)),i=(0,o.useDispatch)();return(0,_.jsx)(qe,{...e,websiteLink:t,setWebsiteLink:(t,n)=>i((0,D.f9)(e.pinDraftId,t,n))})}var Ye=i(558068),Ke=i(941646),Je=i(323716),Qe=i(388619);function et({pinDraftId:e}){const{logContextEvent:t}=(0,f.v)(),i=(0,h.ZP)(),n=(0,d.Z)(),a=(0,A.B)(),l=(0,o.useDispatch)(),c=(0,s.useHistory)(),{previous:u}=(0,Ye.Hv)(),g=()=>{const{tab:t}=(0,Qe.Z)({url:(0,Je.Z)()});if(t===p.ro){0===u.length?c.push(n?"/pin-creation-tool":"/idea-pin-builder"):c.goBack()}else l((0,D.hb)(e)),l((0,D.f9)(e,"")),l((0,D.c8)(e,"upload"))},m=0===(0,o.useSelector)((({pinbuilder:t})=>t.pinDrafts[e].websiteMedia)).length,x=Boolean(a.isRTL);return P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")||P.Z.enabled("offsite_pin_creation_multi_select")?(0,_.jsxs)(r.xu,{paddingX:2,display:"flex",direction:"column",alignItems:"center",children:[(0,_.jsx)(r.xu,{position:"absolute",top:!0,left:!x,right:x,marginTop:8,marginStart:8,"data-test-id":"scrape-view-cancel-button",children:(0,_.jsx)(r.hU,{onClick:g,size:"lg",icon:"directional-arrow-left",accessibilityLabel:i.bt("Cancel", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true),iconColor:"gray"})}),(0,_.jsx)(r.X6,{size:"400",children:i.bt("Save ideas from website", "Save ideas from website", "pinBuilder.pinDraftHeaderScrapeView.multiselect.header.text", undefined, true)}),(0,_.jsx)(r.xu,{marginTop:1,children:(0,_.jsx)(r.xv,{size:"200",children:i.bt("Select up to 10 images", "Select up to ten images", "pinBuilder.pinDraftHeaderScrapeView.multiselect.subheader.text", undefined, true)})}),(0,_.jsx)(r.xu,{marginTop:6,paddingX:8,width:"90%",children:(0,_.jsx)(Xe,{pinDraftId:e})})]}):(0,_.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsx)(r.X6,{size:"400",children:i.bt("Upload from the web", "Upload from the web", "pinBuilder.pinDraftHeaderScrapeView.header.text", undefined, true)}),(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,_.jsx)(r.xu,{paddingX:5,"data-test-id":"scrape-view-cancel-button",children:(0,_.jsx)(r.zx,{onClick:g,text:i.bt("Cancel", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true)})}),(0,_.jsx)(Ke.Z,{id:"scrape-view-add-button",children:(0,_.jsx)(r.zx,{color:"red",disabled:m,onClick:()=>{t({event_type:101,component:13308,element:10970}),(()=>{const{tab:t}=(0,Qe.Z)({url:(0,Je.Z)()});l((0,D.q0)(e,"upload",t===p.ro?"IDEA_PIN":"PIN"))})()},text:i.bt("Add to Pin", "Add to Pin", "pinBuilder.pinDraftHeaderScrapeView.addToPin.text", undefined, true)})})]})]})}var tt=i(344948),it=i(214494),nt=i(915206),ot=i(573545),st=i(940765);function rt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class at extends n.PureComponent{constructor(...e){super(...e),rt(this,"handleSaveClick",(()=>{const{logContextEvent:e,orbacActingAs:t,savePinDraft:i,viewerId:n}=this.props;e({event_type:101,component:13308,element:10973});i(t.id&&t.id!==n?t.id:void 0)})),rt(this,"handleItemChosen",(e=>{const{selectItem:t,isPartner:i,logContextEvent:n}=this.props;n({event_type:101,component:13308,element:10965}),l.Z.increment("pin_builder.board_picker.board_selected",1,{source:(0,ot.Z)(i)}),t(e)}))}render(){const{altTextError:e,boardError:t,hasErrors:i,isPartner:n,pinDraftId:o,selectedItem:s}=this.props,a=e=>(0,_.jsx)(nt.Z,{buttonText:n?this.props.i18n.bt("Publish", "Publish", "pinbuilder.pindraft.upload.dropdown.button.partner", undefined, true):this.props.i18n.bt("Save", "Save", "pinbuilder.pindraft.upload.dropdown.button.pinner", undefined, true),accessibilityLabelText:n?this.props.i18n.bt("Publish", "Publish", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.partner", undefined, true):this.props.i18n.bt("Save", "Save", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.pinner", undefined, true),hasError:!!t,disabled:e,onItemChosen:this.handleItemChosen,onSaveClick:this.handleSaveClick,placeholder:this.props.i18n.bt("Select", "Select", "pinbuilder.pindraft.upload.dropdown.placeholder", undefined, true),selectedItem:s}),l=P.Z.enabled("pinQuality");return(0,_.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")||P.Z.enabled("offsite_pin_creation_multi_select"))&&(0,_.jsx)(st.Z,{pinDraftId:o})}),(0,_.jsx)(r.xu,{"data-tutorial-id":"pin-builder-publish-to-board",alignItems:"center",display:"flex",minHeight:40,children:(0,_.jsxs)(r.xu,{position:"relative",width:236,children:[l&&i||e?(0,_.jsx)(r.u,{text:this.props.i18n.bt("You need to fix the highlighted issues before publishing the Pin.", "You must fix the highlighted issues before publishing the pin.", "pinbuilder.pindraft.upload.dropdown.tooltip", undefined, true),children:a(!0)}):a(!1),!!t&&(0,_.jsx)(r.xu,{left:!0,marginTop:1,position:"absolute",right:!0,children:(0,_.jsx)(r.xv,{color:"error",size:"100",children:t})})]})})]})}}function lt(e){const{logContextEvent:t}=(0,f.v)(),i=(0,h.ZP)(),s=(0,d.Z)(),{pinDraftId:r,pinItemId:a}=e,l=(0,C.Z)(),c=l.isAuth?l.id:"",u=l.isAuth?l.country:"",p=l.isAuth&&l.isPartner,g=(0,o.useDispatch)(),m=(0,H.Z)(),x=m.user?m.user.username:void 0,{checkExperiment:b}=(0,I.F)(),y=(0,E.Z)(),v=(0,n.useCallback)((e=>g((0,D.Nv)(r,e))),[g,r]),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].altTextError)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].boardError)),A=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].selectedItem)),S=null==A?void 0:A.ownerUsername,j=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:t}})=>{const{mediaError:i,scheduledDateError:n,scheduledTimeError:o}=e[r],{titleError:s,descriptionError:l,linkError:d}=t[a];return[i,n,o,s,l,d].some((e=>!!e))}));return(0,n.useEffect)((()=>{x&&S&&x!==S&&it.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0,username:x}).callGet({showError:!1}).then((e=>{var t,i;const n=null===(t=e.resource_response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.all_boards;var o;n&&n.length>0&&v({boardId:n[0].id,url:n[0].url,title:n[0].name||"",imageCoverUrl:n[0].image_cover_url,ownerUsername:null===(o=n[0].owner)||void 0===o?void 0:o.username})}))}),[v,x,S]),(0,_.jsx)(at,{...e,altTextError:P,boardError:w,hasErrors:j,i18n:i,isPartner:l.isAuth&&l.isPartner,logContextEvent:t,orbacActingAs:m,savePinDraft:e=>g((0,k.Z)({pinDraftId:r,storyPinPublishStopwatch:void 0,userId:c,orbacSubjectId:e,country:u,isPartner:p,i18n:i,logContextEvent:t,contextLogInfo:void 0,checkExperiment:b,siteType:y,ideaPinRenamingEnabled:s})),selectItem:v,selectedItem:A,viewerId:l.isAuth?l.id:""})}function dt({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,_.jsx)(r.xu,{marginBottom:5,children:(0,_.jsx)(lt,{pinDraftId:e,pinItemId:t})});case"scrape":return(0,_.jsx)(r.xu,{marginBottom:5,children:(0,_.jsx)(et,{pinDraftId:e})});case"tag":case"selectTag":case"collectionsTag":return(0,_.jsx)(r.xu,{marginBottom:5,children:(0,_.jsx)(tt.Z,{pinDraftId:e,pinItemId:t})});default:return null}}function ct(e){const t=(0,Ge.nL)(),i=(0,o.useSelector)((t=>(0,Ge.Xe)(t,e))),n=(0,o.useSelector)((i=>t(i,e)));return(0,_.jsx)(dt,{...e,view:i,pinItemId:n})}var ut=i(510476),ht=i(956069),pt=i(327096);const _t=606;function gt({children:e,showTooltip:t}){const i=(0,h.ZP)();return t?(0,_.jsx)(r.u,{inline:!0,text:i.bt("Collection product limit reached. To add another item, remove one or more products.", "Collection product limit reached. To add another item, remove one or more products.", "PinDraftFooter.AddRelatedProductsButton.tooltipText", undefined, true),children:e}):e}function mt(e){var t,i,s;const a=(0,h.ZP)(),{pinDraftId:l}=e,{setCurrentPinDraftId:d}=(0,pt.f)(),c=(0,_e.vd)(),u=(0,o.useSelector)((t=>c(t,e)))||[],p=null!==(t=(0,o.useSelector)((e=>e.pinbuilder)))&&void 0!==t?t:{},g=null!==(i=p.pinTags)&&void 0!==i?i:{},m=null!==(s=p.taggedObjects)&&void 0!==s?s:{},f=(0,Ae.n)({pinTagIds:u,pinTags:g,taggedObjects:m}),x=f.length,b=x>6,y=x>0,v=x>=ht.tN;return(0,_.jsx)(n.Fragment,{children:(0,_.jsxs)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",maxWidth:_t,width:_t,children:[(0,_.jsx)(r.xu,{marginStart:"auto",marginEnd:"auto",marginTop:5,marginBottom:5,"data-test-id":"collections-button",children:(0,_.jsx)(gt,{showTooltip:v,children:(0,_.jsx)(r.zx,{disabled:v,onClick:()=>d(l),text:a.bt("Make a collection", "Make a collection", "PinDraftInputView.addCollection", undefined, true)})})}),(0,_.jsxs)(r.xu,{display:"flex",paddingX:6,justifyContent:"center",width:"100%",marginBottom:5,children:[(0,_.jsx)(r.xu,{marginStart:y?"auto":0,children:(0,_.jsx)(r.xv,{size:"100",children:a.bt("Add up to 24 products to be displayed below your image", "Add up to 24 products to be displayed below your image", "pinbuilder.relatedproducts.max.tagProducts", undefined, true)})}),y&&(0,_.jsx)(r.xu,{marginStart:"auto",children:(0,_.jsx)(r.xv,{size:"100",children:`${x}/24`})})]}),y&&(0,_.jsx)(he.Z,{showArrowsOnlyOnHover:!1,alwaysShowArrows:b,variant:"wide",children:(0,_.jsx)(r.xu,{display:"flex",direction:"row",marginBottom:5,width:"100%",justifyContent:b?void 0:"center",children:f.map((({pinTagId:e,status:t,taggedObjectId:i},n)=>(0,_.jsx)(r.xu,{children:(0,_.jsx)(ut.Z,{index:n,isRelatedProducts:!0,pinTagId:e,size:"sm",status:t,taggedObjectId:i},i)},i)))})})]})})}var ft=i(172045),xt=i(892819);function bt({image:e,link:t,onClick:i,productDetails:o,selected:s}){const a=(0,xt.Z)(),{locale:l}=(0,A.B)(),{height:d,width:c,url:u}=e,{name:h,offers:p}=o||{},{price_value:g,price_currency:m}=(p||[])[0]||{};return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(r.iP,{fullWidth:!1,onTap:()=>i(function({image:e,link:t}){var i,n,o;return{...e,id:null!==(i=e.url)&&void 0!==i?i:"",link:t,sourceURL:null!==(n=e.url)&&void 0!==n?n:"",src:null!==(o=e.url)&&void 0!==o?o:"",type:"webImage"}}({image:e,link:t})),rounding:ht.i9,children:(0,_.jsx)(r.zd,{rounding:ht.i9,wash:!0,children:(0,_.jsx)(r.Ee,{alt:null!=u?u:"",naturalHeight:null!=d?d:1,naturalWidth:null!=c?c:1,src:null!=u?u:"",children:(0,_.jsx)(r.xu,{"data-test-id":"stl-scraped-item",dangerouslySetInlineStyle:{__style:s?{border:"solid red",borderRadius:4*ht.i9}:{}},height:"100%",width:"100%"})})})}),g||h?(0,_.jsxs)(r.xu,{marginTop:2,children:[!!g&&g>0&&(0,_.jsx)(r.xu,{display:"flex",marginBottom:h?1:void 0,children:(0,_.jsx)(r.xv,{size:"200",weight:"bold",children:a(l,g,{currency:m,maximumFractionDigits:0,style:"currency"})})}),h&&(0,_.jsx)(r.xu,{width:"100%",children:(0,_.jsx)(r.xv,{overflow:"breakWord",size:"200",weight:"bold",children:h})})]}):null]})}function yt({images:e,link:t,onItemClick:i,productDetails:n,selectedAssetIds:o}){return(0,_.jsx)(r.xu,{marginTop:4,children:(0,_.jsx)(r.Rk,{columnWidth:ht.Py,renderItem:({data:e})=>(0,_.jsx)(bt,{image:e,link:t,onClick:i,productDetails:n,selected:o.includes(e.url)}),gutterWidth:ht.op,items:e})})}var vt=i(984268);function Pt({item:e,onRemoveClick:t}){var i,n,o,s;const a=(0,h.ZP)();let l,d,c,u;if("pin"===e.type){var p,g,m,f;const t=null!==(p=null!==(g=null===(m=e.images)||void 0===m?void 0:m["474x"])&&void 0!==g?g:null===(f=e.images)||void 0===f?void 0:f["236x"])&&void 0!==p?p:{};d=t.height,c=t.width,u=t.url;const i=(0,vt.BE)(e);l=null!=i?i:e.description}else l=e.url,d=e.height,c=e.width,u=e.url;return(0,_.jsxs)(r.xu,{position:"relative",children:[(0,_.jsx)(r.zd,{rounding:2,wash:!0,children:(0,_.jsx)(r.xu,{height:48,id:l,width:48,children:(0,_.jsx)(r.Ee,{alt:null!==(i=l)&&void 0!==i?i:"",naturalHeight:null!==(n=d)&&void 0!==n?n:1,naturalWidth:null!==(o=c)&&void 0!==o?o:1,src:null!==(s=u)&&void 0!==s?s:"",fit:"cover"})})}),(0,_.jsx)(r.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,children:(0,_.jsx)(r.hU,{accessibilityLabel:a.bt("Remove", "Remove", "StlTaggingCarouselRep.removeButton.accessibilityLabel", undefined, true),bgColor:"gray",icon:"cancel",onClick:()=>t(e),size:"xs"})})]})}function wt({onDismissStart:e,onRemove:t,onSubmit:i,selectedResults:n}){const o=(0,h.ZP)(),s=n.length;return(0,_.jsxs)(r.xu,{direction:"column",display:"flex",marginTop:-8,children:[s>0&&(0,_.jsx)(he.Z,{children:(0,_.jsx)(r.xu,{display:"flex",paddingY:4,alignItems:"end",children:n.map(((e,i)=>(0,_.jsx)(r.xu,{marginStart:0===i?void 0:2,children:(0,_.jsx)(Pt,{item:e,onRemoveClick:t})},e.id)))})}),(0,_.jsxs)(r.xu,{display:"flex",justifyContent:"end",marginTop:8,children:[(0,_.jsx)(r.zx,{onClick:e,text:o.bt("Cancel", "Cancel", "StlTaggingSheetFooter.cancel", undefined, true)}),(0,_.jsx)(r.xu,{marginStart:2,"data-test-id":"add-products-button",children:(0,_.jsx)(r.zx,{color:"red",disabled:0===s,onClick:()=>{i(),e()},text:0===s?o.bt("Add products", "Add products", "StlTaggingSheetFooter.addProducts", undefined, true):(0,b.nk)(o.nbt(["Add {{ tagQuantity }} product", "Add {{ tagQuantity }} products"], s, "Button text to add product tags to a Pin", true),{tagQuantity:s}).join("")})})]})]})}var It=i(121093),At=i(869636);const Et=({url:e})=>new RegExp(/http(s?):/).test(e)?e:"http://"+e;var Ct=i(566101),St=i(977558);function jt(){const e=(0,h.ZP)();return(0,_.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:12,width:"100%",children:(0,_.jsx)(r.$j,{accessibilityLabel:e.bt("Search results are loading", "Search results are loading", "StlTaggingSheet.searchLoadingSpinner.accessibilityLabel", undefined, true),show:!0})})}function Tt({onClear:e,onLinkClick:t,onSubmit:i,showCatalogLink:o,type:s}){const{logContextEvent:a}=(0,f.v)(),l=(0,h.ZP)(),[d,c]=(0,n.useState)(""),u={titleUrl:{target:"catalogId",text:l.bt("Find a product by catalogue ID instead", "Find a product by catalog ID instead", "StlTaggingSearchField.link.titleUrl", undefined, true)},catalogId:{target:"titleUrl",text:l.bt("Find a product by Pin title or URL instead", "Find a product by Pin title or URL instead", "StlTaggingSearchField.link.catalogId", undefined, true)}},p={titleUrl:l.bt("Search by product title or enter URL", "Search by product title or enter URL", "StlTaggingSearchField.placeholder.titleUrl", undefined, true),catalogId:l.bt("Enter catalogue ID", "Enter catalog ID", "StlTaggingSearchField.placeholder.catalogId", undefined, true)};return(0,_.jsxs)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"16px"}},direction:"column",display:"flex",children:[(0,_.jsx)("form",{onSubmit:e=>{e.preventDefault(),i(d)},role:"search",children:(0,_.jsx)(r.Um,{accessibilityLabel:p[s],autoComplete:"off",id:"STLTaggingSearchField",onChange:({value:t})=>{c(t),""===t&&e()},onFocus:()=>{a({event_type:101,component:13762,element:227,view_type:212})},placeholder:p[s],size:"lg",value:d})}),o&&(0,_.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:2,children:(0,_.jsx)(r.iP,{fullWidth:!1,onTap:()=>t(u[s].target),children:(0,_.jsx)(r.xv,{align:"center",color:"shopping",inline:!0,size:"200",children:(0,_.jsx)("span",{style:{textDecoration:"underline"},children:u[s].text})})})})]})}function Dt({onClick:e,pin:t,selected:i}){var n;const o=(0,vt.mt)(t),s=(0,vt.BE)(t),{description:a,images:l}=t,{height:d,width:c,url:u}=(null==l?void 0:l["474x"])||(null==l?void 0:l["236x"])||{};return(0,_.jsxs)(r.xu,{direction:"column",display:"flex","data-test-id":"stl-tagging-pin-rep",children:[(0,_.jsx)(r.iP,{fullWidth:!1,onTap:()=>e(t),rounding:ht.i9,children:(0,_.jsx)(r.zd,{rounding:ht.i9,wash:!0,children:(0,_.jsx)(r.Ee,{alt:null!==(n=null!=s?s:a)&&void 0!==n?n:"",naturalHeight:null!=d?d:1,naturalWidth:null!=c?c:1,src:null!=u?u:"",children:(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:i?{border:"solid red",borderRadius:4*ht.i9}:{}},height:"100%",width:"100%"})})})}),o||s?(0,_.jsxs)(r.xu,{marginTop:2,children:[o&&(0,_.jsx)(r.xu,{display:"flex",marginBottom:s?1:void 0,children:(0,_.jsx)(r.xv,{size:"200",weight:"bold",children:o})}),s&&(0,_.jsx)(r.xu,{width:"100%",children:(0,_.jsx)(r.xv,{overflow:"breakWord",size:"200",weight:"bold",children:s})})]}):null]})}function kt({onItemClick:e,results:t,selectedAssetIds:i}){return(0,_.jsx)(r.xu,{marginTop:2,children:(0,_.jsx)(r.Rk,{columnWidth:ht.Py,renderItem:({data:t})=>(0,_.jsx)(Dt,{onClick:e,pin:t,selected:i.includes(t.id)}),gutterWidth:ht.op,items:t})})}function zt({hasResults:e,query:t,searchFieldType:i}){const{logContextEvent:o}=(0,f.v)(),s=(0,h.ZP)();if((0,n.useEffect)((()=>{e&&o({event_type:60,component:13762,view_type:212,aux_data:{has_search_results:!!e}})}),[o,e]),!t)return(0,_.jsx)(r.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:s.bt("Choose image to create a new Pin", "Choose image to create a new Pin", "StlTaggingSearchResults", undefined, true)});let a=e?s.bt("Results for {{ searchQuery }}", "Results for {{ searchQuery }}", "StlTaggingSearchResults.query.results", undefined, true):s.bt("No results found for {{ searchQuery }}", "No results found for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true);return"catalogId"===i&&(a=e?s.bt("Catalogue match for {{ searchQuery }}", "Catalog match for {{ searchQuery }}", "StlTaggingSearchResults.query.catalogId.results", undefined, true):s.bt("No catalogue matches for {{ searchQuery }}", "No catalog matches for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true)),(0,_.jsx)(r.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:(0,b.nk)(a,{searchQuery:(0,_.jsx)(r.xv,{inline:!0,weight:"bold",size:"400",children:`"${t}"`},t)})})}var Ot=i(277348);const Rt=new r.Ry(St.fe);const Lt=function(e){var t,i;const{logContextEvent:s}=(0,f.v)(),a=(0,h.ZP)(),{setCurrentPinDraftId:l,setStlTaggedCoord:d,setMostRecentTaggedObjectId:c,shopTheLook:u}=(0,pt.f)();(0,At.Z)(1000335);const{pinItemId:p}=e,[g,m]=(0,n.useState)("titleUrl"),[x,b]=(0,n.useState)([]),[v,P]=(0,n.useState)(null),[w,I]=(0,n.useState)(!1),[E,S]=(0,n.useState)(null),[j,T]=(0,n.useState)(null),[D,k]=(0,n.useState)(),z=(0,H.Z)(),[O,R]=(0,n.useState)(null),L=(0,o.useDispatch)(),M=(0,A.B)(),B=(0,C.Z)(),N=(0,G.lJ)(B,z)||B.isAuth&&B.id,Z=(0,G._P)(M,B,z),F=x.map((({id:e})=>e)),{stlTaggedCoords:U}=u,V=!Boolean(U),W=(0,_e.vd)(),$=null!==(t=(0,o.useSelector)((t=>W(t,e))))&&void 0!==t?t:[],{closeupImageSignature:q,pinTags:X,taggedObjects:Y}=null!==(i=(0,o.useSelector)((e=>e.pinbuilder)))&&void 0!==i?i:{},K=(0,Ae.n)({pinTagIds:$,pinTags:X,taggedObjects:Y}),J=ht.tN-K.length,Q=F.length>=J,ee=()=>{S(null),P(null),T(null)},te=()=>{l(null),d(null)};(0,n.useEffect)((()=>{s({event_type:13,component:13762,view_type:212,aux_data:{...q?{image_signature:q}:{}}})}),[]),(0,n.useEffect)((()=>()=>{te()}),[]);const ie=({query:e,searchType:t})=>{s({event_type:60,component:13762,element:227,view_type:212,aux_data:{search_query:e,search_type:t}})},ne=e=>{ee();const t=e.trim();if("catalogId"===g)(async e=>{ie({query:e,searchType:"id"}),I(!0),S(e);const t=it.Z.create("ProductGroupItemIdPinResource",{merchantId:Z,filters:{1:[e]},itemId:e,...N!==B.id?{orbacSubjectId:N}:{}}),{resource_response:{data:i}}=await t.callGet(),n=i.reduce(((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){var i;const e=null!==(i=t.rich_metadata.url)&&void 0!==i?i:t.rich_metadata.id;(0,Ct.Z)({url:e})&&(t.link=e)}return[...e,t]}return e}),[]);P(n),I(!1)})(t);else{(0,Ct.Z)({url:t})?(e=>{R(null),ie({query:e,searchType:"url"});const t=Et({url:e});(0,ae.Z)({url:"/v3/products/find/",data:{fields:["productmetadata.name","productmetadata.offers"],url:t,source:V?"collection":"merchant",...N!==B.id?{orbac_subject_id:N}:{}}}).then((({resource_response:e})=>{const{data:i}=e||{};T(t),k(i)})).catch((e=>{R({title:e.message_detail||e.message})}))})(t):(async e=>{if(I(!0),S(e),ie({query:e,searchType:"title"}),N){const t=it.Z.create("BaseSearchResource",{user:N,query:e,commerce_only:!0}),{resource_response:{data:i}}=await t.callGet(),n=i.results.filter((({type:e})=>"pin"===e));P(n)}I(!1)})(t)}},oe=e=>{if(R(null),F.includes(e.id)){const t=x.filter((({id:t})=>t!==e.id));b(t)}else{if(Q)return void R({title:a.bt("Related product limit reached", "Related product limit reached", "StlTaggingSheet.relatedProducts.limitErrorTitle", undefined, true),message:a.bt("To add another item, remove one or more related products", "To add another item, remove one or more related products", "StlTaggingSheet.relatedProducts.limitErrorMessage", undefined, true)});b((t=>[...t,e]))}},se=(e,t,i)=>{t&&i&&L((0,Ot.uM)(e,t,i))},re=(e,t)=>{const i=null==U?void 0:U.xPercent,n=null==U?void 0:U.yPercent;if("webImage"===t.type){L((0,Ot.mz)(e,t.link||t.sourceURL,null)),se(e,i,n);const o={height:t.height,width:t.width,url:t.src};L((0,Ot.Dn)(e,t.id,{media:o,type:t.type,pin:t}))}else if("pin"===t.type){var o,s;const r=t;L((0,Ot.mz)(e,null!==(o=r.link)&&void 0!==o?o:"",null)),se(e,i,n),c(t.id),L((0,Ot.Dn)(e,t.id,{media:null===(s=r.images)||void 0===s?void 0:s["474x"],type:t.type,pin:r}))}L((0,le.C_)(p,e))},de=()=>{const e=(0,ft.Z)();return(e=>{L((0,le.oe)(p,e))})(e),e},ce=(e,t)=>{const i=de();re(i,e),t()},ue=()=>{const e=de();x.forEach((t=>re(e,t)))},he=(0,n.useMemo)((()=>new r.H3([Rt])),[Rt]),pe=(0,n.useMemo)((()=>new r.H3([he])),[he]),ge=(0,n.useRef)(),me=j&&!!D&&D.images.length>0&&D.images.find((e=>!e.toLowerCase().includes("svg")));return(0,_.jsx)(r.mh,{zIndex:he,children:(0,_.jsx)(r.To,{accessibilityDismissButtonLabel:a.bt("Cancel tagging products", "Cancel tagging products", "StlTaggingSheet.Sheet.accessibilityDismissButtonLabel", undefined, true),accessibilityLabel:a.bt("Tag products for this Pin", "Tag products for this Pin", "StlTaggingSheet.Sheet.accessibilitySheetLabel", undefined, true),closeOnOutsideClick:!1,footer:({onDismissStart:e})=>V?(0,_.jsx)(wt,{onDismissStart:e,onRemove:oe,onSubmit:ue,selectedResults:x}):null,heading:V?a.bt("Make a collection", "Make a collection", "StlTaggingSheet.sheet.header.relatedProducts", undefined, true):a.bt("Tag this product", "Tag this product", "StlTaggingSheet.sheet.header.coordinates", undefined, true),onDismiss:te,size:"sm",subHeading:(0,_.jsx)(r.xu,{paddingX:8,children:(0,_.jsx)(Tt,{onClear:ee,onLinkClick:e=>{m(e),ee()},onSubmit:e=>{ne(e)},showCatalogLink:Boolean(Z),type:g},g)}),children:({onDismissStart:e})=>{var t;return(0,_.jsxs)(r.xu,{ref:ge,children:[(0,_.jsx)(It.Z,{placementId:1000335,eligibleIds:[502964],children:({complete:e})=>(0,_.jsx)(r.Li,{zIndex:pe,anchor:ge.current,idealDirection:"down",onDismiss:e,message:a.bt("Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items to display under your image", "Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items for display under your image", "pinbuilder.shopTheLook.collections", undefined, true),primaryAction:{href:"https://pinterest.com/_/_/help/business/article/shop-the-look-product-tagging",target:"blank",text:a.bt("Learn more", "Learn more", "pinbuilder.shopTheLook.learnMoreButton", undefined, true)}})}),O&&(0,_.jsx)(r.xu,{marginTop:-4,children:(0,_.jsx)(r.UW,{dismissButton:{accessibilityLabel:a.bt("Dismiss", "Dismiss", "StlTaggingSheet.Callout.dismissButton.accessibilityLabel", undefined, true),onDismiss:()=>R(null)},iconAccessibilityLabel:a.bt("Error", "Error", "StlTaggingSheet.Callout.iconAccessibilityLabel", undefined, true),message:null!==(t=O.message)&&void 0!==t?t:"",title:O.title,type:"error"})}),E&&!w||j?(0,_.jsx)(r.xu,{marginTop:O?4:-4,children:(0,_.jsx)(zt,{hasResults:v?v.length>0:void 0,query:E,searchFieldType:g})}):null,E&&(0,_.jsxs)(n.Fragment,{children:[w&&(0,_.jsx)(jt,{}),(0,_.jsx)(kt,{onItemClick:V?oe:t=>ce(t,e),results:null!=v?v:[],selectedAssetIds:F})]}),j&&!!D&&D.images.length>0&&me&&(0,_.jsx)(y.Z,{url:me,children:({image:t})=>{var i;return(0,_.jsx)(n.Fragment,{children:t&&(0,_.jsx)(yt,{onItemClick:V?oe:t=>ce(t,e),images:t,link:j,productDetails:null==D||null===(i=D.products)||void 0===i?void 0:i[0],selectedAssetIds:F})})}},me)]})}})})};var Mt=i(82596);function Bt({pinDraftId:e}){return(0,_.jsx)(r.xu,{height:64,width:64,rounding:2,children:(0,_.jsx)(Mt.Z,{pinDraftId:e,type:"square"})})}var Nt=i(298361),Zt=i(580189);class Ft extends n.Component{constructor(...e){var t,i,n;super(...e),n=e=>t=>{const{elementType:i,onClick:n}=e;i&&this.props.logContextEvent({event_type:101,component:13308,element:i}),n&&n(t)},(i="handleActionClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){var e,t;const{primary:i,secondary:n}=this.props,o=null!==(e=i.linkUrl)&&void 0!==e?e:null,s=null!==(t=null==n?void 0:n.linkUrl)&&void 0!==t?t:null;return(0,_.jsxs)(r.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[!!n&&(0,_.jsx)(r.xu,{paddingX:1,children:s?(0,_.jsx)(r.zx,{role:"link",color:"white",text:n.text,onClick:this.handleActionClick(n),href:s,target:"blank"}):(0,_.jsx)(r.zx,{color:"white",text:n.text,onClick:this.handleActionClick(n)})}),(0,_.jsx)(r.xu,{paddingX:1,children:o?(0,_.jsx)(r.zx,{role:"link",text:i.text,onClick:this.handleActionClick(i),href:o,target:"blank"}):(0,_.jsx)(r.zx,{text:i.text,onClick:this.handleActionClick(i)})})]})}}function Ut(e){const{logContextEvent:t}=(0,f.v)();return(0,_.jsx)(Ft,{...e,logContextEvent:t})}function Vt({onClear:e}){const t=(0,h.ZP)(),i=t.bt("Clear", "Clear", "Tooltip shown explaining button to clear published Pin", undefined, true);return(0,_.jsx)(r.u,{text:i,children:(0,_.jsx)(r.iP,{fullWidth:!1,onTap:e,rounding:"circle",children:(0,_.jsx)(r.JO,{accessibilityLabel:i,color:"default",icon:"clear",size:20})})})}const Ht={__style:{borderRadius:2}};function Gt({subtitle:e,title:t}){const i=(0,h.ZP)();return(0,_.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,_.jsx)(r.X6,{color:t?"default":"subtle",size:"400",children:t||i.bt("No title", "No title", "Fallback title shown if none is provided on Pin create", undefined, true)}),!!e&&(0,_.jsx)(r.xu,{marginTop:1,children:"progress"===e.type?(0,_.jsx)(r.xu,{color:"secondary",dangerouslySetInlineStyle:Ht,height:6,overflow:"hidden",position:"relative",width:316,children:(0,_.jsx)(r.xu,{bottom:!0,left:!0,top:!0,color:"primary",dangerouslySetInlineStyle:Ht,position:"absolute",width:`${e.progress}%`})}):(0,_.jsx)(r.xv,{size:"100",children:e.text})})]})}function Wt({color:e,text:t}){return(0,_.jsx)(r.xv,{color:e,italic:!0,children:t})}function $t({status:e}){const t=(0,h.ZP)();if("default"===e)return(0,_.jsx)(r.xu,{width:20,height:20,color:"tertiary",rounding:"circle"});{const i={error:{accessibilityLabel:t.bt("Error", "Error", "Screen reader label for failed Pin create", undefined, true),color:"error",icon:"alert"},warning:{accessibilityLabel:t.bt("Alert", "Alert", "Screen reader label for Pin create with message", undefined, true),color:"warning",icon:"check-circle"},success:{accessibilityLabel:t.bt("Success", "Success", "Screen reader label for success Pin create", undefined, true),color:"success",icon:"check-circle"}},{accessibilityLabel:n,color:o,icon:s}=i[e];return(0,_.jsx)(r.JO,{accessibilityLabel:n,color:o,icon:s,size:20})}}var qt=i(923490);function Xt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Yt extends n.Component{constructor(e){super(e),Xt(this,"_timeSuccessUpdated",new Date),Xt(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),Xt(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),Xt(this,"getSubtitleText",(()=>{const{videoErrorMsg:e,pin:t,scheduledPin:i}=this.props;if(i)return(0,b.nk)(this.props.i18n.bt("Scheduled {{ elapsedTime }}", "Scheduled {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was schedule", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(i.created_at,!0)}).join("");if(t){const e=this.props.getHumanizedTimeSince(t.created_at,!0);return 3===t.video_status?(0,b.nk)(this.props.i18n.bt("Uploaded {{ elapsedTime }}", "Uploaded {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin was uploaded", undefined, true),{elapsedTime:e}).join(""):(0,b.nk)(this.props.i18n.bt("Published {{ elapsedTime }}", "Published {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was created", undefined, true),{elapsedTime:e}).join("")}return e?(0,b.nk)(this.props.i18n.bt("Attempted {{ elapsedTime }}", "Attempted {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin upload was attempted", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(this._timeSuccessUpdated.toString(),!0)}).join(""):void 0})),Xt(this,"getSubtitle",(()=>{const{videoUploadProgress:e}=this.props,{subtitleText:t}=this.state;return null!=e?{progress:e,type:"progress"}:t?{text:t,type:"text"}:void 0})),Xt(this,"getText",(()=>{const{pin:e,requestContext:t,scheduledPin:i,videoUploadProgress:n}=this.props;return null!=n?this.props.i18n.bt("Uploading", "Uploading", "Text shown notifying user video is still uploading", undefined, true):e&&3===e.video_status?this.props.i18n.bt("In review", "In review", "Text shown notifying user video is uploaded but not live", undefined, true):i?(0,Y.Z)(this.props.i18n.bt("This Pin will be published on {{ scheduledDate }}", "This Pin will publish on {{ scheduledDate }}", "Text shown notifying user when Pin is scheduled to create", undefined, true),{scheduledDate:new Date(1e3*i.scheduled_ts).toLocaleDateString(t.locale,{weekday:"long",month:"numeric",day:"numeric"})}):void 0})),Xt(this,"getActions",(()=>{const{pin:e,retryUpload:t,siteType:i,videoErrorMsg:n}=this.props,o={elementType:11334,text:this.props.i18n.bt("See it", "See it", "Button to see created Pin", undefined, true),linkUrl:(0,Zt.Z)({currentSiteType:i,destinationSiteType:0,inputPath:e?`/pin/${e.id}`:""})},s=e&&e.is_quick_promotable?{elementType:11335,text:this.props.i18n.bt("Promote", "Promote", "Button to quick promote created Pin", undefined, true),linkUrl:(0,Zt.Z)({currentSiteType:i,destinationSiteType:0,inputPath:`/pin/${e.id}/promote`})}:void 0,r=n?{elementType:11333,text:this.props.i18n.bt("Try again?", "Try again?", "Button to try video upload again", undefined, true),onClick:t}:null;return{primary:r||s||o,secondary:!r&&s?o:void 0}})),Xt(this,"getStatus",(()=>{const{pin:e,scheduledPin:t,videoErrorMsg:i,videoUploadProgress:n}=this.props;return null!=n?"default":t||e&&3===e.video_status?"warning":i?"error":"success"})),this.state={hovered:!1,subtitleText:this.getSubtitleText()}}componentDidMount(){this.interval=setInterval((()=>this.setState({subtitleText:this.getSubtitleText()})),6e4)}componentDidUpdate(e){e.pin===this.props.pin&&e.videoErrorMsg===this.props.videoErrorMsg||(this._timeSuccessUpdated=new Date,this.setState({subtitleText:this.getSubtitleText()}))}componentWillUnmount(){clearInterval(this.interval)}render(){const{clearPinDraft:e,pinDraftId:t,title:i,videoErrorMsg:n,videoUploadProgress:o}=this.props,{hovered:s}=this.state,a=this.getText(),l=n||a;return(0,_.jsxs)(r.xu,{alignItems:"center","data-test-id":"pin-draft-success",display:"flex",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,paddingX:2,paddingY:5,children:[(0,_.jsx)(r.xu,{flex:"none",paddingX:3,children:(0,_.jsx)(Bt,{pinDraftId:t})}),(0,_.jsx)(r.xu,{flex:"grow",paddingX:3,children:(0,_.jsx)(Gt,{subtitle:this.getSubtitle(),title:i})}),(0,_.jsxs)(r.xu,{alignItems:"center",display:"flex",flex:"none",marginEnd:-3,marginStart:-3,paddingX:2,children:[!!l&&(0,_.jsx)(r.xu,{paddingX:3,children:(0,_.jsx)(Wt,{color:n?"error":"subtle",text:l})}),!a&&(0,_.jsx)(r.xu,{paddingX:3,children:(0,_.jsx)(Ut,{...this.getActions()})})]}),(0,_.jsx)(r.xu,{flex:"none",paddingX:3,children:s&&null==o?(0,_.jsx)(Vt,{onClear:e}):(0,_.jsx)($t,{status:this.getStatus()})})]})}}function Kt(e){const{pinDraftId:t,pinItemId:i}=e,{logContextEvent:n}=(0,f.v)(),s=(0,h.ZP)(),r=(0,d.Z)(),a=(0,Nt.Z)(),l=(0,o.useDispatch)(),c=(0,C.Z)(),u=c.isAuth?c.id:"",p=c.isAuth?c.country:"",g=(0,E.Z)(),m=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].scheduledPin)),x=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].mediaError)),b=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].status)),y=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:i}})=>i[e[t].pinItemIds[e[t].pinItemIndex]].title)),v=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:i}})=>i[e[t].pinItemIds[e[t].pinItemIndex]].media)),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[t].pinId)),{checkExperiment:w}=(0,I.F)(),S=(0,z.S6)(),j=P?S(P):null,T=v&&"localVideo"===v.type?x:null,D=v&&"localVideo"===v.type&&"uploading"===b?v.uploadProgress||0:null;return(0,_.jsx)(Yt,{...e,requestContext:(0,A.B)(),clearPinDraft:()=>l((0,Re.Z)(t)),retryUpload:()=>l((0,qt.dG)({pinDraftId:t,pinItemId:i,userId:u,country:p,i18n:s,logContextEvent:n,checkExperiment:w,ideaPinRenamingEnabled:r})),getHumanizedTimeSince:a,i18n:s,siteType:g,scheduledPin:m,title:y,pin:j,videoErrorMsg:T,videoUploadProgress:D})}var Jt=i(302667),Qt=i(460985),ei=i(639410),ti=i(121151),ii=i(641692);function ni(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class oi extends n.Component{constructor(...e){super(...e),ni(this,"state",{showModal:!0}),ni(this,"handlePromoteButtonClick",(()=>{const{onComplete:e,logContextEvent:t}=this.props;(0,Jt.vF)(t,ii.NH.CLICK,ii.Xc.PIN_CREATE_SUCCESS,101,207),e()})),ni(this,"handleDismiss",(()=>{const{onDismiss:e}=this.props;this.setState({showModal:!1}),e()})),ni(this,"renderDoneButton",(()=>{const{promoteUrl:e}=this.props;return(0,_.jsx)(r.xu,{paddingX:1,children:(0,_.jsx)(r.zx,{role:"link",color:"red",href:e,onClick:this.handlePromoteButtonClick,text:this.props.i18n.bt("Promote", "Promote Pin", "[m10n] button text for promote link in promote modal", undefined, true)})})}))}componentDidMount(){(0,Jt.vF)(this.props.logContextEvent,ii.NH.RENDER,ii.Xc.PIN_CREATE_SUCCESS,120,207),l.Z.increment("web.pin_create.success.promote.upsell")}renderModalContent(){const{pin:e,video:t}=this.props,{pinner:i}=e;return(0,_.jsxs)(r.xu,{position:"relative",maxWidth:804,overflow:"hidden",display:"flex",color:"default",rounding:2,maxHeight:"calc(100vh - 32px)",children:[(0,_.jsx)(r.xu,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #EFEFEF"}},children:(0,_.jsx)(r.xu,{display:"flex",maxHeight:"700px",paddingX:8,paddingY:10,children:(0,_.jsx)(Qt.ZP,{pin:e,video:t,maxDescriptionLength:60,promoted:{businessName:i.full_name,avatarImageSmallUrl:i.image_small_url}})})}),(0,_.jsx)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:(0,_.jsxs)(r.xu,{paddingY:10,children:[(0,_.jsx)(r.xu,{marginStart:10,display:"flex",children:(0,_.jsx)(r.X6,{children:this.props.i18n.bt("You created a Pin!", "You created a Pin!", "pin create success message for modal title", undefined, true)})}),(0,_.jsx)(r.xu,{marginStart:10,marginTop:6,children:(0,_.jsx)(r.xv,{weight:"bold",children:this.props.i18n.bt("Promote your Pin to reach more people", "Promote your Pin to reach more people", "[m10n] header for promote pin upsell", undefined, true)})}),(0,_.jsx)(r.xu,{marginStart:10,marginTop:3,marginBottom:8,children:(0,_.jsx)(r.xv,{children:(0,b.nk)(this.props.i18n.bt("{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.", "{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.", "[m10n] body copy for promote pin upsell. MAU_TEXT is a string of xxx million", undefined, true),{mauText:(0,_.jsx)(ei.Z,{})})})}),this.renderButtons()]})}),(0,_.jsx)(r.xu,{paddingY:2,paddingX:2,children:(0,_.jsx)(r.hU,{accessibilityLabel:"dismiss",bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleDismiss,size:"md"})})]})}renderButtons(){const{onDismiss:e,pinUrl:t}=this.props;return(0,_.jsxs)(r.xu,{marginStart:9,display:"flex",children:[(0,_.jsx)(r.xu,{paddingX:1,"data-test-id":"seeItNow",children:(0,_.jsx)(r.zx,{role:"link",href:t,onClick:e,text:this.props.i18n.bt("See your Pin", "See your Pin", "[m10n] button text for pin link button in promote modal", undefined, true)})}),this.renderDoneButton()]})}render(){const{showModal:e}=this.state;return e?(0,_.jsx)(r.xu,{position:"fixed",justifyContent:"center",alignItems:"center",display:"flex",column:12,height:"100%",width:"100%",left:!0,top:!0,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box"}},children:(0,_.jsx)(ti.ZP,{accessibilityModalLabel:this.props.i18n.bt("Your saved Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),onDismiss:this.handleDismiss,size:"md",children:this.renderModalContent()})}):null}}function si(e){const t=(0,h.ZP)(),{logContextEvent:i}=(0,f.v)();return(0,_.jsx)(oi,{...e,i18n:t,logContextEvent:i})}var ri=i(248740),ai=i(918333),li=i(21353),di=i(497529);const ci=(0,i(784450).Z)(14,(({pinId:e})=>({pin_id:e})))((function({boardName:e,color:t,description:i,eligibleForExtensionUpsell:n,experience:o,imageUrl:s,isFromPinBuilder:a,link:l,onClose:d,openNewTab:c,pin:u,pinId:p,sectionName:g,siteType:m,video:f,websiteMedia:x}){const y=(0,h.ZP)(),v=(0,C.Z)(),P=(0,di.Z)(),{checkExperiment:w}=(0,I.F)(),A=(0,li.Z)(),E=()=>o&&[501001].includes(o.experience_id),S=()=>{E()&&P.completeExperience(o.placement_id,o.experience_id),d()},j=()=>{E()&&P.dismissExperience(o.placement_id,o.experience_id),d()},T=(0,Zt.Z)({currentSiteType:m,destinationSiteType:0,inputPath:`/pin/${p}`}),{anyEnabled:D}=w("advertiser_growth_quick_promote_direct_redirect");let k;if(3===m)k=`${A("quick_promote")}?pinId=${u.id}`;else{const e=D?`/advertiser/quick-promote/?pinId=${p}`:`/pin/${p}/promote`;k=(0,Zt.Z)({currentSiteType:m,destinationSiteType:0,inputPath:e})}if(v.isPartner&&u&&u.is_quick_promotable)return(0,_.jsx)(si,{pin:u,pinUrl:T,promoteUrl:k,onDismiss:j,onComplete:S,siteType:m,video:f});const z=u&&e?u.board.url:"",O=g?`${z}${u.section.slug}/`:"";if(a&&n){const e=(null==u?void 0:u.id)||"";return(0,_.jsx)(r.xu,{"data-test-id":`browser-extension-upsell-modal_${e}`,children:(0,_.jsx)(ti.ZP,{accessibilityModalLabel:y.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "label.extensionUpsellModal.addPinDropdown", undefined, true),onDismiss:d,size:"sm",children:(0,_.jsx)(ri.Z,{isExtensionInstalled:!1,isFromPinBuilder:!0,onHide:d,onInstall:d})})})}return(0,_.jsx)(ti.ZP,{accessibilityModalLabel:y.bt("Your saved Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),onDismiss:d,heading:(0,_.jsx)(r.xu,{padding:8,children:(0,_.jsx)(r.X6,{align:"center",size:"500",children:g?(0,b.nk)(y.bt("Saved to {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", "pinCreateSuccess.Option2Modal.savedToSection", undefined, true),{boardName:(0,_.jsx)(r.rU,{href:O,display:"inlineBlock",underline:"hover",children:g},"sectionLink"),sectionName:(0,_.jsx)(r.rU,{href:z,display:"inlineBlock",underline:"hover",children:e},"boardLink")}):(0,b.nk)(y.bt("Saved to {{ boardName }}", "Saved to {{ boardName }}", "pinCreateSuccessModal.Option2Modal.savedToBoard", undefined, true),{boardName:(0,_.jsx)(r.rU,{href:z,display:"inlineBlock",underline:"hover",children:e},"boardLink")})})}),size:"md",children:(0,_.jsx)(ai.Z,{hideHeader:!0,boardName:e,color:t,description:i,imageUrl:s,link:l,onClose:d,openNewTab:c,pin:u,pinId:p,sectionName:g,siteType:m,video:f,websiteMedia:x})})}));var ui=i(299487),hi=i(844974),pi=i(339363),_i=i(704115),gi=i(782534),mi=i(170168);function fi({onDismiss:e,scheduledPin:t}){const i=(0,h.ZP)(),n=(0,C.Z)(),o=(0,A.B)(),s=(0,H.Z)(),a=(0,G.Ms)(n,s),{image:l,localMedia:d,scheduled_ts:c,title:u}=t,p=new Date(1e3*c),g=l&&l["236x"];return(0,_.jsx)(ti.ZP,{accessibilityModalLabel:i.bt("Your scheduled Pin.", "Your scheduled pin.", "Label for a modal showing the pin the user just scheduled.", undefined, true),onDismiss:e,heading:i.bt("Pin Scheduled", "Pin Scheduled", "Header of modal for scheduling a pin successfully", undefined, true),size:"md",footer:(0,_.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(r.xu,{paddingX:1,"data-test-id":"see-scheduled-pin-button",children:(0,_.jsx)(r.zx,{color:"red",href:`${mi.C0}/${a}/scheduled-pins/`,role:"link",text:i.bt("See scheduled Pins", "See Scheduled Pins", "pinBuilder.seeScheduledPin.buttonTitle", undefined, true)})})}),children:(0,_.jsxs)(r.xu,{padding:8,children:[(0,_.jsx)(r.xv,{children:(0,b.nk)(i.bt("Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.", "Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.", " - ", undefined, true),{scheduledDate:(0,_.jsx)(r.xv,{inline:!0,weight:"bold",children:(0,_.jsx)(gi.Z,{value:p,dateFormatType:gi.k.SHORT_WEEKDAY_DATE,useUTC:!1})},"scheduledPinDate"),scheduledTime:(0,_.jsx)(r.xv,{inline:!0,weight:"bold",children:p.toLocaleTimeString(o.locale,{hour:"2-digit",minute:"2-digit"})},"scheduledPinTime")})}),(0,_.jsx)(r.xu,{paddingX:12,paddingY:4,children:g&&(0,_.jsx)(r.Ee,{alt:u||"",color:"lightGray",naturalHeight:g.height,naturalWidth:g.width,src:d})})]})})}const xi=["succeeded","attempted","uploading"],bi=["succeeded","uploading"],yi=4,vi=(e,t,i,n)=>!e&&t&&!i&&!n;function Pi({currentPinItemId:e,media:t,onComplete:i,pin:o,pinDraftId:a,removePinDraft:l,scheduledPin:d,showSuccess:c,type:u,view:h,websiteMedia:g}){const m=(0,C.Z)(),{shopTheLook:{currentPinDraftId:f}}=(0,pt.f)(),{checkExperiment:x}=(0,I.F)(),b=(0,H.Z)(),y=(0,G.nl)(m,b)&&"ad_creation"!==P.Z.scenario()&&x("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,v=(0,s.useHistory)(),[w,S]=(0,n.useState)(!1),j=(0,s.useLocation)(),T=(0,E.Z)(),D=(0,li.Z)(),{group:k}=x("web_offsite_pin_creation_multi_select",{dangerouslySkipActivation:!0}),z=k.startsWith("enabled_redirect_to_hf"),O=P.Z.enabled("suppressSuccessModal")||z,R=(0,ze.F9)(),L=()=>{l()},{userAgent:{browserName:M}}=(0,A.B)();(0,n.useEffect)((()=>{(o||d)&&O&&L()}),[o,d,O]),(0,n.useEffect)((()=>{var e;o&&z&&v.push({pathname:"/",state:{from:j.pathname,boardName:o.board.name,imageUrl:(null===(e=o.images["236x"])||void 0===e?void 0:e.url)||""}})}),[o]),(0,n.useEffect)((()=>{const e=!(!document.body||!document.body.hasAttribute("data-pinterest-extension-installed")),t=ui.Z.isBrowserExtensionSupported(M),i=!!(0,pi.qn)("seenUpsellFromAddPinDropdown"),n=!!(0,hi.qn)("seenUpsellFromPinbuilder");o&&vi(e,t,i,n)&&S(!0)}),[M,o]),(0,n.useEffect)((()=>{if(o&&w){var e,t,i,n,s,r;const a=null!==(e=null===(t=o.board)||void 0===t?void 0:t.name)&&void 0!==e?e:"",l=null!==(i=null===(n=o.board)||void 0===n?void 0:n.url)&&void 0!==i?i:"",d=null!==(s=null===(r=o.images["236x"])||void 0===r?void 0:r.url)&&void 0!==s?s:"";R.showOneToast((({hideToast:e})=>(0,_.jsx)(Oe.Z,{boardName:a,boardUrl:l,onHide:e,pinImageUrl:d}))),(0,hi.Nh)("seenUpsellFromPinbuilder",!0)}}),[o,w]),(0,n.useEffect)((()=>{i&&c&&o&&i(o)}),[i,o,c]);const B=c&&(P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")),N=P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")?p.sG:p.XB;let Z=P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")?p.GX:p.bo;B&&(Z=0);const F=a===f,U="carousel"===u&&P.Z.enabled("carousel");return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:B||P.Z.enabled("offsite_pin_creation_multi_select")?void 0:N}},"data-test-id":"pin-builder-draft",display:"flex",direction:"column",paddingX:Z,rounding:y?8:4,width:p.of,children:B?(0,_.jsx)(Kt,{pinDraftId:a,pinItemId:e}):(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(ct,{pinDraftId:a}),(0,_.jsx)(r.xu,{position:y?"relative":"static",children:(0,_.jsx)($e,{pinDraftId:a})}),y&&t&&!U&&(0,_.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,_.jsx)(r.xu,{color:"secondary",height:2,dangerouslySetInlineStyle:{__style:{marginLeft:`-${Z*yi}px`}},width:p.of+Z*yi*2}),(0,_.jsx)(mt,{pinDraftId:a,pinItemId:e})]})]})}),(()=>{const e=c&&(P.Z.enabled("multi_pin")||P.Z.enabled("multi_pin_pinner")),i="true"===(0,_i.Z)().quick_promote_pinrep;if(o&&o.is_quick_promotable&&!e&&i)(()=>{if(o){const e=D("quick_promote_on_www");v.push(`${e}?pinId=${o.id}`)}L()})();else if(o&&!e&&"board"!==h)return(()=>{if(!o||!t||P.Z.enabled("suppressSuccessModal"))return null;const{section:e,id:i,board:{name:n}}=o,s={...t,url:t.src};return Object.assign(o.images,{"236x":s,"474x":s,"564x":s,orig:s}),(0,_.jsx)(r.xu,{"data-test-id":"pin-draft-create-success-modal",children:(0,_.jsx)(ci,{isFromPinBuilder:!0,boardName:n,eligibleForExtensionUpsell:w,imageUrl:t.src,onClose:L,pin:o,pinId:i,sectionName:e?e.title:null,siteType:T,video:"localVideo"===t.type?t:void 0,websiteMedia:g})})})();return null})(),!!d&&!B&&(0,_.jsx)(r.xu,{"data-test-id":"scheduled-pin-create-success-modal",children:(0,_.jsx)(fi,{scheduledPin:d,onDismiss:L})}),y&&F&&(0,_.jsx)(Lt,{pinItemId:e})]})}function wi(e){const t=(0,Ge.nL)(),{mode:i,pinId:n,pinItemIds:s,scheduledPin:r,status:a,type:l,view:d,websiteMedia:c}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),u=(0,o.useSelector)((i=>t(i,e))),h=s[0],p=(0,o.useSelector)((e=>{var t;return null===(t=e.pinbuilder.pinItems[u])||void 0===t?void 0:t.media})),g=(0,o.useSelector)((e=>{var t;return null===(t=e.pinbuilder.pinItems[h])||void 0===t?void 0:t.media})),m="carousel"===l?g:p,f=(0,o.useSelector)((e=>n&&"create"===i?e.pins[n]:null)),x=(0,o.useSelector)((e=>e.pinbuilder.pinDraftIds.length>1&&(bi.includes(a)||!!p&&"localVideo"===p.type&&xi.includes(a)))),b=(0,o.useDispatch)();return(0,_.jsx)(Pi,{...e,currentPinItemId:u,media:m,pin:f,scheduledPin:r&&"create"===i?r:null,showSuccess:x,type:l,view:d,websiteMedia:c,removePinDraft:()=>b((0,Re.Z)(e.pinDraftId))})}},510476:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(702664),o=i(883119),s=i(453451),r=i(898781),a=i(883561),l=i(277348),d=i(327096),c=i(785893);const u={sm:{imageRepSize:147,imageSize:93},md:{imageRepSize:159,imageSize:99}};function h({index:e,isRelatedProducts:t,pinTagId:i,size:h,taggedObjectId:p}){var _,g,m,f,x;const b=(0,n.useDispatch)(),y=(0,r.ZP)(),{setStlHoveredTaggedObjectId:v}=(0,d.f)(),P=null!==(g=(null!==(_=(0,n.useSelector)((({pinbuilder:e})=>e.taggedObjects)))&&void 0!==_?_:{})[p])&&void 0!==g?g:{},{media:w,pin:I}=P,A=(0,n.useSelector)((({pinbuilder:e})=>e.pinTags)),{x:E,y:C}=A[i],{height:S,width:j,url:T}=null!=w?w:{},{grid_title:D,rich_summary:k}=null!=I?I:{},z=null!==(m=(null!==(f=(null!==(x=(null!=k?k:{}).products)&&void 0!==x?x:[])[0])&&void 0!==f?f:{}).offer_summary)&&void 0!==m?m:{},{price:O,max_price:R}=z,L=e=>{v(e)},M=!(!O&&!R),{imageSize:B}=u[h];return(0,c.jsxs)(o.xu,{"data-test-id":"stl-product-item",direction:"column",display:"flex",marginEnd:!t&&[3,7].includes(e)?0:2,marginTop:!t&&e>=4?4:0,width:B,position:"relative",overflow:"auto",onMouseEnter:()=>L(p),onMouseLeave:()=>L(null),children:[(0,c.jsx)(o.xu,{rounding:5,overflow:"hidden",minHeight:B,maxHeight:B,width:B,minWidth:B,children:(0,c.jsx)(o.zd,{wash:!0,height:B,width:B,children:(0,c.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:S||1,naturalWidth:j||1,src:T||""})})}),M&&(0,c.jsx)(o.xu,{marginTop:2,children:(0,c.jsx)(s.Z,{productDetails:z,showSalesPrice:!0,type:"text"})}),D&&(0,c.jsx)(o.xu,{marginTop:1,children:(0,c.jsx)(o.xv,{size:"100",children:(0,a.ZP)(D,30)})}),(0,c.jsx)(o.xu,{position:"absolute",top:!0,right:!0,margin:2,children:(0,c.jsx)(o.hU,{accessibilityLabel:y.bt("Remove tagged product", "Remove tagged product", "shopTheLook.remove.taggedPin", undefined, true),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:()=>{E&&C?b((0,l.Cf)(i,"deleted")):(b((0,l.Go)(i,p)),b((0,l.Cf)(i,"edited")))},size:"sm"})})]})}},653769:(e,t,i)=>{i.d(t,{Z:()=>B});var n=i(702664),o=i(883119),s=i(667294),r=i(172045),a=i(28956),l=i(519325),d=i(258821),c=i(898781),u=i(299295),h=i(785893);const p={width:u.MN,backgroundColor:"#efefef",borderRadius:8,borderStyle:"none",boxSizing:"border-box",height:u.MN,outline:"none",padding:0};function _(){const e=(0,c.ZP)();return(0,h.jsx)("button",{style:p,children:(0,h.jsx)(o.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,h.jsx)(o.JO,{accessibilityLabel:e.bt("Add product tag", "Add product tag", "Accessibility label for the product tag icon", undefined, true),icon:"add-circle",color:"subtle",size:24,inline:!0})})})}var g=i(562501);function m(e){const{handleClick:t,pinTagId:i,taggedObjectIds:n}=e;return(0,h.jsx)(o.xu,{column:12,"data-test-id":"tagged-items-grid",children:(0,h.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:[(0,h.jsx)(o.xu,{padding:1,marginStart:-1,marginEnd:-1,children:(0,h.jsx)(o.iP,{mouseCursor:"grab",onTap:t,rounding:2,children:(0,h.jsx)(o.xu,{"data-test-id":"add-tags-button",children:(0,h.jsx)(_,{})})})}),!!i&&n.map(((e,t)=>(0,h.jsx)(o.xu,{padding:1,children:(0,h.jsx)(d.Z,{disabled:!1,pinTagId:i,taggedObjectId:e})},e)))]})})}function f(e){const t=(0,g.jk)(),i=(0,n.useSelector)((i=>e.pinTagId&&i.pinbuilder.pinTags&&Object.keys(i.pinbuilder.pinTags).length>0?t(i,e):[]));return(0,h.jsx)(m,{...e,taggedObjectIds:i})}var x=i(424624),b=i(407043),y=i(349700),v=i(665866),P=i(773285),w=i(780280),I=i(19121),A=i(717615),E=i(231947),C=i(502890),S=i(277348);function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends s.Component{constructor(...e){super(...e),j(this,"state",{isAssetPickerOpen:!1,taggedPins:[]}),j(this,"handleClick",(()=>{this.setState({isAssetPickerOpen:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12126})})),j(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})})),j(this,"handleAddTaggedPinsToPinDraft",(e=>{const{saveTaggedObject:t,removeTaggedObject:i,createPinTag:n,pinTagId:o}=this.props,{taggedPins:s}=this.state,a=o||(0,r.Z)();a!==o&&n(a),e.forEach(((e,i)=>{i<u.Pn&&(s.includes(e)||"pin"!==e.type&&"webImage"!==e.type||t(e.id,a,e))})),s.filter((t=>!e.includes(t))).forEach((e=>{i(e.id,a)})),this.setState({taggedPins:e}),this.handleDismiss()})),j(this,"primaryButtonText",(e=>this.props.i18n.nbt(["Save product", "Save products"], e, "Button text for adding/saving products to a Collections pin", true)))}componentDidMount(){const e=this.props.taggedObjects.map((e=>isNaN(e.id)?{type:"webImage",id:e.id,height:e.media.height,width:e.media.width,src:e.media.url,sourceURL:e.link}:{type:"pin",id:e.id,images:{"474x":e.media},description:"",title:"",videos:null,link:e.link}));this.setState({taggedPins:e})}componentDidUpdate(e){if(e.taggedObjectIds!==this.props.taggedObjectIds){const{taggedPins:e}=this.state,t=e.filter((e=>this.props.taggedObjectIds.includes(e.id)));t&&this.setState({taggedPins:t})}}render(){const{pinDraftId:e,pinItemId:t,pinTagId:i,pinTagIds:n,pinTags:s,requestContext:r,unfilteredTaggedObjects:d,useModalWithNoLayer:c,taggedObjectIds:p,inStlToolingExp:_,orbacActingAs:g,viewer:m}=this.props,{isAssetPickerOpen:b,taggedPins:v}=this.state,P=["product_pins","scrape"];(0,E._P)(r,m,g)&&P.push("catalog");const w=(0,x.Z)({pinTagIds:n,pinTags:s,taggedObjects:d}),I=w.length,A=p.length;return(0,h.jsxs)(o.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,h.jsxs)(o.xu,{flex:"none",marginBottom:6,children:[(0,h.jsx)(o.xu,{marginBottom:_?2:1,children:_?(0,h.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Update products", "Update products", "pinbuilder.editProducts.header", undefined, true)}):(0,h.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Add products", "Add products", "Add products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,h.jsx)(o.xu,{marginBottom:_?2:1,children:_?(0,h.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,h.jsx)(o.xv,{children:this.props.i18n.bt("Tag up to 8 products in the scene", "Tag up to 8 products in the scene", "pinbuilder.editProducts.description", undefined, true)}),(0,h.jsx)(o.xv,{size:"200",weight:"bold",children:(0,y.nk)(this.props.i18n.bt("{{ numXyTaggedProducts }}/8", "{{ numXyTaggedProducts }}/8", "pinbuilder.editProducts.taggedProducts.count", undefined, true),{numXyTaggedProducts:I})})]}):(0,h.jsx)(o.xv,{children:this.props.i18n.bt("Add products to your image to build a Pin people can shop for", "Add products to your image to build a Pin people can shop", "Description of adding pins to a collection", undefined, true)})}),!_&&(0,h.jsx)(o.xu,{"data-test-id":"num-product-count",display:"flex",children:(0,h.jsx)(o.xv,{size:"200",weight:"bold",children:(0,y.nk)(this.props.i18n.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], A, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:A})})})]}),(0,h.jsx)(o.kC,{alignItems:"stretch",direction:"column",flex:"grow",overflow:"auto",width:_?445:void 0,children:(0,h.jsxs)(o.xu,{marginBottom:5,children:[_?(0,h.jsx)(l.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:w}):(0,h.jsx)(f,{pinItemId:t,pinTagId:i,handleClick:this.handleClick}),b&&(0,h.jsx)(a.Z,{useModalWithNoLayer:c,closeOnOutsideClick:!1,onPrimaryAction:this.handleAddTaggedPinsToPinDraft,onSecondaryAction:this.handleDismiss,onDismiss:this.handleDismiss,shownTabs:P,pinItemId:t,primaryButtonText:this.primaryButtonText,secondaryButtonText:this.props.i18n.bt("Cancel", "Cancel", "PinBuilder.Modal.PinDraftInputCollectionTagView.buttonText", undefined, true),isSecondaryButtonDisabled:!1,selectedPins:v,maxAssetsToSelect:u.Pn,scrapeTitle:this.props.i18n.bt("Use a link", "Use a link", "Prompt for scraping an image from site", undefined, true),scrapeDescription:this.props.i18n.bt("Pick one item from a product link – it’ll create a product Pin for the item and add it to your image", "Pick one item from a product link—it’ll create a product Pin for the item, and add it to your image", "Detail about how to pick a product from scraping a URL for a Collections pin", undefined, true),resetScrapeOnSelect:!0})]})})]})}}function D(e){const t=(0,c.ZP)(),{logContextEvent:i}=(0,b.v)(),o=(0,w.B)(),s=(0,I.Z)(),r=(0,A.Z)(),{checkExperiment:a}=(0,P.F)(),l=(0,E.nl)(s,r)&&"ad_creation"!==v.Z.scenario()&&a("web_stl_tooling").anyEnabled,d=(0,g.jk)(),u=(0,g.CQ)(),p=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),_=(0,n.useSelector)((e=>e.pinbuilder.pinTags)),m=(0,n.useSelector)((e=>e.pinbuilder.taggedObjects)),f=p.selectedPinTagId||p.pinTagIds.length>0?p.pinTagIds[0]:null,x=(0,n.useSelector)((t=>d(t,e))),y=(0,n.useSelector)((t=>u(t,e))),j=(0,n.useDispatch)();return(0,h.jsx)(T,{...e,inStlToolingExp:l,requestContext:o,i18n:t,logContextEvent:i,orbacActingAs:r,viewer:s,pinTagId:f,pinTagIds:p.pinTagIds,pinTags:_,taggedObjectIds:x,taggedObjects:y,unfilteredTaggedObjects:m,createPinTag:t=>j((0,C.oe)(e.pinItemId,t)),saveTaggedObject:(t,i,n)=>{const o=n.type||"",{inStlToolingExp:s,stlTaggedCoords:r}=e,{x:a,y:l}=r||{};if("webImage"===n.type&&n.sourceURL){j((0,S.mz)(i,n.sourceURL,null)),s&&j((0,S.uM)(i,a||0,l||0));const e={height:n.height,width:n.width,url:n.src};j((0,S.Dn)(i,t,{media:e,type:o,pin:n}))}else{const e=n;j((0,S.mz)(i,e.link,null)),s&&j((0,S.uM)(i,a||0,l||0)),j((0,S.Dn)(i,t,{media:e.images["474x"],type:o,pin:e}))}j((0,C.C_)(e.pinItemId,i))},removeTaggedObject:(e,t)=>j((0,S.Go)(t,e))})}var k=i(746547),z=i(616672),O=i(490072),R=i(327096);const L={__style:{paddingBottom:u.uR}};function M({height:e,pinDraftId:t,pinItemId:i,paddingX:n=5,useModalWithNoLayer:s}){const r=(0,c.ZP)(),a=(0,I.Z)(),{shopTheLook:{stlTaggedCoords:l}}=(0,R.f)(),{checkExperiment:d}=(0,P.F)(),p=(0,A.Z)(),_=(0,E.nl)(a,p)&&"ad_creation"!==v.Z.scenario()&&d("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,{anyEnabled:g}=d("aid_exp_error_handling_pin_builder");return(0,h.jsxs)(o.xu,{display:"flex",direction:"row",dangerouslySetInlineStyle:L,children:[(0,h.jsxs)(o.xu,{paddingX:_?0:n,children:[(0,h.jsx)(k.Z,{height:e,pinDraftId:t,pinItemId:i,view:"collectionsTag"}),!_&&(0,h.jsx)(o.xu,{width:g?260:u.LM,children:(0,h.jsx)(o.xv,{align:"center",size:"200",weight:"bold",children:r.bt("Hint: make sure the products you add match items in your image! You can add up to 24.", "Hint: make sure products you add match items in your image! You can add up to 24.", "Hint explaining the maximum number of products that can be added to a Collections Pin", undefined, true)})})]}),(0,h.jsx)(o.xu,{flex:"grow",height:e,minHeight:u.sD,paddingX:_?0:5,marginStart:_?5:0,width:"100%",children:(0,h.jsx)(D,{useModalWithNoLayer:s,inStlToolingExp:_,pinDraftId:t,pinItemId:i,stlTaggedCoords:l})})]})}function B(e){const t=(0,n.useSelector)((t=>(0,O.OK)(t,e.pinDraftId))),i=(0,n.useSelector)((e=>e.pinbuilder.pinItems[t.pinItemIds[0]].media)),o=e.isAidExpErrorHandlingPinBuilderEnabled?271:u.LM,s=e.isAidExpErrorHandlingPinBuilderEnabled?418:u.sD,r=i?(0,z.Z)(i,o):s;return(0,h.jsx)(M,{...e,height:r})}},746547:(e,t,i)=>{i.d(t,{Z:()=>ni});var n=i(667294),o=i(702664),s=i(883119),r=i(407043),a=i(898781),l=i(305782),d=i(785893);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={__style:{padding:6}};class h extends n.Component{constructor(...e){super(...e),c(this,"handleEllipsisClick",((e,t)=>()=>{const{setCarouselItem:i,logContextEvent:n}=this.props;t&&n({event_type:101,component:13308,element:11126}),i(e)})),c(this,"handleBackClick",(()=>{const{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12170}),t(e-1)})),c(this,"handleForwardClick",(()=>{const{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12169}),t(e+1)}))}render(){const{pinItemIds:e,pinItemIndex:t,showAdd:i}=this.props,n=e.length-1,o=t>0,r=t<n,a=this.props.i18n.bt("Back", "Back", "Button to advance to previous carousel image", undefined, true),l=this.props.i18n.bt("Forwards", "Forward", "Button to advance to next carousel image", undefined, true);return(0,d.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(s.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,children:e.map(((e,o)=>(0,d.jsx)(s.xu,{children:o===n&&i?(0,d.jsx)(s.xu,{"data-test-id":"add-item-to-carousel-button",children:(0,d.jsx)(s.hU,{accessibilityLabel:this.props.i18n.bt("Add", "Add", "Button to add image to carousel", undefined, true),bgColor:"transparent",icon:"add",iconColor:o===t?"darkGray":"gray",onClick:this.handleEllipsisClick(o,!0),size:"xs"})}):(0,d.jsx)(s.xu,{"data-test-id":"carousel-control-button",paddingX:1,children:(0,d.jsx)(s.iP,{onTap:this.handleEllipsisClick(o),rounding:"circle",children:(0,d.jsx)(s.xu,{color:o===t?"dark":"tertiary",height:12,rounding:"circle",width:12})})})},e)))}),(0,d.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[o?(0,d.jsx)(s.hU,{accessibilityLabel:a,bgColor:"transparent",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBackClick,size:"xs"}):(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(s.JO,{accessibilityLabel:a,color:"subtle",icon:"arrow-back",size:12})}),r?(0,d.jsx)(s.hU,{accessibilityLabel:l,bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",onClick:this.handleForwardClick,size:"xs"}):(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(s.JO,{accessibilityLabel:l,color:"subtle",icon:"arrow-forward",size:12})})]})]})}}function p(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),{pinItemIds:n,pinItemIndex:s}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),c=n[n.length-1],u=(0,o.useSelector)((e=>!e.pinbuilder.pinItems[c].media)),p=(0,o.useDispatch)();return(0,d.jsx)(h,{...e,i18n:i,logContextEvent:t,pinItemIds:n,pinItemIndex:s,showAdd:u,setCarouselItem:t=>p((0,l.Cj)(e.pinDraftId,t))})}var _=i(237056),g=i(28956),m=i(333312),f=i(497529),x=i(665866),b=i(773285),y=i(941646),v=i(19121),P=i(134906),w=i(43898),I=i(451105),A=i(172045),E=i(299295),C=i(388628),S=i(699109),j=i(174807),T=i(448994),D=i(502890),k=i(20064);function z({assets:e,i18n:t,isEmployee:i,pinDraftId:n}){return(o,s)=>{const r=s(),a=n||(0,A.Z)(),l=r.pinbuilder.pinDrafts[a]&&r.pinbuilder.pinDrafts[a].pinItemIds||[],d=l.length,{media:c}=r.pinbuilder.pinItems[l[0]]||{},u=r.pinbuilder.pinItems[l[d-1]],{width:h,height:p}=e.length>0&&"localImage"===e[0].type?e[0]:{},_=l[d-1],g=e.reduce((e=>(e.push((0,A.Z)()),e)),u?[_]:[]),m=(0,C.Z)(c&&c.width||h,c&&c.height||p),f=0===d?d:d-1,x=e.slice(0,E.dS-f).reduce(((e,t)=>({...e,[(0,A.Z)()]:{...k.E,media:"localImage"===t.type?t:null}})),{});(0,S.Z)(Object.keys(x),x,m).then((e=>{const s=e.map(((e,t)=>{const i=g[t]||(0,A.Z)();return o(i===_?(0,D.nh)(i,e):(0,j.Z)(a,i,e)),i}));if(e.length+f<E.dS){const e=(0,A.Z)();o((0,j.Z)(a,e,null,{saveIndex:!0})),s.push(e)}n||o((0,T.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:s},pinDraftId:a,storyPinPublishStopwatch:void 0}))}))}}var O=i(537929),R=i(474394);function L(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M extends n.Component{constructor(...e){super(...e),L(this,"state",{hasFocus:!1,isAssetPickerOpen:!1,websiteLinkButtonRef:null}),L(this,"setWebsiteLinkButtonRef",(e=>{this.setState({websiteLinkButtonRef:e})})),L(this,"setTextFieldInput",(e=>{this.textFieldInput=e})),L(this,"handleBlur",(()=>{const{setWebsiteLink:e,websiteLink:t,i18n:i}=this.props;t?e(t,(0,P.CB)(t)?"":(0,I.q0)(i)):this.setState({hasFocus:!1})})),L(this,"handleTouch",(()=>{const{logContextEvent:e,setWebsiteLink:t,submitWebsiteLink:i,websiteLink:n,i18n:o}=this.props;if(!n)return void t(n,null);const s=(0,P.CB)(n)?"":(0,I.q0)(o);t(n,s),s||(i(),e({event_type:101,component:13308,element:10969,aux_data:{url:n}}))})),L(this,"handleChange",(({value:e})=>{this.props.setWebsiteLink(e)})),L(this,"handleClick",(()=>{const{disabledPinCreation:e,experience:t,experienceClient:i,logContextEvent:n,setShowDisabledPinCreationBanner:o}=this.props;e?o():(n({event_type:101,component:13308,element:10968}),t&&501924===t.experience_id&&i.completeExperience(1000135,501924),this.setState({hasFocus:!0}))})),L(this,"handleDismiss",(()=>{this.setState({isAssetPickerOpen:!1})}))}componentDidUpdate(e,t){this.textFieldInput&&!t.hasFocus&&this.textFieldInput.focus()}render(){const{createCarouselPinDraft:e,createPinDrafts:t,websiteLink:i,websiteLinkError:o}=this.props,{hasFocus:r,isAssetPickerOpen:a}=this.state,l="pin-draft-website-link";return r?(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(s.xu,{rounding:2,children:(0,d.jsx)(s.xu,{padding:1,color:"secondary",rounding:2,children:(0,d.jsxs)(s.xu,{marginStart:-1,marginEnd:-1,display:"flex",children:[(0,d.jsx)(s.xu,{paddingX:1,flex:"grow",children:(0,d.jsx)(s.nv,{hasError:!!o,id:l,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n.bt("Enter website", "Enter website", "Placeholder text to enter website url", undefined, true),ref:this.setTextFieldInput,size:"lg",type:"text",value:i})}),(0,d.jsx)(s.xu,{children:(0,d.jsx)(s.iP,{onTap:this.handleTouch,fullHeight:!0,children:(0,d.jsx)(s.xu,{paddingX:1,height:"100%",children:(0,d.jsx)(s.xu,{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",paddingX:2,"data-test-id":"website-link-submit-button",children:(0,d.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Submit", "Submit", "Submit website button to scrape images", undefined, true),size:20,icon:"arrow-forward"})})})})})]})})}),!!o&&(0,d.jsx)(w.Z,{errorMessage:o,htmlFor:l})]}):(0,d.jsxs)(y.Z,{id:"save-from-site-button",children:[(0,d.jsxs)(s.xu,{ref:this.setWebsiteLinkButtonRef,children:[(0,d.jsx)(s.zx,{fullWidth:!0,onClick:this.handleClick,size:"lg",text:this.props.i18n.bt("Save from site", "Save from site", "Save from site button", undefined, true)}),a&&(0,d.jsx)(g.Z,{onPrimaryAction:t,onSecondaryAction:x.Z.enabled("carousel")?e:void 0,onDismiss:this.handleDismiss,initialTab:"scrape"})]}),(0,d.jsx)(m.default,{experienceIds:[501924],placementId:1000135,anchor:this.state.websiteLinkButtonRef,idealDirection:"up",flyoutSize:"md"})]})}}function B(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,_.Z)(),{pinDraftId:s}=e,c=(0,o.useDispatch)(),u=(0,v.Z)(),h=u.isAuth&&u.isEmployee,p=u.isAuth?u.id:"",g=u.isAuth?u.country:"",m=(0,f.Z)(),{checkExperiment:y}=(0,b.F)(),P=x.Z.enabled("disabledPinCreation");return(0,d.jsx)(M,{...e,createPinDrafts:e=>c((0,O.Z)({assets:e,checkExperiment:y,country:g,i18n:i,ideaPinRenamingEnabled:n,isEmployee:h,logContextEvent:t,userId:p})),createCarouselPinDraft:e=>c(z({assets:e,pinDraftId:void 0,isEmployee:h,i18n:i})),disabledPinCreation:P,experienceClient:m,i18n:i,logContextEvent:t,setShowDisabledPinCreationBanner:()=>c((0,R.setShowDisabledPinCreationBanner)(!0)),setWebsiteLink:(e,t)=>c((0,l.f9)(s,e,t)),submitWebsiteLink:()=>c((0,l.c8)(s,"scrape")),websiteLink:(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[s].websiteLink)),websiteLinkError:(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[s].websiteLinkError))})}var N=i(616550),Z=i(349700);function F({currentIndex:e,numPinItems:t}){const i=(0,a.ZP)();return(0,d.jsx)(s.xu,{position:"absolute",top:!0,right:!0,margin:3,children:(0,d.jsx)(s.xu,{rounding:"pill",paddingY:2,paddingX:3,color:"transparentDarkGray",children:(0,d.jsx)(s.xv,{color:"inverse",size:"200",weight:"bold",children:(0,Z.nk)(i.bt("{{ current }}/{{ total }}", "{{ current }}/{{ total }}", "Text denoting the current item number a user is viewing in a carousel", undefined, true),{current:e,total:t})})})})}function U(e){const{pinItemIds:t,pinItemIndex:i}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),n=i+1,s=(0,o.useSelector)((e=>t.filter((t=>!!e.pinbuilder.pinItems[t].media)).length));return(0,d.jsx)(F,{currentIndex:n,numPinItems:s})}var V=i(121151),H=i(265696),G=i(955625);function W(e,t=G.IU){return(0,H.Z)().then((i=>{const n=new i(document.createElement("div")),o=e.filter((e=>"localImage"===e.type)).map((e=>e.src));return n.setImages(o).then((()=>({media:n.getCanvasOutput({width:t}),canvasJson:n.toJSON()})))}))}class $ extends n.Component{constructor(...e){var t,i,n;super(...e),n={media:null},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{assets:e}=this.props;W(e.reduce(((e,t)=>"localImage"===t.type?[...e,t]:e),[]).slice(0,5)).then((({media:e})=>{this.setState({media:e})}))}render(){const{media:e}=this.state,t=e?E.Uw/(e.width>e.height?e.width:e.height):0;return(0,d.jsxs)(s.xu,{display:"flex",direction:"column",alignItems:"center",padding:2,justifyContent:"center",height:"100%",children:[(0,d.jsx)(s.xu,{marginBottom:6,width:E.Uw,children:(0,d.jsx)(s.xv,{align:"center",children:this.props.i18n.bt("Create a collage", "Create a collage", "Instructing the user that all the images selected will be combined into 1 image", undefined, true)})}),(0,d.jsx)(s.xu,{height:"100%",children:e&&(0,d.jsx)(s.xu,{"data-test-id":"layout-picker-collage-preview",width:e.width*t,height:e.height*t,rounding:2,overflow:"hidden",children:(0,d.jsx)(s.Ee,{alt:this.props.i18n.bt("A collage image combined from selected images", "A collage image combined from selected images", "Preview of how the collage would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})]})}}function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const X=[{component:function({assets:e}){const t=(0,a.ZP)(),i=e.reduce(((e,t)=>"localImage"===t.type?[...e,t]:e),[]).slice(0,5);if(i.length>0){const e=i[0],n=E.Uw/(e.width>e.height?e.width:e.height);return(0,d.jsxs)(s.xu,{display:"flex",direction:"column",alignItems:"center",padding:2,height:"100%",children:[(0,d.jsx)(s.xu,{marginBottom:6,width:E.Uw,children:(0,d.jsx)(s.xv,{align:"center",children:t.bt("Create a carousel", "Create a carousel", "Instructing the user that all the images selected will be combined into a carousel", undefined, true)})}),(0,d.jsxs)(s.xu,{"data-test-id":"layout-picker-carousel-preview",display:"flex",direction:"column",height:"100%",justifyContent:"center",children:[(0,d.jsx)(s.xu,{width:e.width*n,height:e.height*n,rounding:2,overflow:"hidden",children:(0,d.jsx)(s.Ee,{alt:t.bt("A carousel image.", "A carousel image.", "Preview of how the carousel would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,children:(0,d.jsx)(F,{currentIndex:1,numPinItems:i.length})})}),(0,d.jsx)(s.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,marginTop:2,children:i.map(((e,t)=>(0,d.jsx)(s.xu,{paddingX:1,children:(0,d.jsx)(s.xu,{color:0===t?"dark":"tertiary",height:10,rounding:"circle",width:10})},e.src)))})]})]})}return null},name:"carousel"},{component:function(e){const t=(0,a.ZP)();return(0,d.jsx)($,{...e,i18n:t})},name:"layout"}];class Y extends n.Component{constructor(...e){super(...e),q(this,"state",{selectedLayout:null,hoveredLayout:null}),q(this,"handleSelect",(e=>()=>{this.setState({selectedLayout:e})})),q(this,"handleOnMouseEnter",(e=>()=>{this.setState({hoveredLayout:e})})),q(this,"handleOnMouseLeave",(()=>()=>{this.setState({hoveredLayout:null})}))}render(){const{assets:e,onDismiss:t,onPrimaryAction:i,primaryButtonText:n}=this.props,{selectedLayout:o,hoveredLayout:r}=this.state,a=n||this.props.i18n.bt("Create Pin", "Create Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true);return(0,d.jsx)(V.ZP,{accessibilityModalLabel:this.props.i18n.bt("Pick a Pin", "Pick a Pin", "Label to describe the Pin format picker", undefined, true),heading:(0,d.jsx)(s.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,d.jsx)(s.X6,{size:"500",children:this.props.i18n.bt("Pick a Pin", "Pick a Pin", "Label to of the Pin format picker.", undefined, true)})}),onDismiss:t,footer:(0,d.jsxs)(s.xu,{display:"flex",justifyContent:"between",alignItems:"center",paddingX:4,children:[(0,d.jsx)(s.xu,{width:"50%",children:(0,d.jsx)(s.xv,{color:"subtle",size:"200",overflow:"normal",children:this.props.i18n.bt("Psst...you can edit and reorder your images later", "Psst...you can edit and reorder your images later", "Information for the Pin format picker model, choosing between carousel and collage.", undefined, true)})}),(0,d.jsx)(s.xu,{"data-test-id":"layout-picker-action-button",display:"flex",flex:"none",marginStart:-1,marginEnd:-1,marginTop:1,children:(0,d.jsx)(s.zx,{color:"red",disabled:!o,onClick:()=>i(this.state.selectedLayout),text:a})})]}),size:912,children:(0,d.jsx)(s.xu,{display:"flex",justifyContent:"center",paddingX:4,paddingY:8,height:460,children:X.map(((t,i)=>{const{component:n,name:a}=t;return(0,d.jsx)(s.xu,{height:380,width:350,marginEnd:1===i?3:0,marginStart:1===i?3:0,rounding:2,color:r===a?"secondary":"default",dangerouslySetInlineStyle:{__style:{border:"2px solid",borderColor:o===a?"#e60023":"#efefef"}},onMouseEnter:this.handleOnMouseEnter(a),onMouseLeave:this.handleOnMouseLeave(),children:(0,d.jsx)(s.iP,{fullHeight:!0,onTap:this.handleSelect(a),rounding:2,children:(0,d.jsx)(s.xu,{height:"100%",paddingY:4,children:n&&(0,d.jsx)(n,{assets:e})})})},i)}))})})}}function K(e){const t=(0,a.ZP)();return(0,d.jsx)(Y,{...e,i18n:t})}var J=i(385740),Q=i(454074),ee=i(780280),te=i(784590),ie=i(966113),ne=i(531245),oe=i(281139),se=i(77891),re=i(151416),ae=i(66699),le=i(977558);const de=(e,t)=>(0,ae.Z)(t.nbt(["{{ length }} px", "{{ length }} px"], 200, "PinBuilder.PinQualityDrawer.pixel", true),{length:e}),ce=(e,t,i)=>(0,ae.Z)(i.nbt(["{{ min }}-{{ max }} chars", "{{ min }}-{{ max }} chars"], 100, "PinBuilder.PinQualityDrawer.charsLengthRange", true),{min:e,max:t}),ue=(e,t)=>(0,ae.Z)(t.nbt(["{{ min }}+ chars", "{{ min }}+ chars"], 100, "PinBuilder.PinQualityDrawer.lengthAtLeastChars", true),{min:100});const he=(0,n.memo)((function({onDismiss:e}){const t=(0,a.ZP)(),i=t.bt("None", "None", "PinBuilder.PinQualityDrawer.none", undefined, true);return(0,d.jsx)(s.mh,{zIndex:{index:()=>le.fe+1},children:(0,d.jsx)(s.To,{accessibilityLabel:t.bt("Pin creation quality recommentations", "Pin creation quality recommentations", "PinBuilder.PinQualityDrawer.SheetLabel", undefined, true),accessibilityDismissButtonLabel:t.bt("Dismiss", "Dismiss", "PinBuilder.PinQualityDrawer.Dismiss", undefined, true),onDismiss:e,size:"lg",heading:t.bt("Maximise engagement with high-quality Pins.", "Maximize engagement with high quality pins.", "PinBuilder.PinQualityDrawer.title", undefined, true),subHeading:(0,d.jsx)(s.xu,{marginStart:8,children:(0,d.jsx)(s.xv,{children:t.bt("Follow these recommendations to achieve the highest quality Pins.", "Follow these recommendations to achieve the highest quality pins.", "PinBuilder.PinQualityDrawer.description", undefined, true)})}),footer:(0,d.jsx)(s.xu,{display:"flex",justifyContent:"end",alignItems:"end",color:"default",children:(0,d.jsx)(s.zx,{text:t.bt("OK", "Got it", "PinBuilder.PinQualityDrawer.close", undefined, true),color:"red",accessibilityLabel:t.bt("Close", "Close", "PinBuilder.PinQualityDrawer.close", undefined, true),onClick:e})}),children:(0,d.jsxs)(s.xu,{children:[(0,d.jsxs)(s.xu,{marginBottom:8,children:[(0,d.jsx)(s.xu,{marginBottom:3,children:(0,d.jsx)(s.X6,{size:"500",children:t.bt("Photo quality", "Photo quality", "PinBuilder.PinQualityDrawer.title.photo", undefined, true)})}),(0,d.jsxs)(s.iA,{accessibilityLabel:t.bt("List of image qualities", "List of image qualities", "PinQualityDrawer.image.accessibilityLabel", undefined, true),children:[(0,d.jsx)(s.iA.Header,{children:(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Content attribute", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Minimum requirement", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Recommendation", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(s.iA.Body,{children:[(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Resolution", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ width }} wide x {{ height }} tall", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:de(200,t),height:de(300,t)})})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ width }} wide x {{ height }} tall (or larger)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:de(1e3,t),height:de(1500,t)})})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Aspect ratio", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide and taller)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Title length", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:ce(E.bA,E.Ke,t)})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Description length", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:ue(0,t)})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Destination link", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Have a destination link", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]}),(0,d.jsxs)(s.xu,{children:[(0,d.jsx)(s.xu,{marginBottom:3,children:(0,d.jsx)(s.X6,{size:"500",children:t.bt("Video quality", "Video quality", "PinBuilder.PinQualityDrawer.title", undefined, true)})}),(0,d.jsxs)(s.iA,{accessibilityLabel:t.bt("List of video qualities", "List of video qualities", "PinQualityDrawer.video.accessibilityLabel", undefined, true),children:[(0,d.jsx)(s.iA.Header,{children:(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Content attribute", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Minimum requirement", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(s.iA.HeaderCell,{children:(0,d.jsx)(s.xv,{size:"100",weight:"bold",children:t.bt("Recommendation", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(s.iA.Body,{children:[(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Resolution", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ width }} wide x {{ height }} tall", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:de(200,t),height:de(300,t)})})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ width }} wide x {{ height }} tall (or larger)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:de(540,t),height:de(960,t)})})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Duration", "Duration", "PinBuilder.PinQualityDrawer.title.duration", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.nbt(["{{ duration }} second", "{{ duration }} seconds"], 4, "PinBuilder.PinQualityDrawer.duration", true),{duration:4})})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.nbt(["At least {{ duration }} second", "At least {{ duration }} seconds"], 4, "PinBuilder.PinQualityDrawer.duration.atLeast", true),{duration:4})})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Aspect ratio", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:(0,ae.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide and taller)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Title length", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:ce(E.bA,E.Ke,t)})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Description length", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:ue(0,t)})})]}),(0,d.jsxs)(s.iA.Row,{children:[(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Destination link", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:i})}),(0,d.jsx)(s.iA.Cell,{children:(0,d.jsx)(s.xv,{size:"100",children:t.bt("Have a destination link", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]})]})})})}));var pe=i(798477);function _e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ge={__style:{zIndex:E.v9}},me={__style:{border:"dashed 2px #dadada",borderRadius:6}},fe={__style:{border:"dashed 2px #CC0000"}},xe={color:"#6c6c6c"};function be(e,t,i){i({event_type:101,component:13308,element:12171,view_type:e,view_parameter:t})}class ye extends n.Component{constructor(e){super(e),_e(this,"state",{isAssetPickerOpen:!1,isLayoutPickerOpen:!1,assets:[],isDrawerOpen:!1}),_e(this,"handleAddMediaToPinDraft",(e=>{const{addMediaToPinDraft:t,pinDraftId:i,type:n}=this.props;t(e,"carousel"===n?i:void 0)})),_e(this,"handleOpenLayoutPicker",(e=>{this.setState({isLayoutPickerOpen:!0,assets:e})})),_e(this,"handleChange",(e=>{const{processFiles:t,type:i,logContextEvent:n}=this.props,o=Array.from(e.target.files);x.Z.enabled("carousel")&&x.Z.enabled("layouts")&&"carousel"!==i&&o.length>1?this.openLayoutPickerForFiles(o):t(o),n({event_type:101,component:13308,element:10967,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:o.map((e=>e.type))})}}),e.target.value=""})),_e(this,"handleClick",(()=>{this.props.logContextEvent({event_type:101,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter})})),_e(this,"handleDismiss",(()=>{const{isAssetPickerOpen:e,isLayoutPickerOpen:t}=this.state;e?(this.setState({isAssetPickerOpen:!1}),this.props.logContextEvent({event_type:123,component:13392,view_type:this.props.viewType,view_parameter:this.props.viewParameter})):t&&this.setState({isLayoutPickerOpen:!1})})),_e(this,"handleDrawerDismiss",(()=>{this.setState({isDrawerOpen:!1})})),_e(this,"handleDrop",(e=>{const{processFiles:t,logContextEvent:i}=this.props,n=(0,Q.Z)(e.dataTransfer);i({event_type:3502,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map((e=>e.type))})}}),x.Z.enabled("carousel")&&n.length>1?this.openLayoutPickerForFiles(n):t(x.Z.enabled("carousel")?n:n.slice(0,1))})),_e(this,"handleLayoutSelected",(e=>{if("layout"===e){const{createLayoutPinDraft:e}=this.props;e(this.state.assets),this.setState({isLayoutPickerOpen:!1})}else if("carousel"===e){const{addMediaToPinDraft:e,pinDraftId:t}=this.props;e(this.state.assets,t)}})),_e(this,"getPrimaryAction",(()=>{const{createPinDrafts:e,type:t}=this.props;return"carousel"===t?this.handleAddMediaToPinDraft:e})),_e(this,"getSecondaryAction",(()=>{const{type:e}=this.props,{isAssetPickerOpen:t}=this.state;if(t&&"single"===e)return this.handleOpenLayoutPicker})),_e(this,"getText",(()=>{var e;const{type:t,mediaError:i,userResource:n}=this.props,o=null===(e=n.data)||void 0===e?void 0:e.video_upload_allowed,s="carousel"===t,r=x.Z.enabled("carousel"),a=!s&&o;return i||(s?this.props.i18n.bt("Upload another image to create a carousel", "Upload another image to create a carousel", "pinbuilder.pindraft.media.mediaEmptyView.carouselText", undefined, true):r&&a?this.props.i18n.bt("Drag and drop or click to upload images or a video", "Drag and drop or click to upload images or a video", "Label on drag and drop area for uploading a Pin.", undefined, true):r?this.props.i18n.bt("Drag and drop or click to upload your images", "Drag and drop or click to upload your images", "Label on drag and drop area for uploading a Pin.", undefined, true):a?this.props.i18n.bt("Drag and drop or click to upload your image or video", "Drag and drop or click to upload your image or video", "Label on drag/drop area for uploading a pin", undefined, true):this.props.i18n.bt("Drag and drop or click to upload", "Drag and drop or click to upload", "Label on drag/drop area for uploading a pin", undefined, true))})),x.Z.enabled("layouts")&&(0,H.Z)()}openLayoutPickerForFiles(e){const{i18n:t,ideaPinRenamingEnabled:i,processFiles:n,pinDraftId:o,setPinDraftAssetError:s}=this.props;(0,se.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:{allowVideo:!1}}).then((t=>{const i=t.reduce(((e,t)=>"error"!==t.type?[...e,t]:e),[]);i.length>1&&i.length<=5?this.setState({isLayoutPickerOpen:!0,assets:i}):i.length>5?s(o,this.props.i18n.bt("Your files could not be uploaded. Please select up to 5 files.", "Uh oh, your files could not be uploaded. Please make sure to select five files or less.", "pinbuilder.pindraft.media.mediaEmptyView.validateFiles.error", undefined, true)):n(e)}))}render(){var e;const{aspectRatio:t,isPartner:i,mediaError:n,type:o,pinDraftId:r,logContextEvent:a,checkExperiment:l,userResource:c}=this.props,{assets:u,isDrawerOpen:h,isAssetPickerOpen:p,isLayoutPickerOpen:_}=this.state,m=null===(e=c.data)||void 0===e?void 0:e.video_upload_allowed,f=x.Z.enabled("carousel"),y="carousel"!==o&&(m||["story","storyFARLandscape","storyFARPortrait"].includes(o)),v=[...ne.xl,...y?ne.ss:[]].join(","),P=["upload","scrape"],w=l&&l("aid_exp_error_handling_pin_builder").anyEnabled,I=l&&l("aid_exp_pin_builder_a11y_image_recommendation").anyEnabled,A=w?(0,Z.nk)(this.props.i18n.bt("We recommend using high-quality .jpg files under {{max_image_size_mb}} MB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB", "Pinbuilder.HelpText.Image", undefined, true),{max_image_size_mb:20}):(0,Z.nk)(this.props.i18n.bt("Recommendation: Use high-quality .jpg files under {{max_image_size_mb}} MB", "Recommendation: Use high-quality .jpg files less than {{max_image_size_mb}}MB", "Pinbuilder.HelpText.Image", undefined, true),{max_image_size_mb:20}),E=w?(0,Z.nk)(this.props.i18n.bt("We recommend using high-quality .jpg files under {{max_image_size_mb}} MB or .mp4 files under {{max_video_size_gb}} GB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB", "Pinbuilder.HelpText.Media", undefined, true),{max_image_size_mb:20,max_video_size_gb:2}):(0,Z.nk)(this.props.i18n.bt("Recommendation: Use high-quality .jpg files under {{max_image_size_mb}} MB or .mp4 files under {{max_video_size_gb}} GB", "Recommendation: Use high-quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB", "Pinbuilder.HelpText.Media", undefined, true),{max_image_size_mb:20,max_video_size_gb:2}),C=x.Z.enabled("pinQuality");return(0,d.jsx)(re.lE,{children:({openHelpTextInNewWindow:e})=>(0,d.jsx)(s.xu,{height:"100%",width:"100%",children:(0,d.jsx)(oe.Z,{accept:v,allowMultipleFiles:f,hasError:!!n,id:"media-upload-input-"+r,onChange:this.handleChange,onClick:this.handleClick,onDrop:this.handleDrop,isAriaHidden:!1,accessibilityLabel:this.props.i18n.bt("File upload", "File upload", "[m10n] pinbuilder.mediaEmptyView.fileUpload.accessibilityLabel", undefined, true),experimentsClient:(0,b.F)(),children:()=>(0,d.jsxs)(s.xu,{column:12,"data-test-id":"media-empty-view",height:"100%",overflow:"hidden",padding:3,position:"relative",rounding:3,children:[w?(0,d.jsxs)(s.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:n?fe:me,direction:"column",display:"flex",width:241,height:460,justifyContent:I?"start":"center",rounding:3,margin:1,children:[(0,d.jsx)(s.xu,{padding:2,marginTop:I?4:-12,children:(0,d.jsx)(s.JO,{accessibilityLabel:n?this.props.i18n.bt("Upload error", "Upload error", "Error alert icon shown when file upload fails", undefined, true):this.props.i18n.bt("Add an image or video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),color:n?"error":"subtle",icon:n?"workflow-status-problem":"arrow-circle-up",size:24})}),t<=1&&(0,d.jsx)(s.xu,{column:12,marginTop:4,paddingX:I?10:12,width:270,children:(0,d.jsx)(s.xv,{align:"center",color:"default",overflow:"normal",weight:"bold",size:I?"400":"200",children:this.getText()})})]}):(0,d.jsxs)(s.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:me,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,d.jsx)(s.xu,{padding:2,children:(0,d.jsx)(s.JO,{accessibilityLabel:n?this.props.i18n.bt("Upload error", "Upload error", "Error alert icon shown when file upload fails", undefined, true):this.props.i18n.bt("Add an image or video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),color:n?"error":"subtle",icon:n?"alert":"arrow-circle-up",size:32})}),t<=1&&(0,d.jsx)(s.xu,{column:12,marginTop:4,paddingX:12,children:(0,d.jsx)(s.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:I?"400":"300",children:this.getText()})})]}),t<=1.7777777777777777&&(0,d.jsxs)(s.xu,{bottom:!0,left:!0,margin:t<=1?8:5,paddingY:I?7:0,overflow:"hidden",position:"absolute",right:!0,children:[w?(0,d.jsx)(s.xv,{align:"center",overflow:"normal",size:I?"300":"100",children:y?E:A}):(0,d.jsx)(s.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:I?"300":"200",children:(0,d.jsx)("span",{style:n?void 0:xe,children:y?E:A})}),i&&(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:ge,marginTop:I?6:2,marginBottom:I?-3:0,overflow:"hidden",position:"relative","data-test-id":"pin-help-link",children:(0,d.jsx)(s.xv,{align:"center",color:n?"error":"default",overflow:"normal",size:"200",weight:"bold",children:C?(0,d.jsx)(s.rU,{href:ie.Mo,target:"blank",onClick:({event:t,dangerouslyDisableOnNavigation:i})=>{i(),be(this.props.viewType,this.props.viewParameter,a),e||(t.preventDefault(),this.setState({isDrawerOpen:!0}))},children:w?(0,d.jsx)(s.xv,{inline:!0,size:I?"300":"100",underline:!0,children:this.props.i18n.bt("Review Pin best practices", "Review Pin best practices", "PinBuilder.link.showGuidelineDrawer.full", undefined, true)}):(0,d.jsx)(s.xv,{inline:!0,size:I?"300":"200",children:(0,d.jsx)("span",{style:xe,children:(0,Z.nk)(this.props.i18n.bt("{{SeeGuidelineLink}} for high-quality Pins", "{{SeeGuidelineLink}} for high quality Pins", "PinBuilder.link.showGuidelineDrawer.full", undefined, true),{SeeGuidelineLink:(0,d.jsx)(s.xv,{inline:!0,size:I?"300":"200",weight:"bold",children:(0,d.jsx)("span",{style:xe,children:this.props.i18n.bt("See guidelines", "See guidelines", "PinBuilder.link.showGuidelineDrawer", undefined, true)})},"seeGuidelineLink")})})})}):(0,d.jsx)(s.rU,{href:ie.Mo,target:"blank",onClick:({dangerouslyDisableOnNavigation:e})=>{e(),be(this.props.viewType,this.props.viewParameter,a)},children:(0,d.jsx)("span",{style:xe,children:y?this.props.i18n.bt("View image and video specs", "View image and video specs", "Link text to Pinterest product specs", undefined, true):this.props.i18n.bt("View image specs", "View image specs", "Link text to Pinterest product specs", undefined, true)})})})})]}),C&&h&&(0,d.jsx)(he,{onDismiss:this.handleDrawerDismiss}),p&&(0,d.jsx)(g.Z,{onDismiss:this.handleDismiss,onPrimaryAction:this.getPrimaryAction(),onSecondaryAction:this.getSecondaryAction(),primaryButtonText:"carousel"===o?this.props.i18n.bt("Add to Pin", "Add to Pin", "Button text for adding media to Pin like adding another image to a carousel Pin", undefined, true):void 0,secondaryButtonText:this.props.i18n.bt("Combine into one Pin", "Combine into 1 Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true),shownTabs:P}),_&&(0,d.jsx)(K,{assets:u,onDismiss:this.handleDismiss,onPrimaryAction:this.handleLayoutSelected,primaryButtonText:this.props.i18n.bt("Create Pin", "Create Pin", "Button text for create a carousel Pin or single Pin with layout image.", undefined, true)})]})})})})}}function ve(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,_.Z)(),{pinDraftId:s}=e,c=(0,o.useDispatch)(),u=(0,v.Z)(),{checkExperiment:h}=(0,b.F)(),p=u.isAuth&&u.isEmployee,g=u.isAuth&&u.isPartner,m=u.isAuth?u.id:"",f=u.isAuth?u.country:"",x=(0,te.Z)({name:"UserResource",options:{username:u.isAuth&&u.username,field_set_key:"profile"}}),y=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinItems:t}})=>{const{pinItemIds:i}=e[s],n=i[0],{media:o}=t[n];return o?o.width/o.height:0})),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[s].mediaError)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[s].type)),{viewType:I,viewParameter:E}=(0,J.SU)();return(0,d.jsx)(ye,{...e,addMediaToPinDraft:(e,t)=>c(z({assets:e,pinDraftId:t,isEmployee:p,i18n:i})),aspectRatio:y,createPinDrafts:e=>c((0,O.Z)({assets:e,checkExperiment:h,country:f,i18n:i,ideaPinRenamingEnabled:n,isEmployee:p,logContextEvent:t,userId:m})),createLayoutPinDraft:e=>c(function({assets:e,i18n:t,isEmployee:i}){return(n,o)=>{const s=o(),{pinDraftIds:r}=s.pinbuilder;W(e).then((({media:e,canvasJson:o})=>{const s=(0,A.Z)(),r=(0,A.Z)();n((0,j.Z)(s,r,{media:{...e,id:(0,A.Z)(),name:"",type:"localImage",isLayout:!0},canvasJson:o})),n((0,T.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:[r]},pinDraftId:s,storyPinPublishStopwatch:void 0}))})).then((()=>{const e=r.findIndex((e=>!(0,R._isPristine)(s,e)));r.slice(0,e>=0?e:void 0).forEach((e=>n((0,pe.Z)(e))))}))}}({assets:e,isEmployee:p,i18n:i})),isPartner:g,mediaError:P,requestContext:(0,ee.B)(),checkExperiment:h,type:w,i18n:i,ideaPinRenamingEnabled:n,setPinDraftAssetError:(e,t)=>c((0,l._B)(e,t)),viewType:I,viewParameter:E,logContextEvent:t,userResource:x})}var Pe=i(146173),we=i(424624),Ie=i(209064),Ae=i(121093),Ee=i(795067),Ce=i(829407),Se=i(717615),je=i(231947),Te=i(277348),De=i(647117),ke=i(562501);function ze({addCarouselItem:e,isDeletable:t,isEditable:i,isEditingEnabled:l,isReorderable:c,isTaggable:u,mediaType:h,onClickDelete:p,onClickDeleteInterestTags:_,onClickReorder:g,onClickTag:f,onClickCollectionsTag:y,pinDraftId:P,pinItemId:w,showCarouselCreateButton:I,type:A,pinTagIds:E,pinTags:C,unfilteredTaggedObjects:S,deletePinTagTaggedObject:j,setPinTagStatus:T,setTaggedObjectStatus:D,deleteText:k,editText:z,reorderText:O,tagText:L}){const{logContextEvent:M}=(0,r.v)(),B=(0,a.ZP)(),N=(0,v.Z)(),{checkExperiment:Z}=(0,b.F)(),F=(0,Se.Z)(),U=(0,je.nl)(N,F)&&"ad_creation"!==x.Z.scenario()&&Z("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,V=(0,n.useRef)(),H=(0,o.useDispatch)(),[G,W]=(0,n.useState)(!1),[$,q]=(0,n.useState)(!1),{shouldRenderPinEditorStandalone:X,campaignObjectiveType:Y,conversionTagEvent:K}=(0,re.V3)(),J=i&&x.Z.enabled("editing"),[Q,ee]=(0,n.useState)(!1);(0,Ce.Z)((()=>ee(!0))),k=void 0!==k?k:B.bt("Delete media", "Delete media", "Button to delete the media from the Pin", undefined, true),z=void 0!==z?z:B.bt("Edit Pin", "Edit Pin", "Button for editing the Pin image", undefined, true),O=void 0!==O?O:B.bt("Reorder images", "Reorder images", "Button for reordering the images in a carousel", undefined, true),L=void 0!==L?L:B.bt("Tag products", "Tag products", "Button for tagging products in a Pin", undefined, true);const te=B.bt("Create carousel", "Create carousel", "pinbuilder.create.carousel", undefined, true),ie=B.bt("Create carousel (this removes tagged products)", "Create carousel (this removes tagged products)", "pinbuilder.carousel.warning", undefined, true),ne=(0,n.useCallback)((()=>{W(!1)}),[]),oe=(0,n.useCallback)((()=>{X?H((0,R.setPinEditorPinDraft)(P)):W(!0)}),[]),se=(0,n.useCallback)((()=>{M({event_type:101,component:13308,element:11244}),oe()}),[]),ae=(0,n.useCallback)((()=>{switch(h){case"gif":return B.bt("GIFs can't be edited", "GIFs can't be edited", "Button indicating gif images cannot be edited", undefined, true);case"webImage":return B.bt("Upload images to make edits", "Upload images to make edits", "Button indicating scraped images cannot be edited", undefined, true);case"localVideo":return x.Z.enabled("videoEditing")?B.bt("Videos can be edited after upload finishes", "Videos can be edited after upload finishes", "Button indicating videos can be edited after uploading finishes", undefined, true):B.bt("Videos can't be edited", "Videos can't be edited", "Button indicating videos cannot be edited", undefined, true);default:return B.bt("Cannot edit", "Cannot edit", "Button indicating media cant be edited", undefined, true)}}),[]),le=(0,we.Z)({pinTagIds:E,pinTags:C,taggedObjects:S}).concat((0,we.n)({pinTagIds:E,pinTags:C,taggedObjects:S})),de=l?z:ae(),ce={__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",marginLeft:U?-60:0}},ue=le&&$?ie:te;return(0,d.jsx)(s.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,display:"flex",alignItems:"center",children:(0,d.jsxs)(s.xu,{color:"default",dangerouslySetInlineStyle:ce,display:"flex",direction:"column",marginStart:-6,padding:1,rounding:"pill",children:[J&&(0,d.jsxs)(s.xu,{"data-test-id":"edit-button",children:[(0,d.jsx)(s.u,{text:de,idealDirection:U?"left":"down",children:(0,d.jsx)(s.hU,{accessibilityLabel:de,disabled:!l,iconColor:"darkGray",icon:"edit",onClick:se,size:"md"})}),G&&(0,d.jsx)(Pe.default,{onDismiss:ne,pinDraftId:P})]}),u&&x.Z.enabled("tagging")&&!U&&(0,d.jsxs)(s.xu,{"data-test-id":"tag-button",children:[(0,d.jsx)(s.xu,{children:(0,d.jsx)(s.u,{text:L,idealDirection:U?"left":"down",children:(0,d.jsx)(s.hU,{accessibilityLabel:L,iconColor:"darkGray",icon:"tag",onClick:()=>{M({event_type:101,component:13308,element:10908});x.Z.enabled("shop_the_pin")?y():f()},size:"md",ref:V})})}),Y===Ie.Ob.WEB_CONVERSION&&"CHECKOUT"===K&&Z("adv_growth_product_tagging_guidance").anyEnabled&&(0,d.jsx)(Ae.Z,{placementId:1000451,eligibleIds:[505392],children:({complete:e,experience:{display_data:t}})=>Q&&(0,d.jsx)(s.mh,{children:(0,d.jsx)(s.J2,{anchor:V.current,color:"blue",idealDirection:"down",showCaret:!0,onDismiss:()=>{},positionRelativeToAnchor:!1,size:"xs",children:(0,d.jsx)(s.xu,{padding:4,children:(0,d.jsxs)(s.kC,{alignItems:"center",direction:"column",gap:{column:4,row:1},children:[(0,d.jsx)(s.xv,{color:"inverse",align:"center",children:t.message}),(0,d.jsx)(s.zx,{color:"white",onClick:()=>{ee(!1),e()},size:"sm",text:t.primaryActionText})]})})})})}),(0,d.jsx)(m.default,{anchor:V.current,experienceIds:[500912],idealDirection:"down",placementId:1000135})]}),I&&U&&"image"===A&&(0,d.jsx)(s.xu,{"data-test-id":"create-carousel-button",onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),children:(0,d.jsx)(s.xu,{ref:V,children:(0,d.jsx)(s.u,{text:ue,idealDirection:U?"left":"down",children:(0,d.jsx)(s.hU,{accessibilityLabel:ue,dangerouslySetSvgPath:{__path:"M19 8C18.448 8 18 8.448 18 9V16C18 16.552 18.448 17 19 17H23C23.552 17 24 16.552 24 16V9C24 8.448 23.552 8 23 8H19ZM11 8C10.448 8 10 8.448 10 9V16C10 16.552 10.448 17 11 17H15C15.552 17 16 16.552 16 16V9C16 8.448 15.552 8 15 8H11ZM7 7H1C0.448 7 0 7.448 0 8V17C0 17.552 0.448 18 1 18H7C7.552 18 8 17.552 8 17V8C8 7.448 7.552 7 7 7Z"},iconColor:"darkGray",onClick:()=>{M({event_type:101,component:13308,element:11123}),le.length&&le.forEach((e=>{((e,t)=>{const i=C[e],{x:n,y:o}=i;"deleted"!==i.status&&(n&&o?T(e,"deleted"):(j(e,t),T(e,"edited")))})(e.pinTagId,e.taggedObjectId),D(e.pinTagId)})),e()},size:"md"})})})}),c&&(0,d.jsx)(s.xu,{"data-test-id":"reorder-button",children:(0,d.jsx)(s.u,{text:O,idealDirection:U?"left":"down",children:(0,d.jsx)(s.hU,{accessibilityLabel:O,iconColor:"darkGray",icon:"reorder-images",onClick:()=>{M({event_type:101,component:13308,element:11124}),g()},size:"md"})})}),t&&(0,d.jsx)(s.xu,{"data-test-id":"trash-button",children:(0,d.jsx)(s.u,{text:k,idealDirection:U?"left":"down",children:(0,d.jsx)(s.hU,{accessibilityLabel:k,iconColor:"darkGray",icon:"trash-can",onClick:()=>{M({event_type:101,component:13308,element:11125}),"localVideo"===h&&x.Z.enabled("videoTagging")&&_(),p()},size:"md"})})})]})})}const Oe=(e,t)=>"localImage"===e||"localVideo"===e&&!!t&&!!t.signature&&x.Z.enabled("videoEditing");function Re(e){const t=(0,ke.vd)(),{mode:i,publishOption:n,type:s,isFirstPinCreate:r,view:a}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:c}=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),u=c?(0,Ee.Z)(c)||c.type:null,{pinTagIds:h}=(0,o.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),{pinTags:p}=(0,o.useSelector)((e=>e.pinbuilder)),_=(0,o.useSelector)((e=>e.pinbuilder.taggedObjects)),g=(0,o.useSelector)((i=>"single"===s&&!r&&((0,ke.wc)(i,e)||t(i,e).length>0)&&!!c&&("localImage"===c.type||"localVideo"===c.type)&&"publish-immediately"===n)),m="create"===i&&"external"!==a,f=!r,b=Oe(u,c),y="carousel"===s&&x.Z.enabled("carousel"),v=(0,o.useDispatch)();return(0,d.jsx)(ze,{...e,isTaggable:g,isDeletable:m,isEditable:f,isEditingEnabled:b,isReorderable:y,mediaType:u,pinTagIds:h,pinTags:p,unfilteredTaggedObjects:_,addCarouselItem:()=>v((0,j.Z)(e.pinDraftId,(0,A.Z)())),onClickDelete:()=>v((0,l.kp)(e.pinDraftId,e.pinItemId)),onClickDeleteInterestTags:()=>v((0,l.c_)(e.pinDraftId)),onClickReorder:()=>v((0,l.c8)(e.pinDraftId,"reorder")),onClickTag:()=>v((0,l.c8)(e.pinDraftId,"tag")),onClickCollectionsTag:()=>v((0,l.c8)(e.pinDraftId,"collectionsTag")),setPinTagStatus:(e,t)=>v((0,Te.Cf)(e,t)),deletePinTagTaggedObject:(e,t)=>v((0,Te.Go)(e,t)),setTaggedObjectStatus:e=>v((0,De.k)(e,"deleted"))})}var Le=i(957025);function Me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Be extends n.Component{constructor(...e){super(...e),Me(this,"setTextFieldInput",(e=>{this.textfieldInput=e})),Me(this,"getLinkError",(()=>{const{link:e,linksUsed:t,i18n:i}=this.props;return e?t.includes(e)?i.bt("You can't tag from the same page twice.", "You can't tag from the same page twice.", "Error message for using the same product link twice on a Pin tag", undefined, true):(0,P.CB)(e)?null:(0,I.q0)(i):null})),Me(this,"handleBlur",(({value:e})=>{const{setLink:t}=this.props;t(e,this.getLinkError())})),Me(this,"handleChange",(({value:e})=>{const{setLink:t}=this.props;t(e)})),Me(this,"handleClick",(()=>{const{link:e,mode:t,openSelectTagView:i,setLink:n}=this.props,o=this.getLinkError();n(e,o),o&&this.props.logContextEvent({event_type:7503,component:13308,element:10909,aux_data:{method:t}}),e&&!o&&(i(),this.props.logContextEvent({event_type:3811,component:13308,element:10909,aux_data:{method:t}}))})),Me(this,"handleSubmit",(e=>{e.preventDefault(),this.handleClick()}))}componentDidMount(){window.setTimeout((()=>{this.textfieldInput&&this.textfieldInput.focus()}),0)}render(){const{link:e,linkError:t}=this.props,i="pin-draft-affiliate-link";return(0,d.jsxs)(s.xu,{paddingX:2,paddingY:3,column:12,children:[(0,d.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit,children:(0,d.jsxs)(s.xu,{display:"flex",column:12,children:[(0,d.jsx)(s.xu,{flex:"grow",paddingX:1,children:(0,d.jsx)(s.nv,{hasError:!!t,id:i,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n.bt("Enter product or affiliate link", "Enter product or affiliate link", "Input field for a website link to a product", undefined, true),ref:this.setTextFieldInput,size:"lg",type:"url",value:e})}),(0,d.jsx)(s.xu,{flex:"none",paddingX:1,children:(0,d.jsx)(s.zx,{color:"red",name:"pin-draft-affiliate-link-button",onClick:this.handleClick,text:this.props.i18n.bt("Next", "Next", "Button to submit affiliate link to find products", undefined, true)})})]})}),!!t&&(0,d.jsx)(s.xu,{paddingX:1,column:12,children:(0,d.jsx)(w.Z,{errorMessage:t,htmlFor:i})})]})}}function Ne(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,Le.A$)(),s=(0,o.useSelector)((t=>t.pinbuilder.pinTags[e.pinTagId].link)),c=(0,o.useSelector)((t=>t.pinbuilder.pinTags[e.pinTagId].linkError)),u=(0,o.useSelector)((t=>n(t,e).map((e=>t.pinbuilder.taggedObjects[e].link)))),h=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),p=(0,o.useDispatch)();return(0,d.jsx)(Be,{...e,i18n:i,logContextEvent:t,link:s,linkError:c,linksUsed:u,mode:h,openSelectTagView:()=>p((0,l.c8)(e.pinDraftId,"selectTag")),setLink:(t,i)=>p((0,Te.mz)(e.pinTagId,t,i))})}var Ze=i(403368),Fe=i(616672),Ue=i(223815);function Ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const He={cursor:"grab",transition:"opacity 0.15s ease"},Ge={...He,cursor:"grabbing",opacity:.5},We={...He,cursor:"pointer"};class $e extends n.Component{constructor(...e){super(...e),Ve(this,"state",{pinTagDotRef:null}),Ve(this,"setPinTagDotRef",(e=>{this.setState({pinTagDotRef:e})})),Ve(this,"handleMouseDown",(()=>{const{editable:e,isAtTaggedObjectLimit:t,startMoving:i,selectPinTag:n,setTagError:o}=this.props;if(n(),e){i();o(t?this.props.i18n.bt("You've reached the maximum number of products for a tag.", "You've reached the maximum number of products for a tag.", "Error message when user attempts to add more than 8 products to a tag", undefined, true):null)}})),Ve(this,"handleMouseUp",(e=>{const{editable:t,stopMoving:i}=this.props;e.stopPropagation(),t&&i()}))}render(){const{editable:e,isAtTaggedObjectLimit:t,isGrabbing:i,isSelected:o,isSelectingTag:r,pinDraftId:a,pinTagId:l,pinTagKey:c,x:u,y:h}=this.props,{pinTagDotRef:p}=this.state,_=e?i?Ge:He:We,g=o&&!t&&!i&&!r&&e&&!!p;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(Ze.Z,{backdropDiameter:40,dotDiameter:E.yI,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,ref:this.setPinTagDotRef,selected:o,style:_,text:e?c:void 0,x:u,y:h}),g&&(0,d.jsx)(s.mh,{children:(0,d.jsx)(Ue.Z,{children:(0,d.jsx)(s.J2,{anchor:p,idealDirection:"down",onDismiss:()=>{},positionRelativeToAnchor:!1,size:"xl",shouldFocus:!1,children:(0,d.jsx)(Ne,{pinDraftId:a,pinTagId:l})})})})]})}}function qe(e){const t=(0,a.ZP)(),i=(0,Le.A$)(),{pinDrafts:n,pinItems:s,pinTags:r}=(0,o.useSelector)((e=>e.pinbuilder)),l=s[e.pinItemId],{x:c,y:u}=r[e.pinTagId],h=(0,o.useSelector)((t=>i(t,e))),p=(0,o.useDispatch)();return(0,d.jsx)($e,{...e,i18n:t,x:c*E.LM,y:l.media?u*(0,Fe.Z)(l.media):-1,isAtTaggedObjectLimit:h.length===E.qY,isSelected:l.selectedPinTagId===e.pinTagId,isSelectingTag:"selectTag"===n[e.pinDraftId].view,selectPinTag:()=>p((0,D.C_)(e.pinItemId,e.pinTagId)),setTagError:t=>p((0,D.OD)(e.pinItemId,t))})}function Xe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ye extends n.Component{constructor(...e){super(...e),Xe(this,"state",{isMovingPinTag:!1}),Xe(this,"getAnchorCoordinates",(e=>{const{pageX:t,pageY:i}=e,{height:n,top:o,left:s,width:r}=e.currentTarget.getBoundingClientRect();return{x:(t-s)/r,y:(i-o)/n}})),Xe(this,"isIntersecting",((e,t)=>{const{height:i,unselectedPinTags:n}=this.props;return n.some((n=>((e-n.x)*E.LM)**2+((t-n.y)*i)**2<E.$4))})),Xe(this,"handleMouseMove",(e=>{const{editable:t,movePinTag:i,selectedPinTagId:n}=this.props;if(!t)return;const{isMovingPinTag:o}=this.state;if(o&&n){const{x:t,y:o}=this.getAnchorCoordinates(e);this.isIntersecting(t,o)||i(n,t,o)}})),Xe(this,"handleMouseUp",(e=>{const{closeTagGrid:t,createPinTag:i,deselectPinTag:n,editable:o,mode:s,pinTagIds:r,selectedPinTagId:a,setTagError:l,logContextEvent:d}=this.props;if(a||!o)o&&t(),n();else{const t=r.length;if(t<E.YM){0===t&&d({event_type:7501,component:13308,element:10910,aux_data:{method:s}}),d({event_type:101,component:13308,element:10910,aux_data:{method:s}});const{x:n,y:o}=this.getAnchorCoordinates(e);i(n,o)}l(t>=E.YM?this.props.i18n.bt("You've reached the maximum number of tags.", "You've reached the maximum number of tags.", "Error message when user attempts to add more than 8 tags to a Pin", undefined, true):null)}})),Xe(this,"startMovingPinTag",(()=>this.setState({isMovingPinTag:!0}))),Xe(this,"stopMovingPinTag",(()=>this.setState({isMovingPinTag:!1})))}render(){const{editable:e,forwardRef:t,pinDraftId:i,pinItemId:n,pinTagIds:o,selectedPinTagId:r}=this.props,{isMovingPinTag:a}=this.state;return(0,d.jsx)(s.xu,{bottom:!(!e&&!r)||void 0,left:!0,onMouseLeave:this.stopMovingPinTag,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,overflow:e?"hidden":void 0,position:"absolute",ref:t,right:!0,top:!0,children:o.map(((t,o)=>(0,d.jsx)(qe,{editable:e,isGrabbing:a&&t===r,pinDraftId:i,pinItemId:n,pinTagId:t,pinTagKey:o+1,startMoving:this.startMovingPinTag,stopMoving:this.stopMovingPinTag},t)))})}}function Ke(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,ke.vd)(),{pinDrafts:s,pinItems:c,pinTags:u}=(0,o.useSelector)((e=>e.pinbuilder)),h=(0,o.useSelector)((t=>(0,ke.M)(t,e))),p=(0,o.useSelector)((t=>n(t,e))),{media:_}=c[e.pinItemId],g=_?(0,Fe.Z)(_):0,{mode:m}=s[e.pinDraftId],f=p.filter((e=>e!==h)).map((e=>u[e])),x=(0,o.useDispatch)();return(0,d.jsx)(Ye,{...e,i18n:i,logContextEvent:t,pinTagIds:p,selectedPinTagId:h,height:g,mode:m,unselectedPinTags:f,closeTagGrid:()=>x((0,l.c8)(e.pinDraftId,"tag")),createPinTag:(t,i)=>x((0,D.hL)(e.pinItemId,t,i)),deselectPinTag:()=>x((0,D.yV)(e.pinItemId)),movePinTag:(e,t,i)=>x((0,Te.uM)(e,t,i)),setTagError:t=>x((0,D.OD)(e.pinItemId,t))})}function Je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Qe extends n.Component{constructor(...e){super(...e),Je(this,"state",{containerRef:null}),Je(this,"saveRef",(e=>{this.setState({containerRef:e})}))}render(){const{editable:e,pinDraftId:t,pinItemId:i,showStepTwoExperience:n,showStepThreeExperience:o}=this.props,{containerRef:r}=this.state;return(0,d.jsx)(s.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,d.jsxs)(s.xu,{position:"relative",height:"100%",column:12,children:[(0,d.jsx)(Ke,{pinDraftId:t,pinItemId:i,forwardRef:this.saveRef,editable:e}),e&&n&&(0,d.jsx)(m.default,{anchor:r,experienceIds:[500915],idealDirection:"right",placementId:1000135}),e&&o&&(0,d.jsx)(m.default,{anchor:r,experienceIds:[500916],idealDirection:"right",placementId:1000135})]})})}}function et(e){const t=(0,ke.vd)(),i=(0,ke.jk)(),n=(0,o.useSelector)((i=>0===t(i,e).length)),s=(0,o.useSelector)((t=>i(t,e).length>0));return(0,d.jsx)(Qe,{...e,showStepTwoExperience:n,showStepThreeExperience:s})}var tt=i(770065),it=i(483205),nt=i(325016),ot=i(353428),st=i(327096);function rt(e){var t;const i=null!==(t=(0,o.useSelector)((t=>(0,ke.Bg)(t,e))))&&void 0!==t?t:{},{shopTheLook:r,setMostRecentTaggedObjectId:a}=(0,st.f)(),{mostRecentTaggedObjectId:l,stlHoveredTaggedObjectId:c}=r,{height:u,isHovering:h,taggedObject:p,width:_}=e,[g,m]=(0,n.useState)("inOut"),f=(0,n.useCallback)((()=>{"inOut"===g&&m("none"),a(null)})),x=l===p.id,b=c===p.id;(0,n.useEffect)((()=>{(h||b)&&(m("none"),a(null))}),[h,b]);const y=p.pins[0].closeup_image_signature||(0,ot.Z)(i.src),v=x||b?(0,d.jsx)(s.xu,{position:"absolute",width:_,height:u,children:(0,d.jsx)(tt.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:h||b?void 0:g,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p,isPinbuilder:!0,isHovering:!0})}):(0,d.jsx)(s.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:p.y_percent/100*u-it.b9/2,left:p.x_percent/100*_-it.b9/2}},children:(0,d.jsx)(nt.Z,{})});return(0,d.jsxs)(n.Fragment,{children:[!h&&(0,d.jsx)(s.xu,{"data-test-id":"stl-dot-or-flyout",children:v}),(0,d.jsx)(s.xu,{position:"absolute",width:_,height:u,children:(0,d.jsx)(tt.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:void 0,isHovering:h,isPinbuilder:!0,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p})})]})}function at({isHovering:e,styleOverride:t={}}){const i=(0,a.ZP)(),n=i.bt("Click anywhere to tag", "Click anywhere to tag", "pinbuilder.product.tagging.icon", undefined, true);return(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:t},"data-test-id":"stl-overlay-text",height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,d.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:e?void 0:"rgba(0, 0, 0, 0.4)"}},"data-test-id":"text-and-icon-wrapper",display:"flex",justifyContent:"center",rounding:"pill",paddingX:4,paddingY:4,position:"relative",children:[(0,d.jsx)(s.JO,{accessibilityLabel:n,color:"inverse",icon:"tag"}),(0,d.jsx)(s.xu,{marginStart:2,children:(0,d.jsx)(s.xv,{color:"inverse",size:"300",weight:"bold",children:n})})]})})}var lt=i(956069);const dt=10,ct=26,ut=135;function ht({height:e,isHovering:t,pinDraftId:i,pinItemId:o,taggedObjects:a,width:l}){const{logContextEvent:c}=(0,r.v)(),{setCurrentPinDraftId:u,setStlCallout:h,setStlTaggedCoord:p,shopTheLook:_}=(0,st.f)(),{stlTaggedCoords:g}=_,m=(0,n.useRef)(null);(0,n.useEffect)((()=>()=>{h({showCallout:!1})}),[]);const f=e=>{if(m.current){const t=m.current.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top,{width:o}=t,{height:s}=t;return{x:i,y:n,width:o,height:s}}return{}},x=!!a&&a.length===lt.VX,b=e=>{if((e=>{const t=f(e);return!!t&&t.x<t.width-dt&&t.x>dt&&t.y>ct&&t.y<t.height-ct})(e)){const t=f(e);t&&(x?h({showCallout:!0,type:"error"}):(c({event_type:101,component:13308,element:12081,view_type:212}),u(i),p({x:t.x,y:t.y,xPercent:t.x/t.width,yPercent:t.y/t.height})))}else u(null),p(null)},y={height:"calc(100% - 48px)",width:"calc(100% - 16px)"},v={border:"dashed 2px #fff",borderRadius:8,cursor:x?"not-allowed":"pointer"},P=!!(a&&a.length>0);return(0,d.jsx)(s.Zf,{height:"100%",children:(0,d.jsxs)("div",{style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center",cursor:x?"not-allowed":"pointer"},onClick:e=>b(e),onKeyDown:()=>{},role:"button",tabIndex:0,ref:m,children:[t&&(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...v,...y,margin:"6px"}},position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:!P&&t&&(0,d.jsx)(at,{isHovering:t})}),a&&a.length>0&&a.map((i=>["created","saved"].includes(i.status)?(0,d.jsx)(rt,{height:e,isHovering:t,pinItemId:o,taggedObject:i,width:l},i.id):null)),g&&(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(s.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{...y,top:g.y-it.b9/2,left:g.x-it.b9/2}},children:(0,d.jsx)(nt.Z,{})}),(0,d.jsx)(s.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{...y,top:g.y-ut/2,left:g.x-ut/2}},children:(0,d.jsx)(s.o3,{})})]})]})})}var pt=i(875108);function _t(e){const{isHovering:t,imageDims:i,pinDraftId:r,pinItemId:a}=e,{height:l,width:c}=i||{},u=(0,ke.vd)(),h=(0,o.useSelector)((t=>u(t,e)))||[],p=(0,o.useSelector)((e=>e.pinbuilder))||{},_=p.pinTags||{},g=p.taggedObjects||{},m=h.filter((e=>(0,pt.Z)(_[e]))).map((e=>{const{id:t,media:i,pin:n,status:o}=g[_[e].taggedObjectIds[0]]||{};return{id:t,pin_tag_key:_[e].pinTagKey,pins:[{...n,images:{"236x":{url:null==i?void 0:i.url,width:null==i?void 0:i.width,height:null==i?void 0:i.height}}}],status:o,x_percent:100*_[e].x,y_percent:100*_[e].y}}));return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?"rgba(0,0,0,0.4)":void 0}},height:"100%",width:"100%",overflow:"hidden",position:"absolute",rounding:2}),!!l&&!!c&&(0,d.jsx)(ht,{isHovering:t,pinDraftId:r,height:l,pinItemId:a,taggedObjects:m,width:c})]})}var gt=i(373695),mt=i(113110);const ft={overlay:{__style:{backgroundColor:"rgba(239, 245, 252, 0.92)",pointerEvents:"none"}},border:{__style:{border:"dashed 2px #dadada",borderRadius:6}}};function xt({type:e}){const t=(0,a.ZP)();return(0,d.jsx)(s.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,padding:3,dangerouslySetInlineStyle:ft.overlay,children:(0,d.jsx)(s.xu,{alignItems:"center",column:12,display:"flex",height:"100%",justifyContent:"center",dangerouslySetInlineStyle:ft.border,children:(0,d.jsx)(s.xv,{align:"center",color:"shopping",overflow:"normal",children:"image"===e?t.bt("Replace image", "Replace image", "Text that appears over image when user drags to replace", undefined, true):t.bt("Replace video", "Replace video", "Text that appears over video when user drags to replace", undefined, true)})})})}var bt=i(490072);const yt=new s.Ry(1);function vt({image:e,isDragging:t,isHovering:i,pinDraftId:r,pinItemId:l,showCarouselCreateButton:c,showCarouselControlButtons:u,showMediaTagOverlay:h,showPageNumberOverlay:p,view:_}){const g=(0,a.ZP)(),m=(0,o.useDispatch)(),{checkExperiment:f}=(0,b.F)(),y=(0,n.useRef)(null),[P,w]=(0,n.useState)(),[I,A]=(0,n.useState)(),{enabled:E,disable:C}=(0,mt.Z)(),S=(0,Se.Z)();(0,n.useEffect)((()=>{if(y.current){const{width:e,height:t}=y.current.getBoundingClientRect();w({height:t,width:e})}}),[y.current]),(0,n.useEffect)((()=>{I&&m((0,D.Sz)(l,{height:I.height,width:I.width}))}),[I]);const j=(0,v.Z)(),T=(0,je.nl)(j,S)&&"ad_creation"!==x.Z.scenario()&&f("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,k={__style:{boxShadow:t?"0 0 0 1px #0074e8":void 0}};return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)(s.xu,{height:"100%",width:"100%",position:T?"absolute":void 0,children:[(0,d.jsx)(s.xu,{"data-test-id":"media-image-view",width:"100%",height:"100%",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:k,ref:y,position:T?"absolute":void 0,children:x.Z.enabled("offsitePinCreation")?(0,d.jsx)(gt.Z,{url:e.src,children:({image:t})=>{var i,o;return!I&&t.length>0&&A(t[0]),(0,d.jsx)(n.Fragment,{children:t.length>0&&(0,d.jsx)(s.Ee,{alt:g.bt("Uploaded image", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),naturalHeight:null!==(i=t[0].height)&&void 0!==i?i:1,naturalWidth:null!==(o=t[0].width)&&void 0!==o?o:1,src:e.src,crossOrigin:E?"anonymous":void 0,onError:()=>C()})})}}):(0,d.jsxs)(s.Ee,{alt:g.bt("Uploaded image", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,fit:"contain",children:[p&&(0,d.jsx)(U,{pinDraftId:r}),h&&!x.Z.enabled("shop_the_pin")&&(0,d.jsx)(et,{pinDraftId:r,pinItemId:l,editable:"tag"===_}),t&&(0,d.jsx)(xt,{type:"image"})]})}),!x.Z.enabled("offsitePinCreation")&&"tag"!==_&&"collectionsTag"!==_&&(0,d.jsx)(s.xu,{position:"absolute",height:"100%",width:"100%",top:!0,left:!0,right:!0,bottom:!0,children:(0,d.jsx)(s.xu,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",marginStart:-2,children:(0,d.jsx)(Re,{deleteText:g.bt("Delete image", "Delete image", "Button to delete the image from the Pin", undefined, true),pinDraftId:r,pinItemId:l,showCarouselCreateButton:c,type:"image"})})}),T&&!i&&!u&&(0,d.jsx)("div",{style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center"},role:"presentation",children:(0,d.jsx)(s.xu,{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",zIndex:yt,margin:2,width:"100%",children:(0,d.jsx)(at,{})})})]}),T&&!u&&(0,d.jsx)(_t,{imageDims:P,isHovering:i,pinDraftId:r,pinItemId:l})]})}function Pt(e){const{pinDrafts:t,pinItems:i}=(0,o.useSelector)((e=>e.pinbuilder)),{type:n}=t[e.pinDraftId],{media:s}=i[e.pinItemId],r="carousel"===n&&!!s,a="single"===n,l=(0,o.useSelector)((t=>(0,bt.Xe)(t,e)));return(0,d.jsx)(vt,{...e,showPageNumberOverlay:r,showMediaTagOverlay:a,view:l})}function wt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const It={progressBar:{__style:{backgroundColor:"rgba(241, 53, 53, 1)",borderRadius:"2px",transition:"1s transform",transformOrigin:"left"}},overlay:{__style:{backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))"}}};class At extends n.Component{constructor(...e){super(...e),wt(this,"state",{visible:!!this.props.errorMessage||100!==this.props.progress}),wt(this,"handleHide",(()=>{this.setState({visible:!1})})),wt(this,"getProgressText",(()=>{const{progress:e}=this.props;return e<100?this.props.i18n.bt("Uploading...", "Uploading...", "Upload progress status for pin create", undefined, true):this.props.i18n.bt("Finishing up", "Finishing up", "Upload progress status for pin create", undefined, true)}))}componentDidUpdate(e){const{progress:t}=e,{errorMessage:i,progress:n}=this.props,{visible:o}=this.state;!i&&(t<100||o)&&100===n&&(this.hidingTimeout=setTimeout(this.handleHide,3e3))}componentWillUnmount(){this.hidingTimeout&&clearTimeout(this.hidingTimeout)}render(){const{errorMessage:e,onRetryUpload:t,progress:i}=this.props,{visible:n}=this.state;return n?(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:It.overlay,"data-test-id":"pinbuilder-media-view-progress-bar",height:72,left:!0,position:"absolute",rounding:2,top:!0,width:"100%",children:(0,d.jsxs)(s.xu,{margin:3,children:[(0,d.jsx)(s.xu,{height:6,marginBottom:2,position:"relative",children:!e&&(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:It.progressBar,height:"100%",left:!0,position:"absolute",top:!0,width:`${i}%`})}),(0,d.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[!!e&&(0,d.jsx)(s.iP,{fullWidth:!1,onTap:t,rounding:"circle",children:(0,d.jsx)(s.xu,{marginEnd:2,children:(0,d.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Retry upload", "Retry upload", "Button allowing a user to retry a failed video upload", undefined, true),color:"inverse",icon:"refresh",size:20})})}),(0,d.jsx)(s.xv,{color:"inverse",inline:!0,weight:"bold",children:e||this.getProgressText()})]})]})}):null}}const Et=function(e){const t=(0,a.ZP)();return(0,d.jsx)(At,{...e,i18n:t})};var Ct=i(923490);function St(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class jt extends n.Component{constructor(...e){super(...e),St(this,"state",{controls:!0,playing:!1,volume:0}),St(this,"setVideoRef",(e=>{this.videoRef=e})),St(this,"handlePlay",(()=>this.setState({playing:!0}))),St(this,"handlePause",(()=>this.setState({playing:!1}))),St(this,"handleHideControls",(()=>this.setState({controls:!1}))),St(this,"handleVolumeChange",(({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})})),St(this,"handleMouseEnter",(()=>{this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.setState({controls:!0})})),St(this,"handleMouseLeave",(()=>{this.controlsTimeout=setTimeout(this.handleHideControls,E.Hy)}))}componentDidMount(){this.controlsTimeout=setTimeout(this.handleHideControls,E.Hy)}componentDidUpdate(e){const{isSelecting:t,video:i}=this.props;i.thumbnail!==e.video.thumbnail&&this.videoRef&&(this.videoRef.seek(i.thumbnail),this.setState({playing:!1})),t&&!e.isSelecting&&this.setState({playing:!1}),!t&&e.isSelecting&&this.setState({playing:!0})}componentWillUnmount(){this.controlsTimeout&&clearTimeout(this.controlsTimeout)}render(){const{isDragging:e,isEdited:t,pinDraftId:i,pinItemId:n,retryUpload:o,video:r,videoError:a,view:l}=this.props,{controls:c,playing:u,volume:h}=this.state,p=r.uploadProgress||0,_={__style:{boxShadow:e?"0 0 0 1px #0074e8":void 0}};return(0,d.jsxs)(s.xu,{dangerouslySetInlineStyle:_,"data-test-id":"media-video-view",height:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,overflow:"hidden",rounding:3,width:"100%",children:[(0,d.jsxs)(s.nk,{autoplay:!0,ref:this.setVideoRef,accessibilityMaximizeLabel:this.props.i18n.bt("Maximise", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:this.props.i18n.bt("Minimise", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:this.props.i18n.bt("Mute", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:this.props.i18n.bt("Pause", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:this.props.i18n.bt("Play", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:this.props.i18n.bt("Progress bar", "Progress bar", "MediaVideoView.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:this.props.i18n.bt("Unmute", "Unmute", "Unmute button on video", undefined, true),aspectRatio:r.width/r.height,captions:"",controls:c,loop:!0,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onPlay:this.handlePlay,onPlayError:this.handlePause,onVolumeChange:this.handleVolumeChange,playing:u,src:r.src,volume:h,children:[e&&(0,d.jsx)(xt,{type:"video"}),(0,d.jsx)(Et,{errorMessage:a,onRetryUpload:o,progress:p})]}),t&&(0,d.jsxs)(s.xu,{bottom:!0,color:"transparentDarkGray",dangerouslySetInlineStyle:_,left:!0,padding:3,paddingX:8,position:"absolute",right:!0,top:!0,children:[(0,d.jsx)(s.X6,{color:"inverse",size:"400",children:this.props.i18n.bt("Your edits are stored", "Your edits are stored", "editedVideo.overlay.title", undefined, true)}),(0,d.jsx)(s.xv,{color:"inverse",children:this.props.i18n.bt("Your edits aren't showing up in this preview, but don't worry, they've been stored and will show up in your published video. Tap back to the editing mode to see your edits. ", "Your edits aren't showing up in this preview, but don't worry, they've been stored and will show up in your published video. Tap back to the editing mode to see your edits. ", "editedVideo.overlay.message", undefined, true)})]}),"tag"!==l&&"collectionsTag"!==l&&(0,d.jsx)(s.xu,{bottom:!0,height:"100%",left:!0,position:"absolute",top:!0,children:(0,d.jsx)(s.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,d.jsx)(Re,{deleteText:this.props.i18n.bt("Delete video", "Delete video", "Button to delete the video from the Pin", undefined, true),pinDraftId:i,pinItemId:n})})})]})}}function Tt(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,_.Z)(),s=(0,v.Z)(),l=s.isAuth?s.id:"",c=s.isAuth?s.country:"",u=(0,o.useDispatch)(),{pinDraftId:h,pinItemId:p}=e,g=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length>0)),m=(0,o.useSelector)((({pinbuilder:e})=>e.pinDrafts[h].mediaError)),f=(0,o.useSelector)((t=>(0,bt.Xe)(t,e))),{checkExperiment:x}=(0,b.F)();return(0,d.jsx)(jt,{...e,isSelecting:g,retryUpload:()=>u((0,Ct.dG)({checkExperiment:x,country:c,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,pinDraftId:h,pinItemId:p,userId:l})),videoError:m,view:f,i18n:i})}var Dt=i(556663),kt=i(98432);class zt extends n.Component{constructor(...e){var t,i,n;super(...e),n=e=>{const{media:t,processFiles:i,logContextEvent:n}=this.props;e.preventDefault(),e.stopPropagation();const o=(0,Q.Z)(e.dataTransfer);n({event_type:3502,component:13308,element:10966,aux_data:{pin_builder_data:JSON.stringify({media_types:o.map((e=>e.type))})}}),i(x.Z.enabled("carousel")&&!t?o:o.slice(0,1))},(i="handleDrop")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}renderMedia(e,t){const{media:i,pinDraftId:n,pinItemId:o,isEdited:s,showCarouselCreateButton:r,showCarouselControlButtons:a}=this.props;if(i){if("localImage"===i.type||"webImage"===i.type)return(0,d.jsx)(Pt,{isDragging:e,isHovering:t,image:i,pinDraftId:n,pinItemId:o,showCarouselCreateButton:r,showCarouselControlButtons:a});if("localVideo"===i.type)return(0,d.jsx)(Tt,{isDragging:e,isHovering:t,pinDraftId:n,pinItemId:o,video:i,isEdited:s})}return null}render(){const{media:e,pinDraftId:t,pinItemId:i,processFiles:n}=this.props;return e?(0,d.jsx)(Dt.Z,{onDrop:this.handleDrop,children:(e,t)=>this.renderMedia(e,t)}):(0,d.jsx)(ve,{pinDraftId:t,pinItemId:i,processFiles:n})}}function Ot(e){const{pinDraftId:t}=e,{logContextEvent:i}=(0,r.v)(),n=(0,a.ZP)(),s=(0,_.Z)(),l=(0,o.useDispatch)(),c=(0,v.Z)(),u=c.isAuth&&c.isPartner,h=c.isAuth?c.id:"",p=c.isAuth?c.country:"",g=(0,Se.Z)(),m=(0,je.lJ)(c,g),{search:f}=(0,N.useLocation)(),x=f.includes("maxvideo");return(0,d.jsx)(zt,{...e,processFiles:e=>{l((0,kt.Z)({pinDraftId:t,files:e,isPartner:u,userId:h,country:p,i18n:n,logContextEvent:i,orbacSubjectId:m,ideaPinRenamingEnabled:s,isMaxVideo:x}))},logContextEvent:i})}var Rt=i(47615);function Lt({pinDraftId:e}){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,o.useDispatch)(),l=i.bt("Create carousel", "Create carousel", "Button Text for creating Carousel Pin", undefined, true);return(0,d.jsx)(y.Z,{id:"create-carousel-button",children:(0,d.jsx)(s.zx,{accessibilityLabel:l,onClick:()=>{t({event_type:101,component:13308,element:11123}),n((0,j.Z)(e,(0,A.Z)()))},iconEnd:"add",text:l,fullWidth:!0})})}function Mt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Bt={container:{__style:{borderRadius:6}},overlay:{__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}}};class Nt extends n.Component{constructor(...e){super(...e),Mt(this,"state",{isHovering:!1}),Mt(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),Mt(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{clearCustomVideoThumbnail:e,coverImg:t}=this.props,{isHovering:i}=this.state;return(0,d.jsx)(s.xu,{height:E.u1,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",width:E.u1*t.width/t.height,children:(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:Bt.container,overflow:"hidden",children:(0,d.jsx)(s.Ee,{alt:this.props.i18n.bt("Uploaded cover image", "Uploaded cover image", "Label for user uploaded cover image for video", undefined, true),naturalHeight:t.height,naturalWidth:t.width,src:t.src,children:i&&(0,d.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:Bt.overlay,display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(s.hU,{accessibilityLabel:this.props.i18n.bt("Remove image", "Remove image", "Button to remove cover image for video", undefined, true),bgColor:"white",icon:"trash-can",iconColor:"darkGray",onClick:e,size:"xs"})})})})})}}function Zt(e){const t=(0,a.ZP)(),i=(0,o.useDispatch)();return(0,d.jsx)(Nt,{...e,i18n:t,clearCustomVideoThumbnail:()=>i((0,D.Sz)(e.pinItemId,{customCoverImg:null}))})}var Ft=i(123463);function Ut(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Vt=92,Ht=new Map,Gt=new Map,Wt={backdrop:{__style:{opacity:.35}},video:{height:"100%",width:"100%"}};class $t extends n.Component{constructor(...e){super(...e),Ut(this,"state",{seeking:!1,thumbnails:Ht.get(this.props.video.src)||[]}),Ut(this,"getVideoDuration",(()=>{const{video:e}=this.props,{trimmedEndTime:t,trimmedStartTime:i=0}=e;return void 0===t?e.duration:t-i})),Ut(this,"getNumThumbnails",(()=>{const{video:e}=this.props,t=Gt.get(e.src);if(t)return t;if(this.container){const{width:t}=this.container.getBoundingClientRect(),i=Math.max(Math.ceil(t/this.getVideoWidth()),6);return Gt.set(e.src,i),i}return 6})),Ut(this,"getThumbnails",(()=>{const{video:e}=this.props,t=this.getNumThumbnails();let i=0;this.videoThumbnail=document.createElement("video");const n=this.getVideoDuration(),o=()=>{this.videoThumbnail.currentTime=i/t*n},s=()=>{if(this.videoThumbnail.removeEventListener("canplaythrough",o),i===t)return void this.videoThumbnail.removeEventListener("seeked",s);const r=document.createElement("canvas");r.height=this.videoThumbnail.videoHeight,r.width=this.videoThumbnail.videoWidth;r.getContext("2d").drawImage(this.videoThumbnail,0,0,r.width,r.height);const a=r.toDataURL();this.mounted&&this.setState((e=>({thumbnails:[...e.thumbnails,a]}))),Ht.set(e.src,[...this.state.thumbnails,a]),i+=1,this.videoThumbnail.currentTime=i/t*n};this.videoThumbnail.addEventListener("canplaythrough",o),this.videoThumbnail.addEventListener("seeked",s),this.videoThumbnail.src=e.src})),Ut(this,"getVideoWidth",(()=>{const{height:e=Vt,video:t}=this.props;return e*t.width/t.height})),Ut(this,"setContainerRef",(e=>{this.container=e})),Ut(this,"setVideoRef",(e=>{this.video=e})),Ut(this,"mounted",!1),Ut(this,"handleMouseDown",(e=>{const{onFocusSlider:t}=this.props;t(),this.setState({seeking:!0});const{left:i}=e.currentTarget.getBoundingClientRect();this.mouseOffsetX=e.clientX-i})),Ut(this,"handleMouseMove",(e=>{const{mouseOffsetX:t}=this,{seeking:i}=this.state,{video:n}=this.props,{trimmedStartTime:o=0}=n;if(i&&t){const{setThumbnail:i,video:n}=this.props,{left:s,width:r}=e.currentTarget.getBoundingClientRect(),a=e.clientX-s-t,l=Math.max(0,Math.min(a/(r-this.getVideoWidth()),1)),d=Math.min(l,.98)*n.duration,{video:c}=this;c&&d<=this.getVideoDuration()&&(c.currentTime=o+d,i(o+d))}})),Ut(this,"handleMouseUp",(()=>{this.setState({seeking:!1}),this.mouseOffsetX=null}))}componentDidMount(){this.mounted=!0;const{video:e}=this.props;this.video&&(this.video.currentTime=e.thumbnail),Ht.has(e.src)||this.getThumbnails()}componentDidUpdate(e){const{setThumbnail:t,video:i}=this.props,{trimmedEndTime:n,trimmedStartTime:o}=i;if(i.src!==e.video.src){const e=Ht.get(i.src);e?this.setState({thumbnails:e}):this.getThumbnails()}e.video.trimmedEndTime===n&&e.video.trimmedStartTime===o||(this.video&&(this.video.currentTime=o||0),t(o||0),this.setState({thumbnails:[]}),Ht.set(i.src,[]),this.getThumbnails())}componentWillUnmount(){this.mounted=!1}render(){const{height:e,showHeading:t,video:i}=this.props,{trimmedStartTime:o=0}=i,{seeking:r,thumbnails:a}=this.state,l=this.getVideoWidth(),c=this.getVideoDuration(),u=Math.max(0,Math.round(100*(i.thumbnail-o)/c)/100),h=u>=.98?1:u;return(0,d.jsxs)(n.Fragment,{children:[t&&(0,d.jsx)(s.xu,{marginBottom:3,children:(0,d.jsx)(s.xv,{color:"default",lineClamp:1,weight:"bold",children:this.props.i18n.bt("Pick a cover image", "Pick a cover image", "Heading for slider to select video thumbnail image", undefined, true)})}),(0,d.jsxs)(s.xu,{color:"secondary",column:12,rounding:1,height:e,overflow:"hidden",position:"relative",children:[(0,d.jsx)(s.xu,{color:"default",column:12,dangerouslySetInlineStyle:Wt.backdrop,height:"100%",position:"relative",children:a.map(((t,n)=>(0,d.jsx)(s.xu,{position:"absolute",height:e,width:l,dangerouslySetInlineStyle:{__style:{left:n*(100/this.getNumThumbnails())+"%"}},children:(0,d.jsx)(s.Ee,{alt:"",naturalHeight:i.height,naturalWidth:i.width,src:t})},n)))}),(0,d.jsx)(s.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,d.jsx)(s.xu,{column:12,height:"100%",onMouseLeave:this.handleMouseUp,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,position:"relative",ref:this.setContainerRef,children:(0,d.jsx)(s.xu,{rounding:1,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 3px #fff",cursor:r?"grabbing":"grab",left:`calc((100% - ${l}px) * ${h})`}},"data-test-id":"pin-draft-video-thumbnail-slider",height:e,overflow:"hidden",position:"absolute",width:l,children:(0,d.jsx)("video",{muted:!0,onMouseDown:this.handleMouseDown,ref:this.setVideoRef,src:i.src,style:Wt.video,children:(0,d.jsx)("track",{kind:"captions"})})})})})]})]})}}function qt(e){const t=(0,a.ZP)(),i=(0,o.useDispatch)();return(0,d.jsx)($t,{...e,i18n:t,setThumbnail:t=>i((0,D.Sz)(e.pinItemId,{thumbnail:t}))})}function Xt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Ut($t,"defaultProps",{height:Vt,showHeading:!0});const Yt={border:{__style:{border:"dashed 0.5px rgba(51, 51, 51, 0.2)",borderRadius:.7}}},Kt={__style:{padding:3}};class Jt extends n.Component{constructor(...e){super(...e),Xt(this,"state",{coverImgError:null}),Xt(this,"logFailedAttempt",(e=>{this.props.logContextEvent({event_type:7897,component:13308,aux_data:{error_message:e}})})),Xt(this,"clearCoverImgError",(()=>{this.setState({coverImgError:null})})),Xt(this,"handleDrop",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({coverImgError:null});const n=(0,Q.Z)(e.dataTransfer);n.length>0&&(0,Ft.Z)({i18n:t,ideaPinRenamingEnabled:i,file:n[0]}).then((e=>this.handleFileValidation(e)))})),Xt(this,"handleChange",(e=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;this.setState({coverImgError:null});const n=e.target.files&&e.target.files[0];(0,Ft.Z)({i18n:t,ideaPinRenamingEnabled:i,file:n}).then((e=>this.handleFileValidation(e))),e.target.value=""})),Xt(this,"handleFileValidation",(e=>{const{i18n:t,ideaPinRenamingEnabled:i,setCustomVideoThumbnail:n,video:o}=this.props;switch(e.type){case"error":this.logFailedAttempt(e.id),this.setState({coverImgError:e});break;case"localVideo":{const e=(0,I.ZP)({errorId:"FILE_UNRECOGNIZED_TYPE",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e});break}case"localImage":if(Math.abs(o.width/o.height-e.width/e.height)>.001){const e=(0,I.ZP)({errorId:"VIDEO_COVER_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e})}else n(e)}}))}render(){const{pinItemId:e,video:t}=this.props,{coverImgError:i}=this.state;return(0,d.jsxs)(s.xu,{display:"flex",marginStart:-2,marginEnd:-2,wrap:!0,children:[(0,d.jsx)(s.xu,{flex:"grow",paddingX:2,children:(0,d.jsx)(qt,{height:E.u1,pinItemId:e,onFocusSlider:this.clearCoverImgError,showHeading:!1,video:t})}),(0,d.jsx)(s.xu,{display:"flex",flex:"none",justifyContent:"end",paddingX:2,children:(0,d.jsx)(oe.Z,{accept:ne.xl.join(","),allowMultipleFiles:!1,hasError:!!i,id:"video-cover-upload-input",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:Kt,height:E.u1,overflow:"hidden",position:"relative",rounding:1,width:E.u1,children:(0,d.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:Yt.border,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(s.JO,{color:i?"error":"subtle",icon:i?"alert":"arrow-circle-up",accessibilityLabel:i?this.props.i18n.bt("Upload error", "Upload error", "Error alert icon shown when image chosen is invalid", undefined, true):this.props.i18n.bt("Choose a cover image", "Choose a cover image", "Add an image for the video poster cover", undefined, true),size:18})})})})}),!!i&&(0,d.jsx)(s.xu,{column:12,paddingX:2,paddingY:3,children:(0,d.jsx)(s.xv,{color:"error",size:"100",children:i.message})})]})}}function Qt(e){const{logContextEvent:t}=(0,r.v)(),i=(0,a.ZP)(),n=(0,_.Z)(),s=(0,o.useDispatch)();return(0,d.jsx)(Jt,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,setCustomVideoThumbnail:t=>s((0,D.Sz)(e.pinItemId,{customCoverImg:t}))})}function ei({pinItemId:e,video:t}){const i=(0,a.ZP)();return(0,d.jsxs)(s.xu,{children:[(0,d.jsx)(s.xu,{paddingY:3,children:(0,d.jsx)(s.xv,{size:"200",children:i.bt("Video cover image", "Video cover image", "Heading for selecting a video cover image in pin builder", undefined, true)})}),t.customCoverImg?(0,d.jsx)(Zt,{coverImg:t.customCoverImg,pinItemId:e}):(0,d.jsx)(Qt,{pinItemId:e,video:t})]})}var ti=i(801815),ii=i(106331);function ni(e){const t=(0,a.ZP)(),{height:i,pinDraftId:r,pinItemId:c,view:u}=e,h=(0,v.Z)(),_=(0,Se.Z)(),g=(0,o.useSelector)((t=>(0,ke.jk)()(t,e).length>0)),m=(0,o.useSelector)((({pinbuilder:{pinItems:e}})=>e[c].media)),f=(0,o.useSelector)((({pinbuilder:{pinItems:e}})=>e[c].canvasJson)),y=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].isAdIneligible)),P=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].publishOption)),w=(0,o.useSelector)((({pinbuilder:{pinDrafts:e}})=>e[r].type)),I=(0,o.useSelector)((e=>m&&"ad_creation"===x.Z.scenario()?(0,ii.Qj)(e,r,c):null));let A;!m||"carousel"===w&&x.Z.enabled("carousel")||!["localImage","assetImage","webImage"].includes(m.type)||(m.width<E.FM||m.height<E.Mn?A=(0,ae.Z)(t.bt("We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.", "We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.", "pinbuilder.mediaImageView.warning", undefined, true),{recommendedWidth:E.FM,recommendedHeight:E.Mn,actualWidth:m?m.width:0,actualHeight:m?m.height:0}):m&&m.width/m.height>E.vk/E.NB&&(A=(0,ae.Z)(t.bt("We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.", "We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.", "pinbuilder.mediaView.warning", undefined, true),{recommendedWidthRatio:E.vk,recommendedHeightRatio:E.NB})));const C=!x.Z.enabled("offsitePinCreation")&&x.Z.enabled("pinQuality"),{checkExperiment:S}=(0,b.F)(),j=(0,je.nl)(h,_)&&"ad_creation"!==x.Z.scenario()&&S("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,{campaignObjectiveType:T,allowCarouselPin:D}=(0,re.V3)(),k=(0,o.useDispatch)(),z=(0,n.useRef)(null),O="single"===w&&"publish-immediately"===P,R=!m&&O,L=!!m&&"localImage"===m.type&&O&&x.Z.enabled("carousel")&&"collectionsTag"!==u,M="carousel"===w&&x.Z.enabled("carousel"),N="tag"!==u&&"collectionsTag"!==u,{anyEnabled:Z}=S("aid_exp_error_handling_pin_builder"),F=Z?271:E.LM;return(0,n.useEffect)((()=>{"ad_creation"===x.Z.scenario()&&(I&&T&&!(0,Rt.rt)(I,T)?z.current="objectiveType":m&&"gif"===(0,Ee.Z)(m)&&(z.current="gif"),y!==!!z.current&&k((0,l.TD)(r,!0)))}),[T,k,I,y,m,r]),(0,d.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:F,children:[(0,d.jsxs)(s.xu,{position:"relative",display:"flex",direction:"column",height:i+40,children:[(0,d.jsx)(s.xu,{height:"100%",flex:"grow","data-tutorial-id":"pin-builder-media-draft-view",children:(0,d.jsx)(Ot,{media:m,isEdited:!!m&&"localVideo"===m.type&&!!f&&!!(0,ti.Z)(m,f),pinDraftId:r,pinItemId:c,showCarouselCreateButton:L,showCarouselControlButtons:M})}),R&&(0,d.jsx)(s.xu,{marginTop:2,flex:"none",children:(0,d.jsx)(B,{pinDraftId:r})})]}),C&&!!A&&(0,d.jsx)(s.xu,{marginTop:3,width:"100%",children:(0,d.jsx)(s.J0,{type:"warning",message:A,iconAccessibilityLabel:t.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),"objectiveType"===z.current&&(0,d.jsx)(s.xu,{marginTop:3,width:"100%","data-test-id":"ad-media-type-warning-message",children:(0,d.jsx)(s.J0,{type:"warning",message:t.bt("Your file type isn't compatible with your campaign objective, so it's not eligible for promotion in this campaign.", "Your file type isn't compatible with your campaign objective so it's ineligible for promotion in this campaign.", "[m10n] pinbuilder.mediaView.adWarning", undefined, true),primaryAction:{accessibilityLabel:t.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:ie.C5,label:t.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank"},iconAccessibilityLabel:t.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),"gif"===z.current&&(0,d.jsx)(s.xu,{marginTop:3,width:"100%","data-test-id":"ad-media-type-warning-message",children:(0,d.jsx)(s.J0,{type:"warning",message:t.bt("Your file type isn't eligible for promotion in any campaigns.", "Your file type isn't eligible for promotion in any campaign.", "[m10n] pinbuilder.mediaView.adWarningGeneric", undefined, true),primaryAction:{accessibilityLabel:t.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:ie.C5,label:t.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank"},iconAccessibilityLabel:t.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true)})}),D&&L&&!g&&!j&&(0,d.jsx)(s.xu,{marginTop:2,children:(0,d.jsx)(Lt,{pinDraftId:r})}),M&&(0,d.jsx)(s.xu,{marginTop:2,children:(0,d.jsx)(p,{pinDraftId:r})}),N&&!!m&&"localVideo"===m.type&&(0,d.jsx)(s.xu,{marginTop:2,children:(0,d.jsx)(ei,{pinItemId:c,video:m})})]})}},245569:(e,t,i)=>{i.d(t,{C:()=>C});var n=i(667294),o=i(702664),s=i(883119),r=i(785893);function a({children:e,text:t}){return(0,r.jsxs)(s.xu,{children:[(0,r.jsx)(s.xu,{"aria-live":"assertive",display:"visuallyHidden",id:"operation",children:t}),(0,r.jsx)(s.xu,{"aria-describedby":"operation",children:e})]})}var l=i(898781),d=i(755742),c=i(66699);function u({children:e,index:t,onCancel:i,onMove:o,onSelected:u,onConfirm:h,totalItems:p}){const _=(0,l.ZP)(),[g,m]=(0,n.useState)(_.bt("Press the spacebar to begin moving", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),[f,x]=(0,n.useState)(t),[b,y]=(0,n.useState)("INIT");"INIT"===b&&t!==f&&x(t);const v=e=>{const t=f+e;("SELECTED"===b||"MOVING"===b)&&t>=0&&t<p&&(o(t),m((0,c.Z)(_.bt("Current position in list is {{currentIndex}} of {{totalItems}}", "Current position in list is {{currentIndex}} of {{totalItems}}", "Assistive text describing current position in list", undefined, true),{totalItems:p,currentIndex:t+1})),x(t),y("MOVING"))};return(0,r.jsx)(s.xu,{role:"listitem",rounding:2,onBlur:()=>{m(_.bt("Press the spacebar to begin moving", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),x(t),y("INIT"),i()},onKeyUp:e=>{switch(e.keyCode){case d.Z.SPACE:case d.Z.ENTER:"SELECTED"===b||"MOVING"===b?(m((0,c.Z)(_.bt("Position in list updated from {{index}} to {{currentIndex}}", "Position in list updated from {{index}} to {{currentIndex}}", "Assistive text describing current position in list", undefined, true),{currentIndex:f+1,index:t+1})),y("CONFIRMED"),f!==t?h():i()):(m((0,c.Z)(_.bt("List item {{index}} selected.", "List item {{index}} selected.", "Assitive text describing selected item.", undefined, true),{index:t+1})),y("SELECTED"),u(t),v(0));break;case d.Z.ESCAPE:break;case d.Z.LEFT:v(-1);break;case d.Z.RIGHT:v(1)}},tabIndex:0,children:(0,r.jsx)(a,{text:g,children:e})})}var h=i(583421),p=i(345221),_=i(299295);function g(e){const{show:t}=e;return(0,r.jsx)(s.xu,{color:t?"primary":"transparent",display:"flex",flex:"grow",width:2})}function m(e){const{description:t,media:i,title:n}=e.pinItem,{height:o,src:a,width:l}=i||{};return(0,r.jsx)(s.zd,{rounding:2,height:"100%",width:"100%",children:(0,r.jsx)(s.xu,{display:"flex",direction:"column",rounding:2,children:(0,r.jsx)(s.Ee,{alt:n||t,color:"#FEFEFE",src:a,naturalHeight:o,naturalWidth:l,children:e.showOverlay?(0,r.jsx)(s.xu,{"data-test-id":"reorder-index-overlay",display:"flex",justifyContent:"end",position:"absolute",right:!0,top:!0,children:(0,r.jsx)(s.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",justifyContent:"center",margin:2,paddingX:2,paddingY:1,rounding:"circle",children:(0,r.jsx)(s.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:e.index})})}):null})})})}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const x=-1;class b extends n.Component{constructor(...e){super(...e),f(this,"state",{pinItemIds:this.props.pinItemIds,sourceIndex:x,targetIndex:x}),f(this,"handleDragCancel",(()=>{this.setState({sourceIndex:x,targetIndex:x})})),f(this,"handleDragBegin",(e=>{this.setState({sourceIndex:e})})),f(this,"handleDragHover",(e=>{const{targetIndex:t}=this.state;e!==t&&this.setState({targetIndex:e})})),f(this,"handleDragEnd",(()=>{const{updateIds:e}=this.props,{pinItemIds:t,sourceIndex:i,targetIndex:n}=this.state,o=((e,t,i)=>{const n=[...e],o=n.splice(t,1)[0];return n.splice(i,0,o),n})(t,i,n);e(o),this.setState({pinItemIds:o,sourceIndex:x,targetIndex:x})}))}render(){const{pinDraftId:e,pinItems:t}=this.props,{sourceIndex:i,targetIndex:n}=this.state;return(0,r.jsx)(s.xu,{alignItems:"center",display:"flex",direction:"row",justifyContent:"center",minHeight:_.DB,paddingY:6,width:"100%",children:t.map(((o,a)=>(0,r.jsxs)(s.xu,{display:"flex",width:154,children:[(0,r.jsx)(g,{show:i>n&&a===n}),(0,r.jsx)(s.xu,{padding:1}),(0,r.jsx)(u,{index:a,totalItems:t.length,onCancel:this.handleDragCancel,onConfirm:this.handleDragEnd,onMove:this.handleDragHover,onSelected:this.handleDragBegin,children:(0,r.jsx)(s.zd,{rounding:2,children:(0,r.jsx)(h.Z,{index:a,onDragBegin:this.handleDragBegin,onDragHover:this.handleDragHover,onDragEnd:this.handleDragEnd,type:h.y.CarouselItem,children:(0,r.jsx)(s.xu,{display:"flex",margin:0,rounding:2,width:_.mr,children:(0,r.jsx)(m,{index:`${a+1}`,pinDraftId:e,pinItem:o,showOverlay:i!==a})})})})}),(0,r.jsx)(s.xu,{padding:1}),(0,r.jsx)(g,{show:i<n&&a===n})]},`${String(o.id)}-reorder-view`)))})}}const y=(0,p.Z)(h.y.CarouselItem)(b);var v=i(407043),P=i(616672),w=i(941646),I=i(305782);function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class E extends n.Component{constructor(...e){super(...e),A(this,"state",{pinItemIds:this.props.pinItemIds}),A(this,"commitChanges",(()=>{const{saveChanges:e,logContextEvent:t}=this.props,{pinItemIds:i}=this.state;t({event_type:101,component:13308,element:11127}),e(i)})),A(this,"handleOnCancel",(()=>{const{cancelChanges:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11128}),e()})),A(this,"updateIds",(e=>{this.setState({pinItemIds:e})}))}render(){const{height:e,mapPinItems:t,pinDraftId:i}=this.props,{pinItemIds:n}=this.state,o=e>_.sD?e:_.sD;return(0,r.jsxs)(s.xu,{direction:"column",display:"flex",minHeight:o,marginBottom:10,children:[(0,r.jsxs)(s.kC,{alignItems:"start",justifyContent:"end",children:[(0,r.jsx)(s.xu,{"data-test-id":"cancel-reorder-button",paddingX:3,children:(0,r.jsx)(s.zx,{onClick:this.handleOnCancel,text:this.props.i18n.bt("Cancel", "Cancel", "Button Text for cancelling an changes", undefined, true)})}),(0,r.jsx)(w.Z,{id:"save-reorder-button",children:(0,r.jsx)(s.zx,{color:"red",onClick:this.commitChanges,text:this.props.i18n.bt("Done", "Done", "Button text for accepting changes", undefined, true)})})]}),(0,r.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:10,children:[(0,r.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,r.jsx)(s.X6,{size:"500",children:this.props.i18n.bt("Organise your images", "Organize your images", "Heading for reordering images in carousel", undefined, true)}),(0,r.jsx)(s.xu,{paddingY:4,children:(0,r.jsx)(s.xv,{color:"subtle",children:this.props.i18n.bt("Drag and drop the images to change the order in which they appear in your carousel", "Drag and drop the images to change the order in which they appear in your carousel", "Text describing how to reorder images in carousel", undefined, true)})})]}),(0,r.jsx)(y,{pinDraftId:i,pinItems:t(n),pinItemIds:n,updateIds:this.updateIds})]})]})}}function C(e){const{logContextEvent:t}=(0,v.v)(),i=(0,l.ZP)(),{pinItems:n}=(0,o.useSelector)((e=>e.pinbuilder)),{pinItemIds:s}=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),a=e=>e.filter((e=>!!n[e].media)).map((e=>({...n[e],id:e}))),d=a(s)[0].media,c=d?(0,P.Z)(d,_.mr):_.sD,u=(0,o.useDispatch)();return(0,r.jsx)(E,{...e,i18n:i,logContextEvent:t,height:c,pinItemIds:s,mapPinItems:a,saveChanges:t=>{u((0,I.XB)(e.pinDraftId,t)),u((0,I.c8)(e.pinDraftId,"upload"))},cancelChanges:()=>u((0,I.c8)(e.pinDraftId,"upload"))})}},323201:(e,t,i)=>{i.d(t,{Z:()=>y});var n=i(883119),o=i(702664),s=i(407043),r=i(898781),a=i(349700),l=i(299295),d=i(323716),c=i(388619),u=i(667294),h=i(305782),p=i(785893);function _({removeWebsiteMedia:e,media:{height:t,width:i,src:o}}){const s=(0,r.ZP)(),[a,l]=(0,u.useState)(!1);return(0,p.jsx)(n.iP,{onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:(0,p.jsxs)(n.xu,{marginStart:2,position:"relative",children:[(0,p.jsx)(n.zd,{rounding:2,width:64,height:t>=i?64:"100%",wash:!0,children:(0,p.jsx)(n.Ee,{alt:`Image from ${o}`,naturalHeight:t,naturalWidth:i,src:o})}),a&&(0,p.jsx)(n.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,rounding:"circle",color:"default",dangerouslySetInlineStyle:{__style:{border:"2px #FFFFFF solid"}},children:(0,p.jsx)(n.hU,{onClick:e,bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",accessibilityLabel:s.bt("Deselect image", "Unselect image", "pinBuilder.pinDraftFooterScrapeView.pinDraftFooterScrapeViewItem.unselect.text", undefined, true),size:"xs"})})]})})}function g(e){const t=(0,o.useDispatch)();return(0,p.jsx)(_,{...e,removeWebsiteMedia:()=>t((0,h.YY)(e.pinDraftId,e.media.src))})}function m({selected:e,pinDraftId:t,onAddToPin:i,width:o,marginStart:u}){const{logContextEvent:h}=(0,s.v)(),_=(0,r.ZP)();return e.length>0?(0,p.jsxs)(n.xu,{width:o||l.of,paddingX:4,marginStart:null!=u?u:-10,height:96,display:"flex",flex:"none",alignItems:"center",justifyContent:"between",dangerouslySetInlineStyle:{__style:{boxShadow:"0px -2px 10px -8px #000000"}},children:[(0,p.jsx)(n.xu,{padding:2,overflow:"scrollX",children:(0,p.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:e.map((e=>(0,p.jsx)(g,{pinDraftId:t,media:e},e.src)))})}),(0,p.jsx)(n.xu,{marginStart:2,children:(0,p.jsx)(n.zx,{color:"red",onClick:()=>{h({event_type:101,component:13308,element:10970});const{tab:e}=(0,c.Z)({url:(0,d.Z)()});i(e===l.ro?"IDEA_PIN":"PIN")},text:(0,a.nk)(_.nbt(["Add {{ numPins }} Pin", "Add {{ numPins }} Pins"], e.length, "pinBuilder.pinDraftBodyScrapeView.pinDraftFooterScrapeView.addPinButton.text", true),{numPins:e.length}).join("")})})]}):null}function f(e){const t=(0,o.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteMedia)),i=(0,o.useDispatch)();return(0,p.jsx)(m,{...e,selected:t,onAddToPin:t=>{i((0,h.q0)(e.pinDraftId,"upload",t))}})}var x=i(313580),b=i(665866);function y({pinDraftId:e,footerWidth:t,footerMarginStart:i}){const o=b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner")?l.gU:l.sD+l.uR;return(0,p.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",height:o,children:[(0,p.jsx)(x.Z,{pinDraftId:e}),(b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner"))&&(0,p.jsx)(f,{pinDraftId:e,width:t,marginStart:i})]})}},313580:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(702664),o=i(667294),s=i(883119),r=i(444445),a=i(938999),l=i(305782),d=i(785893);class c extends o.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{addWebsiteMedia:e,clearWebsiteMedia:t,removeWebsiteMedia:i,selected:n}=this.props;n?i():(t(),e())},(i="handleClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{selected:e,media:{height:t,width:i,src:n}}=this.props;return(0,d.jsx)(a.Z,{selected:e,onClick:this.handleClick,children:(0,d.jsx)(s.zd,{rounding:2,width:r.yF,wash:!0,children:(0,d.jsx)(s.Ee,{alt:`Image from ${n}`,naturalHeight:t,naturalWidth:i,src:n})})})}}function u(e){const{websiteMedia:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),i=t.map((e=>e.src)).includes(e.media.src),o=(0,n.useDispatch)();return(0,d.jsx)(c,{...e,selected:i,addWebsiteMedia:()=>o((0,l.dj)(e.pinDraftId,e.media)),clearWebsiteMedia:()=>o((0,l.hb)(e.pinDraftId)),removeWebsiteMedia:()=>o((0,l.YY)(e.pinDraftId,e.media.src))})}var h=i(172071),p=i(407043),_=i(898781),g=i(665866),m=i(773285),f=i(780280),x=i(66699);function b({media:{src:e,height:t,width:i},pinDraftId:n,selected:r,disabled:a,addWebsiteMedia:l,removeWebsiteMedia:c}){const{logContextEvent:u}=(0,p.v)(),{checkExperiment:b}=(0,m.F)(),y=(0,_.ZP)(),{isRTL:v}=(0,f.B)(),[P,w]=(0,o.useState)(!1),{anyEnabled:I}=b("web_set_crossorigin_anonymous"),[A,E]=(0,o.useState)(I?"anonymous":void 0),C=g.Z.enabled("offsite_pin_creation_multi_select")?"transparent":"default";return(0,d.jsx)(s.iP,{onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},onTap:()=>{r?(c(),u({event_type:8722,component:13308,element:12229,aux_data:{pin_draft_id:n,src_url:e}})):a||(l(),u({event_type:8721,component:13308,element:12229,aux_data:{pin_draft_id:n,src_url:e}}),g.Z.enabled("offsite_pin_creation_multi_select")&&h.Z.increment("offsite_pin_creation.select_image",1,{type:"multi_pin"}))},children:(0,d.jsx)(s.xu,{color:P?"secondary":"transparent",rounding:5,dangerouslySetInlineStyle:{__style:{padding:"2px"}},children:(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px",cursor:"pointer",boxShadow:r?"0 0 0 2px #000000":"none",borderRadius:"18px",outline:"none"}},children:(0,d.jsxs)(s.zd,{rounding:4,wash:!0,children:[(0,d.jsx)(s.Ee,{alt:(0,x.Z)(r?y.bt("Deselect image from {{imageSource}}", "Deselect image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Deselect", undefined, true):y.bt("Select image from {{imageSource}}", "Select image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Select", undefined, true),{imageSource:e}),naturalHeight:t,naturalWidth:i,src:e,crossOrigin:A,onError:()=>E(void 0)}),(0,d.jsx)(s.xu,{position:"absolute",bottom:!0,right:!v,left:!!v,height:24,width:24,marginEnd:3,marginBottom:3,rounding:2,padding:1,color:r?"dark":C,children:r&&(0,d.jsx)(s.JO,{accessibilityLabel:y.bt("Selected", "Selected", "pinBuilder.pinDraftInputScrapeGrid.pinDraftInputScrapeGriditem.selected.text", undefined, true),color:"inverse",icon:"check"})})]})})})})}function y(e){const{websiteMedia:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),i=t.map((e=>e.src)).includes(e.media.src),o=t.length>=10,s=(0,n.useDispatch)();return(0,d.jsx)(b,{...e,selected:i,disabled:o,addWebsiteMedia:()=>s((0,l.dj)(e.pinDraftId,e.media)),removeWebsiteMedia:()=>s((0,l.YY)(e.pinDraftId,e.media.src))})}var v=i(299295);function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends o.Component{constructor(...e){super(...e),P(this,"saveScrollContainer",(e=>{this.scrollContainer=e})),P(this,"renderItem",(({data:e})=>{const{pinDraftId:t}=this.props;return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")||g.Z.enabled("offsite_pin_creation_multi_select")?(0,d.jsx)(y,{pinDraftId:t,media:e}):(0,d.jsx)(u,{pinDraftId:t,media:e})}))}getColumnWidth(){return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?v.eZ:r.yF}getGutterWidth(){return g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?r.lX:g.Z.enabled("offsite_pin_creation_multi_select")?r.nW:r.P2}render(){const{errorMessage:e,media:t,showSpinner:i}=this.props,{scrollContainer:n}=this;return(0,d.jsxs)(s.xu,{ref:this.saveScrollContainer,column:12,height:"100%",width:v.km,overflow:"auto",padding:g.Z.enabled("multi_pin")||g.Z.enabled("multi_pin_pinner")?0:2,children:[(0,d.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("Loading images from URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),n&&t.length>0?(0,d.jsx)(s.Rk,{layout:g.Z.enabled("offsite_pin_creation_multi_select")?"flexible":"basic",columnWidth:this.getColumnWidth(),renderItem:({data:e})=>this.renderItem({data:e}),gutterWidth:this.getGutterWidth(),items:t,minCols:g.Z.enabled("offsite_pin_creation_multi_select")?3:r.yc,scrollContainer:()=>n}):e&&(0,d.jsx)(s.xu,{"data-test-id":"pinbuilder-pin-draft-input-scrape-grid-error-message",children:(0,d.jsx)(s.xv,{color:"subtle",align:"center",children:(0,d.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]})}}function I(e){const t=(0,_.ZP)();return(0,d.jsx)(w,{...e,i18n:t})}var A=i(122097);function E({pinDraftId:e,websiteLink:t}){return(0,d.jsx)(A.Z,{url:t,source:"pin_create",children:({images:i,error:n,loading:o})=>{const s=[...i];return function(e,t){e.forEach((e=>Object.assign(e,{src:e.url,type:"webImage",sourceURL:t})))}(s,t),(0,d.jsx)(I,{errorMessage:n,media:s,pinDraftId:e,showSpinner:o})}},t)}function C(e){const t=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink)),i=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteDefaultImageUrl));return(0,d.jsx)(E,{...e,websiteLink:t,websiteDefaultImageUrl:i})}},854156:(e,t,i)=>{i.d(t,{Z:()=>Z});var n=i(702664),o=i(883119),s=i(746547),r=i(667294),a=i(172045),l=i(407043),d=i(898781),c=i(349700),u=i(299295),h=i(305782),p=i(502890),_=i(277348),g=i(785893);class m extends r.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{mode:e,saveTaggedObject:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:10911,aux_data:{method:e}}),t()},(i="handleTouch")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{image:e}=this.props,{height:t,width:i,url:n}=e;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(o.iP,{onTap:this.handleTouch,rounding:2,children:(0,g.jsx)(o.zd,{rounding:2,width:u.yC,wash:!0,children:(0,g.jsx)(o.Ee,{alt:`Image from ${null!=n?n:""}`,naturalHeight:null!=t?t:1,naturalWidth:null!=i?i:1,src:null!=n?n:""})})}),(0,g.jsx)(o.xu,{marginTop:1,display:"flex",justifyContent:"center",children:(0,g.jsx)(o.xv,{align:"center",children:(0,c.nk)(this.props.i18n.bt("{{ height }} × {{ width }}", "{{ height }} × {{ width }}", "Dimensions of an image separated by multiplication sign", undefined, true),{height:t,width:i})})})]})}}function f(e){const{logContextEvent:t}=(0,l.v)(),i=(0,d.ZP)(),o=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),s=(0,n.useDispatch)();return(0,g.jsx)(m,{...e,i18n:i,logContextEvent:t,mode:o,saveTaggedObject:()=>{const t=e.pinId||(0,a.Z)();s((0,_.Dn)(e.pinTagId,t,{media:e.image})),s((0,p.C_)(e.pinItemId,null)),s((0,h.c8)(e.pinDraftId,"tag"))}})}class x extends r.Component{constructor(...e){var t,i,n;super(...e),n=e=>{this.scrollContainer=e},(i="saveScrollContainer")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{errorMessage:e,images:t,showSpinner:i}=this.props,{scrollContainer:n}=this;return(0,g.jsx)(o.xu,{ref:this.saveScrollContainer,column:12,height:"100%",children:(0,g.jsxs)(o.xu,{padding:2,children:[(0,g.jsx)(o.$j,{accessibilityLabel:this.props.i18n.bt("Loading images from URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),e&&(0,g.jsx)(o.xv,{size:"200",color:"error",children:e}),n&&t.length>0&&(0,g.jsx)(o.xu,{"data-test-id":"pin-tag-grid",children:(0,g.jsx)(o.Rk,{columnWidth:u.yC,renderItem:({data:e})=>(0,g.jsx)(f,{image:e,pinDraftId:this.props.pinDraftId,pinItemId:this.props.pinItemId,pinId:this.props.pinId,pinTagId:this.props.pinTagId}),gutterWidth:24,items:t,minCols:2,scrollContainer:()=>n})})]})})}}function b(e){const t=(0,d.ZP)();return(0,g.jsx)(x,{...e,i18n:t})}var y=i(122097),v=i(954931),P=i(131555);class w extends r.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{mode:e,logContextEvent:t}=this.props;t({event_type:7580,component:13308,aux_data:{method:e}})},(i="handleError")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{closeTagGrid:e,pinDraftId:t,pinItemId:i,pinTagId:n,link:s}=this.props,r=(0,v.Z)(s)?/\/pin\/([\w-]+)\/?$/.exec(s):null;return(0,g.jsxs)(o.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,g.jsxs)(o.xu,{flex:"none",display:"flex",alignItems:"center",marginBottom:6,children:[(0,g.jsxs)(o.xu,{flex:"grow",children:[(0,g.jsx)(o.xu,{marginBottom:1,children:(0,g.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Pick an image for this product", "Pick an image for this product", "Instructions to select an image to add as a tagged product to a Pin tag", undefined, true)})}),(0,g.jsx)(o.xv,{size:"200",lineClamp:1,children:(0,c.nk)(this.props.i18n.bt("Images from {{ link }}", "Images from {{ link }}", "Text displaying the website link where images were collected", undefined, true),{link:s})})]}),(0,g.jsx)(o.xu,{flex:"none",children:(0,g.jsx)(o.hU,{accessibilityLabel:this.props.i18n.bt("Cancel", "Cancel", "Button to cancel selecting products for a Pin tag", undefined, true),icon:"cancel",onClick:e,iconColor:"gray",size:"md"})})]}),(0,g.jsx)(o.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",overflow:"auto",children:r?(0,g.jsx)(P.Z,{pinId:r[1],fieldSetKey:"images_only_item",children:({pin:e,error:o,loading:s})=>(0,g.jsx)(b,{errorMessage:o,images:e?[e.images["474x"]]:[],pinDraftId:t,pinItemId:i,pinId:r[1],pinTagId:n,showSpinner:s})}):(0,g.jsx)(y.Z,{url:s,onError:this.handleError,source:"product_tags",children:({images:e,error:o,loading:s})=>(0,g.jsx)(b,{errorMessage:o,images:e,pinDraftId:t,pinItemId:i,pinTagId:n,showSpinner:s})})})]})}}function I(e){const{logContextEvent:t}=(0,l.v)(),i=(0,d.ZP)(),{selectedPinTagId:o}=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),s=(0,n.useSelector)((e=>o?e.pinbuilder.pinTags[o].link:"")),r=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode)),a=(0,n.useDispatch)();return(0,g.jsx)(w,{...e,i18n:i,logContextEvent:t,link:s,mode:r,pinTagId:o||"",closeTagGrid:()=>a((0,h.c8)(e.pinDraftId,"tag"))})}var A=i(258821),E=i(665866);function C({disabled:e,selectPinTag:t}){const i=(0,d.ZP)(),n=E.Z.enabled("shop_the_pin"),s=(0,g.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:n?u.MN:u.Bj,justifyContent:"center",rounding:2,width:n?u.MN:u.Bj,children:(0,g.jsx)(o.JO,{accessibilityLabel:i.bt("Add product", "Add product", "Accessibility label for adding a new product to a tag", undefined, true),icon:"add",color:"subtle",size:24})});return e?s:(0,g.jsx)(o.iP,{onTap:t,rounding:2,children:s})}function S(e){const t=(0,n.useDispatch)();return(0,g.jsx)(C,{...e,selectPinTag:()=>t((0,p.C_)(e.pinItemId,e.pinTagId))})}var j=i(957025);const T={circle:{__style:{border:"solid 2px #efefef"}},overlay:{__style:{opacity:.4}}};function D(e){const t=(0,d.ZP)(),{isSelected:i,pinItemId:n,pinTagId:s,pinTagKey:r,taggedObjectIds:a}=e,l=a.length,u=!1===i;return(0,g.jsxs)(o.xu,{column:12,dangerouslySetInlineStyle:u?T.overlay:void 0,children:[(0,g.jsxs)(o.xu,{display:"flex",alignItems:"center",marginBottom:2,children:[(0,g.jsx)(o.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",rounding:"circle",width:24,dangerouslySetInlineStyle:T.circle,children:(0,g.jsx)(o.xv,{size:"100",weight:"bold",children:r})}),(0,g.jsx)(o.xu,{paddingX:2,children:(0,g.jsx)(o.xv,{size:"200",weight:"bold",children:(0,c.nk)(t.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], l, "Text displaying the total number of products across a single tag on a Pin", true),{numProducts:l})})})]}),(0,g.jsxs)(o.xu,{display:"flex",marginStart:-1,marginEnd:-1,wrap:!0,children:[a.map((e=>(0,g.jsx)(o.xu,{padding:1,children:(0,g.jsx)(A.Z,{disabled:u,pinTagId:s,taggedObjectId:e})},e))),(0,g.jsx)(o.xu,{padding:1,children:(0,g.jsx)(S,{disabled:u,pinItemId:n,pinTagId:s})})]})]})}function k(e){const t=(0,j.A$)(),{selectedPinTagId:i}=(0,n.useSelector)((t=>t.pinbuilder.pinItems[e.pinItemId])),o=i?i===e.pinTagId:null,s=(0,n.useSelector)((i=>t(i,e)));return(0,g.jsx)(D,{...e,isSelected:o,taggedObjectIds:s})}var z=i(948618),O=i(562501);function R({numProducts:e,pinItemId:t,pinTagIds:i}){const n=(0,d.ZP)(),s=i.length;return(0,g.jsxs)(o.xu,{display:"flex",direction:"column",height:"100%",column:12,children:[(0,g.jsxs)(o.xu,{flex:"none",marginBottom:6,children:[(0,g.jsx)(o.xu,{marginBottom:1,children:(0,g.jsx)(o.X6,{size:"400",children:n.bt("Products tagged", "Products tagged", "Heading for grid of products tagged to one Pin tag", undefined, true)})}),(0,g.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,g.jsx)(o.xv,{size:"200",children:(0,c.nk)(n.nbt(["{{ numTags }} tag", "{{ numTags }} tags"], s, "Text displaying the total number of tags on a Pin", true),{numTags:s})}),(0,g.jsx)(z.Z,{}),(0,g.jsx)(o.xv,{size:"200",children:(0,c.nk)(n.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], e, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:e})})]})]}),(0,g.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",overflow:"auto",children:i.map(((e,i)=>(0,g.jsx)(o.xu,{marginBottom:5,children:(0,g.jsx)(k,{pinItemId:t,pinTagId:e,pinTagKey:i+1})},e)))})]})}function L(e){const t=(0,O.vd)(),i=(0,O.jk)(),o=(0,n.useSelector)((t=>i(t,e).length)),s=(0,n.useSelector)((i=>t(i,e)));return(0,g.jsx)(R,{...e,numProducts:o,pinTagIds:s})}var M=i(616672);const B={__style:{paddingBottom:u.uR}};function N({height:e,pinDraftId:t,pinItemId:i,view:n,paddingX:r=5}){return(0,g.jsxs)(o.xu,{display:"flex",direction:"row",dangerouslySetInlineStyle:B,children:[(0,g.jsx)(o.xu,{paddingX:r,children:(0,g.jsx)(s.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,g.jsxs)(o.xu,{flex:"grow",height:e,minHeight:u.sD,paddingX:5,width:"100%",children:["tag"===n&&(0,g.jsx)(L,{pinItemId:i}),"selectTag"===n&&(0,g.jsx)(I,{pinDraftId:t,pinItemId:i})]})]})}function Z(e){const{pinItemIds:t}=(0,n.useSelector)((t=>t.pinbuilder.pinDrafts[e.pinDraftId])),{media:i}=(0,n.useSelector)((e=>e.pinbuilder.pinItems[t[0]])),o=i?(0,M.Z)(i):u.sD;return(0,g.jsx)(N,{...e,height:o})}},258821:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(702664),o=i(883119),s=i(407043),r=i(898781),a=i(299295),l=i(665866),d=i(925797),c=i(984268),u=i(277348),h=i(785893);function p({disabled:e,media:t,removeTaggedObject:i,pin:n}){const{logContextEvent:u}=(0,s.v)(),p=(0,r.ZP)(),{height:_,width:g,url:m}=t||{},f=l.Z.enabled("shop_the_pin"),x=f?(0,c.mt)(n):null,b=f?(0,c.BE)(n):null;return(0,h.jsxs)(o.xu,{position:"relative",rounding:2,"data-test-id":"tagged-item",children:[(0,h.jsx)(o.zd,{rounding:2,height:f?a.MN:a.Bj,width:f?a.MN:a.Bj,wash:!0,children:(0,h.jsx)(o.Ee,{alt:`Image from ${null!=m?m:""}`,fit:"cover",naturalHeight:null!=_?_:1,naturalWidth:null!=g?g:1,src:null!=m?m:""})}),f&&(0,h.jsxs)(o.xu,{children:[!!x&&(0,h.jsx)(o.xu,{marginTop:1,children:(0,h.jsx)(o.xu,{paddingY:1,display:"flex",children:(0,h.jsx)(d.Z,{text:x,icon:"tag"})})}),!!b&&(0,h.jsx)(o.xu,{width:f?a.MN:a.Bj,children:(0,h.jsx)(o.xv,{overflow:"breakWord",size:"200",weight:"bold",children:b})})]}),(0,h.jsx)(o.xu,{position:"absolute",top:!0,left:!0,margin:2,"data-test-id":"remove-tagged-item-button",children:(0,h.jsx)(o.hU,{accessibilityLabel:p.bt("Remove tagged product", "Remove tagged product", "button to remove tagged product", undefined, true),bgColor:"white",icon:"cancel",iconColor:"gray",onClick:e?void 0:()=>{i(),u({event_type:101,component:13308,element:12127})},size:"xs"})})]})}function _(e){const t=(0,n.useSelector)((t=>t.pinbuilder.taggedObjects[e.taggedObjectId].media||null)),i=(0,n.useSelector)((t=>t.pinbuilder.taggedObjects[e.taggedObjectId].pin||null)),o=(0,n.useDispatch)();return(0,h.jsx)(p,{...e,media:t,pin:i,removeTaggedObject:()=>{o((0,u.Go)(e.pinTagId,e.taggedObjectId)),o((0,u.Cf)(e.pinTagId,"edited"))}})}},344948:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(702664),o=i(883119),s=i(237056),r=i(407043),a=i(898781),l=i(299295),d=i(665866),c=i(773285),u=i(414327),h=i(19121),p=i(717615),_=i(231947),g=i(305782),m=i(502890),f=i(838548),x=i(785893);function b({pinDraftId:e,pinItemId:t}){const{logContextEvent:i}=(0,r.v)(),{checkExperiment:b}=(0,c.F)(),y=(0,a.ZP)(),v=(0,s.Z)(),P=(0,h.Z)(),w=P.isAuth?P.id:"",I=P.isAuth?P.country:"",A=P.isAuth&&P.isPartner,{anyEnabled:E}=b("web_m10n_business_access_orbac_www"),C=(0,p.Z)(),S=E?(0,_.lJ)(P,C):"",j=(0,n.useDispatch)(),T=()=>{j((0,m.C_)(t,null)),j((0,m.b0)(t)),j((0,f.Z)({pinDraftId:e,storyPinPublishStopwatch:void 0,userId:w,orbacSubjectId:S,country:I,isPartner:A,i18n:y,logContextEvent:i,ideaPinRenamingEnabled:v})),j((0,u.jB)("PinResource"))},D=(0,n.useSelector)((({pinbuilder:t})=>"selectTag"===t.pinDrafts[e].view)),k=(0,n.useSelector)((({pinbuilder:t})=>"edit"===t.pinDrafts[e].mode)),z=(0,n.useSelector)((({pinbuilder:e})=>e.pinItems[t].tagError)),O=(0,n.useSelector)((({pinbuilder:e})=>e.closeupImageSignature)),R=(0,n.useSelector)((({pinbuilder:e})=>e.entryPoint)),L=(0,_.nl)(P,E?C:{})&&"ad_creation"!==d.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled?()=>{i({event_type:101,component:13308,element:10973,aux_data:{...R||O?{entry_point_source:R,image_signature:O}:{}}}),T()}:T;return(0,x.jsxs)(o.kC,{alignItems:"stretch",justifyContent:z?"between":"end",children:[!!z&&(0,x.jsx)(o.xu,{display:"flex",alignItems:"center",paddingX:5,children:(0,x.jsx)(o.xu,{width:l.LM,children:(0,x.jsx)(o.xv,{color:"error",size:"200",children:z})})}),(0,x.jsx)(o.zx,{color:"red",disabled:D,name:"pin-draft-header-tag-view-done",onClick:k?L:()=>{i({event_type:101,component:13308,element:12128}),j((0,m.C_)(t,null)),j((0,g.c8)(e,"upload")),j((0,m.b0)(t))},text:y.bt("Done", "Done", "Button to save changes to the tagging flow.", undefined, true)})]})}},430957:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(702664),s=i(82596),r=i(407043),a=i(938999),l=i(474394),d=i(490072),c=i(785893);class u extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{deselectPinDraft:e,inSelectMode:t,pinDraftId:i,pinDraftRefs:n,published:o,selected:s,selectPinDraft:r,logContextEvent:a}=this.props;a({event_type:101,component:13395,element:11330});const l=n.get(i);l&&l.scrollIntoView({behavior:"smooth",block:"start"}),t&&!o&&(s?e():r())},(i="handleClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{pinDraftId:e,published:t,selected:i,selectedColor:n,width:o,height:r,hasError:l,shouldHighlightErrors:d}=this.props,u=l&&d;return(0,c.jsx)(a.Z,{selected:u||i,onClick:this.handleClick,color:u?"#e60023":n,children:(0,c.jsx)(s.Z,{pinDraftId:e,type:"thumbnail",collapsed:t,width:o,height:r})})}}function h(e){const{logContextEvent:t}=(0,r.v)(),i=(0,o.useDispatch)(),n=(0,o.useSelector)((({pinbuilder:{selectedPinDraftIds:e}})=>e.length>0)),s=(0,o.useSelector)((({pinbuilder:{selectedPinDraftIds:t}})=>t.includes(e.pinDraftId))),a=(0,o.useSelector)((({pinbuilder:{pinDrafts:t}})=>"succeeded"===t[e.pinDraftId].status)),h=(0,o.useSelector)((({pinbuilder:t})=>(0,d.Fh)(t,e)));return(0,c.jsx)(u,{...e,hasError:h,inSelectMode:n,logContextEvent:t,published:a,selected:s,selectPinDraft:()=>i((0,l.selectPinBuilderPinDraft)(e.pinDraftId)),deselectPinDraft:()=>i((0,l.deselectPinBuilderPinDraft)(e.pinDraftId))})}},82596:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(702664),o=i(898781),s=i(795067),r=i(883119),a=i(785893);function l({type:e,height:t,width:i}){const n=(0,o.ZP)();return(0,a.jsx)(r.xu,{alignItems:"center",color:"lightWash",display:"flex",height:t||("thumbnail"===e?60:"100%"),justifyContent:"center",rounding:2,width:i||("thumbnail"===e?40:"100%"),children:(0,a.jsx)(r.JO,{accessibilityLabel:n.bt("Empty Pin", "Empty Pin", "Label for Pin draft with no image", undefined, true),color:"subtle",icon:"camera-roll",size:16})})}var d=i(667294),c=i(299295),u=i(616672);const h=40,p={video:{height:"100%",objectFit:"cover",width:"100%"},wash:{__style:{opacity:.3}},container:{__style:{transition:`height 250ms ${c.rc}`}}};class _ extends d.Component{constructor(...e){var t,i,n;super(...e),t=this,i="videoRef",n=(0,d.createRef)(),i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{media:e}=this.props;"localVideo"===e.type&&this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}componentDidUpdate(e){const{media:t}=e,{media:i}=this.props;"localVideo"===i.type&&t.thumbnail!==i.thumbnail&&this.videoRef.current&&(this.videoRef.current.currentTime=i.thumbnail)}render(){const{collapsed:e,media:t,text:i,type:n,width:o=h}=this.props,{customCoverImg:s}="localVideo"===t.type?t:{},l="square"===n?"100%":o,d=e?4:(0,u.Z)(s||t,o),c="square"===n?"100%":d;return(0,a.jsxs)(r.xu,{rounding:2,width:l,height:c,position:"relative",dangerouslySetInlineStyle:p.container,children:[(0,a.jsx)(r.xu,{column:12,height:"100%",dangerouslySetInlineStyle:e?p.wash:void 0,children:(0,a.jsxs)(r.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:["localVideo"===t.type&&s&&(0,a.jsx)(r.Ee,{alt:this.props.i18n.bt("Video Pin", "Video Pin", "Label for Pin draft with an video", undefined, true),fit:"square"===n?"cover":void 0,naturalHeight:s.height,naturalWidth:s.width,src:s.src}),"localVideo"===t.type&&!s&&(0,a.jsx)("video",{muted:!0,ref:this.videoRef,src:t.src,style:p.video,children:(0,a.jsx)("track",{kind:"captions"})}),("localImage"===t.type||"webImage"===t.type)&&(0,a.jsx)(r.Ee,{alt:this.props.i18n.bt("Image Pin", "Image Pin", "Label for Pin draft with an image", undefined, true),fit:"square"===n?"cover":void 0,naturalHeight:t.height,naturalWidth:t.width,src:t.src})]})}),("localVideo"===t.type||!!i)&&(0,a.jsxs)(r.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center",children:["localVideo"===t.type&&(0,a.jsx)(r.JO,{accessibilityLabel:this.props.i18n.bt("Video Pin", "Video Pin", "Label for Pin draft with an video", undefined, true),color:"inverse",icon:"video-camera"}),!!i&&(0,a.jsx)(r.xv,{color:"inverse",size:"100",weight:"bold",children:i})]})]})}}function g(e){const t=(0,o.ZP)();return(0,a.jsx)(_,{...e,i18n:t})}function m({collapsed:e,media:t,text:i,type:n,height:o,width:s}){return t?"localImage"===t.type||"webImage"===t.type||"localVideo"===t.type?(0,a.jsx)(g,{media:t,text:i,type:n,collapsed:e,width:s}):null:(0,a.jsx)(l,{type:n,height:o,width:s})}function f(e){const t=(0,o.ZP)(),{pinDrafts:i,pinItems:r,storyPinItems:l}=(0,n.useSelector)((e=>e.pinbuilder)),{pinItemIds:d,pinItemIndex:c,type:u}=i[e.pinDraftId],h=d[c],{media:p}="story"===u?l[h]:r[h],_="carousel"===u?`${c+1}/${d.filter((e=>"story"===u?!!l[e].media:!!r[e].media)).length}`:p&&"gif"===(0,s.Z)(p)?t.bt("GIF", "GIF", "Overlay text for GIF images", undefined, true):void 0;return(0,a.jsx)(m,{...e,i18n:t,media:p,text:_})}},248740:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(299487),s=i(407043),r=i(385740),a=i(124237),l=i(898781),d=i(780280),c=i(843940),u=i(785893);function h({isExtensionInstalled:e=!1,isFromPinBuilder:t=!1,onInstall:i=(()=>{}),onHide:h=(()=>{}),onMounted:p=(()=>{})}){const{logContextEvent:_}=(0,s.v)(),g=(0,l.ZP)(),{userAgent:{browserName:m}}=(0,d.B)(),f=(0,r.SU)();(0,n.useEffect)((()=>(_({event_type:13,view_type:438,component:13588}),p(),()=>{_({event_type:13,view_type:f.viewType,view_parameter:f.viewParameter,view_data:f.viewData})})),[]);return(0,u.jsx)(c.Z,{installClick:()=>{e?a.Z.showError(g.bt("Oops! You already have the browser button.", "Oops! You already have the browser button.", " - ", undefined, true)):o.Z.handleExtensionInstall(m,(()=>{i()})),_({event_type:101,component:7,element:456})},isExtensionInstalled:!t&&e,isFromPinBuilder:!!t,skipClick:()=>{h()}})}},918333:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(667294),o=i(616550),s=i(883119),r=i(302667),a=i(172071),l=i(247371),d=i(306775),c=i(407043),u=i(898781),h=i(349700),p=i(780280),_=i(784590),g=i(19121),m=i(717615),f=i(231947),x=i(641692),b=i(580189),y=i(850760),v=i(818747),P=i(785893);function w(e){const{color:t,description:i,imageUrl:n,link:o}=e;return(0,P.jsx)(s.xu,{alignItems:"center",justifyContent:"center",padding:2,display:"flex",children:!n&&t&&o?(0,P.jsx)(s.xu,{width:236,children:(0,P.jsx)(v.Z,{color:t,description:i,url:o})}):(0,P.jsx)(s.zd,{rounding:2,width:236,children:(0,P.jsx)("img",{alt:i,src:n})})})}var I=i(616672),A=i(152028);const E={width:"100%"};class C extends n.Component{constructor(...e){var t,i,o;super(...e),t=this,i="videoRef",o=(0,n.createRef)(),i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o}componentDidMount(){const{video:e}=this.props;this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}render(){const{video:e}=this.props,t=(0,I.Z)(e.customCoverImg||e,236);return(0,P.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:(0,P.jsxs)(s.xu,{height:t,position:"relative",rounding:2,width:236,children:[(0,P.jsx)(s.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:e.customCoverImg?(0,P.jsx)(s.Ee,{alt:e.customCoverImg.name,naturalHeight:e.customCoverImg.height,naturalWidth:e.customCoverImg.width,src:e.customCoverImg.src}):(0,P.jsx)("video",{muted:!0,src:e.src,ref:this.videoRef,style:E,children:(0,P.jsx)("track",{kind:"captions"})})}),(0,P.jsx)(s.xu,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"end",display:"flex",justifyContent:"start",padding:2,position:"absolute",children:(0,P.jsx)(A.Z,{duration:1e3*e.duration})})]})})}}const S=1;class j extends n.PureComponent{renderPinCreateSuccessImage(){const{color:e,description:t,imageUrl:i,link:n,websiteMedia:o}=this.props;return o&&o.length>1?(0,P.jsx)(s.xu,{maxHeight:540,overflow:"scrollY",padding:8,children:(0,P.jsx)(s.Rk,{renderItem:({data:e})=>(0,P.jsx)(w,{description:t,imageUrl:e.src}),items:o,minCols:3,columnWidth:160})}):(0,P.jsx)(w,{color:e,description:t,imageUrl:i,link:n})}render(){const{relatedBoard:e}=this.props;if(!e.isLoaded)return(0,P.jsx)(s.xu,{minHeight:250,children:(0,P.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("See suggested board", "See suggested board", "suggested board to follow after pinnning", undefined, true),show:!0})});if(e.data&&!e.data.length){const{video:e}=this.props;return(0,P.jsx)(s.xu,{marginTop:-8,paddingY:8,children:e?(0,P.jsx)(C,{video:e}):this.renderPinCreateSuccessImage()})}return null}}function T(e){const t=(0,u.ZP)(),i=(0,g.Z)(),n=(0,m.Z)(),o=(0,f.lJ)(i,n),s=(0,_.Z)({name:"RelatedBoardForPinRandomFeedResource",options:{page_size:S,pin:e.pinId,orbac_subject_id:o},noCache:!0});return(0,P.jsx)(j,{...e,i18n:t,relatedBoard:s})}function D({boardName:e,color:t,description:i="",hideHeader:v,imageUrl:w,link:I,onClose:A,openNewTab:E,pin:C,pinId:S,sectionName:j,siteType:D,video:k,websiteMedia:z}){const O=(0,u.ZP)(),{logContextEvent:R}=(0,c.v)(),L=(0,o.useHistory)(),M=(0,p.B)(),B=(0,g.Z)(),N=(0,m.Z)(),Z=(0,f.lJ)(B,N),F=(0,_.Z)({name:"PinResource",options:{id:S,field_set_key:"detailed",orbac_subject_id:Z}}),U=()=>C&&C.is_quick_promotable_by_pinner&&3!==D&&(0,d.su)(B);(0,n.useEffect)((()=>{U()?((0,r.vF)(R,x.NH.RENDER,x.Xc.PIN_CREATE_SUCCESS_PINNER,120,207),a.Z.increment("web.pin_create.success.promote")):a.Z.increment("web.pin_create.success.send"),a.Z.increment("web.pin_create.success.default")}),[]);const V=(0,b.Z)({currentSiteType:D,destinationSiteType:0,inputPath:`/pin/${S}`}),H=j?(0,h.nk)(O.bt("Saved to {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", " - ", undefined, true),{boardName:e,sectionName:j}):(0,h.nk)(O.bt("Saved to {{ boardName }}", "Saved to {{ boardName }}", " - ", undefined, true),{boardName:e}),G=F.data&&F.data.link_domain&&F.data.link_domain.official_user,W=B.isAuth&&G&&G.id!==B.id&&!G.followed_by_me;return(0,P.jsx)(s.xu,{minWidth:500,"data-test-id":"saved-pin-modal",children:(0,P.jsxs)(s.xu,{color:"default",rounding:2,width:"auto",children:[v?null:(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(s.xu,{paddingX:6,paddingY:4,children:(0,P.jsx)(s.X6,{size:"500",children:H})}),(0,P.jsx)(s.iz,{})]}),!!G&&W&&(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(s.xu,{paddingX:6,paddingY:3,children:(0,P.jsx)(y.Z,{user:G})}),(0,P.jsx)(s.iz,{})]}),(0,P.jsx)(T,{color:t,description:i,imageUrl:w,link:I,pinId:S,video:k,websiteMedia:z}),(0,P.jsx)(s.iz,{}),(0,P.jsx)(s.xu,{paddingX:6,paddingY:2,children:(0,P.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"end",children:[!U()&&(0,P.jsx)(l.SendButton,{buttonType:"icon-and-text",handleSendShareFlyoutButtonClick:()=>{L.push(`/pin/${S}/?share=true`)}}),(0,P.jsx)(s.xu,{paddingX:1,"data-test-id":"seeItNow",children:(0,P.jsx)(s.zx,{role:"link",href:V,target:E?"blank":null,onClick:()=>{(0,r.vF)(R,x.NH.DISMISS,x.Xc.PIN_CREATE_SUCCESS_PINNER,123,207),A()},color:B.isAuth&&B.isPartner||C&&U()?"gray":"red",text:O.bt("See it now", "See it now", "pinCreateSuccess.seeItNow", undefined, true)})}),C&&U()&&(0,P.jsx)(s.xu,{paddingX:1,children:(0,P.jsx)(s.zx,{color:"red",text:O.bt("Promote your Pin", "Promote your Pin", "Text for button to that takes users to promote a Pin", undefined, true),onClick:()=>{(0,r.vF)(R,x.NH.CLICK,x.Xc.PIN_CREATE_SUCCESS_PINNER,101,207),(0,d.Pw)({history:L,pinId:S,requestContext:M}),A()}})})]})})]})})}},453451:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(807592),s=i(898781),r=i(785893);function a({colorOverride:e,isSoldOut:t,isStale:i,productDetails:a,showSalesPrice:l,type:d,weight:c="bold"}){const{max_price:u,min_price:h,price:p,standard_price:_}=a,g=!!p&&!!_&&p!==_;let m="100";"pdpPlusHeading"===d?m="400":"heading"===d?m="500":"pdpPlusMobileHeading"===d&&(m="300");const f=(0,s.ZP)(),x=f.bt("See price on site", "See price on site", "product.price.stale", undefined, true),b=f.bt("Sold out", "Sold out", "product.price.soldOut", undefined, true);return i?(0,r.jsx)(n.xv,{size:m,color:"subtle",weight:"bold",children:x}):(0,r.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[t&&(0,r.jsx)(n.xu,{marginEnd:2,children:(0,r.jsx)(n.xv,{size:m,color:"subtle",weight:"bold",children:b})}),(!!p||!!h||!!u)&&(0,r.jsx)(n.xv,{color:e||(g?"shopping":"default"),size:m,weight:c,children:(0,r.jsx)("span",{children:(0,o.Z)(a)})}),g&&!l&&(0,r.jsx)(n.xu,{marginStart:1,children:(0,r.jsx)(n.xv,{color:"subtle",size:m,weight:["pdpPlusHeading","pdpPlusMobileHeading"].includes(d)?"normal":c,children:(0,r.jsx)("span",{style:{textDecoration:"line-through"},children:_})})})]})}},200915:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z,topTaggedObjectsResourceOptions:()=>N});var n=i(883119),o=i(667294),s=i(925797),r=i(785893);const[a,l,d,c]=[1,2,3,4],u={[a]:"In stock",[l]:"Out of stock",[d]:"Preorder",[c]:"Unavailable"};function h(e){var t,i,o,d;const{buyableProduct:c,hideAvailability:h,merchantName:p,pinDescription:_,pinTitle:g,richSummary:m,showProductIcon:f,showPrice:x,showDescription:b}=e,{is_available:y,display_active_min_price:v,display_active_max_price:P}=c||{},w=v===P?v:`${null!=v?v:""} - ${null!=P?P:""}`,I=null==m||null===(t=m.products)||void 0===t||null===(i=t[0].offer_summary)||void 0===i?void 0:i.price,A=w||I,E=y?a:l,C=null==m||null===(o=m.products)||void 0===o||null===(d=o[0].offer_summary)||void 0===d?void 0:d.availability,S=c&&null!=y?E:C,j=!h&&u[S];return(0,r.jsxs)(n.xu,{marginTop:1,children:[f&&(0,r.jsx)(n.xu,{paddingY:1,display:"flex",children:(0,r.jsx)(s.Z,{text:p,icon:"tag"})}),!!A&&x&&(0,r.jsxs)(n.xu,{display:"flex",paddingY:1,children:[(0,r.jsx)(n.xu,{marginEnd:2,children:(0,r.jsx)(n.xv,{size:"200",children:A})}),j&&S===l&&(0,r.jsx)(n.xv,{size:"200",color:"subtle",children:j})]}),b&&(0,r.jsx)(n.xu,{paddingY:1,children:(0,r.jsx)(n.xv,{size:"200",weight:"bold",children:g||_})})]})}var p=i(898781),_=i(287072),g=i(149230),m=i(350118);const f=72,x=58;function b({domain:e,maxWidth:t,onClick:i,pinId:s,sourceLinkStyle:a,sourceUrl:l}){const d=(0,p.ZP)(),[c,u]=(0,o.useState)(!1),h=(0,o.useCallback)((()=>u(!0)),[u]),b=(0,o.useCallback)((()=>u(!1)),[u]),y=(0,m.S6)()(s),v=(0,g.Z)({url:l}),P=(0,_.Z)({href:l,target:v?"blank":null,externalData:y?{pin:y}:void 0}),w=2*t/3;return w<f&&(a="icon-only"),"icon-only"===a?(0,r.jsx)(n.hU,{accessibilityLabel:d.bt("link", "link", "Website url link", undefined, true),bgColor:"white",href:l,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i(),P({event:e})},size:w>x?"sm":"xs",role:"link",rel:v?"nofollow":"none"}):(0,r.jsx)(n.iP,{href:l,fullWidth:!1,onMouseEnter:h,onMouseLeave:b,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i(),P({event:e})},rel:v?"nofollow":"none",role:"link",children:(0,r.jsxs)(n.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:{backgroundColor:c?"rgba(255, 255, 255, 1.0)":"rgba(255, 255, 255, 0.9)",borderRadius:"18px"}},display:"flex",height:32,justifyContent:"between",maxWidth:w,position:"relative",children:[(0,r.jsx)(n.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,r.jsx)(n.JO,{accessibilityLabel:d.bt("link", "link", "Website url link", undefined, true),color:"default",icon:"arrow-up-right",size:9})}),(0,r.jsx)(n.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,r.jsx)(n.xv,{color:"default",size:"200",weight:"bold",lineClamp:1,children:e})})]})})}var y=i(35495),v=i(407043),P=i(64446),w=i(53325),I=i(883561);const A=80,E="…";var C=i(841509),S=i(525199);const j={visualOverlay:{backgroundColor:"#000",opacity:w.$O}};function T(e){var t;const{logContextEvent:i}=(0,v.v)(),[s,a]=(0,o.useState)(!1),l=(0,o.useCallback)((()=>a(!0)),[a]),d=(0,o.useCallback)((()=>a(!1)),[a]),{link:c,pin:u,onClick:p}=e,_=w._z,m=w.fM,{description:f,domain:x,title:T,id:D,link:k,rich_summary:z,images:{"474x":O}={}}=u,{height:R,width:L,url:M}=null!=O?O:{},B=T||z&&z.display_name,N=(0,y.QY)(u),Z=N&&function(e,t={}){const{maxLength:i=A,suffix:n=E}=t;return e.length<=i?e:e.substring(0,i-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+n}(N,{maxLength:_/w.Xv}),F=(0,g.Z)({url:c}),U=c&&F?"nofollow":"none";return(0,r.jsxs)(n.xu,{width:_,position:"relative",onMouseEnter:l,onMouseLeave:d,children:[(0,r.jsxs)(n.xu,{position:"relative",children:[(0,r.jsx)(n.iP,{role:"link",rounding:2,href:c,onTap:({event:e})=>{e.stopPropagation(),null==p||p(e)},children:(0,r.jsxs)(n.zd,{rounding:2,height:m,width:_,wash:!0,children:[(0,r.jsx)(n.Ee,{alt:null!==(t=null!=B?B:f)&&void 0!==t?t:"",naturalHeight:null!=R?R:1,naturalWidth:null!=L?L:1,src:null!=M?M:"",fit:"cover"}),s&&(0,r.jsx)(S.Z,{visibility:"visible",children:(0,r.jsx)(C.Z,{additionalStyles:j.visualOverlay})})]})}),(0,r.jsx)(n.xu,{position:"absolute",margin:2,left:!0,right:!0,top:!0,children:(0,r.jsx)(P.Z,{pin:u,allowShoppingPriceIndicator:!0})}),s&&(0,r.jsx)(n.xu,{display:"flex",position:"absolute",margin:3,left:!0,right:!0,bottom:!0,children:k&&(0,r.jsx)(b,{pinId:D,sourceUrl:k,domain:null!=x?x:"",sourceLinkStyle:"icon-only",maxWidth:_,onClick:()=>{const{componentType:t,viewData:n,viewType:o,viewParameter:s}=e;i({event_type:12,component:t,object_id_str:D,view_type:o,view_parameter:s,view_data:n})}})})]}),(0,r.jsx)(n.iP,{rel:U,role:"link",href:c,onTap:({event:e})=>{e.stopPropagation(),null==p||p(e)},children:(0,r.jsx)(h,{pinDescription:f&&(0,I.ZP)(f.trim(),w.Z0)||"",pinTitle:B&&(0,I.ZP)(B.trim(),w.Z0)||"",richSummary:z,merchantName:Z})})]})}var D=i(669765),k=i(564194),z=i(349700),O=i(623568),R=i(692627),L=i(784590),M=i(92261);const B=M.Gg-2*M.g9,N=(e,t)=>({pinId:e,isSTL:t});function Z(e){const{logContextEvent:t}=(0,v.v)(),i=(0,p.ZP)(),{pin:o,trafficSource:s}=e,{data:a,isLoaded:l}=(0,L.Z)({name:"VisualLinkTopTaggedObjectsResource",options:N(o.id,!(!o.aggregated_pin_data||!o.aggregated_pin_data.is_shop_the_look))}),{aggregated_pin_data:d={}}=o;if(!l)return(0,r.jsx)(n.xu,{paddingY:6,children:(0,r.jsx)(n.$j,{accessibilityLabel:i.bt("Loading Shop the Look", "Loading Shop the Look", "Loading message for Shop the Look on Closeup", undefined, true),show:!0})});const c=()=>{t({event_type:101,view_type:3,component:85,element:10479,aux_data:{commerce_data:JSON.stringify({pin_is_shop_the_look:null==d?void 0:d.is_shop_the_look,pin_is_stela:null==d?void 0:d.is_stela})}}),t({event_type:8948,view_type:3,component:85,element:10479,aux_data:{closeup_navigation_type:s&&(0,O.sV)(s)?"deeplink":"click",commerce_data:JSON.stringify({pin_is_shop_the_look:null==d?void 0:d.is_shop_the_look,pin_is_stela:null==d?void 0:d.is_stela})}})};if(!a||0===a.length)return null;const u=a.map((t=>{const{id:s,objects:a,title:l}=t,d=a.filter((e=>"pin"===e.type)),u=o&&o.closeup_attribution?o.closeup_attribution:l&&a.find((e=>"user"===e.type&&e.id===l.args[0].id)),h=u&&u.username||"",p=u?u.full_name:l&&l.args[0].text,_=d.map(((t,i)=>{var n,s,a,l,d,u,h,p,_;return(0,r.jsx)(k.Z,{impressionType:"Pin",impressionAuxFields:{richTypes:(0,y.GT)(t),imageURL:null!==(n=null===(s=t.images)||void 0===s||null===(a=s["236x"])||void 0===a?void 0:a.url)&&void 0!==n?n:""},loggingId:t.id,slotIndex:i,viewData:{pin_id:o.id},viewType:3,viewParameter:(0,R.Z)({hasPin:!!e.pin,hasPinRichMetadata:!!e.pin.rich_metadata,hasPinRichMetadataProducts:!(null===(l=e.pin.rich_metadata)||void 0===l||!l.products),hasPinRichMetadataArticle:!(null===(d=e.pin.rich_metadata)||void 0===d||!d.article),hasPinRichMetadataRecipe:!(null===(u=e.pin.rich_metadata)||void 0===u||!u.recipe),hasPinStoryPinData:!!e.pin.story_pin_data}),componentType:13160,children:(0,r.jsx)(T,{link:`/pin/${t.id}/`,onClick:c,pin:t,viewData:{pin_id:o.id},viewType:3,viewParameter:(0,R.Z)({hasPin:!!e.pin,hasPinRichMetadata:!!e.pin.rich_metadata,hasPinRichMetadataProducts:!(null===(h=e.pin.rich_metadata)||void 0===h||!h.products),hasPinRichMetadataArticle:!(null===(p=e.pin.rich_metadata)||void 0===p||!p.article),hasPinRichMetadataRecipe:!(null===(_=e.pin.rich_metadata)||void 0===_||!_.recipe),hasPinStoryPinData:!!e.pin.story_pin_data}),componentType:13160})},`carousel-impression-key-${i}`)}));return(0,r.jsxs)(n.xu,{"data-test-id":"shop-the-look-unit",children:[(0,r.jsxs)(n.xu,{"data-test-id":"shop-the-look",marginBottom:4,marginTop:10,children:[(0,r.jsx)(n.X6,{size:"400",children:i.bt("Shop the Look", "Shop the look", "Shop the Look from user text on closeup", undefined, true)}),l&&l.args[0]&&(0,r.jsx)(n.xv,{children:(0,z.nk)(i.bt("from {{ pinnerName }}", "from {{ pinnerName }}", "Shows who owns the products tagged in this Pin, on closeup", undefined, true),{pinnerName:(0,r.jsx)(n.xv,{inline:!0,weight:"bold",children:(0,r.jsx)(n.rU,{href:`/${h}/`,display:"inlineBlock",underline:"hover",children:p})},"pinner")})})]}),(0,r.jsx)(D.Z,{accessibilityBackLabel:i.bt("Previous product", "Previous product", "Label for previous product in shop the look", undefined, true),accessibilityForwardLabel:i.bt("Next product", "Next product", "Label for next product in shop the look", undefined, true),columnWidth:B,gutterWidth:w.qA,items:_})]},s)}));return(0,r.jsx)(n.xu,{children:u})}},770065:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(883119),s=i(453451),r=i(407043),a=i(391254),l=i(335174),d=i(327096),c=i(785893);const u=40,h=48,p=12,_=10,g=()=>{};function m({alwaysShow:e,closeupImageSignature:t,displayHeight:i,displayWidth:m,onStlFlyoutHover:f,taggedItem:x,flyoutAnimationType:b,onAnimationComplete:y,isPinbuilder:v,isHovering:P}){var w;const{logContextEvent:I}=(0,r.v)(),[A,E]=(0,n.useState)();(0,n.useEffect)((()=>{if(x&&!v){const{pins:e}=x,i=e[0];I({event_type:120,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:x.x_percent,y:x.x_percent,product_pin_id:i.id||x.id,product_pin_image_signature:i.image_signature,pin_tag_key:x.pin_tag_key})}})}}),[x,v]);const{shopTheLook:{selectedStlItemId:C}}=(0,d.f)();let S=x.x_percent/100*m,j=x.y_percent/100*i;const{pins:T=[]}=x,D=null!==(w=T[0])&&void 0!==w?w:{},{grid_title:k,id:z,images:O,rich_summary:R}=D||{},L=(O||{})["236x"]||{},M=(((R||{}).products||[])[0]||{}).offer_summary||{},{price:B,max_price:N}=M||{},Z=D.id===C;let F;"in"===b||Z?F="stelaSlideIn .3s ease-in-out forwards":"out"===b?F="stelaSlideOut .3s ease-in-out forwards":"inOut"===b?F="stelaSlideInThenOut 3s ease-in-out forwards":"none"===b&&(F="none");const U=!(!M||!B&&!N),V=U?124:48;let H="up";const G=S<V+_,W=S+(V+_)/2>m,$=j<p+h;return G&&!$?H="right":W&&!$&&(H="left"),G&&$?(S=V/2+_,j=h+p+_):W&&$?(S=m-V/2-_,j=h+p+_):!$||G&&W||(H="down"),(0,c.jsxs)(o.xu,{"data-test-id":"stl-flyout",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),position:"relative",ref:e=>{e&&!A&&E(e)},width:1,dangerouslySetInlineStyle:{__style:{top:j,left:S}},children:[(0,c.jsx)(a.Z,{unsafeCSS:(0,l.Z)()}),(v&&P||!v)&&(0,c.jsx)(o.mh,{children:(0,c.jsx)(o.xu,{onAnimationEnd:()=>{y&&"inOut"===b&&y()},dangerouslySetInlineStyle:{__style:e?{opacity:1}:{animation:F,opacity:"none"===F?0:void 0}},children:(0,c.jsx)(o.iP,{role:"link",href:v?"":`/pin/${z}`,onTap:v?g:()=>{if(!v){const{pins:e}=x,i=e[0];I({event_type:101,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:x.x_percent,y:x.x_percent,product_pin_id:i.id||x.id,product_pin_image_signature:i.image_signature,pin_tag_key:x.pin_tag_key})}})}},children:(0,c.jsx)(o.J2,{anchor:A,idealDirection:H,onDismiss:()=>{},positionRelativeToAnchor:!1,showCaret:!0,size:"flexible",children:(0,c.jsxs)(o.xu,{color:"default",rounding:3,height:h,width:V,justifyContent:"center",alignItems:"center",alignContent:"center",display:"flex",children:[(0,c.jsx)(o.xu,{rounding:3,height:u,width:u,minWidth:u,overflow:"hidden",display:"flex",direction:"row",marginStart:U?1:0,children:(0,c.jsx)(o.zd,{wash:!0,height:u,width:u,children:(0,c.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:L.url||""})})}),U&&(0,c.jsxs)(o.xu,{display:"flex",direction:"column",flex:"grow",alignContent:"center",justifyContent:"center",marginStart:1,children:[(0,c.jsx)(s.Z,{showSalesPrice:!0,productDetails:M,type:"text"}),k&&(0,c.jsx)(o.xv,{size:"100",lineClamp:1,children:k})]})]})})})})})]})}},424624:(e,t,i)=>{i.d(t,{Z:()=>s,n:()=>r});var n=i(875108);function o({pinTagIds:e=[],pinTags:t,taggedObjects:i},o){return e.filter((function(e){const i=(0,n.Z)(t[e])&&"deleted"!==t[e].status;return o?i:!i})).map((e=>t[e].taggedObjectIds.map((t=>{var n;return{taggedObjectId:t,pinTagId:e,status:null===(n=i[t])||void 0===n?void 0:n.status}})))).reduce(((e,t)=>[...e,...t]),[])}function s(e){return o(e,!0)}function r(e){return o(e,!1).filter((e=>["saved","created"].includes(e.status)))}},807592:(e,t,i)=>{function n(e){const{max_price:t,min_price:i,price:n}=e;return t&&i?`${i}-${t}`:n}i.d(t,{Z:()=>n})},247371:(e,t,i)=>{i.r(t),i.d(t,{SendButton:()=>u,default:()=>h});var n=i(790904),o=i(883119),s=i(215292),r=i(785893);const a={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};function l({accessibilityLabel:e,buttonColor:t,buttonText:i,handleClick:n,icon:l}){return(0,r.jsx)(s.q,{children:({active:s,focused:d,hovered:c,onBlur:u,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m})=>{let f={borderRadius:24};if(c){const e="primary"===t?"rgb(216,0,33)":"rgb(226, 226, 226)";f={...f,backgroundColor:e}}if(s){const e="primary"===t?"rgb(207,0,31)":"rgb(218, 218, 218)";f={...f,backgroundColor:e}}return d&&(f={...f,...a}),(0,r.jsx)("button",{"aria-label":e,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"},onBlur:u,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m,onClick:n,children:(0,r.jsx)(o.xu,{color:t,rounding:2,dangerouslySetInlineStyle:{__style:f},children:(0,r.jsxs)(o.xu,{display:"flex",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},children:["share"===l&&(0,r.jsxs)(o.xu,{children:[(0,r.jsx)(o.JO,{accessibilityLabel:"",icon:"share",color:"default",size:18}),(0,r.jsx)(o.xu,{paddingX:3})]}),(0,r.jsx)(o.xv,{align:"center",color:"primary"===t?"light":"default",weight:"bold",children:i})]})})})}})}var d=i(898781),c=i(2396);const u=({buttonType:e,iconColor:t,handleSendShareFlyoutButtonClick:i,iconOnly:o,buttonText:s,tabIndex:a=0})=>{const c=(0,d.ZP)(),u="icon"===e,h={accessibilityLabel:c.bt("Send", "Send", "Accessible label for button to send this pin", undefined, true),handleClick:i,tabIndex:a};return u?(0,r.jsx)(n.Z,{...h,testId:"closeup-share-button",icon:"share",iconOnly:o,iconColor:t,buttonText:s}):(0,r.jsx)(l,{...h,icon:"share",buttonColor:"secondary",buttonText:c.bt("Send", "Send", "Text for button to send this pin", undefined, true)})},h=(0,c.Z)(u)},669765:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(883119),s=i(785893);function r({accessibilityLabel:e,arrowOnly:t=!1,direction:i,isOpaque:n,marginEnd:r,marginStart:a,padding:l,onClick:d,show:c}){const u="back"===i;return(0,s.jsx)(o.xu,{position:"absolute",left:u,right:!u,top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundImage:n?void 0:`linear-gradient(to ${u?"left":"right"}, transparent 0%, #fff 90%)`,left:null!=l?l:void 0}},marginEnd:r,marginStart:a,children:(0,s.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:c&&(0,s.jsx)(o.hU,{accessibilityLabel:e,bgColor:t?"transparent":"white",icon:u?"arrow-back":"arrow-forward",iconColor:"darkGray",onClick:d,size:"lg"})})})}var a=i(251183);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(...e){super(...e),l(this,"state",{hasLoggedScroll:!1,showBack:!1,showForward:!1}),l(this,"saveScrollBarRef",(e=>{this.scrollbar=e})),l(this,"refreshArrows",(()=>{const{showBack:e,showForward:t}=this.state;if(this.scrollbar){const{offsetWidth:i,scrollLeft:n,scrollWidth:o}=this.scrollbar,s=n>0,r=n+i<o;s===e&&r===t||this.setState({showBack:s,showForward:r})}})),l(this,"scroll",(e=>{const{logScroll:t}=this.props;this.scrollbar&&0!==e&&(t&&!this.state.hasLoggedScroll&&(t(),this.setState({hasLoggedScroll:!0})),this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=(0,a.Z)(this.scrollbar,e,0,{onAnimationComplete:()=>{this.refreshArrows(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())})),l(this,"handleResizeOrScroll",(()=>this.refreshArrows())),l(this,"handleBackArrowClick",(()=>{this.scrollbar&&this.scroll(-150)})),l(this,"handleForwardArrowClick",(()=>{this.scrollbar&&this.scroll(150)}))}componentDidMount(){this.props.hideArrows||(window.addEventListener("resize",this.handleResizeOrScroll),this.refreshArrows())}componentWillUnmount(){this.props.hideArrows||window.removeEventListener("resize",this.handleResizeOrScroll)}render(){const{accessibilityBackLabel:e,accessibilityForwardLabel:t,arrowOnly:i=!1,columnWidth:n,gutterWidth:a,hideScrollbar:l,items:d,marginEnd:c,marginStart:u,paddingY:h}=this.props,{showBack:p,showForward:_}=this.state;return(0,s.jsxs)("div",{className:"ShopCarousel-OuterScrollContainer",style:{position:"relative",width:n,background:"white"},children:[(0,s.jsx)("div",{onScroll:this.handleResizeOrScroll,id:"InnerScrollContainer",ref:this.saveScrollBarRef,className:"ShopCarousel-InnerScrollContainer",style:{__style:{overflowX:l?"hidden":"auto",cursor:"default"}},children:(0,s.jsx)(o.xu,{display:"flex",position:"relative",paddingY:h,children:d.map(((e,t)=>{const i={__style:{marginRight:t===d.length-1?0:a}};return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:i,children:e},t)}))})}),p&&(0,s.jsx)(r,{accessibilityLabel:e,arrowOnly:i,direction:"back",isOpaque:!0,marginStart:u,onClick:this.handleBackArrowClick,show:!0}),_&&(0,s.jsx)(r,{accessibilityLabel:t,arrowOnly:i,direction:"forward",isOpaque:!0,onClick:this.handleForwardArrowClick,marginEnd:c,show:!0})]})}}const c=d},630767:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(58545),s=i(969690),r=i(383894),a=i(69119),l=i(883119),d=i(785893);const c=({children:e,description:t,error:i,id:o,label:s,required:r,onLabelTouch:a})=>(0,d.jsxs)(n.Fragment,{children:[(s||r)&&(0,d.jsx)(l.__,{htmlFor:o,children:(0,d.jsx)(l.xu,{marginBottom:1,children:(0,d.jsxs)(l.xv,{color:i?"error":"default",children:[s,r&&(0,d.jsx)(l.xv,{color:"error",inline:!0,weight:"bold",children:(0,d.jsx)("span",{"aria-hidden":"true",children:"*"})})]})})}),e,(!!i||!!t)&&(0,d.jsx)(l.__,{htmlFor:o,children:(0,d.jsx)(l.xu,{marginTop:1,children:a?(0,d.jsx)(l.iP,{onTap:a,children:(0,d.jsx)(l.xv,{color:i?"error":"default",size:"200",children:i||t})}):(0,d.jsx)(l.xv,{color:i?"error":"default",size:"200",children:i||t})})})]});function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends n.Component{constructor(...e){super(...e),u(this,"setTextFieldInputRef",(e=>{const{forwardedRef:t}=this.props;t(e||null)})),u(this,"handleBlur",(({event:e})=>{const{onBlur:t}=this.props;t&&t(e)})),u(this,"handleChange",(({event:e})=>{const{onChange:t}=this.props;t&&t(e)})),u(this,"handleFocus",(({event:e})=>{const{onFocus:t}=this.props;t&&t(e)})),u(this,"handleKeyDown",(({event:e})=>{const{onKeyDown:t}=this.props;t&&t(e)}))}render(){const{accessibilityLabelIcon:e,disabled:t,icon:i,id:n,isRTL:o=!1,onClick:s,placeholder:r,value:a}=this.props;return(0,d.jsx)(l.iP,{onTap:s,children:(0,d.jsxs)(l.xu,{alignItems:"center",column:12,flex:"grow",display:"flex",position:"relative",children:[(0,d.jsx)(l.xu,{width:"100%",children:(0,d.jsx)(l.nv,{disabled:t,id:n,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:r,ref:this.setTextFieldInputRef,size:"lg",value:a})}),(0,d.jsx)(l.xu,{position:"absolute",right:!o,left:o,children:(0,d.jsx)(l.xu,{position:"relative",marginEnd:4,children:(0,d.jsx)(l.JO,{accessibilityLabel:e,color:"default",icon:"clock"===i||"arrow-down"===i?i:"calendar",inline:!0})})})]})})}}const p=(0,n.forwardRef)(((e,t)=>(0,d.jsx)(h,{...e,forwardedRef:t})));var _=i(898781),g=i(780280);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends n.Component{constructor(...e){super(...e),m(this,"state",{showFlyout:!1}),m(this,"setTimeFieldRef",(e=>{this.timeFieldRef=e})),m(this,"handleChange",((e,t)=>{const{onChange:i}=this.props;this.handleHideFlyout(),i({event:e,value:t})})),m(this,"handleShowFlyout",(()=>{this.setState({showFlyout:!0})})),m(this,"handleHideFlyout",(()=>{this.setState({showFlyout:!1})}))}render(){const{error:e,id:t,idealDirection:i,interval:n,minTime:r,maxTime:a,placeholder:u,value:h,disabled:_=!1}=this.props,{showFlyout:m}=this.state,f=[],x=(0,s.Z)(a,r)/n;for(let s=0;s<x;s+=1){const e=(0,o.Z)(r,s*n);f.push(e)}return(0,d.jsx)(c,{error:e,id:t,children:(0,d.jsx)(g.LC,{children:e=>(0,d.jsxs)(l.xu,{position:"relative",children:[(0,d.jsx)(p,{disabled:_,accessibilityLabelIcon:this.props.i18n.bt("Select a time", "Select a time", "timeField.TextFieldWrapper.accessibilityLabel.clockIcon", undefined, true),id:t,ref:this.setTimeFieldRef,onFocus:this.handleShowFlyout,placeholder:u,isRTL:e.isRTL,value:h?h.toLocaleTimeString([e.locale],{hour:"2-digit",minute:"2-digit"}):"",icon:"clock"}),m&&(0,d.jsx)(l.Lt,{id:"time-field-dropdown",anchor:this.timeFieldRef,idealDirection:i,onDismiss:this.handleHideFlyout,zIndex:new l.Ry(1e3),isWithinFixedContainer:!0,children:f.map((t=>{const i=t.toLocaleTimeString([e.locale],{hour:"2-digit",minute:"2-digit"});return(0,d.jsx)(l.Lt.Item,{onSelect:({event:e})=>this.handleChange(e,t),option:{label:i,value:i},children:(0,d.jsx)(l.xv,{color:"default",size:"200",weight:"bold",children:i})},t.getTime())}))})]})})})}}function x(e){const t=(0,_.ZP)();return(0,d.jsx)(f,{...e,i18n:t})}m(f,"defaultProps",{interval:30,minTime:(0,a.Z)(new Date),maxTime:(0,r.Z)(new Date)})},157796:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r({color:e="red",duration:t,finalProgress:i,shape:r="pill"}){const[a,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=setTimeout((()=>{l(!0)}),0);return()=>{clearTimeout(e)}}),[]);const d="pill"===r;return(0,s.jsx)(o.xu,{color:e,height:d?8:6,rounding:d?"pill":2,width:`${i}%`,dangerouslySetInlineStyle:{__style:{transform:d?`translateX(${a?"-5px":"-100%"})`:`scaleX(${a?1:0})`,transformOrigin:"left",transitionDuration:`${t}ms`,transitionTimingFunction:"ease-in"}}})}},299487:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(366284),o=i(56641);let s;const r={},a="https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",l="https://assets.pinterest.com/ext/Pinterest_Firefox.xpi",d="https://safari-extensions.apple.com/details/?id=com.pinterest.extension-HWZFLG9PNK",c="https://about.pinterest.com/assets/ext/Pinterest-IE-0.0.4.exe",u="https://addons.opera.com/en/extensions/details/pinterest-8/?display=en",h="https://microsoftedge.microsoft.com/addons/detail/pinterest-save-button/bkgoflemacdadndiohhdnphcmdhacabg/",p={[n.oi.CHROME]:{url:a,newWindow:!0},[n.oi.FIREFOX]:{url:l,newWindow:!1},[n.oi.SAFARI]:{url:d,newWindow:!0},[n.oi.IE]:{url:c,newWindow:!1},[n.oi.OPERA]:{url:u,newWindow:!0},[n.oi.EDGE]:{url:h,newWindow:!0}};r.handleExtensionInstall=(e,t)=>{const i=(0,n.u$)(e),s=function(e){return e?p[e].url:void 0}(i);s&&((0,o.Z)(s,function(e){return e?p[e].newWindow:void 0}(i)),t())},r.isExtensionInstalled=()=>s,r.isBrowserExtensionSupported=e=>(0,n.i7)(e)||(0,n.vU)(e)||(0,n.un)(e),r.extensionReady=(e,t=100)=>new Promise((i=>{setTimeout((()=>{document.body&&(s=document.body.hasAttribute("data-pinterest-extension-installed"),r.isBrowserExtensionSupported(e)||(s=!0),i(s))}),t)})),r.initBrowserExtension=()=>{Promise.resolve().then(i.bind(i,422722)).then((({default:e})=>{e.logToServer(e.SERVER_LOG_TYPE.BROWSER_EXTENSION,e.HTTP_METHOD.POST,{browser_extension_installed:s})}))};const _=r},35495:(e,t,i)=>{i.d(t,{GT:()=>_,Gy:()=>r,Kl:()=>x,QY:()=>p,RR:()=>l,SP:()=>c,Sn:()=>f,Zs:()=>m,bA:()=>u,fz:()=>h,i8:()=>a,nn:()=>s,qN:()=>d});var n=i(834911),o=i(835209);const s=e=>!!e&&(e.shopping_flags||[]).includes(2),r=e=>{var t,i;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(t=null===(i=e.rich_metadata)||void 0===i?void 0:i.products)&&void 0!==t?t:[]).length>0},a=e=>{var t;return null===(t=e.aggregated_pin_data)||void 0===t?void 0:t.is_shop_the_look},l=e=>{var t,i;return null===(t=e.rich_summary)||void 0===t||null===(i=t.aggregate_rating)||void 0===i?void 0:i.rating_value},d=e=>e.is_oos_product,c=e=>e.is_stale_product,u=e=>d(e)||c(e),h=e=>{var t;const i=(0,o.Z)({richPinData:e.rich_summary||{}});return null==i||null===(t=i.brand)||void 0===t?void 0:t.name},p=e=>{var t,i,n,o;const s=null===(t=e.link_domain)||void 0===t||null===(i=t.official_user)||void 0===i?void 0:i.full_name;if(s)return s;const r=null===(n=e.rich_summary)||void 0===n?void 0:n.site_name;if(r)return r;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const a=null===(o=e.via_pinner)||void 0===o?void 0:o.full_name;return e.is_repin&&a?a:void 0},_=e=>{if(e){const t=e.shopping_flags||[];return[...t,...!t.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images?[10]:[]]}return[]},g=e=>{const t=(null==e?void 0:e.variants)||[],i=(null==e?void 0:e.dimension_metadata)||[];return Array.isArray(t)&&Array.isArray(i)?i.reduce(((e,i)=>i.name&&Array.isArray(i.values)?e+i.values.filter((e=>t.find((t=>{var n,o;return(null===(n=t.dimensions)||void 0===n?void 0:n[null!==(o=i.name)&&void 0!==o?o:""])===e})))).length:e),0):0};function m(e,t){var i,o,s;const r=_(e);let a={...null==t||null===(i=t.contextLogData)||void 0===i?void 0:i.commerce_data};if(r.includes(2)&&(a={...a,pin_is_shop_the_look:!0}),r.includes(1)&&(a={...a,is_available:!0}),r.includes(5)&&(a={...a,is_product_pin_v2:!0}),r.includes(6)&&(a={...a,is_rich_product_pin:!0}),r.includes(10)&&(a={...a,is_organic_product_carousel:!0}),e.is_eligible_for_pdp_plus||e.is_eligible_for_pdp||e.is_oos_product||e.is_stale_product){e.is_oos_product?a={...a,pin_show_pdp_oos:!0}:e.is_stale_product?a={...a,pin_show_pdp_stale:!0}:e.is_eligible_for_pdp&&(a={...a,pin_show_pdp:!0});const i=(0,n.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary});if(null!=t&&t.isPdpPlus){var l,d,c,u,h,p,m,f,x;a={...a,is_pdpplus:!0};const t=null===(l=e.rich_metadata)||void 0===l||null===(d=l.products)||void 0===d?void 0:d[0],n=null==t||null===(c=t.shipping_info)||void 0===c?void 0:c.free_shipping_price,o=null==t||null===(u=t.shipping_info)||void 0===u?void 0:u.free_shipping_value,s=(null==t||null===(h=t.variant_set)||void 0===h||null===(p=h.variants)||void 0===p?void 0:p.length)||0,r=g(null==t?void 0:t.variant_set),_=(null==t||null===(m=t.variant_set)||void 0===m||null===(f=m.dimension_metadata)||void 0===f?void 0:f.length)||0,y=null==t||null===(x=t.brand)||void 0===x?void 0:x.signature;var b;if(y&&(a={...a,brand_signature:y}),i)a={...a,carousel_image_count:null===(b=i.carousel_slots)||void 0===b?void 0:b.length};n&&(a={...a,free_shipping_price:n}),o&&(a={...a,free_shipping_value:o}),s&&(a={...a,num_variants:s}),r&&(a={...a,valid_dimension_option_count:r}),_&&(a={...a,total_dimension_option_count:_})}else if(i){var y;a={...a,image_count:null===(y=i.carousel_slots)||void 0===y?void 0:y.length},a={...a,image_index:i.index}}}const v=null===(o=e.rich_summary)||void 0===o||null===(s=o.products)||void 0===s?void 0:s[0];null!=v&&v.item_id&&(a={...a,item_id:v.item_id}),null!=v&&v.item_set_id&&(a={...a,item_set_id:v.item_set_id});return(e.aggregated_pin_data||{}).is_shop_the_look&&(a={...a,pin_is_shop_the_look:!0}),e.story_pin_data&&(a={...a,story_pin_id:e.story_pin_data.id}),a}function f(e){const t=JSON.stringify(e);return"{}"!==t?{commerce_data:t}:null}const x=(e,t)=>e?f(m(e,t)):null},27255:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},155378:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var n=i(667294),o=i(883119),s=i(172071),r=i(214494),a=i(407043),l=i(319915),d=i(499128),c=i(898781),u=i(349700),h=i(784590),p=i(947599),_=i(80816),g=i(966113),m=i(941646),f=i(343341),x=i(50286),b=i(19121),y=i(379764),v=i(785893);const P=(0,n.lazy)((()=>Promise.all([i.e(80582),i.e(13047)]).then(i.bind(i,380582)))),w=new o.H3([y.Z]),I=3e3;function A({handleComplete:e,isNag:t}){const i=(0,x.ZP)(),y=(0,b.Z)(),{logContextEvent:A}=(0,a.v)(),E=(0,c.ZP)(),[C,S]=(0,n.useState)(!0),[j,T]=(0,n.useState)(!1),{showOneToast:D}=(0,f.F9)(),k=(0,h.Z)({name:"UserResource",options:{user_id:y.id||""}}),z="desktop"===i;(0,n.useEffect)((()=>{A({event_type:13,component:13716,view_type:474})}),[]);const O=(0,v.jsxs)(o.xv,{align:z?"start":"center",children:[E.bt("We use cookies to deliver personalised ads and experiences, and to analyse traffic on our site.", "We use cookies to deliver personalized ads and experiences, and to analyze traffic on our site.", "homeFeed.cookiesConsentBanner.bannerText", undefined, true)," ",(0,u.nk)(E.bt("Read our {{ cookiePolicyLink }} for more information.", "Read our {{ cookiePolicyLink }} for more information.", "homeFeed.cookiesConsentBanner.readCookiePolicyText", undefined, true),{cookiePolicyLink:(0,v.jsx)(o.xv,{inline:!0,weight:"bold",children:(0,v.jsx)(o.rU,{href:g._I,display:"inlineBlock",target:"blank",underline:"hover",children:E.bt("Cookie Policy", "cookie policy", "homeFeed.cookiesConsentBanner.cookiePolicyLink", undefined, true)},"cookie-policy-link")})})]}),R=(0,v.jsxs)(o.kC,{direction:z?"row":"column",gap:z?{row:2,column:0}:{column:4,row:0},children:[(0,v.jsx)(o.zx,{fullWidth:!0,onClick:()=>{A({event_type:101,component:13716,view_type:474,element:11984}),s.Z.increment("webapp.updateCookiePreferences",.1,{allow_analytic_cookies:"true",allow_marketing_cookies:"true",allow_personalization_cookies:"true",location:"app_packages_CookieConsent_Banner_handleAcceptAll"}),r.Z.create("UserSettingsResource",{allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0,surface_tag:_.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then((()=>{k.refresh(),D((({hideToast:e})=>(0,v.jsx)(d.ZP,{duration:I,onHide:e,text:E.bt("We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)}))),e()}))},size:z?"lg":"md",text:E.bt("Accept all", "Accept all", "navFooter.cookieConsentBanner.acceptAllButton", undefined, true)}),(0,v.jsx)(o.zx,{fullWidth:!0,onClick:()=>{A({event_type:101,component:13716,view_type:474,element:11985}),s.Z.increment("webapp.updateCookiePreferences",.1,{allow_analytic_cookies:"false",allow_marketing_cookies:"false",allow_personalization_cookies:"false",location:"app_common_react_components_CookieConsent_Banner_handleRejectAll"}),r.Z.create("UserSettingsResource",{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1,surface_tag:_.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then((()=>{k.refresh(),D((({hideToast:e})=>(0,v.jsx)(d.ZP,{duration:I,onHide:e,text:E.bt("We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)}))),e()}))},size:z?"lg":"md",text:E.bt("Reject all", "Reject all", "navFooter.cookieConsentBanner.rejectAllButton", undefined, true)}),(0,v.jsx)(o.zx,{fullWidth:!0,onClick:()=>{A({event_type:101,component:13716,view_type:474,element:11986}),T(!0),z||S(!1)},size:z?"lg":"md",text:E.bt("Let me choose", "Let me choose", "navFooter.cookieConsentBanner.manageCookiesButton", undefined, true)})]});return(0,v.jsxs)(n.Fragment,{children:[C&&(z?(0,v.jsx)(o.xu,{paddingX:2,smPaddingX:6,paddingY:2,smPaddingY:t?2:0,children:(0,v.jsxs)(o.xu,{alignItems:"center",borderStyle:"sm","data-test-id":"cookie-consent-banner",display:"flex",direction:"column",smDirection:"row",justifyContent:"between",marginBottom:t?0:6,overflow:"hidden",padding:t?3:6,position:"relative",rounding:4,children:[(0,v.jsx)(o.xu,{display:"flex",marginEnd:0,smMarginEnd:7,children:O}),(0,v.jsx)(o.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"center",marginTop:4,smMarginTop:0,children:R})]})}):(0,v.jsx)(o.mh,{zIndex:w,children:(0,v.jsx)(o.xu,{bottom:!0,marginBottom:2,position:"fixed",width:"100%",children:(0,v.jsxs)(o.xu,{alignItems:"center",borderStyle:"shadow",color:"default",direction:"column",display:"flex",marginEnd:"auto",marginStart:"auto",padding:6,rounding:6,width:"95%",children:[O,(0,v.jsx)(o.xu,{marginTop:4,minWidth:240,children:R})]})})})),j&&(0,v.jsx)(l.Z,{name:"SafeSuspense_CookieConsentBanner_SettingsModal",children:(0,v.jsx)(p.Z,{children:(0,v.jsx)(m.Z,{id:"settings-modal",children:(0,v.jsx)(P,{dismissIcon:"cancel",onClose:()=>T(!1),handleComplete:e})})})})]})}},199324:(e,t,i)=>{i.d(t,{Z:()=>n});const n=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},918301:(e,t,i)=>{i.d(t,{CB:()=>p,y9:()=>h});var n=i(667294),o=i(425288),s=i(883119),r=i(186656),a=i(121151),l=i(898781),d=i(785893);const c=({onConfirm:e})=>{const t=(0,l.ZP)(),[i,o]=(0,n.useState)(!1),c=()=>{o(!0),(0,r.Z)({url:"/v3/users/email/verify/resend/",method:"POST"})};return(0,d.jsx)(a.ZP,{accessibilityModalLabel:t.bt("Verify your email", "Verify your email", "Accessible label for email verification being required", undefined, true),onDismiss:e,heading:t.bt("Verify your email", "Verify your email", "Accessible label for email verification being required", undefined, true),footer:(0,d.jsxs)(s.kC,{justifyContent:"end",gap:{row:2,column:0},children:[i?(0,d.jsx)(s.zx,{fullWidth:!0,size:"lg",color:"gray",text:t.bt("Email sent", "Email sent", "Button text for verification email being sent", undefined, true),disabled:i,onClick:c}):(0,d.jsx)(s.zx,{fullWidth:!0,size:"lg",color:"gray",text:t.bt("Resend email", "Resend email", "Button text for resending email verification email", undefined, true),disabled:i,onClick:c}),(0,d.jsx)(s.zx,{fullWidth:!0,size:"lg",color:"red",text:t.bt("OK", "Got it", "Button text for acknowledging email verificaiton is required", undefined, true),onClick:e})]}),role:"alertdialog",children:(0,d.jsx)(s.xu,{padding:8,children:(0,d.jsx)(s.xv,{align:"center",size:"300",children:t.bt("Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.", "Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.", "Inform users that they need to verify their email to keep their account secure and continue using Pinterest", undefined, true)})})})},{Provider:u,useHook:h}=(0,o.Z)("EmailVerificationReminderModal");function p({children:e}){const[t,i]=(0,n.useState)(!1),o=(0,n.useMemo)((()=>({showEmailVerificationReminderModal:()=>{i(!0)}})),[]);return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(u,{value:o,children:e}),t&&(0,d.jsx)(c,{onConfirm:()=>{i(!1)}})]})}},403368:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(883119),s=i(898781),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l=16,d=32;class c extends n.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"handleMouseEnter",(e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)})),a(this,"handleMouseLeave",(e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}))}render(){const{forwardedRef:e,icon:t,onClick:i,onMouseDown:n,onMouseUp:s,selected:a,style:c,text:u,x:h,y:p,zIndex:_,backdropDiameter:g=d,dotDiameter:m=l}=this.props,{isHovering:f}=this.state,x=f?g+4:g,b={zIndex:_,position:"absolute",top:p-x/2,left:h-x/2,outline:"none"},y={backgroundColor:"rgba(0, 0, 0, 0.1)",width:x,height:x,border:"none",borderRadius:x,cursor:i?"pointer":"default"};return(0,r.jsx)("div",{"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:s,ref:e,role:"button",style:b,tabIndex:"0","aria-label":this.props.i18n.bt("Search for this item", "Search this item", "flashlight.dot.a11ylabel", undefined, true),children:(0,r.jsx)("div",{"data-test-id":"flashlight-dot-style",style:{...y,...c},children:(0,r.jsxs)(o.xu,{alignItems:"center",borderStyle:"none",color:"default",display:"flex",height:m,justifyContent:"center",position:"absolute",padding:0,width:m,dangerouslySetInlineStyle:{__style:{boxShadow:a?"0 0 0 3px #e60023":"none",borderRadius:m,top:(x-m)/2,left:(x-m)/2}},children:[!!u&&(0,r.jsx)(o.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:u}),t&&(0,r.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Tag anchor", "Tag anchor", "accessibility label for an anchor for an object in a pin", undefined, true),color:"error",icon:t,size:m/2,inline:!0})]})})})}}const u=(0,n.forwardRef)(((e,t)=>{const i=(0,s.ZP)();return(0,r.jsx)(c,{...e,forwardedRef:t,i18n:i})}))},558068:(e,t,i)=>{i.d(t,{Hv:()=>l,aX:()=>u,nK:()=>h});var n=i(667294),o=i(616550),s=i(425288),r=i(785893);const{Provider:a,useHook:l}=(0,s.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),d=e=>e&&e.pathname?e.pathname+(e.search||""):"";function c(e,t){var i;const n={action:t.type,location:t.location,match:t.match};if(t.location===(null===(i=e.current)||void 0===i?void 0:i.location))return e;switch(t.type){case"POP":return e.forward.length>0&&d(e.forward[0].location)===d(n.location)?{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous}:{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:n,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:n};default:return e}}function u(){const{current:e,previous:t}=l();return(0,n.useMemo)((()=>e?t.concat(e):t),[e,t])}function h({children:e}){const t=(0,o.useHistory)(),i=(0,o.useLocation)(),s=(0,o.useRouteMatch)(),l={forward:[],current:{action:t.action,location:i,match:s},previous:[]},[d,u]=(0,n.useReducer)(c,l);return(0,n.useEffect)((()=>{const{action:e}=t;u({type:e,location:i,match:s})}),[i]),(0,r.jsx)(a,{value:d,children:e})}},391254:(e,t,i)=>{i.d(t,{Z:()=>s});i(441143);var n=i(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function s(e){const{css:t,unsafeCSS:i,...s}=e,r=String(t||"")||i||"";return!!r?(0,n.jsx)("style",{...s,dangerouslySetInnerHTML:{__html:String(o.factory(r))}}):null}},966224:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);function r({accessibilityLabel:e,fixedPosition:t,rounding:i}){const r=(0,o.ZP)();return(0,s.jsxs)(n.xu,{children:[(0,s.jsx)(n.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new n.Ry(101),children:(0,s.jsx)(n.$j,{accessibilityLabel:e||r.bt("Loading", "Loading", "Label for loading spinner", undefined, true),show:!0})}),(0,s.jsx)(n.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new n.Ry(100),rounding:i})]})}},583375:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(785893);function s({fillColor:e,size:t,noCircle:i}){const s=(0,n.ZP)();return(0,o.jsxs)("svg",{height:t,style:{display:"block"},viewBox:i?"3 3 70 70":"-3 -3 82 82",width:t,children:[(0,o.jsx)("title",{children:s.bt("Pinterest logo", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true)}),i?null:(0,o.jsx)("circle",{cx:"38",cy:"38",fill:e?"transparent":"white",r:"40"}),(0,o.jsx)("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:null!=e?e:"#e60023",fillRule:"evenodd"})]})}},241244:(e,t,i)=>{i.d(t,{N:()=>r,Z:()=>s});var n=i(883119),o=i(785893);function s({children:e,fullWidth:t}){return(0,o.jsx)(n.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},children:e})}function r({children:e,enabled:t}){return t?(0,o.jsx)(s,{children:e}):e}},335174:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(483205);const o=e=>`@keyframes shopButtonSlideInThenOut {\n    0% {\n      width: 0px;\n    }\n\n    15% {\n      width: ${e+n.I6}px;\n    }\n\n    85% {\n      width: ${e+n.I6}px;\n    }\n\n    100% {\n      width: 0px;\n    }\n  }\n\n  @keyframes shopButtonSlideIn {\n    0% {\n      width: 48px;\n    }\n\n    100% {\n      width: ${e+n.Nv}px;\n    }\n  }\n\n  @keyframes shopButtonSlideOut {\n    0% {\n      width: ${e+n.Nv}px;\n    }\n\n    100% {\n      width: 48px;\n    }\n  }\n\n  @keyframes revealShopText {\n    from {\n      clip-path: inset(0 100% 0 0);\n    }\n    to {\n      clip-path: inset(0 0 0 0);\n    }\n  }\n\n\n  @keyframes stelaSlideIn {\n    0% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 1;\n    }\n}\n\n@keyframes stelaSlideOut {\n    0% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n@keyframes stelaSlideInThenOut {\n    0% {\n        opacity: 0;\n    }\n\n    15% {\n        opacity: 0;\n    }\n\n    25% {\n        opacity: 1;\n    }\n\n    50% {\n        opacity: 1;\n    }\n\n    75% {\n        opacity: 1;\n    }\n\n    85% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n  `},325016:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(883119),s=i(112690),r=i(391254),a=i(241244),l=i(483205),d=i(335174),c=i(785893);function u({alwaysShow:e,contextLogData:t,enablePointerEvents:i=!0,imageSignature:u,isSelected:h,onStelaDotAnimationComplete:p,stelaDotAnimationType:_}){const[g,m]=(0,n.useState)(!1),f=(0,s.Z)();(0,n.useEffect)((()=>{g||m(!0)}),[]);let x;(0,n.useEffect)((()=>{f({event_type:120,view_type:3,aux_data:{...t},...t})}),[]),"in"===_?x="stelaSlideIn .3s ease-in-out forwards":"out"===_?x="stelaSlideOut .3s ease-in-out forwards":"inOut"===_?x="stelaSlideInThenOut 3s ease-in-out forwards":"none"===_&&(x="none");const b=e?"black":"white",y=e?{opacity:1}:{animation:x,opacity:"none"===x?0:void 0};return(0,c.jsx)(n.Fragment,{children:(0,c.jsxs)(a.N,{enabled:i,children:[(0,c.jsx)(r.Z,{unsafeCSS:(0,d.Z)()}),(0,c.jsx)(o.xu,{"data-test-id":"closeup-stela-dot",height:l.b9,width:l.b9,onAnimationEnd:()=>{p&&"inOut"===_&&p()},dangerouslySetInlineStyle:{__style:y},children:(0,c.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("g",{filter:"url(#filter0_d)",children:(0,c.jsx)("circle",{cx:"18",cy:"18",fill:h?b:"white",r:"8"})}),(0,c.jsx)("defs",{children:(0,c.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,c.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,c.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,c.jsx)("feOffset",{}),(0,c.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,c.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,c.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,c.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}},483205:(e,t,i)=>{i.d(t,{I6:()=>o,Nv:()=>n,RZ:()=>s,ZG:()=>a,b9:()=>r});const n=44,o=24,s=446,r=36,a=20},941646:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{children:t,display:i,id:s}=e;return(0,o.jsx)(n.xu,{"data-test-id":s,display:i,children:t})}},55259:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(619937),o=i(794230);const s={campaignFilter:"all",adGroupFilter:"all",adFilter:"all"},r=e=>{let t={};return e&&(t={objectiveTypes:[e]}),t},a={overview:()=>"/",reporting:e=>{const t=e.objectiveType||null;delete e.objectiveType;const i={...e,...r(t)};return(0,o.Z)("/reporting/campaigns/",i)},reportingAdGroup:e=>{const{campaignId:t,objectiveType:i,showAllEntities:n,adGroupId:a,message:l}=e,d=a?{adGroupIds:[a]}:{},c={campaignIds:[t],...n?s:{},...r(i),...d,message:l};return(0,o.Z)("/reporting/adgroups/",c)},campaign:e=>{const{id:t,objectiveType:i}=e;return(0,o.Z)("/reporting/adgroups/",{campaignIds:[t],...r(i)})},editCampaign:e=>e.isAutomatedCampaign?a.editAutomated({campaignId:e.id,view:"campaign"}):a.editV2({campaignId:e.id,view:"campaign"}),adgroup:e=>{const{id:t,objectiveType:i,showAllEntities:n,pinPromotionId:a,campaignId:l}=e;if("TEMPORARY_SHOPPING"===i||"CATALOG_SALES"===i)return(0,o.Z)("/reporting/productgroups/",{adGroupIds:[t],...r(i)});{const e=n?s:{},d=l?{campaignIds:[l]}:{},c=a?{pinPromotionIds:[a]}:{};return(0,o.Z)("/reporting/ads/",{adGroupIds:[t],...r(i),...e,...c,...d})}},editAdGroup:e=>e.isAutomatedCampaign?a.editAutomated({campaignId:e.id,view:"campaign"}):a.editV2({adGroupId:e.id,view:"adgroup"}),pinPromotion:e=>{const{id:t,adFilter:i}=e,n=i?{adFilter:i}:{};return(0,o.Z)("/reporting/ads/",{pinPromotionIds:[t],...n})},editPinPromotion:e=>{const t=e.isCreatingPins?{isCreatingPins:!0}:{},i=e.pinPromotionId?{pinPromotionId:e.pinPromotionId}:{};return a.editV2({adGroupId:e.adGroupId,view:"ad",...i,...t})},productGroup:e=>{const{id:t,name:i}=e;return(0,o.Z)("/reporting/productgroups/",{productGroupIds:[t],name:i})},campaigns:()=>"/reporting/campaigns/",adgroups:()=>"/reporting/adgroups/",ads:()=>"/reporting/ads/",productgroups:()=>"/reporting/productgroups/",campaignNegativeKeywords:()=>"/reporting/campaignNegativeKeywords/",campaignSearchQueries:()=>"/reporting/campaignSearchQueries/",adGroupNegativeKeywords:()=>"/reporting/adGroupNegativeKeywords/",adGroupPositiveKeywords:()=>"/reporting/adGroupPositiveKeywords/",adGroupSearchQueries:()=>"/reporting/adGroupSearchQueries/",ad:e=>a.pinPromotion(e),campaignMode:e=>(0,o.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),create:e=>{const{campaignId:t,objectiveType:i,partialCreate:n,catalogsFeedId:s,managedClientId:r,productGroupId:a,resumeLastDraft:l}=e,d={};return t&&n&&(d.campaignId=t),i&&(d.objectiveType=i),"CATALOG_SALES"===i&&s&&(d.catalogsFeedId=s),a&&(d.productGroupId=a),r&&(d.managedClientId=r),l&&(d.resumeLastDraft=!0),(0,o.Z)("/ads/create/",d)},createAutomated:e=>(0,o.Z)("/automated/ads/create/",e),editV2:e=>(0,o.Z)("/ads/edit/",e),editAutomated:e=>(0,o.Z)("/automated/ads/edit/",e),editDraftCampaign:e=>(0,o.Z)("/ads/edit_draft/",{campaignId:e.campaignId,view:"campaign"}),duplicateCampaign:e=>(0,o.Z)("/ads/duplicate/",e),audiences:e=>(0,o.Z)("/audiences/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),audience_debug:()=>"/audience_debug/",prepaid_spend_campaign_breakdown:()=>"/billing/prepaid_spend_campaign_breakdown/",billing:e=>{const{page:t,subSection:i,nextStepUrl:s}=e;switch(t){case n.kM.BILLING_HISTORY:return"/billing/history/";case n.kM.ORDER_LINES:return"/billing/order_lines/";case n.kM.PROMOTIONS:return"/billing/promotions/";case n.kM.DOCUMENTS:return"/billing/documents/";case n.kM.PREPAID_CAMPAIGN_SPEND:return"/billing/prepaid_campaign_spend_summary/";default:const e={};return i&&(e.section=i),s&&(e.next_step_link_url=s),(0,o.Z)("/billing/",e)}},bulk:e=>{const{subSection:t,page:i,jobStarted:s}=e||{};switch(i){case n.fm.UPLOAD_TEMPLATE:return(0,o.Z)("/bulk_editor/upload_template/",{section:t});case n.fm.DOWNLOAD_TEMPLATE:return(0,o.Z)("/bulk_editor/download_template/",{section:t});case n.fm.HISTORY:return(0,o.Z)("/bulk_editor/history/",{section:t,job_started:s});case n.fm.RESOURCES:return(0,o.Z)("/bulk_editor/resources/",{section:t});default:return"/bulk_editor/"}},history:e=>(0,o.Z)("/history/",e),shopping:e=>a.reporting(r("TEMPORARY_SHOPPING")),pinterest_tag:e=>{const{page:t,subSection:i,platform:s,source:r,origin:a}=e;switch(t){case n.qp.PINTEREST_EVENT_HISTORY:return r?(0,o.Z)("/conversions/event-history/",{source:r}):"/conversions/event-history/";case n.qp.CONVERSION_HEALTH:return"/conversions/health/";case n.qp.PINTEREST_TAG:return(0,o.Z)("/conversions/tag/",{subPage:i,platform:s});case n.qp.PINTEREST_TAG_MANUAL_SETUP_FLOW:return s?(0,o.Z)("/conversions/tag_manual_setup/",{platform:s,source:r}):"/conversions/tag_manual_setup/";case n.qp.PINTEREST_TAG_EVENTS:return"/conversions/tag-events/";case n.qp.PINTEREST_TAG_HEALTH:return"/conversions/tag-health/";case n.qp.CONVERSION_UPLOAD:return(0,o.Z)("/conversions/upload/",{subPage:i});case n.qp.UPLOAD_HISTORY:return(0,o.Z)("/conversions/history/",{subPage:i});case n.qp.PCA_UPLOAD_HISTORY:return(0,o.Z)("/conversions/pca_history/",{subPage:i});case n.qp.PCA_UPLOAD:return(0,o.Z)("/conversions/pca_upload/",{subPage:i});case n.qp.CONVERSIONS_API_MANUAL_SETUP_FLOW:return r||a?(0,o.Z)("/conversions/api_manual_setup/",{source:r,origin:a}):"/conversions/api_manual_setup/";case n.qp.CONVERSIONS_API_PARTNER_SETUP_FLOW:return r||a?(0,o.Z)("/conversions/api_partner_setup/",{source:r,origin:a}):"/conversions/api_partner_setup/";case n.qp.CONVERSIONS_API_ACCESS_TOKEN:return"/conversions/access_token/";case n.qp.CONVERSIONS_API_DEDUPLICATION:return"/conversions/deduplication/";default:return"/conversions/tag/"}},"pin-builder":e=>(0,o.Z)("/pin-builder/",e),purchases:()=>a.reporting(r("PURCHASE")),awareness_reserved:()=>a.reporting(r("IMPRESSION")),engagement:()=>a.reporting(r("BILLABLE_ENGAGEMENT")),videos:()=>a.reporting(r("TEMPORARY_BIDDED_CPM_VIDEO")),videos_reserved:()=>a.reporting(r("TEMPORARY_IMPRESSION_VIDEO")),videos_cpv:()=>a.reporting(r("TEMPORARY_MRC_CPV_VIDEO")),conversions:()=>a.reporting(r("WEB_CONVERSION")),accounts_manager:()=>"/accounts_manager/",reporting_preferences:e=>(0,o.Z)("/reporting/preferences/",e),report_builder:e=>(0,o.Z)("/report-center/builder/",e),report_history:e=>(0,o.Z)("/report-center/history/",e),report_unsubscribe:e=>(0,o.Z)("/report-center/unsubscribe/",e),report_download:e=>(0,o.Z)("/report-center/download/",e),media_planner:()=>"/media_planner/",awareness:()=>a.reporting(r("AWARENESS")),traffic:()=>a.reporting(r("TRAFFIC")),app_installs:()=>a.reporting(r("APP_INSTALL")),catalog_sales:()=>a.reporting(r("CATALOG_SALES")),web_conversion:()=>a.reporting(r("WEB_CONVERSION")),video_view:()=>a.reporting(r("VIDEO_VIEW")),quick_promote:e=>(0,o.Z)("/quick-promote/",e),quick_promote_on_www:()=>"/advertiser/quick-promote/",recommendations:e=>(0,o.Z)("/recommendations/",e),catalog_view:()=>"/product-catalogs/data-source",campaign_insights:e=>`/campaign-insights/${e.campaignId}/`},l=a},619937:(e,t,i)=>{i.d(t,{$N:()=>p,GY:()=>d,MZ:()=>r,NR:()=>u,Vn:()=>c,fm:()=>n,kM:()=>s,q6:()=>o,qp:()=>l,uV:()=>h,xL:()=>a});const n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},o={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},s={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},r={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch"},a={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},l={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},u={ATTRIBUTION_DESTINATION:"destination",ATTRIBUTION_EXPIRY:"expiry",ATTRIBUTION_SOURCE:"attributionsrc",ATTRIBUTION_SOURCE_EVENT_ID:"source_event_id"},h=604800,p={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"}},28543:(e,t,i)=>{i.d(t,{default:()=>r});var n=i(55259),o=i(966113),s=i(567831);function r(e,t,i){if(!n.Z[e])throw new Error(`unknown url key: ${e}`);i||(i={});let r=n.Z[e](i);const a=function(e,t){let i=null;return e&&(i=e.advertiserId||null),!i&&t&&(i=t.id),i}(i,t);return"string"==typeof a&&(r="/advertiser/"+a+r),!!i.absolutify&&(r=(0,s.Z)(r,void 0,o.KU)),r}},209064:(e,t,i)=>{i.d(t,{Fv:()=>a,LN:()=>s,Ob:()=>n,Tc:()=>o,mE:()=>r});const n={APP_INSTALL:"TEMPORARY_APP_INSTALL_CLICKTHROUGH",APP_TRAFFIC:"TEMPORARY_TRAFFIC_CLICKTHROUGH_APP",AWARENESS:"TEMPORARY_BIDDED_CPM",VIDEO:"TEMPORARY_BIDDED_CPM_VIDEO",TRAFFIC:"CLICKTHROUGH",SHOPPING:"TEMPORARY_SHOPPING",WEB_CONVERSION:"WEB_CONVERSION",APP_INSTALL_V2:"APP_INSTALL_VARIABLE_ATTR",VIDEO_VIEW:"TEMPORARY_MRC_CPV_VIDEO"},o="CONSIDERATION",s={TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS"},r={CONSIDERATION:"CONSIDERATION",AWARENESS:"AWARENESS",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS"},a={[s.TRAFFIC]:r.CONSIDERATION,[s.AWARENESS]:r.AWARENESS,[s.APP_INSTALL]:null,[s.WEB_CONVERSION]:r.WEB_CONVERSION,[s.CATALOG_SALES]:r.CATALOG_SALES,[s.VIDEO_VIEW]:r.VIDEO_VIEW,[s.WEB_SESSIONS]:r.WEB_SESSIONS}},422586:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(966113),o=i(89254);function s(e,t){let i="";if(e&&(i=e,t)){const s=(0,o.Z)(e,!0),r="/advertiser/",{hostname:a}=s;null!==a&&a!==n.KU||(e.startsWith(n.au)&&(e=e.replace(n.au,"")),i=e.startsWith(r)?e:r+t+e)}return i}},21353:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(702664),o=i(28543);function s(){const e=(0,n.useSelector)((({advertiser:e})=>e));return(t,i)=>(0,o.default)(t,e,i)}},567482:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(667294),o=i(616550),s=i(883119),r=i(231486),a=i(226198),l=i(898781),d=i(53987),c=i(45169),u=i(780280),h=i(829407),p=i(807609),_=i(216895),g=i(134906),m=i(785893);const f=({disableMandatoryAgeCheck:e,focusOnMount:t,value:i,onChange:f,onError:x,onChangeParsed:b,onValidation:y,preventValidationOnStart:v,error:P,customPlaceholderText:w})=>{const[I,A]=(0,n.useState)(""),[E,C]=(0,n.useState)(!1),{country:S}=(0,u.B)(),j=(0,l.ZP)(),T=(0,o.useLocation)(),D=(0,n.useRef)(I);(0,n.useEffect)((()=>{D.current!==I&&(x&&I&&x(I),D.current=I)}));const k=(0,n.useRef)(null);(0,h.Z)((()=>{t&&k.current&&k.current.focus()}));const z=t=>{const i=(0,d.Ni)(T)&&(0,c.du)(S)||!e,n=(0,_.Z)(t||"",[...i?[(0,g.aH)({message:j.bt("You missed a bit! Let us know how old you are.", "You missed a spot! Let us know how old you are.", "Required age validation error", undefined, true)})]:[],(0,g.qA)({message:j.bt("Not a number.", "Not a number.", "Number field validation error message", undefined, true)}),(0,g.ZA)({invalidAgeString:j.bt("Please enter a valid number.", "Please enter a valid number.", "webapp.app.Signup.ageError", undefined, true)})]),o=(null==n?void 0:n.toString())||"";return null==y||y(o),o};(0,n.useEffect)((()=>{v||z(i)}),[]);const O=!!(0,p.Z)()||"1"!==r.U2(a.It);(0,n.useEffect)((()=>{O||E||(A(j.bt("Sorry, you’re not eligible to sign up for Pinterest just now.", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)),C(!0))}));const R=e=>{const t=z(e);A(t)};return(0,m.jsx)(s.nv,{ref:k,errorMessage:I||P,id:"age-input",disabled:!O,name:"age",value:i||"",onChange:e=>{const{value:t}=e,i=parseInt(t,10);t&&Number.isNaN(i)||(null==f||f(e),null==b||b(e.value?i:void 0),R(t))},onBlur:()=>{O&&(A(""),R(i))},hasError:!!I,size:"lg",autoComplete:"off",placeholder:w||j.bt("Age", "Age", "Textfield placeholder", undefined, true),type:"text"})}},77601:(e,t,i)=>{i.d(t,{Z:()=>o});const n="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function o({window:e,duration:t,run:i}){const o=n();let s=0,r=null;const a=()=>{const l=n()-o,d=l-s;if(t===1/0)i(0,l,d);else{const e=l/t;if(e>=1)return void i(1,l,d);i(e,l,d)}s=l,r=e.requestAnimationFrame(a)};return{start:()=>{r=e.requestAnimationFrame(a)},cancel:()=>{r&&(e.cancelAnimationFrame(r),r=null)}}}},987765:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(883119),o=i(667294),s=i(391254),r=i(785893);const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",l=()=>Array(5).fill().map((()=>a[Math.floor(52*Math.random())])).join("");function d({children:e}){const t=(0,o.useMemo)((()=>e.replace("  "," ").split("").map((e=>({className:l(),content:e})))),[e]);return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(s.Z,{unsafeCSS:t.map((({className:e,content:t})=>`.${e}:before { content: "${t}"; }`)).join(" ")}),t.map((({className:e})=>(0,r.jsx)("span",{className:e},e)))]})}var c=i(780280);const u=e=>e.startsWith("Promoted");function h({children:e,lineClamp:t,size:i,underline:o,weight:s}){const{isAuthenticated:a}=(0,c.B)(),l=a&&u(e);return(0,r.jsx)(n.xv,{size:i,lineClamp:t,underline:o,weight:s,title:l?"":e,children:l?(0,r.jsx)(d,{children:e}):e})}},377184:(e,t,i)=>{i.d(t,{CX:()=>a,ML:()=>o,N$:()=>r,Od:()=>n,yK:()=>s});const n="extensionNagCount",o=4,s=3,r=1050,a=880},773515:(e,t,i)=>{function n(e){return"object"==typeof e&&null!==e&&"url"in e&&"media"in e}i.d(t,{Z:()=>n})},945212:(e,t,i)=>{i.d(t,{O:()=>o,r:()=>n});const n="ref",o="os"},366284:(e,t,i)=>{i.d(t,{G6:()=>s,i7:()=>r,oi:()=>n,u$:()=>o,un:()=>l,vU:()=>a});const n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER;function s(e){return o(e)===n.SAFARI}function r(e){return o(e)===n.CHROME}function a(e){return o(e)===n.FIREFOX}function l(e){return o(e)===n.EDGE}},780678:(e,t,i)=>{i.d(t,{Z:()=>o,v:()=>n});const n=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function o(){if(!n())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},78714:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(56641),o=i(867820),s=i(954931);const r=(e,t)=>{null!=t&&t.disableOriginCheck||(0,s.Z)(e)||(e="/",(0,o.My)("url_reset")),(0,n.Z)(e)}},792182:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294);function o(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}function s(){return window.innerWidth}function r(){return window.innerHeight}function a(){return null}function l(){const e=(0,n.useSyncExternalStore)(o,r,a),t=(0,n.useSyncExternalStore)(o,s,a);return null!==e&&null!==t?{height:e,width:t}:null}},924196:(e,t,i)=>{i.d(t,{Z:()=>n});const n={GOOGLE_ADWORDS_ID:852082959,GOOGLE_ADWORDS_LABEL_PROPEL_QUALIFIED:"Mah3CPrv13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_PROPEL_UNQUALIFIED:"_DJfCKzy13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CREATE:"GGbCCM7p-nYQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT:"SwBsCIz9k3cQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_ADVERTISER_INTENT:"kDf0COWL4okBEI-Cp5YD",DOUBLECLICK_TAG_ID:"8032161",DOUBLECLICK_EVENT_ID_PROPEL:"prope001",DOUBLECLICK_CATEGORY_ID_PROPEL_QUALIFIED:"pinte0",DOUBLECLICK_CATEGORY_ID_PROPEL_UNQUALIFIED:"pinte00",TRADEDESK_ADVERTISER_ID:"fc1uc9n",TRADEDESK_EVENT_ID_GENERAL_PAGEVIEW:"ogalyt3",TRADEDESK_CONVERSION_ID_PROPEL_QUALIFIED:"judrn76",TRADEDESK_CONVERSION_ID_PROPEL_UNQUALIFIED:"f0v4s5d",FACEBOOK_ADVERTISER_ID:"956400731086791",TWITTER_UNIVERSAL_TAG_ID:"nuzh8",TWITTER_CONVERSION_ID_PROPEL_QUALIFIED:"ny8zl",TWITTER_CONVERSION_ID_PROPEL_UNQUALIFIED:"nya0d",LINKEDIN_PARTNER_ID:"44352",LINKEDIN_CONVERSION_ID_PROPEL_QUALIFIED:"166217",LINKEDIN_CONVERSION_ID_PROPEL_UNQUALIFIED:"171754",LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT:"529092",PINTEREST_TAG_ID:"2614461171935",SMB_PAID_PINTEREST_ID:"2613736141997"}},904431:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>s});class o{static reportGoogleConversion(e,t,i,n){n||(void 0!==window.gtag_report_conversion?window.gtag_report_conversion(e,t,i):o.queuedGoogleConversions.push({id:e,label:t,url:i}))}static reportFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("track",t,i):window.fbq("track",t):o.queuedFacebookConversions.push({id:e,event:t,data:i})}static reportCustomFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("trackCustom",t,i):window.fbq("trackCustom",t):o.queuedFacebookConversions.push({id:e,isCustomEvent:!0,event:t,data:i})}static reportPinterestConversion(e,t,i){void 0!==window.pintrk?i?window.pintrk("track",t,i):window.pintrk("track",t):o.queuedPinterestConversions.push({id:e,event:t,data:i})}static reportTwitterConversion(e,t){void 0!==window.twttr?t?window.twttr.conversion.trackPid(e,t):window.twttr.conversion.trackPid(e):o.queuedTwitterConversions.push({id:e,data:t})}static reportTheTradeDeskConversion(e,t){const i=document.createElement("img");i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("role","presentation"),i.style.borderStyle="none",i.style.position="absolute",i.setAttribute("src",`//insight.adsrvr.org/track/conv/?adv=${e}&ct=0:${t}&fmt=3`),document.body.insertBefore(i,document.body.lastChild)}static reportLinkedInConversion(e,t){const i=document.createElement("img");i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("role","presentation"),i.setAttribute("src",`https://dc.ads.linkedin.com/collect/?pid=${e}&conversionId=${t}&fmt=gif`),i.style.display="none",document.body.insertBefore(i,document.body.lastChild)}static reportDoubleClickConversion(e,t,i){const n=1e13*Math.random(),o=document.createElement("iframe");o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("frameborder","0"),o.setAttribute("src",`https://${e}.fls.doubleclick.net/activityi;src=${e};\n    type=${t};cat=${i};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=${n}?`),o.style.display="none",document.body.insertBefore(o,document.body.lastChild)}static insertGoogleAdWordsTag(e,t){const i=document.createElement("script");t||(i.setAttribute("async",""),i.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=AW-${e}`),i.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(e,t,i){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","AW-"+e),window.gtag_report_conversion=function(e,t,i){return window.gtag("event","conversion",{send_to:"AW-"+e+"/"+t,event_callback:function(){void 0!==i&&window.location.assign(i)}}),!1};const i=o.queuedGoogleConversions;for(let n=0;n<i.length;n+=1){const s=i[n];s.id===e&&o.reportGoogleConversion(s.id,s.label,s.url,t)}}),document.body.insertBefore(i,document.body.firstChild)}static insertFacebookPixelTag(e){var t,i,n,s,r,a;t=window,i=document,n="script",t.fbq||(s=t.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},t._fbq||(t._fbq=s),s.push=s,s.loaded=!0,s.version="2.0",s.queue=[],(r=i.createElement(n)).async=!0,r.src="//connect.facebook.net/en_US/fbevents.js",(a=i.getElementsByTagName(n)[0]).parentNode.insertBefore(r,a)),window.fbq("init",e),window.fbq("track","PageView");const l=o.queuedFacebookConversions;for(let d=0;d<l.length;d+=1){const t=l[d];t.id===e&&(t.isCustomEvent?o.reportCustomFacebookConversion(e,t.event,t.data):o.reportFacebookConversion(e,t.event,t.data))}}static insertTwitterUniversalTag(e){var t,i,n,o,s,r;t=window,i=document,n="script",t.twq||(o=t.twq=function(){o.exe?o.exe.apply(o,arguments):o.queue.push(arguments)},o.version="1.1",o.queue=[],(s=i.createElement(n)).async=!0,s.src="//static.ads-twitter.com/uwt.js",(r=i.getElementsByTagName(n)[0]).parentNode.insertBefore(s,r)),window.twq("init",e),window.twq("track","PageView")}static insertLinkedInInsightTag(e){window._linkedin_data_partner_id=e;const t=document.createElement("script");t.setAttribute("src","//snap.licdn.com/li.lms-analytics/insight.min.js"),document.body.insertBefore(t,document.body.firstChild)}static insertPinterestTag(e){!function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};const e=window.pintrk;e.queue=[],e.version="3.0";const t=document.createElement("script");t.async=!0,t.src="https://s.pinimg.com/ct/core.js";const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}(),window.pintrk("load",e),window.pintrk("page");const t=o.queuedPinterestConversions;for(let i=0;i<t.length;i+=1){const n=t[i];n.id===e&&o.reportPinterestConversion(e,n.event,n.data)}}}n(o,"queuedGoogleConversions",[]),n(o,"queuedFacebookConversions",[]),n(o,"queuedPinterestConversions",[]),n(o,"queuedTwitterConversions",[]);const s=o},639410:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(898781),s=i(785893);function r(){const e=(0,o.ZP)();return(0,s.jsx)(n.Fragment,{children:e.bt("400 million", "400 million", "Business.MauText", undefined, true)})}},306775:(e,t,i)=>{i.d(t,{Fl:()=>l,Pw:()=>c,dl:()=>a,k3:()=>u,su:()=>h,tW:()=>d});var n=i(926275),o=i(411938),s=i(826067);const r=["AT","AU","BE","BR","CA","CH","CY","CZ","DE","DK","ES","FI","FR","GB","GR","HU","IE","IT","LU","MT","MX","NL","NO","NZ","PT","RO","SE","SK","US"],a=["AU","AT","BE","BR","CA","CY","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LU","MT","MX","NL","NZ","NO","PL","PT","RO","SK","ES","SE","CH","GB","US","AR","CO","CL","JP"],l=e=>r.includes(e.toUpperCase()),d=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),c=({requestContext:e,history:t,pinId:i})=>{((e,t)=>{const i=(0,s.ru)("/business/convert",{next:t});e.push(i)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(i))},u=e=>{const t=e.trim().split(" ").filter((e=>!!e));return{firstName:t.length>0?t[0]:"",lastName:t.length>1?t.slice(1).join(" "):""}},h=e=>e.isAuth&&!e.isPartner&&!(0,o.Z)(null,e)&&!(0,n.Z)(e.createdAt)},834911:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(341732),o=i(835209);function s({carouselData:e,images:t,richMetadata:i,richSummary:s,shouldUnifyImageSizes:r,additionalImages:a}){const l=(0,o.Z)({richPinData:i||s});return l&&a&&a.length>0?(0,n.Z)(null,a,e&&e.index,r,l.id):l&&l.additional_images&&l.additional_images.length>0?(0,n.Z)(t,l.additional_images,e&&e.index,r,l.id):e||void 0}},687551:(e,t,i)=>{function n(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}i.d(t,{Z:()=>n})},341732:(e,t,i)=>{i.d(t,{Z:()=>s});const n=["236x","474x","564x","736x"];function o(e){function t(e,{imageKey:t,height:i,width:n}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:i,width:n}}}),e}const i=n.map((function(t){const i=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].height||1/0))),n=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].width||1/0)));return{imageKey:t,height:i,width:n}}));return e.map((e=>i.reduce(t,e)))}function s(e,t,i,n,s){const r=(null==t?void 0:t.map((({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))))||[],a=e?[{images:e},...r]:r;return{carousel_slots:n?o(a):a,index:i||0,id:s}}},827896:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(616550),o=i(768559),s=i(350118);function r(){const e=(0,s.S6)(),t=(0,n.useLocation)();return(i,n)=>{let s;const r=e(i);if(null!=n&&n.shouldTrackForPrevLocation){const e=(null==r?void 0:r.tracking_params_map)||{},t=Object.keys(e).find((e=>"PinResource"!==e));r&&(s=t?e[t]:e.PinResource)}else if(r){var a,l;s=(0,o.Z)({boardUrl:null===(a=r.board)||void 0===a?void 0:a.url,callToCreateSourcePinId:r.call_to_create_source_pin_id,location:t,pinId:r.id,pinnerUserName:null===(l=r.pinner)||void 0===l?void 0:l.username,storyPinDataId:r.story_pin_data_id,trackingParams:r.tracking_params,trackingParamsMap:r.tracking_params_map})}return s}}},81636:(e,t,i)=>{i.d(t,{Q:()=>d,Z:()=>c});var n=i(667294),o=i(682492),s=i.n(o),r=i(112690),a=i(385740),l=i(780280);function d(e,t){const{setViewContextData:i}=(0,a.sV)(),{requestIdentifier:o}=(0,l.B)(),d=(0,r.Z)(),{viewData:c}=(0,a.SU)();(0,n.useEffect)((()=>{var t;e&&(i({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data?s()(c,e.view_data):s()({},c),component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:o}))}),[t])}function c(e){const{children:t,log:i}=e;return d(i),t||null}},407043:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>a});var n=i(385740),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("ContextLogger");function l({children:e,value:t}){const{setViewContextData:i}=(0,n.sV)();return t.injectSetViewContextDataFromHook=i,(0,s.jsx)(r,{value:t,children:e})}},112690:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(407043);const o=()=>(0,n.v)().logContextEvent},385740:(e,t,i)=>{i.d(t,{BE:()=>d,Ih:()=>c,SU:()=>u,sV:()=>a});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("View");let l;function d(){return l}function c({children:e,initialState:t={}}){const[i,o]=(0,n.useState)(t),a=(0,n.useCallback)((()=>{l={},o({})}),[]),d=(0,n.useCallback)((e=>{l={...l,...e},o((t=>({...t,...e})))}),[]),c=(0,n.useMemo)((()=>({viewContextData:i,clearViewContextData:a,setViewContextData:d})),[i,d,a]);return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(r,{value:c,children:e})})}function u(){const{viewContextData:e}=a();return e}},425288:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);function o(e,t){return`\n  ${"consumer"===t?`${e}Consumer`:`use${e}`} must be used within a ${e}Provider.\n  Please see https://pdocs.pinadmin.com/docs/webapp/testing-jest#createhydra-errors for more information.\n  `}function s(e,t){const i=(0,n.createContext)(t),{messageDisplayName:s}=function(e,t){let i=e.slice(1);if(i=i.endsWith("Context")?i:`${i}Context`,t)return{hocDisplayName:`with${e[0].toUpperCase()}${i}(${t})`};return{propsDisplayName:`${e[0].toLowerCase()}${i}`,messageDisplayName:`${e[0].toUpperCase()}${i}`}}(e);i.displayName=s;const{Provider:r}=i,a=({children:e})=>{const t=(0,n.useContext)(i);if(void 0===t)throw new Error(o(s,"consumer"));return e(t)},l=()=>(0,n.useContext)(i);return r.displayName=`${s}Provider`,a.displayName=`${s}Consumer`,{Provider:r,Consumer:a,MaybeConsumer:({children:e})=>e((0,n.useContext)(i)),useMaybeHook:l,useHook:function(){const e=l();if(void 0===e)throw new Error(o(s,"hook"));return e}}}},998499:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(316271);function o(e,t={execution:"sequential"}){const{execution:i}=t;return e.reduce(((e,t)=>{const{combinedTransitions:o,totalDelay:s}=e,r=t.delay||0,a="sequential"===i?s+r:t.delay;return{combinedTransitions:0===o.length?(0,n.Z)(t):`${o}, ${(0,n.Z)({...t,delay:a})}`,totalDelay:s+r}}),{combinedTransitions:"",totalDelay:0}).combinedTransitions}},316271:(e,t,i)=>{i.d(t,{Z:()=>s});const n={instant:85,short:250,medium:420,semiLong:500,long:800},o={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function s({property:e,duration:t,timingFunction:i,delay:s}){const r=s?` ${s}ms`:"";return`${e} ${"number"==typeof t?`${t}ms`:`${n[t]}ms`} cubic-bezier(${o[i]})${r}`}},782534:(e,t,i)=>{i.d(t,{Z:()=>r,k:()=>n.k});var n=i(451820),o=i(780280),s=i(785893);const r=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,s.jsx)(o.LC,{children:o=>(0,n.Z)(o.locale,i,e,t)})},969759:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new Date(e);return i.setDate(e.getDate()+t),i}},810196:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{const t=new Date;return Math.floor(new Date(t.setFullYear(t.getFullYear()-e)).getTime()/1e3)}},451820:(e,t,i)=>{i.d(t,{Z:()=>s,k:()=>n});const n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit"},o=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}};function s(e,t,i,n=!0){const s=o(i);n&&(s.timeZone="UTC");return new Intl.DateTimeFormat(e,s).format(t)}},989392:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new Date;return new Date(1e3*e)<=new Date(i.getFullYear()-(t||18),i.getMonth(),i.getDate())}},81226:(e,t,i)=>{function n(e){const t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}i.d(t,{Z:()=>n})},816068:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>Math.floor(new Date(e).getTime()/1e3)},85651:(e,t,i)=>{i.d(t,{w:()=>C,Z:()=>j});var n=i(883119),o=i(45993),s=i(593559),r=i(186656),a=i(898781),l=i(785893);function d({callBack:e,color:t,email:i,inline:o,overrideText:s}){const d=(0,a.ZP)(),c=s||d.bt("Reset password", "Reset password", "Request a password reset email", undefined, true);return(0,l.jsx)(n.zx,{accessibilityLabel:c,color:t||"red",fullWidth:o,onClick:()=>{(0,r.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:i}}).then((()=>e()))},text:c})}var c=i(349700);function u({email:e,onClose:t,onPasswordResetSent:i,socialButtons:r}){const u=(0,a.ZP)();return(0,l.jsx)(s.Z,{heading:u.bt("Looks like you’re having trouble logging in", "Looks like you’re having trouble logging in", "Modal heading for user who have attempted to login three times", undefined, true),onDismiss:t,size:"sm",children:(0,l.jsx)(n.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginBottom:9,"data-test-id":"touchableErrorMessage",children:(0,l.jsxs)(n.kC,{alignItems:"center",direction:"column",width:290,children:[(0,l.jsx)(n.xu,{marginBottom:6,children:(0,l.jsx)(n.xv,{align:"center",children:(0,c.nk)(u.bt("We sent an email to {{ email }} to help you get back in.", "We sent an email to {{ email }} to help you get back in.", " - ", undefined, true),{email:(0,l.jsx)(n.xv,{inline:!0,weight:"bold",children:e},"emailAddress")})})}),(0,l.jsx)(n.xu,{width:"100%",marginBottom:8,children:(0,l.jsx)(d,{inline:!0,color:"red",email:e,callBack:i,overrideText:u.bt("Resend email", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,l.jsx)(n.xv,{children:u.bt("Or log in with Facebook or Google", "Or log in with Facebook or Google", "Upsell to use Facebook or Google for login", undefined, true)}),(0,l.jsx)(n.xu,{marginTop:4,marginBottom:12,width:"100%",children:r}),(0,l.jsx)(n.xu,{marginBottom:12,width:"100%",children:(0,l.jsx)(o.Z,{onClick:t})})]})})})}var h=i(743678);function p({email:e,loginWith:t,onClose:i,onPasswordResetSent:r}){const c=(0,a.ZP)();return(0,l.jsx)(s.Z,{heading:c.bt("Oops! Something went wrong", "Oops! Something went wrong", "Modal heading", undefined, true),onDismiss:i,size:"md",children:(0,l.jsxs)(n.xu,{paddingX:6,marginBottom:4,children:[(0,l.jsx)(n.xu,{marginBottom:6,children:"facebook"===t?(0,l.jsx)(n.xv,{children:c.bt("We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.", "We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)}):(0,l.jsx)(n.xv,{children:c.bt("We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.", "We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)})}),(0,l.jsx)(d,{inline:!0,email:e,callBack:r}),(0,l.jsx)(n.xu,{marginTop:2,children:(0,l.jsx)(o.Z,{onClick:i})})]})})}var _=i(667294),g=i(499128),m=i(966113);const f="?source=account_recovery";function x({email:e,onClose:t}){const i=(0,a.ZP)(),[r,u]=(0,_.useState)(!1);return(0,l.jsxs)(_.Fragment,{children:[(0,l.jsx)(s.Z,{heading:i.bt("Password reset email sent", "Password reset email sent", "Modal label for confirmation of password reset send", undefined, true),onDismiss:t,children:(0,l.jsxs)(n.xu,{paddingX:6,marginBottom:4,children:[(0,l.jsx)(n.xv,{overflow:"normal",children:(0,c.nk)(i.bt("We sent instructions to pick a new password to {{ email }}.", "We sent instructions to pick a new password to {{ email }}.", "Statement that a password reset email has been sent to the user", undefined, true),{email:(0,l.jsx)(n.xv,{inline:!0,overflow:"normal",weight:"bold",children:e},"emailAddress")})}),(0,l.jsx)(n.xu,{paddingY:4,children:(0,l.jsx)(d,{inline:!0,color:"gray",email:e,callBack:()=>u(!r),overrideText:i.bt("Resend email", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,l.jsxs)(n.xu,{children:[(0,l.jsx)(n.xu,{marginBottom:4,children:(0,l.jsx)(n.xv,{children:(0,c.nk)(i.bt("Didn’t get the email? Try these {{ tips }}", "Didn’t get the email? Try these {{ tips }}", "Direction to help center if the password reset email failed", undefined, true),{tips:(0,l.jsx)(n.xv,{inline:!0,weight:"bold",children:(0,l.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/articles/trouble-pinterest-emails"+f,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:i.bt("tips from our Help Centre", "tips from our Help Center", "Link text to go to help center", undefined, true)},"helpCenterLink")},"helpCenter")})})}),(0,l.jsx)(n.xu,{marginBottom:4,children:(0,l.jsx)(n.xv,{children:(0,c.nk)(i.bt("Not your email address? {{ tryAgain }}", "Not your email address? {{ tryAgain }}", "Link to password reset flow for users who make an incorrect password reset request", undefined, true),{tryAgain:(0,l.jsx)(n.xv,{inline:!0,weight:"bold",children:(0,l.jsx)(n.rU,{display:"inlineBlock",href:m.lf,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:i.bt("Try another", "Try another", "Link text to enter the password reset flow for a different email address/username", undefined, true)},"passwordResetLink")},"tryAgain")})})})]}),(0,l.jsx)(n.xu,{children:(0,l.jsx)(o.Z,{color:"red",onClick:t})})]})}),r&&(0,l.jsx)(n.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,l.jsx)(g.ZP,{onHide:()=>u(!r),text:i.bt("Email sent", "Email sent!", " - ", undefined, true),duration:3500})})]})}const b=480;function y({email:e,onClose:t,onPasswordResetSent:i,socialButtons:r}){const c=(0,a.ZP)();return(0,l.jsx)(s.Z,{heading:c.bt("We protected your account", "We protected your account", "Modal heading for user who need to recover their accounts", undefined, true),onDismiss:t,size:b,children:(0,l.jsxs)(n.xu,{paddingX:12,marginBottom:8,children:[(0,l.jsx)(n.xu,{paddingX:4,marginBottom:4,children:(0,l.jsx)(n.xv,{align:"center",children:c.bt("For security purposes, we've reset your Pinterest account password and logged you out of all devices and browsers.", "For security purposes we've reset your Pinterest account password and logged you out on all devices and browsers.", "softBannedAccountModal.modal.description", undefined, true)})}),(0,l.jsx)(n.xu,{paddingX:4,marginBottom:4,children:(0,l.jsx)(n.xv,{align:"center",children:c.bt("Reset your password or log in with Facebook or Google to get back into your account.", "Reset your password or log in with Facebook or Google to get back into your account.", "Prompt to take action to reset password or upsell login with Facebook/Google", undefined, true)})}),(0,l.jsxs)(n.xu,{paddingX:12,children:[(0,l.jsx)(n.xu,{paddingY:2,children:(0,l.jsx)(d,{inline:!0,email:e,callBack:i})}),r,(0,l.jsx)(n.xu,{marginTop:4,children:(0,l.jsx)(o.Z,{onClick:t})})]})]})})}var v=i(576494),P=i(996438),w=i(611683),I=i(584595),A=i(290148),E=i(817656);const C={[I.OW]:A.Ny.RATE_LIMITED,[I.bd]:A.Ny.RATE_LIMITED,[I.$j]:A.Ny.SOFT_BANNED,[I.an]:A.Ny.SUSPENDED,[I.RL]:A.Ny.LOGIN_ASSISTANCE,[I.yV]:A.Ny.SOFT_BANNED,[E.Ej]:A.Ny.RATE_LIMITED},S=({onLoginWithMfa:e,onLoginWithSuspended:t,onLoginWithVoluntarilyDeactivated:i,updateAccountRecoveryModal:o})=>(0,l.jsxs)(n.xu,{children:[(0,l.jsx)(P.Z,{container:"account_recovery",disablePostSignupNextUrl:!0,onLoginWithMfa:e,onLoginWithSuspended:t,showFallback:!0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>o(A.Ny.PREVENT_FACEBOOK_REGISTER)},showLoginRateLimited:()=>o(A.Ny.RATE_LIMITED)}),(0,l.jsx)(n.xu,{marginTop:2,children:(0,l.jsx)(w.Z,{container:"account_recovery",onLoginWithMfa:e,onLoginWithSuspended:t,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>o(A.Ny.PREVENT_GOOGLE_REGISTER)},onLoginWithVoluntarilyDeactivated:e=>{o(null),null==i||i(e)},showLoginRateLimited:()=>o(A.Ny.RATE_LIMITED)})})]});function j({email:e,modalType:t,onLoginWithMfa:i,onLoginWithSuspended:n,onLoginWithVoluntarilyDeactivated:o,updateAccountRecoveryModal:s}){const r=()=>s(null),a=()=>s(A.Ny.PASSWORD_RESET_SENT),d=(0,l.jsx)(S,{onLoginWithMfa:i,onLoginWithSuspended:n,onLoginWithVoluntarilyDeactivated:o,updateAccountRecoveryModal:s});switch(t){case A.Ny.SUSPENDED:return(0,l.jsx)(v.Z,{onClose:r});case A.Ny.LOGIN_ASSISTANCE:return(0,l.jsx)(u,{email:e,onClose:r,onPasswordResetSent:a,socialButtons:d});case A.Ny.RATE_LIMITED:return(0,l.jsx)(h.Z,{onClose:r});case A.Ny.SOFT_BANNED:return(0,l.jsx)(y,{email:e,onClose:r,onPasswordResetSent:a,socialButtons:d});case A.Ny.PREVENT_FACEBOOK_REGISTER:case A.Ny.PREVENT_GOOGLE_REGISTER:return(0,l.jsx)(p,{email:e,onClose:r,onPasswordResetSent:a,loginWith:t===A.Ny.PREVENT_FACEBOOK_REGISTER?"facebook":"google"});case A.Ny.PASSWORD_RESET_SENT:return(0,l.jsx)(x,{email:e,onClose:r});default:return null}}},45993:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);function r({color:e,onClick:t,overrideText:i}){const r=(0,o.ZP)(),a=i||r.bt("Got it", "Got it", "Acknowledge protected account modal message", undefined, true);return(0,s.jsx)(n.zx,{fullWidth:!0,accessibilityLabel:a,color:e||"gray",onClick:t,text:a})}},593559:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(883119),s=i(662730),r=i(124580),a=i(223815),l=i(785893);function d({children:e,headingNode:t,heading:i,onDismiss:d,size:c}){return(0,n.useEffect)((()=>(r.Z.pause(),function(){r.Z.resume()})),[]),(0,l.jsx)(o.mh,{zIndex:s.C,children:(0,l.jsx)(a.Z,{allowEsc:!0,children:(0,l.jsx)(o.u_,{accessibilityModalLabel:i,heading:t||i,onDismiss:()=>{r.Z.resume(),d()},role:"alertdialog",size:c||"md",padding:"none",children:e})})})}},743678:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(593559),s=i(898781),r=i(785893);function a({onClose:e}){const t=(0,s.ZP)();return(0,r.jsxs)(o.Z,{heading:t.bt("Too many login attempts", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true),onDismiss:e,size:"sm",headingNode:(0,r.jsxs)(n.xu,{children:[(0,r.jsx)(n.xu,{padding:6,justifyContent:"center",display:"flex",children:(0,r.jsx)(n.JO,{icon:"pinterest",accessibilityLabel:t.bt("Pinterest logo", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true),color:"brandPrimary",size:40})}),(0,r.jsx)(n.X6,{align:"center",size:"500",accessibilityLevel:1,children:t.bt("Too many login attempts", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true)})]}),children:[(0,r.jsx)(n.xu,{paddingX:12,marginTop:4,marginBottom:12,children:(0,r.jsx)(n.xv,{align:"center",children:t.bt("You have reached the maximum number of login attempts. Try again in 30 minutes.", "You have reached the maximum number of login attempts. Try again in 30 minutes.", "LoginRateLimitedModal.Modal.Heading", undefined, true)})}),(0,r.jsx)(n.xu,{paddingX:12,marginBottom:8,justifyContent:"center",display:"flex",children:(0,r.jsx)(n.zx,{fullWidth:!0,color:"red",text:t.bt("OK", "Okay", "LoginRateLimitedModal.Modal.OkButton", undefined, true),onClick:e})})]})}},576494:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(883119),s=i(45993),r=i(593559),a=i(333071),l=i(898781),d=i(349700),c=i(785893);function u({onClose:e}){const t=(0,l.ZP)(),i=t.bt("Common reasons for account deactivation include:", "Common reasons for account deactivation include:", " - ", undefined, true),u=t.bt("{{ help_link }} if you have questions or would like to reactivate your account.", "{{ help_link }} if you have questions or would like to reactivate your account.", " - ", undefined, true),h=[t.bt("Violating Pinterest Community Guidelines.", "Violating Pinterest Community Guidelines.", "One example reason for account deactivation", undefined, true),t.bt("We noticed unusual activity on your account.", "We noticed unusual activity on your account.", "One example reason for account deactivation", undefined, true),t.bt("You requested an account closure.", "You requested an account closure.", "One example reason for account deactivation", undefined, true)];return(0,c.jsx)(r.Z,{heading:t.bt("Your account has been deactivated", "Your account has been deactivated", "Modal heading for user who have attempted to login with a deactivated account", undefined, true),onDismiss:e,size:"md",children:(0,c.jsxs)(o.xu,{paddingX:6,marginBottom:4,children:[(0,c.jsxs)(o.xu,{marginBottom:4,children:[(0,c.jsxs)(o.xv,{children:[" ",i," "]}),(0,c.jsx)(o.xu,{paddingY:2,children:(0,c.jsx)(n.Fragment,{children:h.map((e=>(0,c.jsx)(o.xv,{children:"• "+e},`reasons-${e}`)))})}),(0,c.jsx)(o.xv,{inline:!0,children:(0,d.nk)(u,{help_link:(0,c.jsx)(a.q,{},"suspended user help_link")})})]}),(0,c.jsx)(o.xu,{marginTop:4,children:(0,c.jsx)(s.Z,{color:"red",onClick:e,overrideText:t.bt("Got it", "Got it", "Acknowledge suspended account modal message", undefined, true)})})]})})}},333071:(e,t,i)=>{i.d(t,{q:()=>r});var n=i(883119),o=i(898781),s=i(785893);const r=()=>{const e=(0,o.ZP)();return(0,s.jsx)(n.rU,{display:"inlineBlock",href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:e.bt("Contact us", "Contact us", "link text shown to redirect to help.pinterest.com for appealing a suspension", undefined, true)})}},777024:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(785893);function s(){const e=(0,n.ZP)();return(0,o.jsx)("p",{style:{marginBottom:"8px",marginTop:"8px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold"},children:e.bt("OR", "OR", " - ", undefined, true)})}},803491:(e,t,i)=>{i.d(t,{Z:()=>s,m:()=>o});var n=i(785893);const o="\n.red.active:focus,\n.red.active:hover {\n  background-color: #d50c22 !important;\n}\n.lightGrey.active:focus,\n.lightGrey.active:hover {\n  background-color: #f5f3f3 !important;\n}\n.SignupButton:focus {\n  box-shadow: 0 0 0 4px rgba(0, 132, 255, 0.5);\n  outline: 0;\n}\n";function s({accessibilityLabel:e,children:t,className:i,dataTestId:o,disabled:s,href:r,id:a,noButtonStyles:l,onClick:d,styleOverrides:c,tabIndex:u,type:h}){const p=(i?i.split(" "):[]).concat(s?[]:["active"]);let _=l?{background:"none",border:"none",padding:"0",textAlign:"left",display:"block"}:{border:"0px",height:"40px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center",...s&&{backgroundColor:"#efefef",color:"#767676"}||p.includes("red")&&{backgroundColor:"#e60023",color:"#fff"}||p.includes("lightGrey")&&{backgroundColor:"#ebebeb",color:"#444"}};return _={..._,...c},s&&(_={..._,cursor:"not-allowed"}),(0,n.jsx)("button",{"aria-label":e||"",className:p.join(" "),"data-test-id":o,disabled:s,href:r,id:a,onClick:d,...u?{tabIndex:u}:{},style:_,type:h||"button",children:t})}},996438:(e,t,i)=>{i.d(t,{Z:()=>R});var n=i(667294),o=i(883119),s=i(989392),r=i(199324),a=i(803491),l=i(233211),d=i(905171),c=i(402201);const u=({onError:e,onEventReceived:t,onSuccess:n,rerequestFacebookEmail:o,viewer:s})=>{let r=null;const a=i=>{const o=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(i.origin!==o)return;if("social-connect-complete"!==i.data.type&&"social-connect-error"!==i.data.type)return;const s=i.data;"facebook"===s.network&&(t(),clearInterval(r),"social-connect-error"===s.type?e("OTHER_ERROR"):n({type:"PROFILE",profile:s.profile}))};if(window.addEventListener("message",a),o)i.e(51798).then(i.bind(i,107193)).then((({default:t})=>{t((t=>{t.login((t=>{var i;"connected"===t.status&&((null===(i=t.authResponse.grantedScopes)||void 0===i?void 0:i.split(","))||[]).includes("email")?n({type:"ACCESS_TOKEN",id:t.authResponse.userID,access_token:t.authResponse.accessToken}):e("OTHER_ERROR")}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),s)}));else{const t=(0,c.Z)(),i=window.open("/connect/facebook/","",t);i?r=setInterval((()=>{i.closed&&(clearInterval(r),e("OTHER_ERROR"))}),1e3):e("POPUP_DISABLED")}return{unsubscribe:()=>{window.removeEventListener("message",a)}}};var h=i(910702),p=i(785893);function _({anchor:e,message:t,children:i}){const[s,r]=(0,n.useState)(!!t);return(0,n.useEffect)((()=>{r(!!t)}),[t]),s&&t?(0,p.jsx)(o.J2,{anchor:e,color:"darkGray",idealDirection:"right",onDismiss:()=>r(!0),shouldFocus:!1,size:"md",children:(0,p.jsx)(o.xu,{column:12,padding:3,children:i?(0,p.jsx)("span",{children:i}):(0,p.jsx)("span",{dangerouslySetInnerHTML:{__html:t},style:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}})})}):null}var g=i(174382),m=i(70212),f=i(85334),x=i(901656),b=i(903095),y=i(898781),v=i(379913),P=i(584595),w=i(467570),I=i(336882),A=i(935879),E=i(290148),C=i(45169),S=i(830269),j=i(773285),T=i(780280),D=i(867820),k=i(19121);function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class O extends n.Component{constructor(...e){var t;super(...e),t=this,z(this,"state",{showModal:!1}),z(this,"unsubscribeThisButton",null),z(this,"loginWithFacebook",(({facebookConnectData:e,isFromStatusChange:t,isAccountSwitch:i,handlePostSuccessConnect:n,loadingIndicatorCallback:o})=>{const{checkExperiment:s,container:r,desktopCoreLoginContext:{getDeviceAppTypeString:a},i18n:l,login:c,onLoginWithMfa:u,onLoginWithSuspended:h,pageContext:p,showResponseMessageModal:_,showLoginRateLimited:g,socialSignupCallbacks:f}=this.props,x={container:r,page:null==p?void 0:p.pageType},b="PROFILE"===(y=e).type?{facebook_id:y.profile.id}:{facebook_id:y.id,facebook_token:y.access_token};var y;c({creds:b,loggingOptions:{loggingData:x,loginAttemptContextEvent:this.signupLoginContextEvent(7534)},isAccountSwitch:i}).then((e=>{var t,o;const l=null==e||null===(t=e.resource_response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.user;i&&l&&(0,v.Z)(l,"facebook",r),(0,D.My)("login.facebook."+a()),_?_(!0):E.ZP.handleRedirect(this.props.nextUrlParam||E.ZP.defaultSocialLoginRedirectUrl()),null==n||n(),s("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,m.Z)()}),(i=>{var n;i.api_error_code===P.Zn?(null==o||o(!1),(0,D.My)("login.facebook."+a()),null==u||u(b,{phoneNumberEnd:null===(n=i.data)||void 0===n?void 0:n.phone_number_end})):i.api_error_code===P.xN||i.api_error_code===P.lg?"ACCOUNT_RECOVERY"===f.type?f.switchToAccountRecoverySignupFlow("facebook"):this.registerWithFacebook({facebookConnectData:e,loggingData:x,isFromStatusChange:t,switchToSocialSignupWithAgeFlow:f.switchToSocialSignupWithAgeFlow}):[P.ik].includes(i.api_error_code)?null==g||g():(i.api_error_code&&(0,D.My)(`facebook_button.failed_login_${i.api_error_code}`),i.api_error_code===P.an&&h?h():(0,d.x)(l.bt("Sorry, we can't log you in.", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true)))}))})),z(this,"statusChangeCallback",(e=>{var t,i;null===(t=(i=this.props).onClick)||void 0===t||t.call(i);const{connectErrorMessage:n,handlePostSuccessConnect:o,isAccountSwitch:s,loadingIndicatorCallback:r}=this.props;let a;if("connected"===e.status){const{authResponse:t}=e;(0,D.My)("web.facebook_connect_button.login_status.connected"),null==r||r(!0),this.loginWithFacebook({facebookConnectData:{type:"ACCESS_TOKEN",id:t.userID,access_token:t.accessToken},isFromStatusChange:!0,isAccountSwitch:s,handlePostSuccessConnect:o,loadingIndicatorCallback:r}),a="success"}else"not_authorized"===e.status?((0,D.My)("web.facebook_connect_button.cancel.not_authorized"),(0,d.x)(n),a="not_authorized"):((0,D.My)("web.facebook_connect_button.cancel.unknown"),(0,d.x)(n),a="other_error");const{handlePostConnectClick:l}=this.props;null==l||l(a)})),z(this,"showDefaultError",(()=>{const{i18n:e,loadingIndicatorCallback:t}=this.props;null==t||t(!1),(0,d.x)(e.bt("Email address required for registration.", "Email required for registration.", " - ", undefined, true))})),z(this,"registerWithFacebook",(async function({facebookConnectData:e,loggingData:i,isFromStatusChange:n,switchToSocialSignupWithAgeFlow:o}){const{desktopCoreLoginContext:{register:r},disablePostSignupNextUrl:a,loadingIndicatorCallback:l,nextUrlParam:d,onFBMissingEmail:c,onFBPhoneOnlyConnectVerified:u,showResponseMessageModal:p,showSignupWelcomeLoadingFn:_}=t.props,g=()=>{t.showDefaultError(),n||(t.rerequestFacebookEmail=!0)};let m=null;if("PROFILE"===e.type)m={...e.profile};else try{m=await(0,w.MI)(e.access_token)}catch(v){g()}if(!m)return;const f=(0,h.Z)(m),x={type:"facebook",context:i,signupOptions:f};if(!m.email)return void(u?(n||null==l||l(!1),u(x)):n&&c?c(x):g());const b={birthday_source_site:C.E_.FACEBOOK,email_source_site:C.E_.FACEBOOK};if(!n)return void o(x);const{birthday:y}=f;if(void 0===y||!(0,s.Z)(y))return null==l||l(!1),void o({...x,signupOptions:{...x.signupOptions,email_source_site:C.E_.FACEBOOK}});p||null==_||_(!0);try{await r({...f,...b,birthday:y},{signupContext:i,signupAttemptContextEvent:t.signupLoginContextEvent(7537)})}catch(v){g()}p?p(!0):E.ZP.handleSignupRedirect(n?d:d||window.location.pathname,a)}))}componentDidMount(){if(this.props.webFacebookDisabled)return;"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=()=>this.checkLoginState(),window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1);const{requestContext:{userAgent:{platform:e}}}=this.props;if(["ios","ipad"].includes(e))if(window.fb_init!==I.Z.STARTED&&window.fb_init!==I.Z.FINISHED)this.initializeFB();else if(window.fb_init===I.Z.FINISHED&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval((()=>{window.fb_init===I.Z.FINISHED&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))}),100)}else setTimeout((()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}}),50);var t,i,n,o;this.props.isRerequest&&(null===(t=(i=this.props).loadingIndicatorCallback)||void 0===t||t.call(i,!1),null===(n=(o=this.props).showSignupWelcomeLoadingFn)||void 0===n||n.call(o,!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam)}}initializeFB(){const{requestContext:{locale:e}}=this.props;null!==this.profilePicButton&&(void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():(window.fbAsyncInit=()=>(0,w.sl)(),((t,i,n)=>{const o=t.getElementsByTagName(i)[0];if(t.getElementById(n))return;const s=t.createElement(i);s.id=n,s.src=(0,A.Z)(e),o&&o.parentNode&&o.parentNode.insertBefore(s,o)})(document,"script","facebook-jssdk")))}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback&&this.statusChangeCallback(e)}))}signupLoginContextEvent(e){const{desktopCoreLoginContext:{viewer:t}}=this.props;return{event_type:e,aux_data:{...(0,x.Z)(t.type),signup_login_method:S.Z.FACEBOOK}}}renderProfilePicButtonWithFallback(){const{i18n:e,isRerequest:t,showFallback:i}=this.props;return(0,p.jsxs)(o.xu,{"data-test-id":"facebook-connect-button",ref:e=>{this._fallbackButton=e},children:[(0,p.jsx)(a.Z,{onClick:()=>{var e;const{connectErrorMessage:t,desktopCoreLoginContext:{getDeviceAppTypeString:i},i18n:n,webFacebookDisabled:o,viewer:s}=this.props;if(o)return void this.setState({showModal:!0});(0,D.My)("fallback_facebook_button.click"),(0,D.NC)("press_facebook_login_fallback"),(0,D.My)("unauth_web.facebook_connect.manual.attempt"),(0,D.My)(`unauth_web.social_connect.facebook.${i()}`),null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this);const{unsubscribe:r}=u({onSuccess:e=>{(0,D.My)("unauth_web.facebook_connect.manual.success"),this.loginWithFacebook({facebookConnectData:e,isFromStatusChange:!1})},onError:e=>{(0,D.My)("unauth_web.facebook_connect.manual.failure"),(0,d.x)("POPUP_DISABLED"===e?n.bt("You must enable pop-ups.", "You must enable popups!", " - ", undefined, true):t)},onEventReceived:()=>{var e;null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this)},rerequestFacebookEmail:this.rerequestFacebookEmail,viewer:s});this.unsubscribeThisButton=()=>{r(),this.unsubscribeThisButton=null}},styleOverrides:{backgroundClip:"padding-box",backgroundColor:"#1877F2",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:i?"relative":"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%",borderRadius:"20px"},tabIndex:-1,children:(0,p.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,p.jsx)(o.xu,{color:"default",rounding:"circle",marginStart:1,dangerouslySetInlineStyle:{__style:{paddingTop:4,paddingBottom:3,paddingRight:3,paddingLeft:3}},height:24,width:24,children:(0,p.jsx)(o.JO,{accessibilityLabel:e.bt("Facebook", "facebook", "accessible label for facebook icon", undefined, true),color:"shopping",icon:"facebook",inline:!0,size:19})}),(0,p.jsx)("span",{style:{color:"#fff",display:"inline-block",fontFamily:r.Z,fontSize:"16px",fontWeight:"bold",letterSpacing:"0.1px",lineHeight:"15px",marginRight:"24px",marginLeft:"15px",paddingTop:"4px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},children:e.bt("Continue with Facebook", "Continue with Facebook", " - ", undefined, true)})]})}),!i&&(0,p.jsx)(o.xu,{height:40,dangerouslySetInlineStyle:{__style:{textAlign:"left"}},ref:e=>{this.profilePicButton=e},children:(0,p.jsx)("div",{className:"fb-login-button","data-auth-type":t?"rerequest":void 0,"data-button-type":"continue_with","data-layout":"rounded","data-onlogin":"checkLoginState","data-scope":w.$.join(","),"data-size":"large","data-use-continue-as":"true","data-width":"268px"})})]})}render(){const{tooltip:e}=this.props;return(0,p.jsxs)("div",{style:{position:"relative"},children:[this.renderProfilePicButtonWithFallback(),!!e&&(0,p.jsx)(_,{anchor:this._fallbackButton,message:e}),this.state.showModal&&(0,p.jsx)(g.Z,{type:"facebook",onDismiss:()=>this.setState({showModal:!1})})]})}}function R(e){const t=(0,y.ZP)(),i=(0,T.B)(),n=(0,l.B$)(),o=(0,b.lO)(),{checkExperiment:s}=(0,j.F)(),{anyEnabled:r}=s("web_facebook_disabled"),a=(0,k.Z)();return(0,p.jsx)(O,{...e,connectErrorMessage:t.bt("Couldn't connect. You need to authorise Pinterest.", "Couldn't connect. You must authorize Pinterest.", " - ", undefined, true),desktopCoreLoginContext:n,i18n:t,login:(0,f.Z)(),requestContext:i,pageContext:o,webFacebookDisabled:r,viewer:a,checkExperiment:s})}},402171:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ut});var n=i(667294),o=i(616550),s=i(883119),r=i(56641),a=i(112690),l=i(655340),d=i.n(l),c=i(469134),u=i(231486),h=i(226198),p=i(816068),_=i(233211),g=i(803491),m=i(785893);const f=({margin:e,wideLight:t})=>(0,m.jsx)("div",{style:{borderBottom:(t?"#efefef":"#dedede")+" 1px solid",margin:null!=e?e:"10px auto",width:t?404:110}});var x=i(901656),b=i(898781),y=i(780280),v=i(966113),P=i(867820),w=i(52022),I=i(170168);function A({type:e}){const{viewer:t}=(0,_.B$)(),i=(0,b.ZP)(),n=(0,a.Z)(),o=`${I.C0}${v.Hm}`;return(0,m.jsxs)(s.xu,{display:"flex",alignItems:"center",justifyContent:"center",fit:!0,marginTop:2,marginEnd:"auto",marginBottom:1,marginStart:"auto",children:[(0,m.jsx)(s.xv,{size:"100",weight:"normal",children:i.bt("Are you a business?", "Are you a business?", "Prompt for business signup", undefined, true)}),(0,m.jsx)(s.xu,{"data-test-id":"business-start",marginStart:1,children:(0,m.jsx)(s.rU,{href:o,underline:"none",target:"blank",onClick:()=>{(0,P.My)("unauth.business_link.click"),n({event_type:101,component:"signupToLogin"===e?13096:13867,element:10281,aux_data:(0,x.Z)(t.type)})},children:(0,m.jsx)(s.xv,{size:"100",weight:"bold",children:i.bt("Get started here!", "Get started here!", "Prompt for signing up", undefined, true)})})})]})}const E=({children:e,layout:t})=>{const{isRTL:i}=(0,y.B)();switch(t){case"SIGNUP_LARGE":return(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.xu,{marginTop:4,children:e})});case"SIGNUP_SMALL":return(0,m.jsx)(s.xu,{marginTop:3,children:e});case"SIGNUP_WITH_AGE":return(0,m.jsx)(s.xu,{margin:-4,children:(0,m.jsx)(s.xu,{padding:3,"data-test-id":"login-button",children:e})});case"LOGIN_INLINE":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(f,{}),(0,m.jsx)(s.xu,{display:"inlineBlock",marginEnd:1,children:e})]});case"LOGIN_SMALL":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(f,{}),e]});case"SIGNUP_DEFAULT":case"LOGIN_DEFAULT":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(f,{margin:"SIGNUP_DEFAULT"===t?i?"20px -68px 15px 0px":"20px 0px 15px -68px":i?"20px 30px 15px -10px":"20px -10px 15px -68px",wideLight:!0}),(0,m.jsx)(s.xu,{children:e})]});default:return e}};function C({layout:e,onClick:t,shouldHideBusinessCreateFooterLink:i,type:n}){const o=(0,b.ZP)(),r=(0,w.Z)();return(0,m.jsxs)(E,{layout:e,children:[(0,m.jsx)(s.xu,{display:"flex",fit:!0,marginEnd:"auto",marginBottom:1,alignItems:"center",justifyContent:"center",children:(0,m.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"center",children:[(0,m.jsx)(s.xv,{size:"100",children:o.bt("Already a member?", "Already a member?", "modernized.nux.footer.text", undefined, true)}),(0,m.jsx)(g.Z,{noButtonStyles:!0,onClick:e=>{r({action:"click",item:"email-signup-button"}),t(e)},styleOverrides:{color:"#333",marginLeft:"5px",fontWeight:"bold"},type:"button",dataTestId:"login-signup-toggle",children:"signupToLogin"===n&&o.bt("Log in", "Log in", "modernize.nux.switch.to.login.modal", undefined, true)||o.bt("Not on Pinterest yet? Sign up", "Not on Pinterest yet? Sign up", "nux.unauth.user.sign.up.message", undefined, true)})]})}),!i&&(0,m.jsx)(A,{type:n})]})}var S=i(563387),j=i(754124),T=i(584595),D=i(290148),k=i(45169),z=i(830269),O=i(143461),R=i(109322);const L=({disablePostSignupNextUrl:e,handleLoginToggleButtonClick:t,loadingIndicatorCallback:i,nextUrlParam:o,registrationCredentials:r,showResponseMessageModal:a})=>{const l=(0,b.ZP)(),{register:g,viewer:f}=(0,_.B$)(),{refreshToken:y}=(0,O.D)(),[v,w]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!0),[E,L]=(0,n.useState)(!1),[M,B]=(0,n.useState)(""),[N,Z]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{"1"===u.U2(h.It)&&(L(!0),B(l.bt("Sorry, you’re not eligible to sign up for Pinterest just now.", "Sorry, you’re not eligible to sign up for Pinterest right now.", "signup.birthdaycollection.ineligible.msg", undefined, true)))}),[l,B]),(0,n.useEffect)((()=>{(0,P.My)("dweb.signup_age_step",{type:null==r?void 0:r.type,format:"birthday"})}),[null==r?void 0:r.type]);const F=async()=>{if(!r||!N)return void i(!1);const t={...r.signupOptions,birthday:(0,p.Z)(N),birthday_source_site:k.E_.PINTEREST};try{const i={facebook:z.Z.FACEBOOK,google:z.Z.GPLUS,google_one_tap:z.Z.GOOGLE_ONE_TAP,line:z.Z.LINE,socialSignupWithAge:void 0}[r.type];let n;"google"===r.type?n=12981:"google_one_tap"===r.type&&(n=12982),await g(t,{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,element:n,aux_data:{...(0,x.Z)(f.type),...i?{signup_login_method:i}:Object.freeze({})}}}),(0,P.My)("dweb.birthdaycollection.signup_success"),a?a(!0):D.ZP.handleSignupRedirect(o,e)}catch(n){switch(y&&y(),n.api_error_code){case T.tz:(0,P.My)("dweb.birthdaycollection.signup_error.underage"),u.t8(h.It,"1",(0,u.kZ)(h.It)),w(!0);break;case T.NF:(0,P.My)("dweb.birthdaycollection.signup_error.eu_missing_age"),B(n.message||l.bt("We need to know your age to provide this service to you.", "We need to know your age to provide you this service.", "signup.birthdaycollection.error.missingAge", undefined, true));break;case T.tL:(0,P.My)("dweb.birthdaycollection.signup_error.overage"),B(n.message||l.bt("Please enter a valid age to sign up.", "Oops! Please use a valid age to sign up.", "signup.birthdaycollection.error.overage", undefined, true));break;case T.iZ:(0,P.My)("dweb.birthdaycollection.signup_error.invalid_email"),B(l.bt("Your email address is invalid.", "Your email is invalid.", "signup.birthdaycollection.error.invalidEmail", undefined, true));break;case T.Jt:(0,P.My)("dweb.birthdaycollection.signup_error.email_contain_pinterest"),B(l.bt("Please use your name or the name of your brand", "Please stick to your name, or the name of your brand", "signup.birthdaycollection.error.emailContainsPinterest", undefined, true));break;default:(0,P.My)("dweb.birthdaycollection.signup_error.other"),B(l.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", "signup.birthdaycollection.error.other", undefined, true))}}};return v?(0,m.jsx)(j.Z,{birthday:N,onEditBirthday:()=>w(!1)}):(0,m.jsx)(s.xu,{paddingX:5,paddingY:5,children:(0,m.jsx)(s.xu,{paddingX:12,children:(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,m.jsx)(s.xu,{width:48,height:48,marginTop:5,marginBottom:1,children:(0,m.jsx)(s.Ee,{alt:l.bt("Birthday image", "Birthday Image", "signup.birthdaycollection.image.alt", undefined, true),src:d(),naturalHeight:48,naturalWidth:48})}),(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.X6,{align:"center",size:"600",children:l.bt("Enter your date of birth", "Enter your birthdate", "signup.birthdaycollection.title", undefined, true)})}),(0,m.jsxs)(s.xu,{width:310,marginBottom:4,children:[(0,m.jsx)(s.xu,{marginBottom:4,children:(0,m.jsx)(s.xv,{align:"center",children:l.bt("We collect this info to help provide a better experience for the younger people in our community. We’ll also use your date of birth to help personalise your recommendations and ads.", "We collect this info to help provide a better experience for the younger people in our community. We’ll also use your birthdate to help personalize your recommendations and ads.", "signup.birthdaycollection.subheader1", undefined, true)})}),(0,m.jsx)(s.xv,{align:"center",children:l.bt("It will not be displayed publicly.", "It will not be displayed publicly.", "signup.birthdaycollection.subheader2", undefined, true)})]}),(0,m.jsx)(s.xu,{width:280,marginBottom:4,children:(0,m.jsx)(s.nv,{autoComplete:"bday",disabled:E,errorMessage:M,id:"birthday",onChange:({value:e})=>{B(""),A(!e),Z(e)},size:"lg",type:"date",value:N||""})}),(0,m.jsx)(s.xu,{marginBottom:10,children:(0,m.jsx)(s.xv,{color:"subtle",children:(0,j.b)(l)})}),(0,m.jsx)(s.xu,{width:280,marginBottom:3,children:(0,m.jsx)(s.zx,{color:"red",disabled:I,fullWidth:!0,onClick:()=>{!N||(0,c.Cd)(N,R.kx)?F():B((0,c.Uy)(l))},text:l.bt("Create account", "Create account", "signup.birthdaycollection.submit_label", undefined, true)})}),(0,m.jsx)(s.xu,{marginTop:2,marginBottom:9,width:340,children:(0,m.jsx)(S.Z,{dark:!0})}),(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(C,{layout:"SIGNUP_LARGE",onClick:()=>t(),type:"signupToLogin"})})]})})})};var M=i(385740),B=i(810196),N=i(85651),Z=i(777024),F=i(905171),U=i(996438),V=i(611683),H=i(389054),G=i(85334),W=i(903095),$=i(743847),q=i(319915),X=i(186656),Y=i(499128),K=i(65189),J=i(738192),Q=i(773285),ee=i(817656),te=i(947599),ie=i(343341),ne=i(323468),oe=i(216895),se=i(134906);function re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ae=(0,n.lazy)((()=>i.e(97500).then(i.bind(i,97500)))),le="emailpwdstep";class de extends n.Component{constructor(e){var t;super(e),t=this,re(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e(!1),this.setState({accountRecoveryModalType:N.w[T.an]})})),re(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),re(this,"setLoadingState",(e=>{const{loadingIndicatorCallback:t,showSignupWelcomeLoadingFn:i}=this.props;return i&&!1===e&&i(!1),t(e)})),re(this,"handleEmailChange",(e=>{this.props.setEmail(e.target.value),this.setState({hideFBGoogleToolTip:!0})})),re(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),re(this,"handleAgeChange",(e=>{this.state.birthdayValidationError&&this.setState({birthdayValidationError:null}),this.props.onAgeChange&&this.props.onAgeChange(e)})),re(this,"handleEmailSignUp",(()=>{var e;(0,P.My)("unauth_email_validation_attempt"),this.props.trackInteraction({action:"click",item:"email-signup-button"});let t=(0,oe.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.emailValidators);if(t)this.setState({emailValidationError:t}),(0,P.My)(`unauth.login.error.CLIENT_ERROR.malformemail.${le}`);else{var i,n;const e=(0,oe.Z)(null!==(i=this.props.password)&&void 0!==i?i:"",this.asciiValidators);e&&(this.setState({passwordValidationError:e}),(0,P.My)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${le}`)),t=(0,oe.Z)(null!==(n=this.props.password)&&void 0!==n?n:"",this.loginPasswordValidators),t?(this.setState({passwordValidationError:t}),(0,P.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${le}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable()),this.setState({emailValidationError:null}),this.props.setNameFromEmail()}})),re(this,"register",(({birthday:e})=>{const{birthdayCollectionRequired:t,container:i,email:n,name:o,pageContext:s,password:r,onBirthdayUnderage:a,requestContext:l,signupSource:d,register:c,i18n:p}=this.props,_={type:"email",birthday:e,email:n,password:r,country:l.country,first_name:o,last_name:"",recaptchaV3Token:this.props.recaptchaV3Token||"default"},g={container:i,page:null==s?void 0:s.pageType,signupSource:d};(0,P.My)("one_step_age_signup_complete"),c(_,{signupContext:g,signupAttemptContextEvent:this.signupLoginContextEvent(7537)}).then((()=>{const{showResponseMessageModal:e}=this.props;(0,P.My)("unauth.signup_one_step.completed"),e?e(!0):D.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),(e=>{switch(this.setLoadingState(!1),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token(),e.api_error_code){case T.tz:u.t8(h.It,"1"),a&&t?a({birthday:this.props.birthday,email:n}):this.showUnderAgeError(e.message);break;case T.NF:this.setState({birthdayValidationError:e.message||p.bt("We need to know your age to provide this service to you.", "We need to know your age to provide you this service.", "userRegistration.missingAgeError", undefined, true)});break;case T.tL:this.setState({birthdayValidationError:e.message||p.bt("Please enter a valid age to sign up.", "Oops! Please use a valid age to sign up.", "userRegistration.overageError", undefined, true)});break;case T.iZ:(0,P.My)("unauth_show_invalid_email_inline_error"),this.setState({emailValidationError:p.bt("Your email address is invalid.", "Your email is invalid.", " - ", undefined, true)});break;case T.Jt:(0,P.My)("unauth_show_invalid_email_contains_pinterest"),this.setState({emailValidationError:p.bt("Please use your name or the name of your brand", "Please stick to your name, or the name of your brand", " - ", undefined, true)});break;default:(0,F.x)(p.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", " - ", undefined, true))}}))})),re(this,"checkEmailExistsWithCompletion",(({email:e,handleEmailExists:t,handleEmailNotExist:i,handleError:n})=>{const{i18n:o}=this.props;(0,X.Z)({url:"/v3/register/exists/",data:{email:e}}).then((e=>{var n;this.setState({emailValidationError:null}),!1===(null===(n=e.resource_response)||void 0===n?void 0:n.data)?i():t()}),(e=>{let t=o.bt("Hmm...that doesn't look like an email address", "Hmm...that doesn't look like an email address", " - ", undefined, true);if(e.api_error_code===T.bd)t=e.message;else{(0,oe.Z)(this.props.email,this.asciiValidators)&&(0,P.My)(`unauth.login.error.CLIENT_ERROR.nonasciiemail.${le}`)}this.setState({emailValidationError:t}),null==n||n()}))})),re(this,"checkEmailValidation",(async function(e){const{i18n:i,showToast:n}=t.props;if((0,$.Z)(e)||(0,$.z)(e,"yahoo")||(0,$.z)(e,"hotmail"))t.setState({emailValidationError:i.bt("Sorry, this doesn't look like a valid email address", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)});else try{const n=await(0,X.Z)({url:"/v3/email/validation/",data:{email:e}}),{data:o}=n.resource_response||{};o&&o.is_valid?t.setState({emailValidationError:null}):t.setState({emailValidationError:i.bt("Sorry, this doesn't look like a valid email address", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)})}catch(o){null!=o&&o.message?n((({hideToast:e})=>(0,m.jsx)(Y.ZP,{duration:3e3,type:"error",text:o.message,onHide:e}))):(0,P.My)(`unauth.login.error.${le}.ERROR${o.api_error_code}`)}})),re(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),re(this,"renderSignupForm",(()=>{const{age:e,birthday:t,birthdayCollectionRequired:i,email:n,i18n:o,onBirthdayChange:r,password:a,suppressFocus:l,logContextEvent:d,viewType:p,viewParameter:_,component:g,attributionLabel:f}=this.props,{birthdayValidationError:x}=this.state,b=(0,c.Uy)(o);return this.state.showRegisterForm?(0,m.jsx)(H.Z,{buttonText:o.bt("Continue", "Continue", "Continue button on web", undefined, true),buttonTextLabel:o.bt("Continue creating your Pinterest account", "Continue creating your Pinterest account", "Accessiblity button text to continue creating an account", undefined, true),email:n,emailFieldHasError:this.state.emailFieldHasError,emailLabel:o.bt("Continue with email", "Continue with email", "Sign up button", undefined, true),emailText:o.bt("Email address", "Email", "Text on button asking for email", undefined, true),emailValidationError:this.state.emailValidationError,signupForm:{ageOrBirthday:i?{type:"birthday",props:{birthday:t,birthdayValidationError:x,setBirthdayValidationError:e=>this.setState({birthdayValidationError:e}),onBirthdayChange:r}}:{type:"age",props:{age:e,ageValidationError:x,onAgeChange:this.handleAgeChange,onAgeError:e=>this.setState({birthdayValidationError:e})}},checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,checkEmailValidation:this.checkEmailValidation,registerRestricted:"1"===u.U2(h.It)},onButtonClick:()=>{if(i){if("1"===u.U2(h.It))return void this.showUnderAgeError();if(t&&!(0,c.Cd)(t,R.kx))return void this.setState({birthdayValidationError:b})}this.setState({facebookValidationError:null,googleValidationError:null,hideFBGoogleToolTip:!1}),this.handleEmailSignUp()},onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:null!=a?a:"",passwordText:o.bt("Create a password", "Create a password", "Text asking the user to create a password while registering", undefined, true),passwordValidationError:this.state.passwordValidationError,suppressFocus:l,component:g,viewType:p,viewParameter:_}):(0,m.jsx)(s.xu,{"data-test-id":"emailSignUpButton",children:(0,m.jsx)(s.zx,{fullWidth:!0,text:o.bt("Continue with email", "Continue with email", "Text on the sign up button for signing up with email", undefined, true),color:"red",onClick:()=>{d({view_type:p,view_parameter:_,component:g,element:13506,event_type:10441,aux_data:{upsell_reason:f}}),(0,P.NC)("signup_email_button"),this.props.trackInteraction({action:"click",item:"email-signup-button",within:"bottom-right-upsell"}),this.setState({showRegisterForm:!0})}})})})),re(this,"showUnderAgeError",(e=>{const{i18n:t}=this.props;this.setState({birthdayValidationError:e||t.bt("Sorry, you’re not eligible to sign up for Pinterest just now.", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)})}));const i=new URLSearchParams(e.location.search),n=+i.get("aec");i.delete("aec"),e.history.replace({pathname:e.location.pathname,search:i.toString()}),this.state={accountRecoveryModalType:n===T.yV||n===T.$j?D.Ny.SOFT_BANNED:null,birthdayValidationError:null,emailFieldHasError:!1,emailValidationError:null,facebookValidationError:null,googleValidationError:null,passwordValidationError:null,showRegisterForm:"home_page"===this.props.container,hideFBGoogleToolTip:!1};const{i18n:o}=e;this.emailValidators=[(0,se.aH)({message:o.bt("You missed a bit! Don't forget to add your email address.", "You missed a spot! Don't forget to add your email.", " - ", undefined, true)}),(0,se.GT)({message:o.bt("That doesn't look like an email address.", "Hmm...that doesn't look like an email address.", " - ", undefined, true)})];const r=o.bt("Your password is too short. It needs to be 6+ characters.", "Your password is too short! You need 6+ characters.", " - ", undefined, true),a=o.bt("Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "EmailPasswordStep.password.onlyASCII", undefined, true);this.requireAgeValidatorMessage=o.bt("Help us protect you by providing your age", "Help us protect you by providing your age", "signup.emailpasswordstep.age.validator_message", undefined, true),this.requireBirthdayValidatorMessage=o.bt("You missed a bit. Don’t forget to add your birthday.", "You missed a spot. Don’t forget to add your birthday.", "signup.emailpasswordstep.birthday.require.validator_message", undefined, true);const l=o.bt("Invalid date", "Invalid date", "signup.emailpasswordstep.birthday.validator_message", undefined, true);this.passwordValidators=[(0,se.aH)({message:r}),(0,ne.r)({shortPassStr:r,samePasswordStr:o.bt("Please make your username and password different.", "Please make your username and password different.", " - ", undefined, true),blackPassStr:o.bt("Please create a stronger password.", "Please make a stronger password.", " - ", undefined, true)})],this.asciiValidators=[(0,se.oR)({message:a})],this.loginPasswordValidators=[(0,se.aH)({message:r}),(0,se.oR)({message:a}),(0,se.Gy)({min:6,minErrorString:r})];const d=o.bt("Please enter a valid number.", "Please enter a valid number.", "Signup.EmailPasswordStep.ageError", undefined, true),p=(0,se.ZA)({invalidAgeString:d,ageTooShortString:d});this.ageValidators=e.birthdayCollectionRequired?[]:[(0,se.aH)({message:this.requireAgeValidatorMessage}),p],this.birthdayValidators=[(0,se.aH)({message:this.requireBirthdayValidatorMessage}),(0,se.C9)({date:new Date((new Date).getFullYear(),0,1),message:l})]}handleLoginFailure(e,t){const{setPassword:i,email:n,onLoginWithMfa:o,i18n:s}=this.props,r=e.http_status===ee.Ej?ee.Ej:e.api_error_code;var a;if(r===T.Zn)return void D.ZP.handleLoginMfa(t,{phoneNumberEnd:null===(a=e.data)||void 0===a?void 0:a.phone_number_end},o);const l=(0,J.Z)({error:e,source:"emailPasswordStep",onClickPasswordReset:()=>{(0,P.My)("unauth_password_reset_link_tapped"),(0,X.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:n}}).then((()=>this.updateAccountRecoveryModal(D.Ny.PASSWORD_RESET_SENT)))}});l?(this.setState({...l,accountRecoveryModalType:r?N.w[r]:void 0}),l.passwordValidationError&&i(""),this.setLoadingState(!1)):((0,F.x)(s.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setLoadingState(!1))}handleLoginSuccess(e){D.ZP.storeLoginCredentialsToBrowser(e);const{showResponseMessageModal:t}=this.props;t?t(!1):this.props.nextUrlParam?D.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl):window.location.reload()}signupLoginContextEvent(e){const{viewer:t}=this.props;return{event_type:e,aux_data:{...(0,x.Z)(t.type),signup_login_method:z.Z.EMAIL}}}validateEmailAvailable(){var e=this;const{birthdayCollectionRequired:t,container:i,email:n,login:o,pageContext:s,password:r}=this.props;this.setLoadingState(!0),this.checkEmailExistsWithCompletion({email:n,handleEmailExists:()=>{const e={username_or_email:n,password:null!=r?r:""};o({creds:e,loggingOptions:{loggingData:{container:i,page:null==s?void 0:s.pageType},loginAttemptContextEvent:this.signupLoginContextEvent(7534)}}).then((()=>this.handleLoginSuccess(e)),(t=>this.handleLoginFailure(t,e)))},handleEmailNotExist:async function(){await e.checkEmailValidation(n);const{age:i,birthday:o,password:s}=e.props;if(e.setLoadingState(!1),e.state.emailValidationError)return;const r=t?(0,oe.Z)(o||"",e.birthdayValidators):(0,oe.Z)(i||"",e.ageValidators);if(r)return(0,P.My)(`unauth.login.error.CLIENT_ERROR.${t?"invalidbirthday":"invalidage"}.${le}`),void e.setState({birthdayValidationError:r});let a;if(a=t?o?(0,p.Z)(o):void 0:null!=i&&i.trim()?(0,B.Z)(parseInt(i,10)):void 0,void 0===a)return void e.setState({birthdayValidationError:t?e.requireBirthdayValidatorMessage:e.requireAgeValidatorMessage});const l=(0,oe.Z)(null!=s?s:"",e.passwordValidators);if(l)return e.setState({passwordValidationError:l}),void(0,P.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${le}`);(0,$.Z)(n)?e.setState({emailFieldHasError:!0}):(e.setState({emailValidationError:null}),(0,P.My)("unauth.signup_step_1.completed"),e.register({birthday:a}))}})}render(){const{additionalChildren:e,container:t,disablePostSignupNextUrl:i,email:o,loadingIndicatorCallback:r,nextUrlParam:a,onFBMissingEmail:l,onFBPhoneOnlyConnectVerified:d,onLoginWithMfa:c,switchToSocialSignupWithAgeFlow:u,showLineConnectButton:h,showResponseMessageModal:p,showSignupWelcomeLoadingFn:_,logContextEvent:g,viewType:f,viewParameter:x,component:b,attributionLabel:y}=this.props,{accountRecoveryModalType:v,facebookValidationError:P,googleValidationError:w,hideFBGoogleToolTip:I,showRegisterForm:A}=this.state,E=e=>{g({view_type:f,view_parameter:x,component:b,element:e,event_type:10441,aux_data:{upsell_reason:y}})};return(0,m.jsxs)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,m.jsx)(N.Z,{email:o,modalType:v,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),(0,m.jsxs)(s.xu,{children:[this.renderSignupForm(),!!A&&(0,m.jsx)(Z.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"10px"}},children:[(0,m.jsx)(U.Z,{container:t,disablePostSignupNextUrl:i,loadingIndicatorCallback:r,onFBPhoneOnlyConnectVerified:d,onFBMissingEmail:l,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:p,showSignupWelcomeLoadingFn:_,tooltip:!I&&P||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(D.Ny.RATE_LIMITED),onClick:()=>{E(13505)}}),(0,m.jsx)(s.xu,{height:10}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(V.Z,{container:t,nextUrlParam:a,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:p,tooltip:!I&&w||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(D.Ny.RATE_LIMITED),onClick:()=>{E(13504)}})}),h&&(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(s.xu,{height:10}),(0,m.jsx)(q.Z,{name:"SafeSuspense_EmailPasswordStep_LineConnectButton",children:(0,m.jsx)(te.Z,{children:(0,m.jsx)(ae,{container:t,loadingIndicatorCallback:r,nextUrlParam:a,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:u},showResponseMessageModal:p,showLoginRateLimited:()=>this.updateAccountRecoveryModal(D.Ny.RATE_LIMITED),onClick:()=>{E(13507)}})})})]})]})]}),(0,m.jsx)(S.Z,{dark:!0}),e]})}}function ce(e){const t=(0,W.lO)(),i=(0,y.B)(),{showToast:s}=(0,ie.F9)(),{register:r,viewer:l}=(0,_.B$)(),d=(0,G.Z)(),c=(0,a.Z)(),{viewType:u,viewParameter:h}=(0,M.SU)(),p=(0,w.Z)(),g=(0,b.ZP)(),{country:f}=i,x=(0,o.useLocation)(),v=(0,o.useHistory)(),{recaptchaV3Token:P,refreshToken:I}=(0,O.D)(),{checkExperiment:A}=(0,Q.F)(),E=A("web_birthday_collection_eu_new_users").anyEnabled,C=["GB","IE"].includes(f)||E,S="JP"===f,[j,T]=(0,n.useState)(),[D,k]=(0,n.useState)(),[z,R]=(0,n.useState)(""),[L,B]=(0,n.useState)("");return(0,m.jsx)(de,{...e,age:j,onAgeChange:e=>T(e.value),birthday:D,onBirthdayChange:e=>k(e.value),name:z,setNameFromEmail:()=>R((0,K.Z)(e.email,f)),password:L,setPassword:B,recaptchaV3Token:P,refreshRecaptchaV3Token:I,birthdayCollectionRequired:C,pageContext:t,requestContext:i,viewer:l,register:r,login:d,logContextEvent:c,viewType:u,viewParameter:h,i18n:g,location:x,history:v,showLineConnectButton:S,showToast:s,trackInteraction:p})}var ue=i(989392),he=i(894738);const pe=({email:e,emailError:t,onNotNowClick:i,handleEmailChange:o,handleSubmit:r})=>{const a=(0,b.ZP)();(0,n.useEffect)((()=>{(0,P.My)("unauth.fb_phone_only_signup.email_step")}),[]),a.bt("We use your email address for account creation and for important security and legal notices.", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const l=a.bt("We're unable to create your account without your email address. To continue, make sure you provide an email address to create your account.", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,m.jsx)(s.xu,{marginTop:3,children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),r()},children:[(0,m.jsx)(s.xv,{align:"start",overflow:"normal",children:l}),(0,m.jsx)(s.xu,{marginTop:3}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.nv,{ref:he.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:o,placeholder:a.bt("Email address", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,m.jsx)(s.xu,{marginTop:5}),(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!e,text:a.bt("Continue", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(s.zx,{fullWidth:!0,onClick:()=>{(0,P.My)("unauth.fb_phone_only_signup.email_step.not_now_click"),i&&i()},text:a.bt("Not now", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var _e=i(910702),ge=i(467570);function me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const fe="email";class xe extends n.Component{constructor(e){super(e),me(this,"mounted",!1),me(this,"handleEmailChange",(({value:e})=>{this.setState({email:e})})),me(this,"showError",((e,t)=>{this.mounted&&t===fe&&this.setState({emailError:e})})),me(this,"handleSubmit",(()=>{const{i18n:e}=this.props;if((0,P.My)("unauth.fb_phone_only_signup.submit_email"),this.state.email)(0,P.My)("unauth.fb_phone_only_signup.submit_email"),this.attemptEmailSignupOrLogin();else{const t=e.bt("Email address is required", "Email is required", "email error message", undefined, true);this.setState({emailError:t})}})),me(this,"handleSignupSuccess",(()=>{D.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0),(0,P.My)("unauth.fb_phone_only_signup.signup_success")})),me(this,"handleSignupFailure",(e=>t=>{const{i18n:i}=this.props,n=t.message||i.bt("Something went wrong… Click 'Continue' to try again.", "Oops! Something went wrong… Click Continue to try again.", "Error during signup during FB email collection step", undefined, true);this.showError(n,e),(0,P.My)("unauth.fb_phone_only_signup.signup_failure")})),me(this,"attemptEmailSignupOrLogin",(()=>{const{desktopCoreLoginContext:{register:e},i18n:t}=this.props,{email:i}=this.state,n=[(0,se.GT)({message:t.bt("Hmm... that doesn't look like an email address.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],o=(0,oe.Z)(i,n);if(o)return(0,P.My)("unauth.fb_phone_only_signup.email_validation_failure"),void this.setState({emailError:o});const{registrationCredentials:{type:s,signupOptions:r},showSocialSignupWithAgeStep:a,showEmailAlreadyExistModal:l}=this.props;(0,X.Z)({url:"/v3/register/exists/",data:{email:i}}).then((t=>{var n;if(!1===(null===(n=t.resource_response)||void 0===n?void 0:n.data)){const t={...r,email:i,email_source_site:k.E_.PINTEREST},{birthday:n}=t;if(void 0!==n&&(0,ue.Z)(n)){(t.facebook_token?(0,ge.MI)(t.facebook_token).then(_e.Z):Promise.resolve(Object.freeze({}))).then((i=>e({...i,...t,birthday:n,birthday_source_site:k.E_.FACEBOOK},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}))).then(this.handleSignupSuccess,this.handleSignupFailure(fe))}else a({type:s,signupOptions:t})}else l({email:i}),(0,P.My)("unauth.fb_phone_only_signup.email_existed")}),(e=>{let i=t.bt("Hmm... that doesn't look like an email address.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true);e.api_error_code===T.bd&&(i=e.message),this.showError(i,fe),(0,P.My)("unauth.fb_phone_only_signup.email_exist_api_call_failure")}))})),this.state={email:"",emailError:""}}componentDidMount(){this.mounted=!0,this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1)}componentWillUnmount(){this.mounted=!1}render(){return(0,m.jsx)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,m.jsx)(pe,{email:this.state.email,emailError:this.state.emailError,handleEmailChange:this.handleEmailChange,handleSubmit:this.handleSubmit,onNotNowClick:this.props.onNotNowClick})})}}const be=e=>{const t=(0,_.B$)(),i=(0,y.B)(),n=(0,b.ZP)();return(0,m.jsx)(xe,{...e,desktopCoreLoginContext:t,i18n:n,requestContext:i})},ye=({onClick:e})=>{const t=(0,y.B)(),i=(0,b.ZP)();return(0,m.jsx)(s.xu,{position:"absolute",display:"block",marginTop:4,marginEnd:4,marginStart:4,height:40,width:40,right:!t.isRTL,left:t.isRTL,top:!0,"data-test-id":"full-page-signup-close-button",children:(0,m.jsx)(s.hU,{accessibilityLabel:i.bt("close", "close", "accessible label for close button", undefined, true),onClick:e,icon:"cancel",iconColor:"darkGray",size:"md"})})};var ve=i(116303),Pe=i(350118);const we=({fallback:e,savePinId:t})=>{var i,n;const r=(0,b.ZP)(),{path:a}=(0,o.useRouteMatch)(),l=(0,o.useLocation)(),d=(0,Pe.S6)(),c=t||("/pin/:id"===a?l.pathname.split("/")[2]:null);if(!c)return e;const u=d(c);if(!u)return e;const h=null===(i=u.images)||void 0===i||null===(n=i["236x"])||void 0===n?void 0:n.url;return h?(0,m.jsx)(s.xu,{width:56,height:72,margin:"auto",marginBottom:6,marginTop:4,children:(0,m.jsx)(s.zd,{width:56,height:72,rounding:2,children:(0,m.jsx)(s.Ee,{alt:r.bt("Save Pin image", "Save pin image", "FullPageSignup.signupImage.savePinImage", undefined, true),color:u.dominant_color||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:h})})}):e};function Ie({container:e,fallback:t,savePinId:i,user:n}){var o,r;const a=(0,b.ZP)();switch(e){case"follow":return(0,m.jsx)(s.xu,{display:"flex",justifyContent:"center",marginTop:8,marginBottom:4,children:(0,m.jsx)(ve.Z,{accessibilityLabel:a.bt("User avatar", "User Avatar", "profile.ProfileHeader.Avatar", undefined, true),name:null!==(o=null==n?void 0:n.full_name)&&void 0!==o?o:"",outline:!0,size:"md",src:null!==(r=null==n?void 0:n.image_large_url)&&void 0!==r?r:""})});case"save":case"download":return(0,m.jsx)(we,{fallback:t,savePinId:i});default:return t}}var Ae=i(583375);function Ee({large:e}){return(0,m.jsx)(s.xu,{display:"block",height:45,width:45,dangerouslySetInlineStyle:{__style:{margin:"8px auto 6px"}},children:(0,m.jsx)(Ae.Z,{size:e?50:40})})}class Ce extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{container:e,modalType:t}=this.props;(0,P.My)("web.unauth.modal_title.view"),(0,P.My)(`unauth_web_modal.${e||"unknown"}.tier1.${t}.shown`)},(i="componentDidMount")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{titleText:e}=this.props;return(0,m.jsx)("h1",{style:{color:"#333",fontSize:"32px",fontWeight:"600",letterSpacing:"-1.2px",MozOsxFontSmoothing:"grayscale",paddingLeft:"16px",paddingRight:"16px",WebkitFontSmoothing:"antialiased",wordBreak:"keep-all"},children:e})}}const Se=({email:e,emailError:t,onNotNowClick:i,handleEmailChange:o,handleSubmit:r})=>{const a=(0,b.ZP)();(0,n.useEffect)((()=>{(0,P.My)("unauth.line_missing_email.email_step")}),[]),a.bt("We use your email address for account creation and for important security and legal notices.", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const l=a.bt("We're unable to create your account without your email address. To continue, make sure you provide an email address to create your account.", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,m.jsx)(s.xu,{marginTop:3,children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),r()},children:[(0,m.jsx)(s.xv,{align:"start",overflow:"normal",children:l}),(0,m.jsx)(s.xu,{marginTop:3,marginBottom:5,children:(0,m.jsx)(s.nv,{ref:he.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:o,placeholder:a.bt("Email address", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!e,text:a.bt("Continue", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(s.zx,{fullWidth:!0,onClick:()=>{(0,P.My)("unauth.line_missing_email.email_step.not_now_click"),i&&i()},text:a.bt("Not now", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var je=i(829407);const Te=({nextUrlParam:e,loadingIndicatorCallback:t,showEmailAlreadyExistModal:i,onNotNowClick:o,registrationCredentials:r,showSocialSignupWithAgeStep:a})=>{const l=(0,_.B$)(),d=(0,b.ZP)(),[c,u]=(0,n.useState)(""),[h,p]=(0,n.useState)("");return(0,je.Z)((()=>{t(!1)})),(0,m.jsx)(s.xu,{marginTop:0,marginBottom:0,marginStart:"auto",marginEnd:"auto",width:268,children:(0,m.jsx)(Se,{email:c,emailError:h,handleEmailChange:({value:e})=>u(e),handleSubmit:()=>{if((0,P.My)("unauth.line_missing_email.submit_email"),!c)return void p(d.bt("Email address is required", "Email is required", "email error message", undefined, true));(0,P.My)("unauth.line_missing_email.submit_email");const{register:n}=l,o=[(0,se.GT)({message:d.bt("Hmm... that doesn't look like an email address.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],s=(0,oe.Z)(c,o);if(s)return(0,P.My)("unauth.line_missing_email.email_validation_failure"),void p(s);const{type:u,signupOptions:h}=r;(0,X.Z)({url:"/v3/register/exists/",data:{email:c}}).then((o=>{var s;if(!1!==(null===(s=o.resource_response)||void 0===s?void 0:s.data))return i({email:c}),void(0,P.My)("unauth.line_missing_email.email_existed");t(!0);const{birthday:r}=h;void 0===r?(a({type:u,signupOptions:{...h,email:c}}),t(!1)):n({...h,email:c,birthday:r},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}).then((()=>{t(!1),D.ZP.handleSignupRedirect(e||D.ZP.defaultSocialLoginRedirectUrl(),!0),(0,P.My)("unauth.line_missing_email.signup_success")}),(e=>{t(!1);const i=e.message||d.bt("Something went wrong… Click 'Continue' to try again.", "Oops! Something went wrong… Click Continue to try again.", "unauth.lineEmailCollect.error", undefined, true);p(i),(0,P.My)("unauth.line_missing_email.signup_failure")}))}),(e=>{p(e.api_error_code===T.bd?e.message:d.bt("Hmm... that doesn't look like an email address.", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)),(0,P.My)("unauth.line_missing_email.email_exist_api_call_failure")}))},onNotNowClick:o})})};var De=i(710893),ke=i(407043),ze=i(81636),Oe=i(597922),Re=i(349700),Le=i(966224);const Me=function({container:e="unknown",creds:t,isAccountSwitch:i,nextUrlParam:o,phoneNumberEnd:r}){const[a,l]=(0,n.useState)(null),[d,c]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[p,_]=(0,n.useState)(!1),{isAuthenticated:f,loginState:x}=(0,y.B)(),w=(0,b.ZP)(),I=(0,W.lO)(),A=(0,G.Z)(),E={container:e,page:null==I?void 0:I.pageType},{logContextEvent:C}=(0,ke.v)();(0,ze.Q)({view_type:565,view_parameter:3731}),(0,n.useEffect)((()=>{!i&&D.ZP.isFullyLoggedIn(f,x)&&D.ZP.handleRedirect(o)}),[]);const S=w.bt("Continue", "Continue", " - ", undefined, true);return(0,m.jsxs)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"18px auto"}},children:[u&&(0,m.jsx)(Le.Z,{rounding:8}),(0,m.jsx)("p",{style:{fontSize:"14px",margin:"24px 0",textAlign:"center"},children:r?(0,Re.nk)(w.bt("Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in.", "Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in.", " - ", undefined, true),{phoneNumberEnd:(0,m.jsx)("strong",{children:r},"phone")}):w.bt("Please check your phone for a code and enter it in the field below to log in.", "Please check your phone for a code and enter it in the field below to log in.", " - ", undefined, true)}),(0,m.jsxs)("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),C({view_type:565,view_parameter:3731,event_type:101,element:12019});const i=(0,oe.Z)(null!=d?d:"",[(0,se.aH)({message:w.bt("You missed a bit! Don't forget to add your verification code.", "You missed a spot! Don't forget to add your verification code.", " - ", undefined, true)}),(0,se.VC)({message:w.bt("Hmm...that doesn't look like a verification code.", "Hmm...that doesn't look like a verification code.", " - ", undefined, true)})]);i?(l(i),(0,P.My)("unauth.login.error.CLIENT_ERROR.wrongcode.loginmfa")):(l(null),h(!0),A({creds:{...t,mfa_token:d},loggingOptions:{loggingData:E,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{C({view_type:565,view_parameter:3731,event_type:9992});const e=window.location.pathname===v.lf||window.location.pathname.startsWith(v.rO)?"/":window.location.pathname;D.ZP.handleRedirect(o||e)}),(e=>{e.message?(l(e.message),h(!1)):((0,F.x)(w.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),h(!1))})))},children:[(0,m.jsx)(Oe.Z,{autoComplete:"off",focused:!0,hasError:!!a,id:"mfaCode",name:"code",onChange:e=>c(e.target.value),placeholder:w.bt("Verification code", "Verification code", " - ", undefined, true),tooltip:a,type:"text",value:d}),(0,m.jsx)(g.Z,{accessibilityLabel:S,className:"red SignupButton",styleOverrides:{width:"100%",borderRadius:"20px"},type:"submit",children:(0,m.jsx)(s.xu,{children:S})})]}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"15px",color:"#333"}},children:(0,Re.nk)(w.bt("If you didn't get it, we can {{ resendCode }}.", "If you didn't get it, we can {{ resendCode }}.", " - ", undefined, true),{resendCode:(0,m.jsx)(s.rU,{display:"inlineBlock",href:"",onClick:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),e.preventDefault(),C({view_type:565,view_parameter:3731,event_type:101,element:12920}),h(!0),A({creds:{...t,mfa_resend:!0},loggingOptions:{loggingData:E,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{h(!1),_(!0)}),(e=>{h(!1),e.message?l(e.message):(0,F.x)(w.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", " - ", undefined, true))}))},underline:"hover",children:(0,m.jsx)(s.xv,{size:"100",weight:"bold",children:w.bt("resend the code", "resend the code", " - ", undefined, true)})},"code")})}),p&&(0,m.jsx)(s.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:50,left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,m.jsx)(Y.ZP,{onHide:()=>_(!1),text:w.bt("We have sent you a new code.", "We sent you a new code!", "login2fa.resendCode.success", undefined, true),duration:5e3})})]})};var Be=i(708196);const Ne={backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},Ze=({children:e,noBoxShadow:t})=>{const i={...Ne,...t?{boxShadow:"none"}:{}},{viewer:n}=(0,_.B$)(),o=(0,_.Cw)();return"LIMITED_LOGIN"===n.type&&o?(0,m.jsxs)("div",{"data-test-id":"login-modal-default",style:{...i,display:"flex",width:"auto",padding:""},children:[(0,m.jsx)(s.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:"8px 0 0 8px"}},children:(0,m.jsx)(s.xu,{maxWidth:400,height:"100%",dangerouslySetInlineStyle:{__style:{width:"number"==typeof o.height&&"number"==typeof o.width?600*(o.width/o.height||0):0,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:o.url?`url(${o.url})`:""}}})}),(0,m.jsx)(s.xu,{width:400,dangerouslySetInlineStyle:{__style:{padding:"32px 0"}},children:e})]}):(0,m.jsx)("div",{"data-test-id":"login-modal-default",style:{...i,padding:"32px 0"},children:e})},Fe=({children:e,email:t,footer:i,handleNotYouClick:o,header:r,noBoxShadow:a,title:l,viewerInfo:d})=>{var c;const{viewer:u}=(0,_.B$)(),h=(0,b.ZP)();return(0,m.jsx)(Ze,{noBoxShadow:a,children:(0,m.jsxs)(n.Fragment,{children:[r,(0,m.jsx)("div",{style:{display:"block",margin:"0 auto 16px",width:40,height:40},children:(0,m.jsx)(Ae.Z,{size:40})}),(0,m.jsx)("div",{style:{__style:{width:"auto",overflow:"hidden",maxHeight:"150px",margin:"0 48px 16px"}},children:l}),"LIMITED_LOGIN"===u.type&&(0,m.jsx)(s.xu,{marginBottom:4,paddingX:12,children:(0,m.jsx)(Be.Z,{})}),(0,m.jsx)(s.xu,{width:120,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,m.jsx)(ve.Z,{name:d.firstName,src:null!==(c=d.imageUrl)&&void 0!==c?c:void 0})}),(0,m.jsx)(s.xu,{marginBottom:3,children:(0,m.jsx)(s.xv,{align:"center",children:t})}),e,(0,m.jsx)(s.xu,{paddingY:5,children:(0,m.jsx)(s.iz,{})}),(0,m.jsx)(s.xu,{"data-test-id":"login-switch-account",children:(0,m.jsx)(s.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),o()},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(s.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:h.bt("Not you? Log in with a different account", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,m.jsx)(s.xu,{marginBottom:0,marginTop:1,children:i})]})})};var Ue=i(796592),Ve=i(567482);const He=({age:e,handleAgeChange:t,handleSubmit:i,error:o,removeExtraSpaceForErr:r,method:a})=>{const l=(0,b.ZP)();(0,n.useEffect)((()=>{(0,P.My)("dweb.signup_age_step",{type:a,format:"age"})}),[a]);const[d,c]=(0,n.useState)(""),u=l.bt("Enter your age", "Enter your age", "age.input.placeholder", undefined, true);return(0,m.jsx)(s.xu,{children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:t=>{t.preventDefault(),e&&!d&&i({age:e})},children:[(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(Ve.Z,{value:null==e?void 0:e.toString(),focusOnMount:!0,error:o,onChangeParsed:e=>t({value:e}),onValidation:c,customPlaceholderText:u}),(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(s.xu,{paddingY:12,marginTop:12}),(0,m.jsx)(s.xu,{paddingY:(e=>r&&""!==e?2:5)(d)})]}),(0,m.jsx)(s.xu,{marginTop:3}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!!d||!e,text:l.bt("Next", "Next", "social.connect.age.form.next.btn", undefined, true),type:"submit"})})]})})};function Ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class We extends n.Component{constructor(...e){super(...e),Ge(this,"state",{age:void 0,error:"",isLoading:!1,removeExtraSpaceForErr:!1}),Ge(this,"getViewParameter",(e=>{switch(null==e?void 0:e.type){case"facebook":return 3205;case"google":return 3204;case"google_one_tap":return 3201;default:return}})),Ge(this,"handleAgeChange",(({value:e})=>{this.setState({age:e,removeExtraSpaceForErr:!0})})),Ge(this,"handleSignupSuccess",(()=>{this.track("signup_success");const{showResponseMessageModal:e}=this.props;e?e(!0):D.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)})),Ge(this,"handleSignupFailure",(e=>{const{i18n:t}=this.props;this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.setState({isLoading:!1});const i=e.message||t.bt("Oops! Something went wrong… Click Continue to try again.", "Oops! Something went wrong… Click Continue to try again.", "Error during signup during age collection step", undefined, true);this.setState({error:i})})),Ge(this,"handleSubmit",(({age:e})=>{const{desktopCoreLoginContext:{register:t},onLineEmailMissingError:i}=this.props;this.track(`submit_button_click.${e||"undefined"}`);const{loadingIndicatorCallback:n,registrationCredentials:o,showResponseMessageModal:s}=this.props;if("1"===u.U2(h.It))return void this.track("signup_failure");const r=o&&o.type;if(n&&!["google_one_tap","google","facebook"].includes(r)&&n(!0),!o)return void n(!1);const a=(0,B.Z)(e),l={signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_parameter:this.getViewParameter(this.props.registrationCredentials)}};if("facebook"===o.type){this.track("attempt_signup");t({...o.signupOptions,birthday:a,birthday_source_site:k.E_.PINTEREST},l).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("google"===o.type||"google_one_tap"===o.type){this.track("attempt_signup");t({...o.signupOptions,birthday:a},l).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("line"===o.type){this.track("attempt_signup");const e={...o.signupOptions,birthday:a};t({...e},l).then(this.handleSignupSuccess,(t=>{t.api_error_code===T.iZ&&i?i({...o,signupOptions:e}):this.handleSignupFailure(t)}))}s||"facebook"!==o.type||this.setState({isLoading:!0})}))}componentDidMount(){this.track("shown")}track(e){const{container:t,registrationCredentials:i}=this.props,n=i?i.type:"undefined";(0,P.My)(`unauth_web.age_collection_form.${e}.${n}.${t||"undefined"}`)}render(){const{age:e,error:t,isLoading:i,removeExtraSpaceForErr:n}=this.state,{registrationCredentials:o}=this.props;return i?(0,m.jsx)(Ue.Z,{}):(0,m.jsx)(s.xu,{width:464,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,m.jsx)(He,{age:e,error:t,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,removeExtraSpaceForErr:n,method:null==o?void 0:o.type})})}}const $e=e=>{const t=(0,b.ZP)(),i=(0,_.B$)();return(0,m.jsx)(We,{...e,desktopCoreLoginContext:i,i18n:t})};var qe=i(124580),Xe=i(12610);const Ye=e=>{qe.Z.resume(Xe.LU),(0,P.My)(`web.dismiss_account_switcher.${e}`)};var Ke=i(407159),Je=i(66699),Qe=i(941646),et=i(123906),tt=i(704115),it=i(698330);const nt={backgroundColor:"#fff",borderRadius:"32px",position:"relative",textAlign:"center",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},ot={...nt,height:"610px",width:"528px",padding:"20px 10px 24px"},st={home_page:{...nt,minHeight:"initial"},pinBookmarklet:{...nt,boxShadow:"none"}},rt={minHeight:"400px",padding:"20px 10px 24px"},at={margin:"0 auto 22px",width:"270px"},lt={margin:"90px auto 22px",width:"464px"},dt=(e,t)=>{switch(t){case"boardInvite":return e.bt("Sign up to accept your board invite", "Sign up to accept your board invite", "Sign up copy board invite", undefined, true);case"saveButton":return e.bt("Sign up to see more", "Sign up to see more", "signup copy save button", undefined, true);case"saveButtonExp":return e.bt("Join Pinterest to save this idea", "Join Pinterest to save this idea", "FullPageSignup.signupTagline.save", undefined, true);case"homePage":return e.bt("Welcome to Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("Sign up to save this Pin!", "Sign up to save this Pin!", "signup copy save button from third party website", undefined, true);case"downloadImageBtnDweb":return e.bt("Never lose track of your ideas again. Sign up for an account", "Never lose track of your ideas again! Sign up for an account", "mweb.unauth.download_modal.download_value_prop", undefined, true);case"followButton":return e.bt("Join Pinterest to follow", "Join Pinterest to follow", "mweb.unauth.follow_modal.follow_value_prop", undefined, true);default:return e.bt("Sign up to see more", "Sign up to see more", "sigup copy default includes pin click and scrolling", undefined, true)}},ct=(e,t)=>{switch(t){case"boardInvite":return e.bt("Log in to accept your board invite", "Log in to accept your board invite", "Login copy board invite", undefined, true);case"homePage":return e.bt("Welcome to Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("Sign in to save this Pin!", "Sign in to save this Pin!", "Login copy save button from third party website", undefined, true);default:return e.bt("Log in to see more", "Log in to see more", "Title on desktop login modal", undefined, true)}};function ut({container:e,savePinId:t,customLoginTagline:i,customSignupTagline:l,handleCloseButtonClick:d,handleShowingSignupWelcomeLoading:c,hideAccountSwitchValueProp:u,inviter:h,isAccountSwitch:p=!1,isBusiness:g,nextUrlParam:v,renderBusinessCreateButton:I,showCloseIcon:A,showResponseMessageModal:E,signupRedirectUrl:S,signupSource:T="defaultSource",suppressFocus:D,toggleType:k="DEFAULT_TOGGLE",signupFlow:z,component:O,attributionLabel:R}){var M;const B=(0,y.B)(),{country:N}=B,Z=(0,b.ZP)(),{viewer:{info:F,type:U}}=(0,_.B$)(),V=(0,a.Z)(),H=(0,w.Z)(),{checkExperiment:G}=(0,Q.F)(),W=G("web_birthday_collection_eu_new_users").anyEnabled,[$,q]=(0,n.useState)(!1),[X,Y]=(0,n.useState)(!1),[K,J]=(0,n.useState)(!1),[ee,te]=(0,n.useState)("signup"===(0,tt.Z)().type?{type:"signup"}:z),[ie,ne]=(0,n.useState)(!1),oe=(0,x.Z)(U),{username:se}=(0,o.useParams)(),re=(0,it.cm)(),ae=se?re(se):null,le=["GB","IE"].includes(N)||W;(0,n.useEffect)((()=>((0,P.My)(`unauth.authentication_modal.shown.${k}.${ee.type}`),()=>{p&&((0,Ke.Z)("add_account_dismiss",null,e),Ye(e))})),[]);const de=(0,n.useRef)(ee.type);(0,n.useEffect)((()=>{de.current!==ee.type&&(de.current=ee.type,(0,P.My)(`unauth.authentication_modal.shown.${k}.${ee.type}`))}));const ue=(0,n.useRef)(z);(0,n.useEffect)((()=>{ue.current.type!==z.type&&(ue.current=z,te(z))}));const he=null!==(M=st[e])&&void 0!==M?M:nt,pe=()=>v?decodeURIComponent(v):v,_e=e=>pe()?(0,et.Z)(e,{next:pe()}):e,ge=e=>te({type:"EmailCollection",registrationCredentials:e}),me=e=>te({type:"socialSignupWithAge",registrationCredentials:e}),fe=(e,t)=>te({type:"loginMfa",creds:e,phoneNumberEnd:(null==t?void 0:t.phoneNumberEnd)||void 0}),xe=e=>{(0,P.My)(`unauth.personalized_login.prevent_register.${e}`),ne(!0),Y(!1),te({type:"signup"})},Pe=()=>{(0,P.My)("unauth.personalized_login.not_you.click"),(0,P.NC)("click_change_signin_account"),V({aux_data:oe,element:10879,event_type:101})},we=e=>{(0,P.My)(`unauth.authentication_modal.${e}.${k}.${ee.type}`)},Ae=e=>{we("login_toggle_click"),(0,P.NC)("click_toggle_login"),H({action:"click",item:"login-button"}),te({type:"login",email:null==e?void 0:e.email}),q(!1)},Se=({email:e})=>{we("signup_toggle_click"),(0,P.NC)("click_toggle_signup"),S?(0,r.Z)(S,!1):te({type:"signup",email:e})},je=({email:e})=>(0,m.jsx)(s.iP,{fullWidth:!1,onTap:t=>{const i={event_type:101,element:10880};g?V(i):(t.event.preventDefault(),(0,P.My)("unauth.personalized_login.signup_instead.click"),V({...i,aux_data:oe}),Se({email:e}))},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(Qe.Z,{id:"need-account-link",children:(0,m.jsx)(s.rU,{href:g?_e("/business/create"):"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:Z.bt("Need an account? Sign up now", "Need an account? Sign up now", "Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account", undefined, true)})})})}),ke=A&&(0,m.jsx)(ye,{onClick:d});if(K&&["signup","login","socialSignupWithAge"].includes(ee.type))return(0,m.jsx)(Ue.Z,{});switch(ee.type){case"signup":case"respondMessage":{var ze;const i=$?Z.bt("Welcome back to Pinterest!", "Welcome back to Pinterest!", "welcoming user back to pinterest in signup modal when we recognize their email", undefined, true):l||dt(Z,T),o=h&&!h.is_default_image?h:null,r=(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:at},width:"login_page"!==e?400:void 0,children:(0,m.jsx)(Ce,{container:e,modalType:"signup",titleText:o&&("respondMessage"===z.type?(Z.bt("Sign up and let {{ name }} know what you think", "Sign up and let {{ name }} know what you think", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",o.first_name||o.full_name):(Z.bt("Join {{ name }} on Pinterest for more ideas", "Join {{ name }} on Pinterest for more ideas", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",o.first_name||o.full_name))||(["login_page","home_page","save","download","follow"].includes(e)?i:Z.bt("Unlimited free access to the world's best ideas", "Unlimited free access to the world's best ideas", "FullPageSignup.signupTitle.save", undefined, true))})});return(0,m.jsxs)(s.xu,{"data-test-id":"signup-default-modal",width:484,dangerouslySetInlineStyle:{__style:he},children:[X&&(0,m.jsx)(Le.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:o?{minHeight:"400px",padding:"30px 10px 20px"}:rt},children:[ke,o?(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(s.xu,{width:108,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,m.jsx)(ve.Z,{name:o.first_name||o.full_name,src:o.image_medium_url,verified:"respondMessage"===z.type})}),r]}):(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(Ie,{container:e,fallback:(0,m.jsx)(Ee,{large:"homePage"!==T}),savePinId:t,user:ae}),r,(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:at},children:!$&&(0,m.jsx)(s.xu,{marginTop:-4,marginBottom:4,children:(0,m.jsx)(s.xv,{size:"300",align:"center",children:"login_page"!==e&&"home_page"!==e&&"save"!==e&&"download"!==e&&"follow"!==e?i:"downloadImageBtnDweb"===T&&Z.bt("Discover a better way to keep your ideas organised", "Discover a better way to keep your ideas organized", "mweb.unauth.signup_modal.download_value_prop_subheader", undefined, true)||"followButton"===T&&(0,Re.nk)(Z.bt("Create an account to follow {{ creatorName }}", "Create an account to follow {{ creatorName }}", "mweb.unauth.signup_modal.follow_value_prop_subheader", undefined, true),{creatorName:null==ae?void 0:ae.full_name})||"homePage"===T&&Z.bt("Find new ideas to try", "Find new ideas to try", "Value prop on desktop signup modal on home page", undefined, true)||"saveButtonExp"===T&&Z.bt("Unlimited free access to the world's best ideas", "Unlimited free access to the world's best ideas", "FullPageSignup.signupSubTitle.saDDve", undefined, true)||Z.bt("Discovery starts here", "Discovery starts here", "Pinterest value proposition on desktop login modal", undefined, true)})})})]}),(0,m.jsx)(s.xu,{"data-test-id":"signup-options",position:"relative",dangerouslySetInlineStyle:{__style:{textAlign:"center",margin:"0 auto"}},children:(0,m.jsx)(ce,{additionalChildren:(0,m.jsx)(C,{layout:("NOT_NOW_BUTTON"===k?"SIGNUP_LARGE":"home_page"===e&&"SIGNUP_SMALL")||"SIGNUP_DEFAULT",onClick:()=>Ae({email:ee.email}),type:"signupToLogin",shouldHideBusinessCreateFooterLink:!!I}),container:e,disablePostSignupNextUrl:!v,email:null!==(ze=ee.email)&&void 0!==ze?ze:"",loadingIndicatorCallback:Y,nextUrlParam:pe(),onBirthdayUnderage:({birthday:e,email:t})=>{te({type:"UnderageConfirmation",birthday:e,email:t})},onFBPhoneOnlyConnectVerified:ge,onFBMissingEmail:ge,onLoginWithMfa:fe,setEmail:e=>te((ee.type,{...ee,email:e})),showResponseMessageModal:"respondMessage"===z.type?E:void 0,showSignupWelcomeLoadingFn:e=>{J(e),c&&c(e)},signupSource:T,suppressFocus:D,switchToSocialSignupWithAgeFlow:me,component:O,attributionLabel:R})})]}),I&&I()]})}case"login":{if(!ie&&!p&&F&&"AUTH"!==U&&"bottom.right.upsell.email"!==e){var Oe;const t=F.hasPassword||F.connectedToFacebook||F.connectedToGoogle;return(0,m.jsx)(Fe,{email:null!==(Oe=ee.email)&&void 0!==Oe?Oe:"",handleNotYouClick:()=>{ne(!0),Pe()},noBoxShadow:"pinBookmarklet"===e,header:(0,m.jsxs)(n.Fragment,{children:[X&&(0,m.jsx)(Le.Z,{}),ke]}),viewerInfo:F,title:(0,m.jsx)(Ce,{container:e,modalType:"personalizedLogin",titleText:(0,Re.nk)(Z.bt("Welcome back, {{name}}!", "Welcome back, {{name}}!", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:F?F.firstName:""}).join("")}),footer:je({email:ee.email}),children:(0,m.jsx)(De.ZP,{container:e,disablePostSignupNextUrl:!v,email:F.email,hideEmailField:!0,hideFacebookButton:t&&!F.connectedToFacebook,hideGoogleButton:t&&!F.connectedToGoogle,hideLineButton:t,hidePasswordField:t&&!F.hasPassword,hideTermsOfService:!0,loadingIndicatorCallback:Y,loginButtonTextOverride:Z.bt("Continue", "Continue", " - ", undefined, true),nextUrlParam:pe(),onEmailChange:()=>{},onLoginWithMfa:fe,requestContext:B,showResponseMessageModal:"respondMessage"===z.type?E:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:xe},component:O,attributionLabel:R})})}let t=i||ct(Z,T);return"save"===e&&G("dweb_signup_to_login_modal").group.endsWith("save")&&(t=Z.bt("Log in to save this idea", "Log in to save this idea", "dweb.login.modal.title.on.save", undefined, true)),(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-default",width:484,dangerouslySetInlineStyle:{__style:he},children:[X&&(0,m.jsx)(Le.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ke,(0,m.jsx)(Ee,{large:"homePage"!==T}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:at},width:"login_page"!==e?400:void 0,children:(0,m.jsx)(Ce,{container:e,modalType:"login",titleText:t})}),p&&!u&&(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:at},children:(0,m.jsx)(s.xu,{marginTop:-4,marginBottom:8,children:(0,m.jsx)(s.xv,{align:"center",size:"300",children:Z.bt("Have another Pinterest account? Log in to easily switch between them", "Have another Pinterest account? Log in to easily switch between them", "Subtitle on the login modal that explains to a user why they would add an additional account to their profile", undefined, true)})})}),(0,m.jsx)(De.ZP,{container:e,disablePostSignupNextUrl:!v,email:ee.email,isAccountSwitch:p,loadingIndicatorCallback:Y,nextUrlParam:pe(),onEmailChange:e=>te({...ee,email:e.target.value}),onFBPhoneOnlyConnectVerified:ge,onLoginWithMfa:fe,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:me},requestContext:B,showResponseMessageModal:"respondMessage"===z.type?E:void 0,component:O,attributionLabel:R}),g?(0,m.jsxs)(s.kC,{direction:"column",alignItems:"center",children:[(0,m.jsx)(f,{}),(0,m.jsx)(s.xv,{weight:"bold",size:"100",children:(0,m.jsx)(s.rU,{href:_e("/business/create"),children:Z.bt("Create new account", "Create new account", "Link to the page to create a new business account instead of logging in", undefined, true)})})]}):!p&&(0,m.jsx)(C,{layout:("NOT_NOW_BUTTON"===k?"LOGIN_INLINE":"SMALL_TOGGLE"===k&&"LOGIN_SMALL")||"LOGIN_DEFAULT",type:"loginToSignup",onClick:()=>Se({email:ee.email})})]})]})}case"loginMfa":return(0,m.jsx)(s.xu,{"data-test-id":"login-modal-mfa",width:489,dangerouslySetInlineStyle:{__style:he},children:(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ke,(0,m.jsx)(Ee,{}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...at,padding:"0 10px"}},width:"100%",children:(0,m.jsx)(Ce,{container:e,modalType:"loginMfa",titleText:Z.bt("Two-factor authentication required", "Two-factor authentication required", "desktopLoginModal.2fa.title", undefined, true)})}),(0,m.jsx)(Me,{container:e,creds:ee.creds,isAccountSwitch:p,nextUrlParam:pe(),phoneNumberEnd:ee.phoneNumberEnd})]})});case"socialSignupWithAge":{if(le)return(0,m.jsx)(s.xu,{"data-test-id":"birthday-collection-modal",dangerouslySetInlineStyle:{__style:he},minHeight:"0",children:(0,m.jsx)(L,{disablePostSignupNextUrl:!v,handleLoginToggleButtonClick:Ae,loadingIndicatorCallback:Y,nextUrlParam:pe(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===z.type?E:void 0})});const t=ee.registrationCredentials.signupOptions.first_name;return(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-with-age",dangerouslySetInlineStyle:{__style:ot},children:[X&&(0,m.jsx)(Le.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ke,(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:lt},children:[(0,m.jsx)(s.X6,{size:"500",align:"center",children:t?(0,Je.Z)(Z.bt("Oh hi, {{facebookFirstName}}! How old are you?", "Oh hi, {{facebookFirstName}}! How old are you?", "social.signup.age.collection.header", undefined, true),{facebookFirstName:t}):Z.bt("Sign up to see more", "Sign up to see more", "Age collection signup step for Facebook/G+ authentication", undefined, true)}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.xv,{size:"300",align:"center",children:Z.bt("This won't be displayed publicly. We collect age to provide you with the right experience on Pinterest, including to personalise your recommendations and ads.", "This won't be publicly displayed. We collect age to provide you with the right experience on Pinterest, including to personalize your recommendations and ads.", "social.signup.age.collection.subheader", undefined, true)})})]}),(0,m.jsx)($e,{container:e,loadingIndicatorCallback:Y,nextUrlParam:pe(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===z.type?E:void 0,onLineEmailMissingError:ge})]}),(0,m.jsx)(C,{layout:"SIGNUP_WITH_AGE",onClick:()=>Ae(),type:"signupToLogin"})]})}case"EmailCollection":{const e=()=>{te({type:"signup",email:ee.registrationCredentials.signupOptions.email}),Y(!1)},t=({email:e})=>te({type:"EmailAlreadyExist",email:e});return(0,m.jsxs)(s.xu,{"data-test-id":"line"===ee.registrationCredentials.type?"signup-modal-line-phone-only":"signup-modal-facebook-phone-only",minHeight:400,dangerouslySetInlineStyle:{__style:nt},children:[X&&(0,m.jsx)(Le.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:rt},children:[ke,(0,m.jsx)(Ee,{}),(0,m.jsx)(s.xu,{width:310,dangerouslySetInlineStyle:{__style:at},children:(0,m.jsx)(s.X6,{size:"600",children:Z.bt("What's your email address?", "What's your email address?", "Prompt for email address in after sign in with line", undefined, true)})}),"line"===ee.registrationCredentials.type?(0,m.jsx)(Te,{loadingIndicatorCallback:Y,nextUrlParam:v,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:me}):(0,m.jsx)(be,{loadingIndicatorCallback:Y,nextUrlParam:v,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:me})]})]})}case"EmailAlreadyExist":return(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-existing-email",dangerouslySetInlineStyle:{__style:Ne},children:[X&&(0,m.jsx)(Le.Z,{}),(0,m.jsx)(Ee,{}),(0,m.jsx)(s.xu,{overflow:"hidden",maxHeight:120,width:350,dangerouslySetInlineStyle:{__style:at},children:(0,m.jsx)(Ce,{container:e,modalType:"personalizedLogin",titleText:(0,Re.nk)(Z.bt("It looks as though you're already on Pinterest", "Looks like you're already on Pinterest", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:F?F.firstName:""}).join("")})}),(0,m.jsx)(s.xu,{marginBottom:3,children:(0,m.jsx)(s.xv,{align:"center",children:ee.email})}),(0,m.jsx)(De.ZP,{container:e,disablePostSignupNextUrl:!v,email:ee.email,hideEmailField:!0,hideFacebookButton:!0,hideLineButton:!0,hideTermsOfService:!0,loadingIndicatorCallback:Y,loginButtonTextOverride:Z.bt("Continue", "Continue", " - ", undefined, true),nextUrlParam:pe(),onEmailChange:()=>{},onLoginWithMfa:fe,requestContext:B,showResponseMessageModal:"respondMessage"===z.type?E:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:xe},component:O,attributionLabel:R}),(0,m.jsx)(s.xu,{paddingY:5,children:(0,m.jsx)(s.iz,{})}),(0,m.jsx)(s.xu,{"data-test-id":"login-switch-account",children:(0,m.jsx)(s.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),te({type:"login"}),ne(!0),Pe()},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(s.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:Z.bt("Not you? Log in with a different account", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,m.jsx)(s.xu,{marginBottom:4,marginTop:1,children:je({email:ee.email})}),ke]});case"UnderageConfirmation":return(0,m.jsx)(s.xu,{"data-test-id":"underage-confirmation-modal",dangerouslySetInlineStyle:{__style:he},children:(0,m.jsx)(j.Z,{birthday:ee.birthday,onEditBirthday:()=>{te({type:"signup",email:ee.email}),Y(!1)}})});default:return null}}},611683:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(667294),o=i(883119),s=i(233211),r=i(905171),a=i(803491),l=i(174382),d=i(640672),c=i(898781),u=i(472644),h=i(785893);function p(e){const t=(0,c.ZP)(),{tooltip:i}=e,[s,r]=(0,n.useState)();return(0,h.jsxs)(o.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,h.jsx)(a.Z,{onClick:()=>r(!0),type:"button",styleOverrides:{width:"100%",borderRadius:"20px",border:"0px solid"},children:(0,h.jsxs)(o.kC,{alignItems:"center",justifyContent:"center",children:[(0,h.jsx)(o.xu,{height:24,width:24,marginTop:1,children:(0,h.jsx)(u.Z,{size:20})}),(0,h.jsx)(o.xu,{marginStart:2,children:(0,h.jsx)(o.xv,{weight:"bold",children:t.bt("Connect with Google", "Connect with Google", "googleConnectButtonWithDisabledSDK.buttonText", undefined, true)})})]})}),!!i&&(0,h.jsx)(o.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,h.jsx)(d.Z,{message:i})}),s&&(0,h.jsx)(l.Z,{type:"google",onDismiss:()=>r(!1)})]})}var _=i(70212),g=i(85334),m=i(901656),f=i(903095),x=i(379913),b=i(584595),y=i(711781),v=i(83969),P=i(524172),w=i(290148),I=i(830269),A=i(773285),E=i(780280),C=i(829407);const S=({container:e,isAccountSwitch:t,nextUrlParam:i,onLoginWithMfa:a,onLoginWithSuspended:l,onLoginWithVoluntarilyDeactivated:u,showResponseMessageModal:p,socialSignupCallbacks:S,tooltip:j,showLoginRateLimited:T,onClick:D})=>{const{viewer:{type:k}}=(0,s.B$)(),z=(0,g.Z)(),O=(0,f.lO)(),R=(0,c.ZP)(),{checkExperiment:L}=(0,A.F)(),M=(0,P.M)(),B=(0,n.useRef)(null),N=L("dweb_google_button_locale_fix").anyEnabled,{locale:Z}=(0,E.B)(),F=N?Z:void 0;return(0,C.Z)((()=>(window.googleConnectButtonContainer=e||"",()=>{delete window.googleConnectButtonContainer}))),(0,C.Z)((()=>{const n=({credential:n,select_by:o})=>{const s=(0,v.mK)((0,v.PL)(o));z({creds:{google_open_id_token:n},loggingOptions:{loggingData:{container:window.googleConnectButtonContainer,page:null==O?void 0:O.pageType,trigger:s},loginAttemptContextEvent:{event_type:7534,element:12981,aux_data:{...(0,m.Z)(k),signup_login_method:I.Z.GPLUS}}},isAccountSwitch:t}).then((n=>{var o,s;const r=null==n||null===(o=n.resource_response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.user;t&&r&&(0,x.Z)(r,"google",e),p?p(!1):w.ZP.handleRedirect(i||w.ZP.defaultSocialLoginRedirectUrl()),L("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,_.Z)()}),(e=>{switch(b.ik.includes(e.api_error_code)&&(null==T||T()),e.api_error_code){case b.E6:null==u||u(e.message);break;case b.Zn:var t;null==a||a({google_open_id_token:n},{phoneNumberEnd:null===(t=e.data)||void 0===t?void 0:t.phone_number_end});break;case b.xN:if("ACCOUNT_RECOVERY"===S.type)S.switchToAccountRecoverySignupFlow("google");else{const e=(0,y.Z)(n),t={container:window.googleConnectButtonContainer,page:null==O?void 0:O.pageType,trigger:s},i={type:"google",google_open_id_token:n,first_name:e.given_name,last_name:e.family_name,image_url:e.picture};S.switchToSocialSignupWithAgeFlow({type:"google",context:t,signupOptions:{...i}})}break;default:e.api_error_code===b.an&&l?l():(0,r.x)(R.bt("Sorry, we can't log you in.", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true))}}))};return(async()=>{await(null==M?void 0:M.ensureInit("button",n)),(0,v.ru)({buttonRef:B,isDesktop:!0,locale:F})})(),()=>{null==M||M.removeButtonCallback(n)}})),(0,h.jsxs)(o.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,h.jsx)(o.xu,{height:44,children:(0,h.jsx)("div",{ref:B,style:{position:"absolute",width:"100%"},onClick:()=>{null==D||D()}})}),!!j&&(0,h.jsx)(o.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,h.jsx)(d.Z,{message:j})})]})};function j(e){const{checkExperiment:t}=(0,A.F)(),{anyEnabled:i}=t("web_google_disabled");return i?(0,h.jsx)(p,{tooltip:e.tooltip}):(0,h.jsx)(S,{...e})}},708196:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(883119),o=i(11363),s=i(898781),r=i(987318),a=i(785893);const l=({useDefaultText:e})=>{const{limitedLoginModalSubheader:t}=(0,r.H)(),i=(0,s.ZP)();return(0,a.jsx)(n.xv,{align:"center",overflow:"normal",children:e||!t?(0,o.lt)(i):t.text})}},710893:(e,t,i)=>{i.d(t,{OL:()=>V,ZP:()=>G});var n=i(667294),o=i(883119),s=i(407043),r=i(385740),a=i(85651),l=i(777024),d=i(233211),c=i(905171),u=i(996438),h=i(611683),p=i(389054),_=i(563387),g=i(780679),m=i(85334),f=i(901656),x=i(903095),b=i(319915),y=i(186656),v=i(898781),P=i(124580),w=i(12610),I=i(379913),A=i(584595),E=i(738192),C=i(290148),S=i(830269),j=i(143461),T=i(780280),D=i(817656),k=i(947599),z=i(966113),O=i(867820),R=i(323468),L=i(216895),M=i(134906),B=i(785893);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Z=(0,n.lazy)((()=>i.e(97500).then(i.bind(i,97500)))),F=z.lf,U="loginmodal",V="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1";class H extends n.Component{constructor(e){super(e),N(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),N(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e&&e(!1),this.setState({accountRecoveryModalType:a.w[A.an],loading:!1})})),N(this,"onloadCallback",(()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:V,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:V,callback:"verifyCaptcha"})}catch(e){}})),N(this,"handleButtonClick",((e,t)=>{var i;(0,O.My)("unauth.login.button.clicked");const{logContextEvent:n,desktopCoreLoginContext:{viewer:o}}=this.props;n({event_type:101,element:30,aux_data:{...(0,f.Z)(o.type),signup_login_method:S.Z.EMAIL}}),this.setState({googleValidationError:null,hideFBGoogleToolTip:!1});let s=(0,L.Z)(null!==(i=this.props.email)&&void 0!==i?i:"",this.emailValidators);if(s)this.setState({emailValidationError:s}),(0,O.My)(`unauth.login.error.CLIENT_ERROR.malformemail.${U}`);else{this.setState({emailValidationError:null}),s=(0,L.Z)(this.props.password,this.passwordValidators);const e=(0,L.Z)(this.props.password,this.asciiValidators);s?(this.setState({passwordValidationError:s}),(0,O.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${U}`)):e?(this.setState({passwordValidationError:e}),(0,O.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${U}`)):(this.setState({passwordValidationError:null}),this.loginUser("email",void 0,t))}})),N(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),N(this,"loadRecaptchaView",(()=>{if("undefined"!=typeof document&&document.head)if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.recaptcha.net/recaptcha/api.js?onload=onloadCallback&render=explicit",document.head&&document.head.appendChild(e)}})),N(this,"handleLoginFailure",((e,t,i)=>{const{email:n,i18n:o,loadingIndicatorCallback:s,setPassword:r}=this.props;(0,O.My)(`unauth.login.error.LOGIN_FAILURE.${e}`),s(!1),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token();const l=t.http_status||t.httpStatus,d=l===D.Ej?D.Ej:t.api_error_code;var u;if(d===A.Zn)return void C.ZP.handleLoginMfa(i,{phoneNumberEnd:null===(u=t.data)||void 0===u?void 0:u.phone_number_end},this.props.onLoginWithMfa);if(l===D.Ej&&d===A.bd&&t.message&&"!"!==t.message[t.message.length-1]&&!C.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:o.bt("Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});if(d===A._K&&l===D.AB&&!C.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:o.bt("Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});const h=(0,E.Z)({error:t,source:"login",onClickPasswordReset:()=>{(0,O.My)("unauth_password_reset_link_tapped"),(0,y.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:n}}).then((()=>this.updateAccountRecoveryModal(C.Ny.PASSWORD_RESET_SENT)))}});h?(this.setState({...h,accountRecoveryModalType:d?a.w[d]:void 0,loading:!1}),h.passwordValidationError&&r("")):((0,c.x)(o.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setState({loading:!1}))})),N(this,"verifyCaptcha",(()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);C.ZP.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),C.ZP.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))})),N(this,"handleEmailChange",(e=>{this.props.onEmailChange&&this.props.onEmailChange(e),this.setState({hideFBGoogleToolTip:!0})})),N(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),N(this,"handleBlur",(()=>{var e;this.setState({googleValidationError:null});let t=(0,L.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.asciiValidators);t&&(0,O.My)(`unauth.login.error.CLIENT_ERROR.nonasciiemail.${U}`),t=(0,L.Z)(this.props.password,this.asciiValidators),t&&(0,O.My)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${U}`)})),N(this,"renderSocialButtons",(()=>{const{disablePostSignupNextUrl:e,hideFacebookButton:t,hideLineButton:i,hideGoogleButton:s,isAccountSwitch:r,isPersonalizedLoginFlyout:a,loadingIndicatorCallback:l,nextUrlParam:d,onLoginWithMfa:c,onFBPhoneOnlyConnectVerified:p,onFBMissingEmail:_,container:g="unknown",socialSignupCallbacks:m,showResponseMessageModal:f,isLineAuthenticationEnabled:x,logContextEvent:y,viewType:v,viewParameter:P,component:w,attributionLabel:I}=this.props,{hideFBGoogleToolTip:A}=this.state,E="ACCOUNT_RECOVERY"===m.type?{...m,type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:e=>{"facebook"===e?this.updateAccountRecoveryModal(C.Ny.PREVENT_FACEBOOK_REGISTER):"google"===e&&this.updateAccountRecoveryModal(C.Ny.PREVENT_GOOGLE_REGISTER),m.switchToAccountRecoverySignupFlow(e)}}:m,S=e=>{y({view_type:v,view_parameter:P,component:w,element:e,event_type:10441,aux_data:{upsell_reason:I}})},j=!t&&(0,B.jsx)(u.Z,{container:g,disablePostSignupNextUrl:e,isAccountSwitch:r,loadingIndicatorCallback:l,nextUrlParam:d,onFBPhoneOnlyConnectVerified:p,onFBMissingEmail:_,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:E,showResponseMessageModal:f,tooltip:null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),onClick:()=>{S(13505)}}),T=!s&&(0,B.jsx)(h.Z,{container:g,isAccountSwitch:r,nextUrlParam:d,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showResponseMessageModal:f,tooltip:!A&&this.state.googleValidationError||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),socialSignupCallbacks:E,onClick:()=>{S(13504)}}),D=!i&&x&&(0,B.jsx)(b.Z,{name:"SafeSuspense_LineConnectButton",children:(0,B.jsx)(k.Z,{children:(0,B.jsx)(Z,{container:g,loadingIndicatorCallback:l,isAccountSwitch:r,nextUrlParam:d,onLoginWithMfa:c,onLoginWithSuspended:this.onLoginWithSuspended,showResponseMessageModal:f,socialSignupCallbacks:E,showLoginRateLimited:()=>this.updateAccountRecoveryModal(C.Ny.RATE_LIMITED),onClick:()=>{S(13507)}})})}),z=!t&&!s?"8px":"0px";return(0,B.jsxs)(o.xu,{"data-test-id":"login-options",dangerouslySetInlineStyle:{__style:{marginTop:a?"9px":"10px"}},children:[j,(0,B.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{height:a?z:"10px"}}}),T,!i&&x&&(0,B.jsxs)(n.Fragment,{children:[(0,B.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{height:a?z:"10px"}}}),D]})]})})),N(this,"renderRegisterForm",(()=>{const{disableEmailLogin:e,email:t,hideEmailField:i,hideFacebookButton:s,hideGoogleButton:r,hidePasswordField:a,i18n:l,isAccountSwitch:d,loginButtonTextOverride:c,password:u,suppressFocus:h,logContextEvent:_,requestContext:{isRTL:g},desktopCoreLoginContext:{viewer:m},viewType:x,viewParameter:b,component:y,attributionLabel:v}=this.props,{emailValidationError:P,loading:w,passwordValidationError:I}=this.state,A=c||l.bt("Log in", "Log in", "Copy on the button to log in", undefined, true),E=I&&(0,n.isValidElement)(I)?null:(0,B.jsx)(o.xu,{marginBottom:3,marginTop:2,dangerouslySetInlineStyle:{__style:{float:g?"right":"left"}},children:(0,B.jsx)(o.xv,{size:"200",weight:"bold",children:(0,B.jsx)(o.rU,{href:F+(t?`?q=${t}`:""),onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,O.My)("login_modal_forget_account"),(0,O.NC)("click_forget_password"),_({event_type:101,element:10881,aux_data:{...(0,f.Z)(m.type)}})},children:l.bt("Forgotten your password?", "Forgot your password?", "Desktop login modal link for users to recover their account", undefined, true)})})});return(0,B.jsx)(p.Z,{buttonText:A,disableEmailLogin:e,email:t,emailText:l.bt("Email", "Email", "Placeholder text for email field", undefined, true),emailValidationError:P,hideEmailField:i,hideFacebookButton:s,hideGoogleButton:r,hidePasswordField:a,loading:w&&!d,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur,onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:u,passwordResetLink:E,passwordText:l.bt("Password", "Password", " - ", undefined, true),passwordValidationError:I,suppressFocus:h,component:y,attributionLabel:v,viewType:x,viewParameter:b})})),N(this,"renderOriginalForm",(()=>{const{hideFacebookButton:e,hideGoogleButton:t,hidePasswordField:i}=this.props,o=!(i||t&&e);return(0,B.jsxs)(n.Fragment,{children:[this.renderRegisterForm(),o&&(0,B.jsx)(l.Z,{}),this.renderSocialButtons()]})})),N(this,"renderButtons",(()=>this.renderOriginalForm())),this.state={accountRecoveryModalType:null,emailValidationError:null,passwordValidationError:null,googleValidationError:null,loading:!1,hideFBGoogleToolTip:!1};const{i18n:t}=e,i=t.bt("You missed a bit! Don't forget to add your email address.", "You missed a spot! Don't forget to add your email.", " - ", undefined, true),s=t.bt("That doesn't look like an email address.", "Hmm...that doesn't look like an email address.", " - ", undefined, true),r=t.bt("Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "Login.password.onlyASCII", undefined, true);this.emailValidators=[(0,M.aH)({message:i}),(0,M.GT)({message:s})];const d=t.bt("The password you entered is incorrect.", "The password you entered is incorrect.", " - ", undefined, true);this.passwordValidators=[(0,R.r)({shortPassStr:d,samePasswordStr:d,blackPassStr:d})],this.asciiValidators=[(0,M.oR)({message:r})]}componentDidMount(){const{isAccountSwitch:e,nextUrlParam:t,requestContext:i,showResponseMessageModal:n}=this.props;C.ZP.isFullyLoggedIn(i.isAuthenticated,i.loginState)&&!e&&(n?n(!1):C.ZP.handleRedirect(t)),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}loginUser(e,t,i){const{container:n="unknown",email:o,flushContextEvents:s,isAccountSwitch:r,loadingIndicatorCallback:a,login:l,pageContext:d,showResponseMessageModal:c,desktopCoreLoginContext:{viewer:u},requestContext:h}=this.props;this.setState({loading:!0}),a(!0);const p=t||{username_or_email:o||"",password:this.props.password},_={container:n,page:d?d.pageType:void 0};let g=S.Z.EMAIL;"facebook"===e?g=S.Z.FACEBOOK:"google"===e&&(g=S.Z.GPLUS),P.Z.pause(w.LU),s(),l({creds:p,loggingOptions:{loggingData:_,loginAttemptContextEvent:{event_type:7534,element:"google"===e?12981:void 0,aux_data:{...(0,f.Z)(u.type),signup_login_method:g}}},isAccountSwitch:r,recaptchaV2Token:i,recaptchaV3Token:this.props.recaptchaV3Token||"default"}).then(((e={})=>{C.ZP.storeLoginCredentialsToBrowser(p);let t=this.props.nextUrlParam||C.ZP.defaultLoginRedirectUrl();const{anyEnabled:i}=h.experimentsClient.checkExperiment("m10n_measurement_pinterest_tag_us");if(i&&"undefined"!=typeof window&&window.pintrk)try{window.pintrk("track","custom",{lead_type:"Pinterest Login",em:o})}catch(s){}if(r&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const{user:i}=e.resource_response.data;(0,I.Z)(i,"email",n),t="/"+i.username}else C.ZP.storeLoginCredentialsToBrowser(p);c?c(!1):C.ZP.handleRedirect(t)}),(t=>this.handleLoginFailure(e,t,p)))}render(){const{email:e}=this.props;return(0,B.jsxs)(o.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,B.jsx)(a.Z,{email:e||"",modalType:this.state.accountRecoveryModalType,onLoginWithMfa:this.props.onLoginWithMfa,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),this.renderButtons(),!this.props.hideTermsOfService&&(0,B.jsx)(_.Z,{dark:!0})]})}}function G(e){const t=(0,v.ZP)(),{flushContextEvents:i,logContextEvent:o}=(0,s.v)(),a=(0,x.lO)(),{recaptchaV3Token:l,refreshToken:c}=(0,j.D)(),u=(0,d.B$)(),{country:h}=(0,T.B)(),p="JP"===h,_=(0,m.Z)(),[f,b]=(0,n.useState)(""),{viewType:y,viewParameter:P}=(0,r.SU)(),w=(0,g.g)();return(0,B.jsx)(H,{...e,desktopCoreLoginContext:u,flushContextEvents:i,i18n:t,logContextEvent:o,login:_,pageContext:a,password:f,recaptchaV3Token:l,refreshRecaptchaV3Token:c,isLineAuthenticationEnabled:p,setPassword:b,viewType:y,viewParameter:P,unauthDesktopSignupModalPageContext:w})}},389054:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(667294),o=i(883119),s=i(407043),r=i(803491);const a=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"];var l=i(567482),d=i(898781),c=i(867820),u=i(785893);function h({age:e,ageValidationError:t,onAgeChange:i,onAgeError:s}){const r=(0,d.ZP)();return(0,n.useEffect)((()=>{(0,c.My)("dweb.signup_age_step",{type:"email",format:"age"})}),[]),(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,u.jsx)(o.__,{htmlFor:"age",children:(0,u.jsx)(o.xv,{size:"200",children:r.bt("Age", "Age", "registerForm.label.age", undefined, true)})})}),(0,u.jsx)(o.xu,{"data-test-id":"ageInputField",children:(0,u.jsx)(o.xu,{marginTop:1,children:(0,u.jsx)(l.Z,{error:null==t?void 0:t.toString(),value:e,onChange:i,onValidation:s,preventValidationOnStart:!0})})})]})}var p=i(662730),_=i(773285);function g({birthday:e,birthdayValidationError:t,setBirthdayValidationError:i,onBirthdayChange:s}){const r=(0,d.ZP)(),{checkExperiment:a}=(0,_.F)(),l=a("web_identity_new_user_birthday_step_copy").anyEnabled;(0,n.useEffect)((()=>{(0,c.My)("dweb.signup_age_step",{type:"email",format:"birthday"})}),[]);return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,u.jsxs)(o.kC,{children:[(0,u.jsx)(o.xu,{marginEnd:2,children:(0,u.jsx)(o.__,{htmlFor:"birthdate",children:(0,u.jsx)(o.xv,{size:"200",children:r.bt("Date of birth", "Birthdate", "registerForm.label.birthdate", undefined, true)})})}),(0,u.jsx)(o.u,{idealDirection:"right",text:l?r.bt("To help keep Pinterest safe, we now require your date of birth. Your date of birth also helps us provide more personalised recommendations and relevant ads. We don't share this information and it won't be visible on your profile.", "To help keep Pinterest safe, we now require your birthdate. Your birthdate also helps us provide more personalized recommendations and relevant ads. We don't share this information and it won't be visible on your profile.", "registerForm.label.birthdate.tooltipDescription", undefined, true):r.bt("We collect this info to help provide a better experience for the younger people in our community. We’ll also use your date of birth to help personalise your recommendations and ads. It will not be displayed publicly.", "We collect this info to help provide a better experience for the younger people in our community. We’ll also use your birthdate to help personalize your recommendations and ads. It will not be displayed publicly.", "registerForm.label.birthdate.tooltipDescription", undefined, true),zIndex:p.C,children:(0,u.jsx)(o.JO,{accessibilityLabel:r.bt("Tooltip", "Tooltip", "registerForm.label.birthdate.tooltip.access", undefined, true),icon:"info-circle"})})]})}),(0,u.jsx)(o.xu,{"data-test-id":"signup-birthdate-field",children:(0,u.jsx)(o.nv,{autoComplete:"bday",errorMessage:t,id:"birthdate",onChange:e=>{s(e),i("")},size:"lg",type:"date",value:e||""})})]})}var m=i(597922),f=i(349700),x=i(326216);function b({buttonText:e,buttonTextLabel:t,disableEmailLogin:i,email:l,emailFieldHasError:p,emailLabel:_,emailText:b,emailValidationError:y,hideEmailField:v,hideFacebookButton:P,hideGoogleButton:w,hidePasswordField:I,onButtonClick:A,onEmailBlur:E,onEmailChange:C,onPasswordChange:S,password:j,passwordResetLink:T,passwordText:D,passwordValidationError:k,signupForm:z,suppressFocus:O,component:R,attributionLabel:L,viewType:M,viewParameter:B}){const N=(0,d.ZP)(),[Z,F]=(0,n.useState)(!!z),[U,V]=(0,n.useState)(null),[H,G]=(0,n.useState)("");let W=y;W||!I&&!i||(P||w?!P&&w?W=N.bt("Your account is connected to Facebook - use the Facebook button to log in", "Your account is connected to Facebook - use the Facebook button to log in", "Customized desktop login for users with Facebook", undefined, true):P&&!w&&(W=N.bt("Your account is connected to Google - use the Google button to log in", "Your account is connected to Google - use the Google button to log in", "Customized desktop login for users with Google", undefined, true)):W=N.bt("Your account is connected to Facebook and Google - use the buttons to log in", "Your account is connected to Facebook and Google - use the buttons to log in", "Customized desktop login for users with FB and Google", undefined, true));const{logContextEvent:$}=(0,s.v)();return(0,u.jsxs)("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),A(e)},children:[!v&&(0,u.jsx)(o.xu,{marginBottom:1,marginStart:2,children:(0,u.jsx)(o.__,{htmlFor:"email",children:(0,u.jsx)(o.xv,{size:"200",children:N.bt("Email address", "Email", "registerForm.label.email", undefined, true)})})}),!v&&(0,u.jsx)(o.xu,{"data-test-id":"emailInputField",dangerouslySetInlineStyle:{__style:{marginBottom:7}},children:(0,u.jsx)(m.Z,{accessibilityLabel:_,autoComplete:"email",disabled:!(null==z||!z.registerRestricted),domainError:U?(0,f.nk)(N.bt("Did you mean {{ newEmail }}?", "Did you mean {{ newEmail }}?", " - ", undefined, true),{newEmail:(0,u.jsx)(o.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:U},"err_text")}):void 0,focused:!O,hasError:!!y||!!p,id:"email",name:"id",onBlur:()=>{null==E||E(),z&&(l?z.checkEmailExistsWithCompletion({email:l,handleEmailExists:()=>{(0,c.My)("web.unauth.signup.email_entered"),Z&&F(!1)},handleEmailNotExist:async()=>{Z||F(!0),await z.checkEmailValidation(l)},handleError:()=>{F(!0)}}):F(!0));const e=e=>{G(e),l===e?V(null):(V(e),(0,c.My)("unauth.email_domain_typo_suggestion.shown"))},t=l&&-1!==l.indexOf("@")?l.split("@"):[];if(l&&l!==H||V(null),l&&t&&l.length<60){if(2===t.length){const i=t[1],n=i&&-1!==i.indexOf(".")?i.split("."):[];if(n.length>=2&&"gmail"===n[0])if("com"!==n.slice(1).join(".")){e(t[0]+"@gmail.com")}else V(null)}const i=t[1]&&a.includes(t[1])?null:t[1]&&a.map((e=>{const i=(0,x.Z)(e,t[1]);return 2===i||1===i?e:null})).filter((e=>"string"==typeof e));if(i&&i.length){e(i[0]?`${t[0]}@${i[0]}`:"")}}},onChange:C,placeholder:b,tooltip:W,type:"email",value:l})}),!I&&(0,u.jsx)(o.xu,{marginBottom:1,marginStart:2,children:(0,u.jsx)(o.__,{htmlFor:"password",children:(0,u.jsx)(o.xv,{size:"200",children:N.bt("Password", "Password", "registerForm.label.password", undefined, true)})})}),!I&&(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(o.xu,{"data-test-id":"passwordInputField",children:(0,u.jsx)(m.Z,{autoComplete:"new-password",disabled:!!i||!(null==z||!z.registerRestricted),hasError:!!k,id:"password",name:"password",onChange:S,onFocus:()=>{(0,c.NC)("focus_password")},placeholder:D,tooltip:k,type:"password",value:j,focused:!!v&&!O})}),(0,u.jsx)(o.xu,{"data-test-id":"password-reset-button",children:null!=T?T:null})]}),window.recaptchaCount>0?(0,u.jsx)("div",{className:"g-recaptcha",id:`recaptcha_placeholder_${window.recaptchaCount}`,style:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"}}):null,z&&("birthday"===z.ageOrBirthday.type?(0,u.jsx)(g,{...z.ageOrBirthday.props}):Z&&(0,u.jsx)(h,{...z.ageOrBirthday.props})),(null==z?void 0:z.registerRestricted)&&"birthday"===z.ageOrBirthday.type&&(0,u.jsx)(o.xu,{marginTop:2,children:(0,u.jsx)(o.xv,{size:"100",color:"error",children:N.bt("Sorry, you’re not eligible to sign up for Pinterest just now.", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Signup.AgeStep.underageError", undefined, true)})}),!I&&(0,u.jsx)(o.xu,{"data-test-id":"registerFormSubmitButton",children:(0,u.jsx)(r.Z,{accessibilityLabel:t,className:"red SignupButton",disabled:i||!(null==z||!z.registerRestricted),onClick:()=>{$({view_type:M,view_parameter:B,component:R,element:14320===R?13506:30,event_type:10441,aux_data:{upsell_reason:L}}),Z?(0,c.NC)("press_signup_continue"):(0,c.NC)("press_login_continue")},styleOverrides:{width:"100%",borderRadius:"20px",marginTop:"8px"},type:"submit",children:(0,u.jsx)(o.xu,{children:e})})})]})}},796592:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(157796),s=i(898781),r=i(785893);const a=()=>{const e=(0,s.ZP)();return(0,r.jsx)(n.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%",children:(0,r.jsxs)(n.xu,{color:"default",height:600,minWidth:"500px",rounding:2,width:"30%",children:[(0,r.jsxs)(n.xu,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12,children:[(0,r.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:60,justifyContent:"center",marginBottom:4,rounding:"circle",width:60,children:(0,r.jsx)(n.JO,{accessibilityLabel:e.bt("Loading state for Google one-tap registration", "Loading state for google one tap registration", " - ", undefined, true),color:"inverse",icon:"pin",size:"28"})}),(0,r.jsx)(n.xu,{paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}},children:(0,r.jsx)(n.X6,{children:e.bt("Welcome to Pinterest!", "Welcome to Pinterest!", "Welcome to Pinterest!", undefined, true)})}),(0,r.jsx)(n.xv,{align:"center",overflow:"normal",children:(0,r.jsx)("span",{className:"deprecatedTextSizeXL",children:e.bt("Your answers to the next questions will help us find the right ideas for you", "Your answers to the next questions will help us find the right ideas for you", "loading state description while waiting for google one tap registration to complete", undefined, true)})})]}),(0,r.jsx)(n.xu,{width:"100%",children:(0,r.jsx)(o.Z,{duration:6e3,finalProgress:95,shape:"rounded"})})]})})}},174382:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(121151),s=i(898781),r=i(785893);function a({type:e,onDismiss:t}){const i=(0,s.ZP)(),a="facebook"===e?i.bt("Facebook isn't available", "Oops! Facebook isn't available", "socialAuthDisabled.facebook.title", undefined, true):i.bt("Google isn't available", "Oops! Google isn't available", "socialAuthDisabled.google.title", undefined, true),l="facebook"===e?i.bt("It looks as though Facebook isn't available at the moment. Give another option a try or refresh the page and try again later.", "Looks like Facebook isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.facebook.description", undefined, true):i.bt("It looks as though Google isn't available at the moment. Give another option a try or refresh the page and try again later.", "Looks like Google isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.google.description", undefined, true);return(0,r.jsx)(o.ZP,{accessibilityModalLabel:a,footer:(0,r.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(n.xu,{paddingX:1,children:(0,r.jsx)(n.zx,{color:"red",onClick:t,text:i.bt("OK", "OK", "socialAuthDisabled.okButton", undefined, true),size:"md"})})}),heading:a,onDismiss:t,children:(0,r.jsx)(n.xu,{paddingX:5,children:(0,r.jsx)(n.xv,{align:"center",children:l})})})}},563387:(e,t,i)=>{i.d(t,{E:()=>l,Z:()=>d});var n=i(883119),o=i(898781),s=i(349700),r=i(966113),a=i(785893);const l="\n.TermsOfService__light a {\n  color: rgba(255,255,255,0.9);\n}\n";function d({dark:e}){const t=(0,o.ZP)();return(0,a.jsx)("div",{style:{marginTop:"12px"},children:(0,a.jsx)("span",{"data-test-id":"terms-of-service",className:e?"":"TermsOfService__light",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear",...e?{color:"#767676",width:"224px"}:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}},children:(0,a.jsx)("span",{children:(0,s.nk)(t.bt("By continuing, you agree to Pinterest's {{ tos }} and acknowledge that you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "By continuing, you agree to Pinterest's {{ tos }} and acknowledge you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "termOfService.text", undefined, true),{tos:(0,a.jsx)(n.xu,{"data-test-id":"tos",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:r.dQ,underline:"hover",children:t.bt("Terms of Service", "Terms of Service", "termOfService.link.tos", undefined, true)},"tos")},"tos"),privacyPolicy:(0,a.jsx)(n.xu,{"data-test-id":"privacy",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:"/_/_/policy/privacy-policy/",underline:"hover",children:t.bt("Privacy Policy", "Privacy Policy", "termOfService.link.privacyPolicy", undefined, true)},"privacy")},"privacy"),noticeAtCollection:(0,a.jsx)(n.xu,{"data-test-id":"noticeAtCollection",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,a.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:r.cv,underline:"hover",children:t.bt("Notice at collection", "Notice at collection", "termOfService.link.noticeAtCollection", undefined, true)},"noticeAtCollection")},"noticeAtCollection")})})})})}},597922:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r({accessibilityLabel:e,autoComplete:t="on",disabled:i,domainError:r,focused:a,hasError:l,helperText:d,id:c,name:u,onBlur:h,onChange:p,onFocus:_,placeholder:g,tooltip:m,type:f,useExperimentalTextfield:x,value:b}){var y;const v=(0,n.useRef)(a),P=(0,n.useRef)(null),w=(0,n.useRef)(l);return(0,n.useEffect)((()=>{var e;v.current&&(null===(e=P.current)||void 0===e||e.focus())}),[]),(0,n.useEffect)((()=>{var e;!1===w.current&&l&&(null===(e=P.current)||void 0===e||e.focus());w.current=l}),[l]),(0,s.jsxs)("fieldset",{style:{position:"relative"},children:[(0,s.jsx)(o.xu,{display:"visuallyHidden",children:(0,s.jsx)(o.__,{htmlFor:c,children:null!==(y=null!=e?e:g)&&void 0!==y?y:""})}),(0,s.jsx)(o.nv,{autoComplete:x?void 0:t,disabled:i,errorMessage:m?x&&r||m:"",helperText:x?void 0:d,id:c,name:u,onBlur:h,onChange:({event:e})=>{p(e)},onFocus:_,placeholder:g,ref:P,size:x?void 0:"lg",type:f,value:b||""})]})}},640672:(e,t,i)=>{i.d(t,{Z:()=>r,g:()=>s});var n=i(883119),o=i(785893);const s="\n.Tooltip_message:before, .Tooltip_message:after {\n  border-style: solid;\n  content: '';\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_message:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_message:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_mobileMessage:before, .Tooltip_message:after {\n  border-style: solid;\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_mobileMessage:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_mobileMessage:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_wrapper {\n  position: absolute;\n  left: calc(100% + 12px);\n  z-index: 1;\n}\n.Tooltip_mobileWrapper {\n  margin-top: 7px;\n  z-index: 1;\n}\n";function r({message:e}){return(0,o.jsxs)("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:{top:"0px",width:"215px"},children:[(0,o.jsx)("div",{className:"Tooltip_message",style:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},children:(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:e},style:{overflowWrap:"break-word",wordWrap:"break-word"}})}),(0,o.jsx)(n.xu,{})]})}},754124:(e,t,i)=>{i.d(t,{Z:()=>g,b:()=>_});var n=i(667294),o=i(883119),s=i(231486),r=i(226198),a=i(782534),l=i(499128),d=i(898781),c=i(349700),u=i(290148),h=i(867820),p=i(785893);const _=e=>e.bt("Use your own birthday even if this is a business account.", "Use your own birthday even if this is a business account.", "signup.underageconfirmation.info", undefined, true),g=({birthday:e,onEditBirthday:t,onConfirmBirthday:i=(()=>{})})=>{const g=(0,d.ZP)(),[m,f]=(0,n.useState)(!1);return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(o.xu,{padding:8,"data-test-id":"underageconfirmation-modal",children:(0,p.jsxs)(o.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,p.jsx)(o.xu,{width:420,marginBottom:5,"data-test-id":"underageconfirmation-title",children:(0,p.jsx)(o.X6,{align:"center",size:"600",children:(0,c.nk)(g.bt("Is your birthday {{date}}?", "Is {{date}} your birthday?", "signup.underageconfirmation.question", undefined, true),{date:e?(0,p.jsx)(a.Z,{dateFormatType:a.k.LONG,useUTC:!0,value:new Date(e)}):null})})}),(0,p.jsx)(o.xu,{marginBottom:10,children:(0,p.jsx)(o.xv,{children:_(g)})}),(0,p.jsx)(o.xu,{children:(0,p.jsxs)(o.kC,{children:[(0,p.jsx)(o.xu,{marginEnd:2,children:(0,p.jsx)(o.zx,{text:g.bt("Edit", "Edit", "signup.underageconfirmation.edit", undefined, true),onClick:()=>{(0,h.My)("dweb.underageconfirmation.edit"),s.t8(r.It,"0",(0,s.kZ)(r.It)),t()}})}),(0,p.jsx)(o.zx,{text:g.bt("Confirm", "Confirm", "signup.underageconfirmation.confirm", undefined, true),type:"submit",color:"red",onClick:()=>{f(!0),(0,h.My)("dweb.underageconfirmation.confirm"),i(),setTimeout((()=>{u.ZP.handleRedirect("/")}),4e3)}})]})})]})}),m&&(0,p.jsx)(o.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,p.jsx)(l.ZP,{onHide:()=>f(!m),text:g.bt("Sorry, you’re not eligible to sign up for Pinterest just now.", "Sorry, you’re not eligible to sign up for Pinterest right now.", "signup.underageconfirmation.error", undefined, true),duration:3500})})]})}},995146:(e,t,i)=>{i.d(t,{a$:()=>h,kv:()=>u,pH:()=>p});var n=i(214494),o=i(584595),s=i(966113),r=i(643913);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends Error{constructor(e){super(e.statusText),a(this,"name","CrossDomainHandshakeHttpError"),this.response=e}}class d extends Error{constructor(e){super(e.message),a(this,"name","CrossDomainHandshakeApiError"),this.api_error_code=e.code,this.response=e}}const c=({path:e,data:t,unauthId:i})=>fetch(`${s.cD}/v3/${e}/handshake/`,{credentials:"include",mode:"cors",method:"POST",body:(0,r.Z)(t),headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":i}}).then((e=>{if(200===e.status||401===e.status||409===e.status)return e;throw new l(e)})).then((e=>e.json())).then((e=>{if("success"===e.status)return Promise.resolve(e);if(e.code===o.Zn)return e.api_error_code=e.code,Promise.reject(e);throw new d(e)})).catch((e=>{throw e})),u=(e,t=!1)=>n.Z.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),h=(e,{facebookToken:t,inviteCode:i,locale:n,referrer:o,unauthId:s})=>{const r=(e.business_name?"partner":e.facebook_id&&"facebook")||"email";let a={email:e.email||"",username:e.username||"",password:e.password||"",first_name:e.first_name||"",last_name:e.last_name||"",country:e.country||"",locale:n,referrer:o};return e.birthday&&(a={...a,birthday:e.birthday}),e.custom_gender&&(a={...a,custom_gender:e.custom_gender}),e.gender&&(a={...a,gender:e.gender}),e.business_name&&(a={...a,business_name:e.business_name,first_name:e.business_name}),i&&(a={...a,invite_code:i}),e.facebook_id&&(a={...a,facebook_id:e.facebook_id,facebook_token:t||e.facebook_token||""}),e.recaptchaV3Token&&(a={...a,recaptcha_v3_token:e.recaptchaV3Token}),c({path:`register/${r}`,data:a,unauthId:s})},p=(e,{recaptchaV3Token:t,referrer:i,unauthId:n})=>{const o=e.mfa_token?"login/mfa":"login";let s={username_or_email:e.username_or_email.trim(),password:e.password,referrer:i};return e.mfa_token&&(s={...s,mfa_token:e.mfa_token}),t&&(s={...s,token:t}),c({path:o,data:s,unauthId:n})}},233211:(e,t,i)=>{i.d(t,{B$:()=>d,Cw:()=>r,I7:()=>l,c4:()=>a});var n=i(667294),o=i(425288);const s=(0,n.createContext)(null),r=()=>(0,n.useContext)(s),a=s.Provider,{Provider:l,useHook:d}=(0,o.Z)("DesktopCoreLogin")},905171:(e,t,i)=>{i.d(t,{o:()=>a,x:()=>r});var n=i(667294),o=i(898781);const s=new Set,r=e=>{s.forEach((t=>t(e)))},a=e=>{const t=(0,o.ZP)();(0,n.useEffect)((()=>{const i=i=>{e(i||t.bt("Unknown error", "Unknown Error", "unauth.error.modal.unknown", undefined, true))};return s.add(i),()=>{s.delete(i)}}),[])}},910702:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(816068);const o=e=>({type:"facebook",first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.picture&&!e.picture.data.is_silhouette?e.picture.data.url:void 0,facebook_id:e.id,facebook_token:e.access_token,birthday:e.birthday?(0,n.Z)(e.birthday):void 0})},11363:(e,t,i)=>{i.d(t,{Bx:()=>o,N4:()=>r,is:()=>a,lt:()=>n,oM:()=>s});const n=e=>e.bt("You're almost there! Log in to access all of Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),o=e=>e.bt("Log in to save this Pin", "Log in to save this Pin", "limitedLogin.modalHeader.repin", undefined, true),s=e=>e.bt("Log in to edit this Pin", "Log in to edit this Pin", "limitedLogin.modalHeader.editPin", undefined, true),r=({i18n:e,toFollow:t})=>t?e.bt("Log in to follow", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt("Log in to unfollow", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true),a=e=>e.bt("Log in to create a Pin or board", "Log in to create a Pin or board", "limitedLogin.modalHeader.create", undefined, true)},70212:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(186656);const o=async()=>{try{var e,t,i,o;const s=await(0,n.Z)({url:"/v3/users/me/"}),r=(null===(e=s.resource_response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email)||(null===(i=((null===(o=s.resource_response)||void 0===o?void 0:o.client_context)||Object.freeze({})).user)||void 0===i?void 0:i.email);"undefined"!=typeof window&&window.pintrk&&window.pintrk("track","custom",{lead_type:"Pinterest Login",em:r})}catch(s){}}},780679:(e,t,i)=>{i.d(t,{g:()=>r,t:()=>s});var n=i(667294);const o=(0,n.createContext)(null),s=o.Provider,r=()=>(0,n.useContext)(o)},85334:(e,t,i)=>{i.d(t,{Z:()=>v});var n=i(667294),o=i(214494),s=i(407043),r=i(231486),a=i(226198),l=i(995146),d=i(532975),c=i(584595),u=i(283943),h=i(807998),p=i(290148),_=i(383690),g=i(330102),m=i(817656),f=i(762752),x=i(867820),b=i(69642),y=i(529195);function v(){const e=(0,u.hq)(),t=(0,_.Z)(),{logContextEvent:i}=(0,s.v)(),v=(0,b.Z)();return(0,n.useCallback)((({creds:n,isAccountSwitch:s,loggingOptions:{loggingData:u=Object.freeze({}),loginAttemptContextEvent:_},recaptchaV2Token:b,recaptchaV3Token:P})=>{t();const w=!(!n.facebook_autologin&&!n.autologin),I=(0,p.eD)(n),A=e=>{const t=n.google_open_id_token?"google":"facebook";w&&(0,x.dy)({event:e,provider:t})};i({..._,event_type:7534}),v({action:w?"autologin":"login",event:"attempt",trigger:u.trigger,type:I});const E=e=>{let t="referrer_unknown";try{const e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(a){}const o=u===Object(u)?u.container:"container_unknown";(0,x.My)("login.referrer."+t+"."+I),(0,x.My)("login.container."+String(o)+"."+I),(0,x.My)("login.type."+I);const s=I||"method_unknown",r=u.page||"page_unknown";n.facebook_autologin?((0,x.My)("web_autologin_facebook"),(0,x.My)("new_web_autologin_facebook",{page:r,referrer:t,container:o})):((0,x.My)(`web_login.${s}.success.${r}.${String(o)}.${t}.tier1`),(0,x.My)(`new_web_login.${s}.success`,{page:r,referrer:t,container:o})),(0,g.ko)({country:null==e?void 0:e.country,countryFromHostName:null==e?void 0:e.countryFromHostName,countryFromIp:null==e?void 0:e.countryFromIp,regionFromIp:null==e?void 0:e.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),i({..._,event_type:7536}),v({action:w?"autologin":"login",event:"success",trigger:u&&u.trigger,type:I})},C=({error:e,isCrossDomain:t})=>{if(!e)return;const n=e.http_status===m.Ej?m.Ej:e.api_error_code;let o=n;n&&c.qF.has(n)&&(o=c.qF.get(n));const{container:s,trigger:r}=u;(0,x.My)(`${t?"unauth_web_client_cctld_login_api_error":"unauth_web_client_login_api_error"}.${String(o)}.${s||"unknow_container"}.${I}`),i({..._,event_type:7535}),v({action:w?"autologin":"login",event:"fail",trigger:r,type:I})};if(n.username_or_email&&!n.mfa_resend&&e&&-1!==h.Z.indexOf(e.origin)){const t=e=>(0,x.My)(`web_cross_domain_login.${e}.${(0,p.eD)(n)}`);t("attempt");const{referrer:i,facebookToken:o,unauthId:s}=e;return(0,l.pH)(n,{recaptchaV3Token:P,referrer:i,facebookToken:o,unauthId:s}).then((e=>{const i=e&&e.data;if(i)return t("success_with_token"),(0,l.kv)(i).then((e=>(t("success_token_exchanged"),E(),Promise.resolve())),(e=>{throw t("success_token_not_exchanged"),e}));throw t("success_without_token"),new Error}),(e=>{throw t("failure"),C({error:e,isCrossDomain:!0}),e}))}A("login_api_call_start");const S=(0,y.OJ)();return o.Z.create("UserSessionResource",{...n,...S?{referrer:S}:Object.freeze({}),get_user:n.get_user||n.switch_account&&s,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,y.t_)()||null,recaptchaV2Token:b,recaptchaV3Token:P}).callCreate({showError:!1,async:!0}).then((e=>{const{country:t,country_from_hostname:i,country_from_ip:n,region_from_ip:o}=(null==e?void 0:e.client_context)||Object.freeze({});return E({country:t,countryFromHostName:i,countryFromIp:n,regionFromIp:o}),A("login_api_call_success"),(0,d.B)(!1),r.zN(a.e7.name),r.zN(a.x3.name),(0,f.D)("login").then((()=>e))}),(e=>(C({error:e,isCrossDomain:!1}),A("login_api_call_failure"),Promise.reject(e))))}),[e,t,i,v])}},946984:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(11363),o=i(898781),s=i(987318);const r=()=>{const{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,s.H)(),r=(0,o.ZP)();return"AUTH"===t.type?null:t=>{null==e||e.setVisible(!0),null==i||i.setText((null==t?void 0:t.loginModalHeader)||(0,n.lt)(r))}}},901656:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(432300);const o=e=>"UNAUTH"===e?Object.freeze({}):{login_state:"LIMITED_LOGIN"===e?n.Z.LIMITED:n.Z.DEFAULT}},662730:(e,t,i)=>{i.d(t,{C:()=>s,P:()=>o});var n=i(883119);const o=new n.Ry(1e4),s=new n.H3([o])},903095:(e,t,i)=>{i.d(t,{Mi:()=>o,lO:()=>s});var n=i(425288);const{Provider:o,useMaybeHook:s}=(0,n.Z)("pageContext")},532975:(e,t,i)=>{i.d(t,{B:()=>r,a:()=>s});var n=i(957161),o=i(299899);const s=()=>!!n.Z.getItem(o.WM),r=e=>{n.Z.setItem(o.WM,!!e)}},583421:(e,t,i)=>{i.d(t,{Z:()=>c,y:()=>a});var n=i(667294),o=i(60598),s=i(14890),r=i(785893);const a={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};const l={hover:({index:e,onDragHover:t},i,n)=>{t(e,function(e,t){const i=t.targetEl;if(!(i&&i instanceof HTMLElement))return null;const{x:n,y:o}=e.getClientOffset(),{left:s,right:r,top:a,bottom:l,width:d,height:c}=i.getBoundingClientRect();return{positionRelativeToCenter:{x:n-(s+r)/2,y:o-(a+l)/2},boundingBox:{width:d,height:c}}}(i,n))}};class d extends n.Component{render(){const{children:e,connectDragSource:t,connectDropTarget:i,isDragging:n,isDraggingInternal:o,isDropTargetOnly:s}=this.props,a=i((0,r.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:n||o?0:1},children:e}));return s?a:t(a)}}const c=(0,s.compose)((0,o.GR)((e=>e.type),l,(e=>({connectDropTarget:e.dropTarget()}))),(0,o.Ej)((e=>e.type),{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},((e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()}))))(d)},266898:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(60598),o=i(395141);const s=(0,n.Z5)(o.ZP)},345221:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(60598),o=i(14890),s=(i(583421),i(266898));const r=e=>t=>(0,o.compose)(s.Z,(0,n.GR)(e,{},((e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}))))(t)},743847:(e,t,i)=>{i.d(t,{Z:()=>o,z:()=>s});var n=i(326216);function o(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],i=e&&-1!==e.indexOf(".")?e.split("."):[];if(i.length>=2&&"gmail"===i[0]&&"com"!==i.slice(1).join("."))return!0;const o=(0,n.Z)(e,"gmail.com");if("g"===e.charAt(0)&&(1===o||2===o))return!0}return!1}function s(e,t){const i=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2!==i.length)return!1;const o=i[1],s=o&&-1!==o.indexOf(".")?o.split("."):[],r=s[0];if(r===t&&s.length>3)return!0;if(s.length>=2){const e=(0,n.Z)(r,t);return r.charAt(0)===t.charAt(0)&&(1===e||2===e)}return(2!==s.length||r!==t||2!==s[1].length&&"com"!==s[1])&&(s.length,!1)}},375571:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(172071),s=i(395164);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends n.Component{constructor(...e){super(...e),r(this,"state",{error:null,info:null}),r(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{var i;const{name:t}=this.props,n=this.props.type||"secondary";(0,s.T)({extraData:null!==(i=e.extraData)&&void 0!==i?i:{},errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),o.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(375571).Z},121093:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(702664),s=i(332611),r=i(242923),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(...e){super(...e),l(this,"state",{hasCompleted:[],hasDismissed:[]}),l(this,"view",(()=>{const{experience:e,isBackendExperience:t,targeting:i,viewExperience:n,viewExperienceObject:o}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",o(e)):i?n(e.placement_id,e.experience_id,i):n(e.placement_id,e.experience_id))})),l(this,"complete",(e=>{const{completeExperience:t,completeExperienceObject:i,experience:n,isBackendExperience:o,preventRemoval:s,targeting:r}=this.props,a=e||1;if(n&&!this.state.hasCompleted.includes(n.experience_id)){const{placement_id:e,experience_id:l}=n||{},d=s||2===a;(1===a||d)&&e&&l&&(o?i(n,d):r?t(e,l,d,r):t(e,l,d),this.setState((e=>({hasCompleted:[...e.hasCompleted,l]}))))}})),l(this,"dismiss",(()=>{const{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:n,preventRemoval:o,targeting:s}=this.props,{placement_id:r,experience_id:a}=i||{};i&&!this.state.hasDismissed.includes(a)&&(n?t(i):s?e(r,a,!!o,s):e(r,a,!!o),this.setState((e=>({hasDismissed:[...e.hasDismissed,a]}))))})),l(this,"shouldRenderExperience",(()=>{const{experience:e}=this.props;if(e){const{eligibleIds:t,eligibleTypes:i,predicate:n,transitionType:o}=this.props,{experience_id:s,type:r}=e;if(t&&t.includes(s))return!0;if(null==t||!t.length){if(n&&n(e))return!0;if(i&&i.includes(r))return!0;if(o&&o===r)return!0}}return!1}))}componentDidMount(){if(this.props.disableAutoView)return;const{experience:e}=this.props;e&&this.shouldRenderExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=e.experience,i=this.props.experience;i&&this.shouldRenderExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){const{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.shouldRenderExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):n.Children.only(e):null}}function c(e){const t=(0,o.useSelector)((({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0))),i=(0,o.useDispatch)();return(0,a.jsx)(d,{...e,experience:t,completeExperience:(e,t,n,o)=>i((0,s.CK)(e,t,n,!1,{},o)),completeExperienceObject:(e,t)=>i((0,r.Tl)(e,t)),dismissExperience:(e,t,n,o)=>i((0,s.Qu)(e,t,n,void 0,o)),dismissExperienceObject:e=>i((0,r.CF)(e)),viewExperience:(e,t,n)=>i((0,s.UT)(e,t,!1,!1,void 0,n)),viewExperienceObject:e=>i((0,r.dy)(e))})}l(d,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},701500:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(667294),o=i(883119),s=i(570470),r=i(785893);class a extends n.Component{renderPulsar(){const{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:i,zIndex:n}=this.props;return(0,r.jsx)(s.Z,{anchor:e,onTouch:t,onMouseEnter:i,zIndex:n})}renderFlyout(){const{anchor:e,tooltip:t,handleDismiss:i,handleComplete:n}=this.props;if(!t)return null;const{cancelButtonText:s,confirmButtonText:a,mainText:l,idealDirection:d="down"}=t,c=s&&i&&a&&n;return(0,r.jsx)(o.J2,{anchor:e,color:"blue",idealDirection:d,onDismiss:i,shouldFocus:!1,showCaret:!0,size:"flexible",children:(0,r.jsxs)(o.xu,{maxWidth:284,padding:3,width:"max-content",children:[(0,r.jsx)(o.xv,{color:"inverse",overflow:"breakWord",weight:"bold",children:l}),c?(0,r.jsxs)(o.xu,{marginTop:2,display:"flex",alignItems:"center",children:[(0,r.jsx)(o.xu,{column:6,marginEnd:1,children:(0,r.jsx)(o.zx,{fullWidth:!0,color:"transparentWhiteText",onClick:e=>i(e),size:"md",text:String(s)})}),(0,r.jsx)(o.xu,{column:6,children:(0,r.jsx)(o.zx,{fullWidth:!0,color:"white",size:"md",text:String(a),onClick:n})})]}):null]})})}render(){const{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var l=i(123159),d=i(764990),c=i(249647),u=i(70061);const h=({anchor:e,anchorExperiences:t,passedExperience:i})=>i||(t?t[e]:null),p=e=>{const{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,c.Z)(u.Z,!0)(t)};function _({anchor:e,anchorElementRef:t,children:i,containerBoxConfig:s,experience:c,isHidden:u,onCompleteClick:_,zIndex:g}){var m;const{completeExperience:f,dismissExperience:x,experiences:b,viewExperience:y}=(0,l.M)(),v=Object.values(b).reduce(((e,t)=>(8===t.type&&(e[(0,d.A0)(t)]=t),e)),{}),P=h({anchor:e,anchorExperiences:v,passedExperience:c}),w=(null==P||null===(m=P.display_data)||void 0===m?void 0:m.delay)||0,[I,A]=(0,n.useState)(!!w);if((0,n.useEffect)((()=>{if(w>0&&I){const e=setTimeout((()=>{A(!1)}));return()=>clearTimeout(e)}return()=>{}}),[w,I]),(0,n.useEffect)((()=>{!I&&P&&y(P.placement_id,P.experience_id)}),[I,P]),!P||I||u)return n.Children.only(i);const E=p(P),C=()=>{var e;null!==(e=P.display_data)&&void 0!==e&&e.complete_on_hover&&f(P.placement_id,P.experience_id)};return(0,r.jsxs)(o.xu,{position:"relative",height:null==s?void 0:s.height,display:null==s?void 0:s.display,children:[(0,r.jsx)(o.iP,{onMouseEnter:C,onTap:()=>{_&&_(),E.skipComplete||f(P.placement_id,P.experience_id)},children:n.Children.only(i)}),(0,r.jsx)(a,{anchor:t||null,handlePulsarCompleteOnHover:C,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),x(P.placement_id,P.experience_id)},pulserOnly:!!E.pulserOnly,tooltip:E.tooltip,zIndex:g})]})}},123159:(e,t,i)=>{i.d(t,{F:()=>h,M:()=>u});var n=i(667294),o=i(702664),s=i(14890),r=i(425288),a=i(332611),l=i(957191),d=i(785893);const{Provider:c,useHook:u}=(0,r.Z)("ExperienceContext");function h({children:e}){const[t,i]=(0,n.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const i={...e};return delete i[t.payload],i}return e}),{}),r=(0,o.useDispatch)(),u=(0,o.useSelector)((e=>e.experiences)),h=(0,n.useMemo)((()=>{const e=(0,s.bindActionCreators)({completeExperience:a.CK,dismissExperience:a.Qu,fetchAllExperiences:a.fO,fetchAllExperiencesMulti:l.NW,fetchExperienceForPlacements:a.pz,mountPlacement:a.N,triggerExperimentsForPlacement:a.kd,viewExperience:a.UT},r);return{...e,mountPlacement:(t,...n)=>{e.mountPlacement(t,...n),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[r,i]),p=(0,n.useMemo)((()=>({experiences:u,mountedPlacements:t,...h})),[u,t,h]);return(0,d.jsx)(c,{value:p,children:e})}},70943:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var n=i(667294),o=i(615071),s=i(883119),r=i(155378),a=i(121093),l=i(391254),d=i(249647),c=i(780280),u=i(70061),h=i(898781),p=i(6663),_=i(785893);const g=()=>{};function m({color:e,completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:n,dismissButtonText:o,handleComplete:s=g,handleDismiss:r=g,header:a="",headerSubtitle:l=""}){const d=(0,h.ZP)();return(0,_.jsx)(p.Z,{message:(a+" "+l).trim(),dismissButtonText:o||d.bt("Close", "Close", "Closing a Hero banner", undefined, true),completeButtonText:t||d.bt("Go", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,onComplete:s,onDismiss:r,external:n,color:e})}const f=function({color:e="default",handleDismiss:t=(()=>{}),header:i="",headerSubtitle:n="",dismissButtonText:o=""}){const s=(0,h.ZP)();return(0,_.jsx)(p.Z,{message:`${i} ${n}`,dismissButtonText:o||s.bt("OK", "Got it", "dismissButton.hero.dismissText", undefined, true),onDismiss:t,color:e})};const x=function({color:e="default",completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:n,handleComplete:o=(()=>{}),header:s="",headerSubtitle:r=""}){const a=(0,h.ZP)();return(0,_.jsx)(p.Z,{message:(s+" "+r).trim(),completeButtonText:t||a.bt("Go", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,onComplete:o,external:n,color:e})};var b=i(116303),y=i(349700),v=i(19121);const P=1016,w="#EBF4FE";function I({completeButtonText:e,headerSubtitle:t,handleComplete:i,handleDismiss:n}){const o=(0,h.ZP)(),r=(0,v.Z)(),{firstName:a,imageLargeUrl:l}=r.isAuth?r:{};return(0,_.jsx)(s.xu,{display:"flex",justifyContent:"center",position:"relative",children:(0,_.jsxs)(s.xu,{alignItems:"center",borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{backgroundColor:w}},display:"flex",justifyContent:"between",marginBottom:2,marginEnd:8,marginStart:8,marginTop:4,padding:8,position:"relative",rounding:4,width:P,children:[(0,_.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,_.jsx)(s.xu,{marginEnd:6,marginTop:-2,marginBottom:-2,children:(0,_.jsx)(b.Z,{name:a,src:l,size:"lg",outline:!0})}),(0,_.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,_.jsx)(s.xu,{marginBottom:2,children:(0,_.jsx)(s.X6,{size:"400",children:(0,y.nk)(o.bt("Welcome back, {{ name }}", "Welcome back, {{ name }}", "shown on a banner, \"welcome back, first_name\"", undefined, true),{name:a})})}),(0,_.jsx)(s.xv,{children:t})]})]}),(0,_.jsx)(s.xu,{marginEnd:4,children:(0,_.jsx)(s.zx,{color:"white",size:"lg",text:e,onClick:i})}),(0,_.jsx)(s.xu,{position:"absolute",padding:2,top:!0,right:!0,children:(0,_.jsx)(s.hU,{accessibilityLabel:o.bt("Close", "Close", "accessible label for close button", undefined, true),iconColor:"darkGray",icon:"cancel",onClick:n,size:"sm"})})]})})}const A=400;function E({completeButtonUrl:e,onDismiss:t,placementId:i}){const[h,p]=(0,n.useState)(!1),g=(0,c.B)();return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(l.Z,{unsafeCSS:"\n.ExperienceHero-enter {\n  opacity: 0;\n  transform: translateY(-50px);\n}\n\n.ExperienceHero-enter-active {\n  opacity: 1;\n  transform: none;\n  transition: all 400ms ease-out;\n}\n\n.ExperienceHero-exit {\n  opacity: 1;\n}\n\n.ExperienceHero-exit-active {\n  opacity: 0;\n  transition: opacity 400ms ease-out;\n}\n"}),(0,_.jsx)(a.Z,{placementId:i,eligibleTypes:[13],children:({complete:i,dismiss:n,experience:{display_data:a,experience_id:l}})=>{e&&(a.complete_button_url=e);const c=(e=>{switch(e){case 502597:return r.default;case 500863:return I;case 501153:case 501487:return x;default:return m}})(l),b={requestContext:g,experienceId:l,handleComplete:i,handleDismiss:()=>{t&&t(),n()},color:c===f?"dark":"infoBase",...(0,d.Z)(u.Z)(a)};return h||p(!0),(0,_.jsx)(o.Z,{in:h,timeout:A,classNames:"ExperienceHero",unmountOnExit:!0,children:(0,_.jsx)(s.xu,{marginBottom:4,children:(0,_.jsx)(c,{...b})})})}})]})}},333312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(667294),o=i(883119),s=i(121093),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends n.PureComponent{constructor(...e){super(...e),a(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),a(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:i,idealDirection:n}=this.props,s=i.slice(-3);return(0,r.jsx)(o.J2,{anchor:e,color:"white",idealDirection:n,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,r.jsxs)(o.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,r.jsx)(o.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,r.jsx)(o.xv,{color:"default",weight:"bold",children:t})}),(0,r.jsx)(o.xu,{display:"flex",marginEnd:-2,paddingX:2,children:s.map((e=>(0,r.jsx)(o.xu,{height:60,width:50,paddingX:1,children:(0,r.jsx)(o.zd,{rounding:2,height:60,children:(0,r.jsx)(o.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}var d=i(570470);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),c(this,"dismissRef",(0,n.createRef)()),c(this,"state",{paused:!1}),c(this,"dismissCb",(()=>{var e,t;null===(e=(t=this.dismissRef).current)||void 0===e||e.call(t)})),c(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){const{anchor:e}=this.props;clearTimeout(this.timer),null==e||e.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,i){return t&&e.text.replace("{boardName}",t),i?i(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:a,flyoutSize:c,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:_,noClickToDismiss:g,onClickComplete:m,onClickDismiss:f,placementId:x,positionRelativeToAnchor:b,shouldTimeoutDismiss:y,showCaret:v,textAlign:P,textOverflow:w,textOverrideFn:I,textWeight:A,customizedComplete:E,pulsarZIndex:C,advertiserId:S}=this.props,j=t||(({children:e})=>_?(0,r.jsx)(o.mh,{children:e}):e),T="blue";return(0,r.jsx)(s.Z,{eligibleIds:i,placementId:x,eligibleTypes:[8],targeting:S?{advertiserId:parseInt(S,10)}:null,children:({complete:t,dismiss:i,experience:s})=>{const{display_data:{scroll_to_dismiss:x,scroll_to_dismiss_delay_in_seconds:S=0,...D}}=s,k=x&&e,z=()=>{O(),setTimeout(i,1e3*S)},O=()=>{k&&(window.removeEventListener("scroll",z),window.removeEventListener("touchmove",z))},R=()=>{O(),t()};if(k&&(window.addEventListener("scroll",z),window.addEventListener("touchmove",z)),this.setDefaultPulsarTooltip(D),!D.has_pulsar&&!D.has_tooltip)return R(),null;y&&D.disappearTime&&D.disappearTime>0&&(this.timer=setTimeout((()=>(z(),null)),D.disappearTime));const L=501041===s.experience_id||505086===s.experience_id;return D.has_tooltip&&!D.has_pulsar&&(this.dismissRef.current=z,null==e||e.addEventListener("click",this.dismissCb)),(0,r.jsxs)(n.Fragment,{children:[D.has_pulsar&&(0,r.jsx)(d.Z,{anchor:e,leftOverride:L?342:void 0,onTouch:()=>this.handlePulsarClick(D.has_tooltip,R),paused:this.state.paused,topOverride:L?-5:void 0,zIndex:C&&C.index()}),D.has_tooltip&&(!D.has_pulsar||this.state.paused)&&(D.thumbnail_urls?(0,r.jsx)(l,{anchor:e,dismiss:z,idealDirection:p||"down",text:D.text,thumbnails:D.thumbnail_urls}):(0,r.jsx)(j,{children:(0,r.jsx)(o.J2,{anchor:e,color:T,idealDirection:p||"down",onDismiss:g?()=>{}:z,positionRelativeToAnchor:!_&&b,shouldFocus:!1,showCaret:v,size:c,children:(0,r.jsxs)(o.xu,{column:12,padding:3,children:[(0,r.jsxs)(o.xv,{align:"right"===P?"end":P,color:"inverse",overflow:w,size:u,weight:A||"bold",children:[this.getText(D,a,I),D.secondary_cta_link&&(0,r.jsx)(o.xu,{display:"inlineBlock",marginStart:1,children:(0,r.jsx)(o.xv,{size:u,weight:"bold",color:"inverse",children:(0,r.jsx)(o.rU,{display:"inlineBlock",target:"blank",href:D.secondary_cta_link.url,underline:"hover",children:D.secondary_cta_link.text})})})]}),D.sub_text&&(0,r.jsx)(o.xu,{paddingY:2,children:(0,r.jsx)(o.xv,{color:"inverse",size:u,children:D.sub_text})}),(D.dismiss_button_text||D.complete_button_text)&&(0,r.jsxs)(o.xu,{display:"flex",alignItems:"center",marginTop:2,children:[D.dismiss_button_text&&(0,r.jsx)(o.xu,{marginEnd:1,column:6,children:(0,r.jsx)(o.zx,{fullWidth:h,color:T,onClick:()=>{f&&f(),z()},size:"md",text:D.dismiss_button_text})}),D.complete_button_text&&(0,r.jsx)(o.xu,{column:D.dismiss_button_text?6:12,children:E?(0,r.jsx)(o.iP,{fullHeight:!0,onTap:()=>{R(),m&&m()},rounding:2,children:(0,r.jsx)(o.xu,{display:"flex",color:"default",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,r.jsx)(o.xv,{color:"shopping",weight:"bold",children:D.complete_button_text})})}):(0,r.jsx)(o.kC,{justifyContent:"center",children:(0,r.jsx)(o.zx,{fullWidth:h,color:"white",href:D.complete_button_cta_url,role:D.complete_button_cta_url?"link":"button",size:"md",target:D.complete_button_cta_url?"blank":null,text:D.complete_button_text,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),R(),m&&m()}})})})]})]})})}))]})}})}}c(u,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{i.d(t,{CK:()=>p,N:()=>x,Qu:()=>_,UT:()=>h,YX:()=>f,d9:()=>g,fO:()=>d,kd:()=>m,pz:()=>c});var n=i(172071),o=i(214494),s=i(764990),r=i(957191),a=i(186656);let l;const d=(e,t)=>i=>{const n=t?{extra_context:e,targeting:t}:{extra_context:e};return o.Z.create("UserExperiencePlatformResource",n).callGet().then((e=>e.resource_response?i((0,r.OD)(e.resource_response.data)):void 0))},c=(e,t,i,n)=>(a,d)=>{if(t)return Promise.resolve();if(n&&(l=n),1===e.length){const t=e[0],n=d().experiences[t],o=(null==n?void 0:n.extraContext)||null;if(JSON.stringify(o)===JSON.stringify(i)||(0,s.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return o.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:n}).callGet().then((e=>e.resource_response?a((0,r.cL)(e.resource_response.data)):void 0))},u=(e,t)=>(i,n,s,a=!1,c,u)=>(h,p)=>{const{experiences:_,experiencesMulti:g}=p();let m=null,f=!0;var x;a||(f=_[i]&&_[i].experience_id===n,m=f?_[i]:Array.isArray(g[i])&&(null===(x=g[i])||void 0===x?void 0:x.find((e=>e.experience_id===n))));if(m&&m.experience_id===n||a&&i&&n){const a=o.Z.create(e,{placed_experience_id:`${i}%3A${n}`,extra_context:null!=c?c:{},targeting:u}),p=f?r.Yb:r.xW;switch(t){case"dismissed":return a.callDelete().then((()=>{h(p(i,n,t)),h(d(void 0,l))}));case"completed":return a.callUpdate().then((()=>{s||(h(p(i,n,t)),h(d(void 0,l)))}));case"viewed":return h(p(i,n,t)),a.callUpdate().then((()=>{1000162===i&&h(d())}));case"completedWithoutHomefeed":return a.callUpdate().then((()=>{s||h(p(i,n,t))}));default:return Promise.resolve()}}return Promise.resolve()},h=u("UserExperienceViewedResource","viewed"),p=u("UserExperienceCompletedResource","completed"),_=u("UserExperienceResource","dismissed"),g=u("UserExperienceCompletedResource","completedWithoutHomefeed"),m=(e,t)=>(i,o)=>{const{experiences:s}=o(),r=s[e];r&&r.triggerable_placed_exps&&r.triggerable_placed_exps.length&&r.triggerable_placed_exps.forEach((i=>{const[,o]=i.split(":");let s=t;r.metadata&&r.metadata[o]&&(s={...t,...r.metadata[o]}),(0,a.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:s?{extra_context:JSON.stringify(s,null,1)}:{}}).then((()=>{((e,t,i={})=>{n.Z.increment(`${e}.${t}`,1,i)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:o})}))}))},f=e=>(t,i)=>{t(m(e));const{experiences:n}=i();return n[e]},x=(e,t,i)=>n=>{i&&(l=i),n(m(e,t)),t&&Object.keys(t).length>0&&n(c([e],!1,t,i))}},242923:(e,t,i)=>{i.d(t,{CF:()=>a,Tl:()=>r,dy:()=>l});var n=i(214494),o=i(332611);const s=(e,t)=>(i,s)=>r=>{if(i&&i.id){const a=n.Z.create(e,{placed_experience_id:i.id,extra_context:{}});switch(t){case"dismissed":a.callDelete().then((()=>{r((0,o.fO)())}));break;case"completed":a.callUpdate().then((()=>{s||r((0,o.fO)())}));break;case"viewed":a.callUpdate()}}},r=s("UserExperienceCompletedResource","completed"),a=s("UserExperienceResource","dismissed"),l=s("UserExperienceViewedResource","viewed")},764990:(e,t,i)=>{function n(e){return!!e&&0!==e.type}i.d(t,{A0:()=>s,E3:()=>n,MQ:()=>o});const o=(e,t,i)=>{const o=e[i];return t[i]&&n(o)?o:null};function s(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},207737:(e,t,i)=>{i.d(t,{$S:()=>n,V$:()=>o,_4:()=>r,iY:()=>a,mR:()=>s});const n="REFRESH_ALL_EXPERIENCES_MULTI",o="UPDATE_EXPERIENCE_MULTI",s="FETCH_EXPERIENCES",r="REFRESH_ALL_EXPERIENCES",a="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{i.d(t,{NW:()=>r,OD:()=>l,Yb:()=>a,cL:()=>d,xW:()=>s});var n=i(214494),o=i(207737);const s=(e,t,i)=>({type:o.V$,payload:{placementId:e,experienceId:t,status:i}}),r=e=>t=>n.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((i=e.resource_response.data,{type:o.$S,payload:{experiencesMulti:i}})):void 0;var i})),a=(e,t,i)=>({type:o.iY,payload:{placementId:e,experienceId:t,status:i}}),l=e=>({type:o._4,payload:{experiences:e}}),d=e=>({type:o.mR,payload:{experiences:e}})},570470:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(883119),o=i(667294),s=i(785893);const r=(e,t,i,n)=>({horizontalOffset:-(n/2-t/2),verticalOffset:-(i/2-e/2)});function a({anchor:e,children:t,zIndex:i,leftOverride:a,topOverride:l}){const d=(0,o.useRef)(null),[c,u]=(0,o.useState)(0),[h,p]=(0,o.useState)(0),{height:_,width:g}=e.getBoundingClientRect();(0,o.useEffect)((()=>{const{current:t}=d;if(e&&t){const{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:n,verticalOffset:o}=r(_,g,e,i);u(n),p(o)}}));const m=a||c,f=l||h;return(0,s.jsx)(n.xu,{position:"absolute",zIndex:i?new n.Ry(i):void 0,dangerouslySetInlineStyle:{__style:{left:m,top:f}},ref:d,children:t})}const l=function(e){const{anchor:t,leftOverride:i,onTouch:o,onMouseEnter:r,paused:l,size:d,topOverride:c,zIndex:u}=e;return t?(0,s.jsx)(a,{anchor:t,leftOverride:i,topOverride:c,zIndex:u,children:(0,s.jsx)(n.iP,{fullWidth:!1,onTap:({event:e})=>o(e),onMouseEnter:r,rounding:"circle",children:(0,s.jsx)(n.o3,{paused:l,size:d})})}):null}},497529:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=(i(332611),i(123159)),s=i(764990),r=(i(957191),i(780280));function a(e){const{mountedPlacements:t,completeExperience:i,dismissExperience:a,experiences:l,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p}=(0,o.M)(),{isBot:_}=(0,r.B)(),g=e&&!_?(0,s.MQ)(l,t,e):null;return(0,n.useMemo)((()=>({completeExperience:i,dismissExperience:a,experienceForPlacement:g,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p})),[i,a,g,d,c,u,h,p])}},869636:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),s=i(442279),r=i(172071),a=i(123159),l=i(780280);const d=(0,s.P1)((e=>e.experiences),((e,t)=>t),((e,t)=>e[t])),c=(e,t)=>"function"==typeof t?t(e):t,u=(e,t={},i=!1)=>{const[s,u]=(0,n.useReducer)(c,t),{isBot:h}=(0,l.B)(),{fetchExperienceForPlacements:p,mountPlacement:_,triggerExperimentsForPlacement:g,unmountPlacement:m}=(0,a.M)();(0,n.useDebugValue)(`Placement Hook ID - ${e}`),(0,n.useEffect)((()=>{const t={...s},n=i&&null!=t&&t.advertiser_id?{advertiserId:t.advertiser_id}:void 0;return _(e,t,n),()=>{m(e)}}),[]),(0,n.useEffect)((()=>{Object.keys(s).length>0&&p([e],h,s)}),[s]);const f=(0,o.useSelector)((t=>d(t,e))),x=(0,o.useSelector)((t=>t.experiencesMulti[e])),b=f?f.triggerable_placed_exps:[];(0,n.useEffect)((()=>{((e,t,i={})=>{r.Z.increment(`${e}.${t}`,1,i)})("experienceservice","placementHookExperimentTrigger.1",{platform:"web",placement_id:e,...b}),g(e,s)}),[JSON.stringify(b)]);return{experience:f,experiencesMulti:x,setExtraContext:u}}},784450:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(667294),o=i(702664),s=i(618446),r=i.n(s),a=i(332611),l=i(123159),d=i(764990),c=i(780280),u=i(785893);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},_=(e,t={},i)=>s=>{i={...p,...i};const _=function(e,t,i=!0,s=!0,p=!1,_){class g extends n.Component{constructor(e){super(e),h(this,"state",{extraContext:void 0}),h(this,"setExtraContextState",(e=>{r()(this.state.extraContext,e)||this.setState({extraContext:e})}))}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(i,n){const{dispatch:o,experience:s,requestContext:l}=this.props;let d=n.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(d=t(i,n.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!r()(d,c)&&o((0,a.pz)([e],l.isBot,c)),!s||i.experience&&s.id===i.experience.id||o((0,a.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){const i="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},n=p&&null!=i&&i.advertiser_id?{advertiserId:i.advertiser_id}:void 0;this.props.mountPlacement(e,i,n)}render(){const{experience:e,experiencesMulti:t}=this.props,i={[p?"advertiserExperience":"experience"]:(0,d.E3)(e)?e:null};return(0,u.jsx)(_,{...this.props,setPlacementExtraContext:this.setExtraContextState,...i,experiencesMulti:t})}}function m(e){const t=(0,c.B)(),i=(0,o.useDispatch)(),{mountPlacement:n,unmountPlacement:s}=(0,l.M)();return(0,u.jsx)(g,{...e,dispatch:i,mountPlacement:n,requestContext:t,unmountPlacement:s})}return m.displayName=`withPlacement(${_.displayName||_.name||"Component"})`,m}(e,t,i.shouldUsePlacedExperience,i.dispatchMountActionDuringSSR,i.isAdvertiserPlacement,s),g=t=>{const i=(0,o.useSelector)((t=>t.experiences[e])),n=(0,o.useSelector)((t=>t.experiencesMulti?t.experiencesMulti[e]:void 0));return(0,u.jsx)(_,{...t,experience:i,experiencesMulti:n})};return g.displayName=_.displayName,g}},894738:(e,t,i)=>{function n(e){e&&e.focus()}i.d(t,{Z:()=>n})},173159:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(537347),o=i.n(n);function s(e,t){if("undefined"==typeof window)return Promise.resolve();let i=document.querySelector(`#${t}`);if(i)return Promise.resolve();i=document.createElement("style"),i.setAttribute("id",t),e.filter((e=>!!e.fontFaceUrl)).forEach((e=>{i&&e.fontFaceUrl&&i.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))}));const{head:n}=document;if(!n)return Promise.resolve();const s=document.createElement("style");s.setAttribute("id",`${t}-font-faces`),n.appendChild(i),n.appendChild(s);const r=[];return e.forEach((e=>{e.styles.forEach((t=>{if(e.format&&t.fontUrl&&s&&s.sheet){var i;s.sheet.insertRule(`\n            @font-face {\n              font-family: "${null!==(i=e.fontFamily)&&void 0!==i?i:""}";\n              font-style: "${t.fontStyle}";\n              font-weight: "${t.fontWeight}";\n              src: url("${t.fontUrl}") format("${e.format}");\n            }`,0)}r.push(new(o())(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())}))})),Promise.all(r)}},116303:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const s=(e,t)=>{const i=null==e?void 0:e.includes("images/user/default");return Boolean(i&&t)};function r({accessibilityLabel:e,name:t,outline:i,size:r,src:a,verified:l}){return(0,o.jsx)(n.qE,{accessibilityLabel:e,name:t,outline:i,size:r,src:s(a,t)?void 0:a,verified:l})}r.displayName="Avatar";const a=r},22182:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(835074),s=i(403323),r=i(780280),a=i(785893);const l=(0,n.forwardRef)((({disabled:e,errorMessage:t,excludeDates:i,helperText:l,id:d,idealDirection:c,includeDates:u,label:h,maxDate:p,minDate:_,nextRef:g,onChange:m,placeholder:f,rangeEndDate:x,rangeSelector:b,rangeStartDate:y,selectLists:v,value:P},w)=>{const{locale:I}=(0,r.B)(),[A,E]=(0,n.useState)();return(0,n.useEffect)((()=>{(async()=>{const e=await(0,s.Z)(I);E(e)})()}),[I,E]),(0,a.jsx)(o.M,{id:d,onChange:m,disabled:e,errorMessage:t,excludeDates:i,helperText:l,idealDirection:c,includeDates:u,label:h,localeData:A||void 0,maxDate:p,minDate:_,nextRef:g,placeholder:f,rangeEndDate:x,rangeSelector:b,rangeStartDate:y,ref:w,selectLists:v,value:P})}));l.displayName="DatePicker";const d=l},499128:(e,t,i)=>{i.d(t,{UZ:()=>c,Vg:()=>d,ZP:()=>u});var n=i(667294),o=i(883119),s=i(50286),r=i(829407),a=i(785893);const l=2e3,d=200,c=({deviceType:e,hiding:t,visible:i})=>{const n="desktop"===e;let o=0,s=n?"translateY(200px)":"translateY(-200px)",r="opacity 0.1s ease-in-out",a="hidden";return i&&!t&&(o=1,s="translateY(0)",r="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",a="visible"),i&&t&&(s="scale(1.1)",r="opacity transform 0.2s"),{opacity:o,pointerEvents:"auto",position:"relative",marginTop:n?10:0,transform:s,transition:r,visibility:a}};function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:i,primaryAction:u,dismissButton:h,helperLink:p,thumbnail:_,type:g,dataTestId:m,duration:f=l,onHide:x,href:b,onClick:y,openNewPage:v,imageUrl:P}){var w;const I=(0,s.ZP)(),[A,E]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),j=(0,n.useRef)(),T=()=>{E(!0),j.current=setTimeout(x,d)},D=()=>{j.current=setTimeout(T,f)},k=()=>{j.current&&clearTimeout(j.current)};let z;(0,r.Z)((()=>(setTimeout((()=>S(!0)),100),D(),k))),P&&(z={image:(0,a.jsx)(o.Ee,{alt:"string"==typeof i?i:`${i[0]} ${i[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:P})});const O=(0,a.jsx)(o.FN,{_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,primaryAction:u,text:i,thumbnail:null!==(w=z)&&void 0!==w?w:_,type:g,dismissButton:h,helperLink:p}),{marginTop:R,opacity:L,pointerEvents:M,position:B,transform:N,transition:Z,visibility:F}=c({deviceType:I,hiding:A,visible:C});return(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transform:N,transition:Z,visibility:F,pointerEvents:M}},"data-test-id":null!=m?m:"toast",onMouseEnter:k,onMouseLeave:D,opacity:L,position:B,marginTop:R,display:"flex",children:b?(0,a.jsx)(o.iP,{role:"link",href:b,onTap:({event:e})=>null==y?void 0:y(e),target:v?"blank":null,rounding:"pill",children:O}):O})}},572752:(e,t,i)=>{function n(e){return`${e.userAgent.isMobile?"mobile":"desktop"}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}i.d(t,{Z:()=>n})},444445:(e,t,i)=>{i.d(t,{$H:()=>r,$q:()=>b,D6:()=>d,KN:()=>y,Lo:()=>o,OS:()=>p,P2:()=>m,ZZ:()=>u,g5:()=>h,jC:()=>a,lX:()=>g,nW:()=>_,oX:()=>f,qG:()=>x,tG:()=>s,yF:()=>n,yc:()=>c,yt:()=>l});const n=236,o=2*n/3,s=175,r=24,a=4,l=8,d=2,c=2,u=14,h=16,p=5,_=12,g=16,m=24,f=16,x=-1,b=(e=!1,t=!1)=>e?t?g:_:m,y=(e,t,i,n,o=u)=>{const s=e+o;return`\n@media (min-width: ${t*s}px) and (max-width: ${(i+1)*s-1}px) {\n  ${n}\n}\n`}},694379:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(892819),o=i(780280),s=i(785893);const r=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:r,shortformMaximumFractionDigits:a,formatStyle:l,uplimit:d,value:c})=>{const u=(0,n.Z)();return(0,s.jsx)(o.LC,{children:n=>u(n.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:r,shortform_maximum_fraction_digits:a,style:l,uplimit:d})})}},298361:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(202139),o=i(898781),s=i(349700);function r(){const e=(0,o.ZP)();return function(t,i){const o=new Date(t),r=new Date-o,a=Math.floor(r/n.FS),l=Math.floor(r/n.UK),d=Math.floor(r/n.F4),c=Math.floor(r/n.VL),u=Math.floor(r/n.N1),h=e.nbt(["{{ minutes }} minute ago", "{{ minutes }} minutes ago"], a, " - ", true),p=e.nbt(["{{ hours }} hour ago", "{{ hours }} hours ago"], l, " - ", true),_=e.nbt(["{{ days }} day ago", "{{ days }} days ago"], d, " - ", true),g=e.nbt(["{{ weeks }} week ago", "{{ weeks }} weeks ago"], c, " - ", true),m=e.nbt(["{{ years }} year ago", "{{ years }} years ago"], u, " - ", true),f=e.nbt(["{{ minutes }}m", "{{ minutes }}m"], a, "minutes ago abbreviated", true),x=e.nbt(["{{ hours }}h", "{{ hours }}h"], l, "hours ago abbreviated", true),b=e.nbt(["{{ days }}d", "{{ days }}d"], d, "days ago abbreviated", true),y=e.nbt(["{{ weeks }}w", "{{ weeks }}w"], c, "weeks ago abbreviated", true),v=e.nbt(["{{ years }}y", "{{ years }}y"], u, "years ago abbreviated", true);return u>0?(0,s.nk)(i?v:m,{years:u}).join(""):c>0?(0,s.nk)(i?y:g,{weeks:c}).join(""):d>0?(0,s.nk)(i?b:_,{days:d}).join(""):l>0?(0,s.nk)(i?x:p,{hours:l}).join(""):a>0?(0,s.nk)(i?f:h,{minutes:a}).join(""):e.bt("Just now", "Just now", " - ", undefined, true)}}},898781:(e,t,i)=>{i.d(t,{ZP:()=>a,oz:()=>s,q6:()=>o});var n=i(425288);const{Provider:o,Consumer:s,useHook:r}=(0,n.Z)("i18n"),a=r},892819:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(898781),o=i(66699);const s=(e,t)=>{const i=t||0,n=10**i,o=+(i?e*n:e).toFixed(8),s=Math.floor(o),r=o-s,a=r>.5-1e-8&&r<.5+1e-8?s%2==0?s:s+1:Math.round(o);return i?a/n:a},r=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:n})=>{const o={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...o,style:i,..."currency"===i?{currency:n,currencyDisplay:"symbol"}:{}}:o},a=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0},l=(e,t)=>{if(t){const{minimumFractionDigits:i,maximumFractionDigits:n}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==n)return{minimumFractionDigits:i,maximumFractionDigits:n}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){const e=(0,n.ZP)();return(t,i,n)=>{let d=0,c=0;const u=n&&n.style||void 0,h=n&&n.shortform||!1,p=n&&n.uplimit||void 0,_=n&&n.currency||void 0,g=!!p&&i>=p,m=p&&g?p:i;if("currency"===u){const{minimumFractionDigits:e,maximumFractionDigits:i}=l(t,_);d=void 0===n||void 0===n.maximum_fraction_digits?i:n.maximum_fraction_digits,c=void 0===n||void 0===n.minimum_fraction_digits?e:n.minimum_fraction_digits}else d=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,c=void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits;if(h&&m>999&&(d=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,c=0),d<c)return String(m);let f=m,x="";const b=[{"100M":{value:1e8,localeKey:e.bt("億", "億", "Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}},{"10k":{value:1e4,localeKey:e.bt("万", "万", "Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}}],y=[{b:{value:1e9,localeKey:e.bt("B", "B", "Abbreviation for one billion.", undefined, true)}},{m:{value:1e6,localeKey:e.bt("M", "M", "Abbreviation for one million.", undefined, true)}},{k:{value:1e3,localeKey:e.bt("k", "k", "Abbreviation for one thousand.", undefined, true)}}],v=/^zh|ja|ko/.test(t);if(h&&m>999){const e=v?b:y;for(let t=0;t<e.length;t+=1){const i=Object.keys(e[t])[0],n=e[t][i].value;if(m>=n){f=s(m/n*Math.pow(10,d))/Math.pow(10,d),x=e[t][i].localeKey;break}}}if(null==f)return"";const P=f.toLocaleString([a(t)&&"ar-SA"!==t?t:"en-US"],r({maximumFractionDigits:d,minimumFractionDigits:c,currency:_,style:u}));return x&&x.length>0?(0,o.Z)(e.bt("{{formattedNumber}}{{numberSuffix}}", "{{formattedNumber}}{{numberSuffix}}", "i18n.usePrettyNumberFormat.prettyNumberFormat", undefined, true),{formattedNumber:P,numberSuffix:x})+(g?"+":""):P+(g?"+":"")}}},12610:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>h,LU:()=>p,ZP:()=>_});const o=1e6,s=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,r={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},a={},l={background:"#FF8A8A",transform:"scale(.98)"},d={init:e=>({transform:`scale(${a[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[r.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[r.exit]:l,[r.stopped]:l,[r.paused]:l,[r.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class c{constructor(e){n(this,"setMutationObserver",(e=>(this.mutationObserver=e,this))),n(this,"startMutationObserver",(e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)})),n(this,"stopMutationObserver",(()=>{this.mutationObserver&&this.mutationObserver.disconnect()})),n(this,"handleIntersectionChange",(e=>{const t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){const e=Date.now();this.startTime=e,this._debug(r.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach((e=>e()))}else!t&&this.inViewport&&(this._debug(r.exit,!0),this.exitCallbacks.forEach((e=>e(this.toJSON()))));this.inViewport=t})),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,s&&Object.assign(this.node.style,d.init(e)),this}pause(){return this.inViewport&&(this._debug(r.paused,!0),this.exitCallbacks.forEach((e=>e(this.toJSON())))),this}resume(){if(this.inViewport){const e=Date.now();this._debug(r.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(r.stopped,!0),this.exitCallbacks.forEach((t=>t(this.toJSON(e))))),this}toJSON(e=""){return{startTime:this.startTime*o,endTime:Date.now()*o,forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:(Date.now()-this.startTime)/1e3+" seconds"}}_debug(e,t){if(s)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),d[e]&&Object.assign(this.node.style,d[e]),e){case r.flushed:case r.paused:case r.exit:a[this.debugId]=!0}}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=!0,p=!1;class _{constructor(){u(this,"_delegateChange",(e=>{e.forEach((e=>{const t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)}))})),u(this,"_handleMutations",((e,t)=>{const i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")})),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){const i=this.activeImpressions.get(e);var n;i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),null===(n=window.activeImpressions)||void 0===n||n.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){var i;t=new c(e),this.activeImpressions.set(e,t),null===(i=window.activeImpressions)||void 0===i||i.set(e,t),this.observer.observe(e);const n=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(n)),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=h){this.paused||(Array.from(this.activeImpressions.values()).forEach((e=>e.pause())),this.paused=!0,this.pausePriority===p&&(this.pausePriority=e))}resume(e=h){e===p&&this.pausePriority===h||this.paused&&(Array.from(this.activeImpressions.values()).forEach((e=>e.resume())),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){const e=Array.from(this.topObstructions).reduce(((e,t)=>{const{bottom:i}=t.getBoundingClientRect();return i>e?i:e}),0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce(((e,t)=>{const{top:i}=t.getBoundingClientRect();return i<e?i:e}),window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){const i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach((e=>this.observer.observe(e.node))),this.topHeight=e,this.bottomHeight=t}}}},564194:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(973935),s=i(407043),r=i(124580),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class c extends n.Component{constructor(e){super(e),l(this,"trackImpression",(()=>{try{this.node=(0,o.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),l(this,"logImpression",(e=>{const{carouselData:t,closeupImpressionType:i,closeupNavigationType:n,componentType:o,contextLogData:s,elementType:r,impressionAuxFields:a,impressionType:l,loggingId:c,objectIdStr:u,slotIndex:h,trackCarousel:p,viewData:_,viewParameter:g,viewType:m,logContextEvent:f}=this.props,x=d[l],b=x.idType,y=e.forcedExit&&"removed"===e.forcedExit?0:void 0;let v={endTime:e.endTime,[b]:c,slotIndex:h,time:e.startTime,renderDuration:e.endTime-e.startTime,type:i,...a,forcedExit:y};var P,w;"Pin"===l&&(v={...v,pinCellWidth:this.node.offsetWidth,pinCellHeight:this.node.offsetHeight,windowWidth:null===(P=window)||void 0===P?void 0:P.innerWidth,windowHeight:null===(w=window)||void 0===w?void 0:w.innerHeight});if(p||f({event_type:x.eventType,component:o,element:r,event_data:{[x.impressionType]:"Story"===l?v:[v]},object_id_str:u,view_type:m,view_data:_||{},view_parameter:g,aux_data:{...s,closeup_navigation_type:n}}),t&&p){const{carousel_slots:e,index:i=0,id:n}=t;f({event_type:7352,component:o,event_data:{pinCarouselSlotImpressions:[{...v,carouselDataId:Number(n),carouselSlotId:(null==e?void 0:e[i])&&Number(e[i].id),slotIndex:i}]},object_id_str:u,view_type:m,view_data:_||{},view_parameter:g,aux_data:{...s}})}})),this.impressionsFramework=e.impressionsFramework||r.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return n.Children.only(this.props.children)}}function u(e){const{logContextEvent:t}=(0,s.v)();return(0,a.jsx)(c,{...e,logContextEvent:t})}},124580:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(12610).ZP)},65189:(e,t,i)=>{i.d(t,{Z:()=>o});const n=e=>e.split("").sort((()=>.5-Math.random())).join("");function o(e,t){const i=e.split("@")[0];let o="";return o=i.includes(".")?i.replace("."," "):i.includes("_")?i.replace("_"," "):i,o=o.replace(/[0-9]/g,""),"GB"===t?"User_"+n(o):(o=o.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),o)}},926275:(e,t,i)=>{i.d(t,{Z:()=>o});const n=28;function o(e){if(!e)return!1;const t=new Date(e);return t.setDate(t.getDate()+n),(new Date).getTime()<t.getTime()}},844753:(e,t,i)=>{function n(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}i.d(t,{Z:()=>n})},755742:(e,t,i)=>{i.d(t,{Z:()=>n});const n={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},326216:(e,t,i)=>{function n(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const i=[];let n,o;for(n=0;n<=t.length;n+=1)i[n]=[n];for(o=0;o<=e.length;o+=1)i[0][o]=o;for(n=1;n<=t.length;n+=1)for(o=1;o<=e.length;o+=1)t.charAt(n-1)===e.charAt(o-1)?i[n][o]=i[n-1][o-1]:i[n][o]=Math.min(i[n-1][o-1]+1,Math.min(i[n][o-1]+1,i[n-1][o]+1));return i[t.length][e.length]}i.d(t,{Z:()=>n})},720247:(e,t,i)=>{function n(e){let t=!1;return{promise:new Promise(((i,n)=>{e.then((e=>t?n({isCanceled:!0}):i(e)),(e=>n(t?{isCanceled:!0}:e)))})),cancel(){t=!0}}}i.d(t,{Z:()=>n})},620707:(e,t,i)=>{function n(e,t){if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every((i=>e[i]===t[i]))}return e===t}i.d(t,{Ak:()=>n,_Y:()=>o,qe:()=>a,xZ:()=>r});const o=(e,t)=>e.length===t.length&&e.every(((e,i)=>n(e,t[i]))),s=(e,t)=>e.length===t.length&&e.every(((e,i)=>e===t[i])),r=(e,t=s)=>i=>{const n=[];return function(...o){const s=this,r=n.find((e=>e.context===s&&t(e.args,o)));if(r)return r.result;const a={context:s,args:o,result:i.apply(this,o)};return n.push(a),e&&n.length>e&&n.shift(),a.result}},a=r(1);r()},379913:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(407159),o=i(884732);const s=e=>{var t;const i={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return i.fullName&&i.imageMediumUrl&&i.imageLargeUrl||(0,n.Z)("utils.incomplete_user_values"),null!==(t=e.partner)&&void 0!==t&&t.is_create?{...i,partner:{is_create:!0}}:i},r=(e,t,i)=>{(0,o.r8)({...(0,o.rl)(),[e.id]:s(e)}),t&&i&&(0,n.Z)("new_account_add_success",{method:t,user_added:e.id},i)}},407159:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(172045),o=i(884732),s=i(867820);const r="web_account_switcher",a=(e,t,i)=>{let a=(0,o.yW)();a||(a=(()=>{const e=(0,n.Z)();return(0,s.tj)(`${r}.utils.group_created`,{group_id:e,group_count:(0,o.lv)()}),e})(),(0,o.M3)(a));const l={group_count:(0,o.lv)()};let d="";i&&(d="account_switcher_modal"===i?"modal.":"flyout."),(0,s.tj)(`${r}.${d}${e}`,{...t,...l})}},249647:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(844753);function o(e,t=!1){return i=>{if(!(0,n.Z)(i))return t&&Array.isArray(i)?i.map(o(e,t)):i;const s={};return Object.keys(i).forEach((r=>{const a=e(i[r],r);(0,n.Z)(i[r])||t&&Array.isArray(i[r])?s[a]=o(e,t)(i[r]):s[a]=i[r]})),s}}function s(e,t=!1){const i=(t,i)=>e(i);return e=>o(i,t)(e)}},170528:(e,t,i)=>{function n(e,t){if(!Array.isArray(t)){const{[t]:i,...n}=e;return n}const i=new Set(t.flat());return Object.fromEntries(Object.entries(e).filter((([e])=>!i.has(e))))}i.d(t,{Z:()=>n})},567450:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>r});const o=new class{constructor(){n(this,"onResumeListeners",[]),n(this,"onPauseListeners",[]),n(this,"inExp",!1),n(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter((t=>t!==e))}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter((t=>t!==e))}getAppState(){return this.windowInFocus?0:void 0}},s=e=>{if(e.isHidden){const{reason:t}=e;o.windowInFocus=!1,o.onPauseListeners.forEach((e=>e(t)))}else o.windowInFocus=!0,o.onResumeListeners.forEach((e=>e()))};setTimeout((()=>{window.addEventListener("beforeunload",(()=>s({isHidden:!0,reason:"beforeunload"}))),window.addEventListener("focus",(()=>s({isHidden:!1}))),window.addEventListener("blur",(()=>s({isHidden:!0,reason:"blur"}))),window.addEventListener("pageshow",(()=>s({isHidden:!1}))),window.addEventListener("pagehide",(()=>s({isHidden:!0,reason:"pagehide"}))),void 0!==document.hidden?document.addEventListener("visibilitychange",(()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",(()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1)}),0);const r=o},64446:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(883119),o=i(237056),s=i(341732),r=i(81226),a=i(898781),l=i(605028),d=i(623568);var c=i(785893);const u={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},h={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function p({backgroundColor:e,identifier:t,size:i="sm"}){const o="pine"===e?"#0FA573":"#fff",s="sm"===i?u:h;return(0,c.jsx)(n.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...s,backgroundColor:e?o:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:t})}function _({pin:e,size:t="sm",allowProductCarousel:i,allowShoppingPriceIndicator:u,shoppingLabelColor:h}){const _=(0,a.ZP)(),g=(0,o.Z)(),m=(0,l.Z)(e);if(m.isGif)return p({identifier:"GIF",size:t});if(m.isStoryPin&&!1!==e.should_open_in_stream){const{page_count:i=0,static_page_count:o=0,total_video_duration:s=0}=e.story_pin_data||{};let a=i.toString();if(s>0){const e=s+o*d.oN;return a=(0,r.Z)(e),p({identifier:a,size:t})}return p({identifier:(0,c.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(n.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,c.jsx)(n.JO,{accessibilityLabel:g?_.bt("Pin", "Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel.sce", undefined, true):_.bt("Idea Pin", "Idea Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel", undefined, true),inline:!0,icon:"idea-pin",color:"default",size:"sm"===t?12:16})}),(0,c.jsx)(n.xv,{inline:!0,size:"100",weight:"bold",children:a})]}),size:t})}if(m.isVideo){const{videos:i}=e,{duration:n=0}=i&&i.video_list&&i.video_list[Object.keys(i.video_list)[0]]||{};return p({identifier:(0,r.Z)(n),size:t})}if(m.isProduct){const i=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(u){const e=i&&(i.price||i.max_price);return e?p({identifier:e,size:t}):null}if(h){const i=function(e){var t;return((((null===(t=e.rich_summary)||void 0===t?void 0:t.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return i?p({identifier:i,backgroundColor:h,size:t}):null}return null}if(i){const i=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=i&&(0,s.Z)(e.images,i.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:o=[],index:r=0}=n;return p({identifier:`${r+1}/${o.length}`,size:t})}if(m.isCarousel){const i=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=i;return p({identifier:`${o+1}/${n.length}`,size:t})}return null}},605028:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(687551),o=i(623568);const s=()=>({isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1});function r(e){const{access:t,attribution:i,embed:r,is_eligible_for_web_closeup:a,promoted_is_lead_ad:l,rich_summary:d,sponsorship:c,story_pin_data_id:u,videos:h}=e,p=s();l&&(p.isLeadPin=!0),(0,n.Z)(e)&&(p.isCarousel=!0),a&&(p.isOneTap=!0),(0,o.iR)(h)&&(p.isVideo=!0);const _=r||i&&i.embed||null;return _&&"gif"===_.type&&(p.isGif=!0),d&&"product"===d.type_name&&(p.isProduct=!0),d&&"recipe"===d.type_name&&(p.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(p.isPromoted=!0),(t||[]).includes("write")&&(p.isOwnPin=!0),u&&(p.isStoryPin=!0),c&&(p.isSponsored=!0),p}},623568:(e,t,i)=>{i.d(t,{Js:()=>d,NK:()=>v,Nc:()=>P,VX:()=>c,ZE:()=>x,Zt:()=>b,_J:()=>p,_S:()=>w,cL:()=>m,dZ:()=>E,hb:()=>y,hy:()=>h,iR:()=>l,jL:()=>u,o:()=>I,oN:()=>r,pU:()=>A,rM:()=>f,sV:()=>_,sY:()=>g});var n=i(605028);const o="all_time_realtime",s="30d_realtime",r=5e3,a=["Uploaded by user"],l=e=>!!e&&!!e.video_list,d=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},c=(e,t)=>t&&t.products&&t.products.length>0||(null==e?void 0:e.products)&&e.products.length>0||!1,u=(e,t)=>!!t&&!e,h=e=>!!e,p=e=>!!e.video_status&&5!==e.video_status,_=e=>["email","messages","deep_linking"].includes(e),g=e=>!!e&&"gif"===e,m=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!g(i)&&!(e=>"pinstory"===e)(t),f=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,x=e=>/pin.it/gim.test(e||""),b=({link:e,mobileLink:t,origImageUrl:i,trackedLink:n})=>t||n||e||i||"",y=({isGif:e,isProductPin:t,isRecipePin:i,isStoryPin:n,isVideoPin:o})=>e?"gif":t?"productPin":i?"recipePin":n?"storyPin":o?"video":"image",v=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function P({pin:e,isSCEEnabled:t}){var i;const{aggregated_pin_data:o}=e,{isStoryPin:r,isVideo:a}=(0,n.Z)(e);return!(!t&&(r||a))&&0!==Object.keys((null==o||null===(i=o.creator_analytics)||void 0===i?void 0:i[s])||{}).length}function w(e){for(const t of a)if(e===t)return!1;return!0}function I(e){return 0!==Object.keys((null==e?void 0:e[s])||{}).length}function A(e){return 0!==Object.keys((null==e?void 0:e[o])||{}).length}function E(e){var t;return!(null==e||null===(t=e[s])||void 0===t||!t.is_realtime)}},373695:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s extends n.Component{constructor(e){super(e),o(this,"onImageLoad",(e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState((t=>({loadedItems:[...t.loadedItems,e]}))):this.setState((e=>({errors:e.errors+1}))))})),o(this,"onImageError",(()=>{this.mounted&&this.setState((e=>({errors:e.errors+1})))})),o(this,"mounted",!1),o(this,"loadImages",(e=>{const t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e})),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;const{url:e}=this.props;this.loadImages(e||"")}componentWillUnmount(){this.mounted=!1}render(){const{children:e}=this.props,{loadedItems:t}=this.state;return e({image:t})}}},122097:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(898781),s=i(54574),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends n.Component{constructor(e){super(e),a(this,"onImageLoad",(e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState((t=>({loadedItems:[...t.loadedItems,e]}))):this.setState((e=>({errors:e.errors+1}))))})),a(this,"onImageError",(()=>{this.mounted&&this.setState((e=>({errors:e.errors+1})))})),a(this,"mounted",!1),a(this,"loadImages",(e=>{e.forEach((e=>{const t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e.url,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e.url}))})),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;const{images:{data:e}}=this.props,{items:t}=e||{};this.loadImages(t||[])}componentDidUpdate(e){const{images:{data:t,error:i},url:n}=e,{onError:o,images:{isLoaded:s,data:r,error:a},url:l}=this.props;if(!i&&a&&o&&o(),n!==l&&this.setState({loadedItems:[]}),s&&r){const{items:e}=t||{},{items:i}=r||{},n=(i||[]).slice((e||[]).length);this.loadImages(n)}}componentWillUnmount(){this.mounted=!1}render(){const{children:e,images:{data:t,error:i,isLoaded:n},url:o}=this.props,{items:s,title:r}=t||{},{errors:a,loadedItems:l}=this.state,d=i?i.message_detail||i.message:this.props.i18n.bt("No images found. Check your URL and try again.", "No images found. Check your URL and try again.", "No images are found at the URL submitted", undefined, true);let c=n&&0===l.length&&a===(s||[]).length&&o?d:void 0;c&&o.includes("?")&&(c=this.props.i18n.bt("No images found. Remove any tracking parameters in this URL to try again.", "No images found. Remove any tracking parameters in this URL to try again.", "No images are found at the URL submitted. The url may contain tracking parameters", undefined, true));return e({loading:!n||0===l.length&&a!==(s||[]).length,title:r,error:c,images:l})}}function d(e){const t=(0,o.ZP)(),i=(0,s.Z)({url:e.url,source:e.source});return(0,r.jsx)(l,{...e,images:i,i18n:t})}},54574:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784590);function o({url:e,source:t}){return(0,n.Z)({name:"FindPinImagesResource",options:{url:e,source:t||"pin_create",appendItems:!1,followRedirects:!0,scrapeMetric:"www_url_scrape"}})}},299295:(e,t,i)=>{i.d(t,{$4:()=>D,$K:()=>S,AQ:()=>G,ASPECT_RATIO_FORMAT_MAP:()=>N,Bj:()=>f,DB:()=>W,FH:()=>ae,FM:()=>J,G9:()=>L,GX:()=>m,Hy:()=>ce,JO:()=>z,Ke:()=>k,LM:()=>o,Lc:()=>pe,Lr:()=>de,MN:()=>b,Mn:()=>Q,NB:()=>te,P0:()=>ie,P9:()=>re,Pn:()=>y,TK:()=>P,TZ:()=>C,UU:()=>u,Uw:()=>Y,VP:()=>he,W_:()=>le,XB:()=>l,Xy:()=>j,YM:()=>w,aD:()=>_e,aj:()=>F,bA:()=>R,bo:()=>d,dS:()=>A,eZ:()=>_,fk:()=>oe,g1:()=>ue,gU:()=>c,i2:()=>h,iR:()=>M,jh:()=>ge,km:()=>p,lx:()=>O,mr:()=>$,mt:()=>H,n_:()=>Z,np:()=>V,of:()=>n,q:()=>fe,qY:()=>I,qm:()=>se,rc:()=>K,ro:()=>me,sD:()=>r,sG:()=>g,u1:()=>X,uR:()=>a,v5:()=>s,v9:()=>q,vk:()=>ee,wj:()=>v,x1:()=>B,yC:()=>x,yI:()=>T,yX:()=>E,yb:()=>U,zr:()=>ne});const n=880,o=340,s=380,r=510,a=40,l=20,d=4,c=474,u=134,h=96,p=800,_=186,g=40,m=10,f=88,x=183,b=130,y=24,v=400,P=50,w=8,I=8,A=5,E=20,C=13,S=29,j=5,T=20,D=T**2,k=100,z=500,O=500,R=40,L=100,M=5,B=["attempted","publishing","succeeded","uploading"],N={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}],storyFARPortrait:[{w:1,h:2},{w:9,h:16},{w:2,h:3},{w:3,h:4},{w:4,h:5},{w:1,h:1}],storyFARLandscape:[{w:2,h:1},{w:16,h:9},{w:3,h:2},{w:4,h:3},{w:5,h:4},{w:1,h:1}]},Z=["tl","tc","tr","bl","bc","br"],F=["left","center"],U=["top","center","bottom"],V=["none","uppercase"],H=["sm","md","lg"],G=[1,.75],W=198,$=132,q=1,X=56,Y=240,K="cubic-bezier(0.66, 0.025, 0.33, 0.975)",J=1e3,Q=1500,ee=2,te=3,ie=20,ne=20,oe=2,se=["processing","publishing","saving"],re=60.5,ae=120.5,le=1,de=104857600,ce=2500,ue=3,he=5e3,pe="pin-builder-default-education-id",_e="pin-builder-default-tour-id",ge="pin-builder-editing-tour-id",me="save_from_url",fe=["processing","edited","creating","saving","saved"]},66743:(e,t,i)=>{i.d(t,{NC:()=>s,Rc:()=>a,WK:()=>d,X9:()=>o,b9:()=>n,f9:()=>l,gu:()=>r});const n="pin-builder-font-faces",o="system-font-faces",s="pin-builder-education-font-faces",r="licensed",a="system",l="brand",d=4},665866:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(826067);const o={carousel:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},disabledIdeaPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_idea_pins|disable_video)/,authOnly:!0,partnerOnly:!1},disabledPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_web_pins)/,authOnly:!0,partnerOnly:!1},disabledVideoPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_video)/,authOnly:!0,partnerOnly:!1},editing:{authOnly:!0,partnerOnly:!0},education:{authOnly:!0,partnerOnly:!0},offsitePinCreation:{scenarios:["offsite_pin_creation"]},layouts:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation","story_pin"]},linkStatusValidation:{authOnly:!0,partnerOnly:!0},requireLink:{scenarios:["ad_creation"]},multipage_deprecation:{customEnabledCheck:()=>!1,experiment:"web_multipage_deprecation",hasCustomEnabledCheck:({requestContext:e})=>{e.experimentsClient.checkExperiment("sce_lightswitch_organic"),e.experimentsClient.checkExperiment("sce_lightswitch_monetized");const{sterlingOnSteroidsLdap:t}=e||{};return!!t},groups:/^(employees|enabled)/,authOnly:!0,partnerOnly:!1,scenarios:["story_pin_v2"]},multi_pin:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation"]},multi_pin_pinner:{authOnly:!0,partnerOnly:!1,scenarios:["default"]},offsite_pin_creation_multi_select:{authOnly:!0,partnerOnly:!1,experiment:"web_offsite_pin_creation_multi_select",groups:/^(enabled|employees|enabled_redirect_to_hf)/,scenarios:["offsite_pin_creation"]},preview_deprecation:{experiment:"web_idea_pin_creation_preview_deprecation",groups:/^(employees|enabled)/,authOnly:!0,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinExtendVideoLength:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinExtendVideoLengthAboveTwoMin:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_extend_video_duration_above_two_min",groups:/^(employees_min|enabled_min)/,scenarios:["story_pin_v2"]},imageSignals:{authOnly:!0,partnerOnly:!0,experiment:"pin_quality_signal_image",groups:/^(employees|enabled)/},scheduling:{authOnly:!0,partnerOnly:!0,scenarios:["default"],orbacExperiment:"web_m10n_business_access_orbac_www"},shop_the_pin:{authOnly:!0,partnerOnly:!0,orbacExperiment:"web_m10n_business_access_orbac_www"},storyPinCommentsPermissions:{authOnly:!0,partnerOnly:!1,groups:/^(employees|enabled)/,scenarios:["story_pin_v2"],orbacExperiment:"web_m10n_business_access_orbac_www"},systemFonts:{authOnly:!0,partnerOnly:!0},tagging:{authOnly:!0,partnerOnly:!0,experiment:"web_pin_builder_tagging",groups:/^(employees|enabled|rollout)/,orbacExperiment:"web_m10n_business_access_orbac_www"},suppressSuccessModal:{scenarios:["ad_creation","business_nux"]},video:{customEnabledCheck:({user:e})=>!(null==e||!e.video_upload_allowed),authOnly:!0,hasCustomEnabledCheck:()=>!0,orbacExperiment:"web_m10n_business_access_orbac_www"},videoEditing:{authOnly:!0,partnerOnly:!0,experiment:"video_edit",groups:/^(employees|enabled)/,orbacDisabled:!0},videoTagging:{authOnly:!0,partnerOnly:!0,languages:["en"],orbacExperiment:"web_m10n_business_access_orbac_www"},pinQuality:{partnerOnly:!0},ideaPinLinkCreation:{authOnly:!0,partnerOnly:!1,experiment:"web_idea_pin_link_creation",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinScheduling:{authOnly:!0,partnerOnly:!1,experiment:"web_sce_idea_pin_scheduling",groups:/^(employees|enabled)/},ideaPinDraftExpirationTimeBased:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_drafts_expire_time_based",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinDescriptionInDetails:{authOnly:!0,partnerOnly:!1,experiment:"web_sc_combined_desc_details",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtReduceImageRegistrations:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_reduce_image_registrations",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtReduceMediaStatusWaiting:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_reduce_media_status_waiting",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishPwtPublishBeforeMediaCompleted:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_publish_before_media_completed",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},ideaPinPublishBeforeMediaCompletedCloseupPwt:{authOnly:!0,partnerOnly:!1,experiment:"web_px_idea_pin_publish_pwt_publish_before_media_complete_closeup_pwt",groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]}},s={_experiments:null,_viewer:null,_advertiser:null,_scenario:null,_language:null,_context:null,_orbacActingAs:null,initialize(e){const{requestContext:t,viewer:i,location:o,advertiser:s,scenario:r,orbacActingAs:a}=e;this._context=e,this._experiments=t.experimentsClient,this._language=t.language,this._viewer=i,this._advertiser=s,this._orbacActingAs=a;const{adCreate:l}=(0,n.mB)(o.search);this._scenario=r||(l?"ad_creation":"default")},scenario(){return this._scenario},enabled(e){var t;if(!this._viewer||!this._experiments)return!1;const{advertisers:i,authOnly:n,customEnabledCheck:s,experiment:r,groups:a=/.*/,hasCustomEnabledCheck:l,languages:d,partnerOnly:c,scenarios:u,orbacDisabled:h,orbacExperiment:p}=o[e];return(!(!(null===(t=this._orbacActingAs)||void 0===t||!t.id)&&this._orbacActingAs.id!==this._viewer.id)||!(h||p&&"enabled"!==this._experiments.checkExperiment(p).group))&&(l&&s&&l(this._context)?s(this._context):!(!i||!this._advertiser||null===this._advertiser.billing_type)||!(n&&!this._viewer.isAuth)&&(!(c&&!this._viewer.isPartner)&&(!(u&&!u.includes(this._scenario))&&(!(d&&!d.includes(this._language))&&(!r||a.test(this._experiments.checkExperiment(r).group||""))))))},getExperimentGroup(e){if(!this._viewer||!this._experiments)return null;const{experiment:t}=o[e];if(t){const{group:e}=this._experiments.checkExperiment(t);return e}return null}}},309256:(e,t,i)=>{i.d(t,{$D:()=>l,CP:()=>a,KV:()=>d,Wt:()=>s,a2:()=>u,bs:()=>h,j1:()=>r,vK:()=>c});var n=i(173159),o=i(66743);const s=[{fontGroup:o.gu,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik XCond-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Medium.otf"}]},{fontGroup:o.gu,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Gabriello-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Ultra Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Super Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Bold.otf"}]},{fontGroup:o.gu,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik-Bold+Italic.otf"}]},{fontGroup:o.Rc,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.gu,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.gu,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.Rc,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:o.Rc,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.Rc,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function r(){return s}function a(e,t,i){const n=e.styles.find((e=>e.fontStyle===t&&e.fontWeight===i));return n?n.name:""}function l(e,t){return e.reduce(((e,t)=>[...e,...t.fonts]),[]).find((e=>e.fontFamily===t))||null}function d(e){return(0,n.Z)(e,o.b9)}function c(){return(0,n.Z)(r(),o.X9)}function u(){return(0,n.Z)([s[o.WK]],o.NC)}function h(e){const t=function(e){const t=r();if(e){const i=t.findIndex((t=>t.localeFilter===e));if(i>=0)return t[i]}return t[6]}(e),{defaultStyle:i}=t,n=t.styles[i],{fontFamily:s,fontOverrides:a}=t,l=a&&a.textTransform?1:0,d=a&&a.lineHeight||1.2,c=a&&a.letterSpacing||0;return{fontGroupName:o.gu,fontFamilyName:null!=s?s:"",fontStyleName:n.name,fontWeight:n.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:d,letterSpacing:c,transformIndex:l,showMoreOptions:!1}}},984244:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e){return n.ASPECT_RATIO_FORMAT_MAP[e]}},795067:(e,t,i)=>{function n(e){const t=e.lastIndexOf("."),i=e.toLocaleLowerCase();return i.substr(t).includes("gif")||i.startsWith("data:image/gif")}function o(e){if("localVideo"===e.type)return"localVideo";if("localImage"===e.type)return"image/gif"===(e.fileSrc&&e.fileSrc.type)?"gif":null;if("webImage"===e.type)return n(e.src)?"gif":null;if("dropboxFile"===e.type)return n(e.name)?"gif":null;if("pin"===e.type){const{images:t,videos:i}=e;if(i)return"localVideo";if(null!=t&&t.orig&&t.orig.url&&n(t.orig.url))return"gif"}return null}i.d(t,{Z:()=>o})},616672:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e,t=n.LM,i=0){return(t-2*i)/e.width*e.height+2*i}},388628:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(299295);function o(e,t){const i=e/t,{carousel:o}=n.ASPECT_RATIO_FORMAT_MAP,s=o.length,r=o[0],a=o[s-1];if(i<=a.w/a.h)return{w:e,h:t};const[l]=o.reduce(((e,t,n)=>{const o=t.w/t.h,[s,r]=e,a=Math.abs(o-i);return r&&r<a?[s,r]:[t,a]}),[null,null]);return{w:t*(l?l.w/l.h:r.w/r.h),h:t}}},573545:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(540794);function o(e){if(e){return`partner_upload_${(0,n.Z)().includes("/create/")?"create_flow":"standalone"}`}return"pinner_upload_standalone"}},47615:(e,t,i)=>{i.d(t,{PG:()=>o,Sl:()=>s,rt:()=>a});var n=i(299295);function o(e){return e.width>=n.FM&&e.height>=n.Mn}function s(e){return!!e&&("localImage"===e.type||"webImage"===e.type||"assetImage"===e.type)}const r={STATIC:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],CAROUSEL:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],VIDEO:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","VIDEO_VIEW","WEB_SESSIONS"],COLLECTIONS:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"]};function a(e,t){return!(!e||!t)&&(r[e]||[]).includes(t)}},454074:(e,t,i)=>{function n(e){const t=[];return e.items?Array.from(e.items).forEach((e=>{if("file"===e.kind){const i=e.getAsFile();i&&t.push(i)}})):t.concat(Array.from(e.files)),t}i.d(t,{Z:()=>n})},724565:(e,t,i)=>{i.d(t,{SD:()=>r,TA:()=>s,to:()=>o});const n=6e3,o=e=>{const t=Math.floor(100*e||0),i=Math.floor(t/n),o=Math.floor((t-i*n)/100),s=t-i*n-100*o;return`${i<10?`0${i}`:i}:${o<10?`0${o}`:o}:${s<10?`0${s}`:s}`},s=e=>`00:${o(e).substring(0,5)}:00`,r=e=>{const t=e.split(":");let i=0;return 3===t.length&&(i+=isNaN(t[0])?0:60*+t[0],i+=isNaN(t[1])?0:+t[1],i+=isNaN(t[2])?0:+t[2]/100),i}},840839:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(385740);function o(e,t){const i=(0,n.BE)();e({event_type:13,view_type:212}),e(t),e({event_type:13,view_type:null==i?void 0:i.viewType,view_parameter:null==i?void 0:i.viewParameter,view_data:null==i?void 0:i.viewData})}},113110:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(773285);const s=()=>{const{checkExperiment:e}=(0,o.F)(),{anyEnabled:t}=e("web_set_crossorigin_anonymous"),[i,s]=(0,n.useState)(t);return{enabled:i,disable:()=>s(!1)}}},692627:(e,t,i)=>{function n({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:o,hasPinStoryPinData:s}){if(e){if(t)return i?144:n?141:o?145:139;if(s)return 157}return 140}i.d(t,{Z:()=>n})},283943:(e,t,i)=>{i.d(t,{aU:()=>a,hq:()=>r,o_:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("AuthenticationContext");function r(){return s().loginContext}function a(){return s().logout}},472644:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e}){return(0,n.jsx)("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),(0,n.jsx)("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),(0,n.jsx)("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),(0,n.jsx)("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),(0,n.jsx)("path",{d:"M20 20h472v472H20V20z"})]})})}},830269:(e,t,i)=>{i.d(t,{Z:()=>n});const n={EMAIL:1,FACEBOOK:2,GPLUS:3,GOOGLE_ONE_TAP:4,SMARTLOCK:5,MULTIFACTOR:6,SWITCH_ACCOUNT:7,LINE:8}},177471:(e,t,i)=>{i.d(t,{k:()=>I});var n=i(667294),o=i(702664),s=i(214494),r=i(186656);const a=["etsy","facebook","microsoft","twitter","google","instagram","youtube","dropbox"];function l({network:e,data:t,requestContext:i}){if(a.includes(e))return s.Z.create("UserSocialNetworkResource",{network:e,data:t}).callCreate();const n=`/v3/connect/${e}/`,o=((e,t,i)=>{let n;switch(e){case"facebook":const{facebookToken:e}=i;n=t?{facebook_id:t.id,facebook_token:e}:Object.freeze({});break;case"gplus":n=t?{one_time_code:t.one_time_code,redirect_uri:t.redirect_uri||void 0}:Object.freeze({});break;case"line":n=t?{line_id_token:t.line_id_token,line_access_token:t.line_access_token}:Object.freeze({});break;default:n=Object.freeze({})}return n})(e,t,i);return(0,r.Z)({url:n,method:"PUT",data:o})}var d=i(124237),c=i(402201),u=i(572752),h=i(553171),p=i(83969),_=i(966113),g=i(867820);let m=Object.freeze({});const f=e=>{const{network:t}=e;if(!m[t])return;const{[t]:{error:i,success:n,complete:o},...s}=m;m={...s},"error"===e.type?null==i||i(Object.freeze({})):n("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==o||o()},x=({i18n:e,network:t,callbacks:i,requestContext:n,inAnyGoogleLocaleFixExperiment:o})=>{if(i={error:()=>{},complete:()=>{},...i},(0,g.My)(`auth_web.social_connect.${t}.${(0,u.Z)(n)}`),"gplus"===t||"google"===t)(0,g.My)("auth_web.social_connect.google.migration"),async function(e,t){var i,n;await(0,p.Px)(void 0,t||void 0);const o=null===(i=window.google)||void 0===i||null===(n=i.accounts)||void 0===n?void 0:n.oauth2;o&&o.initCodeClient({client_id:_.v3,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e}).requestCode()}((e=>{i.success({one_time_code:e.code,redirect_uri:"postmessage"})}),o?n.language:void 0);else if("line"===t){const{locale:e}=n;(0,h.Z)(e,i)}else{const n=window.open("/connect/"+t+"/","",(e=>{switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,c.Z)({width:580,height:580});case"etsy":return(0,c.Z)({width:580,height:775});case"youtube":return(0,c.Z)({width:605,height:640});default:return(0,c.Z)()}})(t));if(!n)return d.Z.showError(e.bt("You must enable pop-ups.", "You must enable popups!", " - ", undefined, true)),void(i.error&&i.error(Object.freeze({})));const o=setInterval((()=>{n.closed&&(clearInterval(o),f({network:t,type:"error"}))}),1e3);m={...m,[t]:i}}};window.addEventListener("message",(e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin!==t)return;const i=e.data;if(i&&"social-connect-complete"===i.type){const t=e.data;t.network&&f(t)}}));var b=i(773285),y=i(780280),v=i(414327),P=i(19121);class w{constructor({invalidateResource:e,requestContext:t,viewer:i,inAnyGoogleLocaleFixExperiment:n}){this.getUserId=()=>i.isAuth?i.id:"",this.getUsername=()=>i.isAuth?i.username:"",this.isLimitedLogin=()=>i.isLimitedLogin,this.invalidateResource=e,this.requestContext=t,this.inAnyGoogleLocaleFixExperiment=n}handleConnect(e,t,i,n){const o=t=>{("connect"===t.type?l({network:e,data:t.data,requestContext:this.requestContext}):(0,r.Z)({url:`/v3/connect/${e}/`,method:"DELETE"})).then((e=>{var t;const n={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",n),s.Z.create("UserResource",n).callGet(),null===(t=i.success)||void 0===t||t.call(i,e)}),(e=>{var t;e&&"object"==typeof e&&(null===(t=i.error)||void 0===t||t.call(i,{api_error_code:e.api_error_code,code:e.code,message:e.message}))})).finally((()=>{var e;null===(e=i.complete)||void 0===e||e.call(i)}))};t?this.isLimitedLogin()?o({type:"connect"}):x({network:e,callbacks:{success:e=>o({type:"connect",data:e}),error:i.error,complete:i.complete},i18n:n,requestContext:this.requestContext,inAnyGoogleLocaleFixExperiment:this.inAnyGoogleLocaleFixExperiment}):o({type:"disconnect"})}}function I(){const e=(0,o.useDispatch)(),t=(0,y.B)(),i=(0,P.Z)(),{checkExperiment:s}=(0,b.F)(),r=s("mweb_google_button_locale_fix").anyEnabled||s("dweb_google_button_locale_fix").anyEnabled;return(0,n.useMemo)((()=>new w({invalidateResource:(t,i)=>e((0,v.jB)(t,i)),requestContext:t,viewer:i,inAnyGoogleLocaleFixExperiment:r})),[e,r,t,i])}},553171:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(231486),o=i(226198),s=i(844974);var r=i(966113),a=i(826067),l=i(643913),d=i(299899);const c="undefined"!=typeof window,u=c?`${window.location.origin}/oauth/line/redirect`:"",h=({origin:e,data:t})=>t&&e===window.location.origin?String(t):null,p=({url:e,key:t})=>{if(!e.startsWith(window.location.origin)||t!==d.MM)return null;const i=(0,s.qn)(d.MM);return(0,s.L_)(d.MM),i};function _(e,t){var i;if(!c)return void(null===(i=t.error)||void 0===i||i.call(t,{message:"Window is undefined"}));let s;const d=function(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>t[Math.floor(36*Math.random())])).join("")}(10),_=async e=>{if(!e.isTrusted)return;const i=e instanceof MessageEvent?h(e):p(e),r=(0,a.mB)(i);if(r.state&&r.code&&r.state===d){s&&!s.closed&&s.close();try{const e=await fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":`${String(n.U2(o.fS))}`},method:"POST",body:(0,l.Z)({code:r.code,redirect_uri:u})}),i=await e.json(),{id_token:s,access_token:a}=i;var c;if(s&&a)t.success({line_id_token:s,line_access_token:a});else null===(c=t.error)||void 0===c||c.call(t,{message:"No tokens returned"})}catch(f){var g;null===(g=t.error)||void 0===g||g.call(t,f)}finally{var m;s&&!s.closed&&s.close(),window.removeEventListener("message",_),window.removeEventListener("storage",_),null===(m=t.complete)||void 0===m||m.call(t)}}};window.addEventListener("message",_),window.addEventListener("storage",_),s=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${r.z}&redirect_uri=${encodeURIComponent(u)}&state=${d}&ui_locales=${e}&scope=profile%20openid%20email`,"_blank")}},56528:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(214494);const o=e=>n.Z.create("UserPasswordResource",e).callUpdate({showError:!1})},807998:(e,t,i)=>{i.d(t,{Z:()=>n});const n=["https://www.pinterest.info","https://www.pinterest.at","https://www.pinterest.com.au","https://www.pinterest.ca","https://www.pinterest.ch","https://www.pinterest.cl","https://www.pinterest.de","https://www.pinterest.dk","https://www.pinterest.es","https://www.pinterest.fr","https://www.pinterest.co.uk","https://www.pinterest.ie","https://www.pinterest.it","https://www.pinterest.jp","https://www.pinterest.co.kr","https://www.pinterest.com.mx","https://www.pinterest.nz","https://www.pinterest.se","https://www.pinterest.ph","https://www.pinterest.pt","https://www.pinterest.ru"]},711781:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{return JSON.parse(decodeURIComponent(atob((t=e.split(".")[1],(t||"").replace(/-/g,"+").replace(/_/g,"/"))).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")));var t}},467570:(e,t,i)=>{i.d(t,{$:()=>d,GH:()=>l,JF:()=>m,Jb:()=>p,MI:()=>g,sl:()=>u,we:()=>h});var n=i(816068),o=i(186656),s=i(713930),r=i(935879),a=i(867820);const l="274266067164",d=["public_profile","email","user_birthday","user_friends"],c=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],u=e=>{e&&(0,a.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,a.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:l,status:!0,xfbml:!0,version:"v2.7"})):e?(0,a.dy)({event:"global_object_not_found",provider:"facebook"}):(0,a.My)("pcons.non_autologin.fb.global_object_not_found")},h=(e,t)=>{t&&(0,a.dy)({event:"load_script_start",provider:"facebook"});return(0,s.Z)((0,r.Z)(e),"FACEBOOK").then((()=>u(t)))},p=()=>new Promise((e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)})),_=({userID:e,accessToken:t,data:{birthday:i,email:o,first_name:s,gender:r,last_name:a,picture:l}})=>({type:"facebook",facebook_id:e,facebook_token:t,birthday:i?(0,n.Z)(i):void 0,email:o,first_name:s,gender:r,image_url:l&&!l.data.is_silhouette?l.data.url:void 0,last_name:a});async function g(e){var t;const i=(null===(t=(await(0,o.Z)({url:"/v3/facebook/profile_data/",method:"POST",data:{access_token:e,pii_safe_birthday:!0,fields:c}})).resource_response)||void 0===t?void 0:t.data)||{};return(0,a.My)(i?"pcons.facebook_user.non_empty_user_data_returned":"pcons.facebook_user.empty_user_data_returned"),{access_token:e,birthday:i.birthday,email:i.email,first_name:i.first_name,gender:i.gender,id:i.id,last_name:i.last_name,picture:i.picture}}const m=()=>new Promise((e=>{window.FB.login(e,{scope:d.join(",")})})).then((e=>((e,t)=>new Promise(((i,n)=>{if("connected"!==e.status)return void n({status:e.status||"unknown"});const{userID:o,accessToken:s}=e.authResponse;g(s).then((e=>{i({creds:{facebook_id:o,facebook_token:s,facebook_autologin:(null==t?void 0:t.autologin)||!1},signupOptions:_({userID:o,accessToken:s,data:e})})}),n)})))(e)))},738192:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(883119),o=i(898781),s=i(349700),r=i(584595),a=i(785893);const l=({children:e,onClick:t})=>(0,a.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",children:(0,a.jsx)(n.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:e},"err_text")});function d({apiErrorCode:e,errorMessage:t,onClickPasswordReset:i}){const d=(0,o.ZP)(),c=(e=>{switch(e){case r.yV:case r.$j:return(0,s.nk)(d.bt("We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "Error message when user is soft banned", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("Reset your password", "Reset your password", "Link text for password reset", undefined, true)})});case r.iK:return(0,s.nk)(d.bt("Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}", "Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("set a password.", "set a password.", "Link text to set password for user with account with only google auth", undefined, true)})});case r.nY:return(0,s.nk)(d.bt("Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}", "Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("set a password.", "set a password.", "Link text to set password for user with account with only facebook auth", undefined, true)})});case r.nf:return(0,s.nk)(d.bt("Your account is connected to Apple. This option only works on the Pinterest iOS app. To log in to Pinterest here, you’ll need to {{ resetPasswordLink }}", "Your account is connected to Apple. This option works only on the Pinterest iOS app. To log into Pinterest here, you’ll need to {{ resetPasswordLink }}", "unauth.web.emailLogin", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("set a password.", "set a password.", "Link text to set password for user with account with only apple auth", undefined, true)})});case r.oP:return(0,s.nk)(d.bt("The password you entered is incorrect. Try again or {{ resetPasswordLink }}", "The password you entered is incorrect. Try again or {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,a.jsx)(l,{onClick:i,children:d.bt("Reset your password", "Reset your password", "Link text for password reset", undefined, true)})});default:return[t]}})(e);return(0,a.jsx)(n.xu,{"data-test-id":"touchableErrorMessage",children:c.map(((e,t)=>(0,a.jsx)(n.xv,{color:"error",inline:!0,size:"200",children:e},`err_message_${t}`)))})}var c=i(817656),u=i(867820);const h=[...r.ZP,c.Ej,r.oP,r.nf].filter((e=>e!==r.RL&&e!==r.an));function p({error:e,onClickPasswordReset:t,source:i}){var n;let o=e.api_error_code;(e.http_status||e.httpStatus)===c.Ej&&(o=c.Ej);const s=o&&h.includes(o)?(0,a.jsx)(d,{apiErrorCode:o,errorMessage:null!==(n=e.message)&&void 0!==n?n:"",onClickPasswordReset:t}):e.message;if(s)switch(o){case r.oP:case r.RL:return{passwordValidationError:s};case r.nY:return{facebookValidationError:s};case r.iK:return{googleValidationError:s};case r.hU:return{emailValidationError:s};case r._K:return{passwordValidationError:s};default:return{emailValidationError:s}}else(0,u.My)(`unauth.login.error.SERVER_ERROR.unknown.${String(o)}.${i}`);return null}},290148:(e,t,i)=>{i.d(t,{Ny:()=>u,ZP:()=>p,eD:()=>g,lp:()=>_});var n=i(78714),o=i(432300),s=i(957161),r=i(966113),a=i(867820),l=i(794230),d=i(704115),c=i(299899);const u=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class h{static defaultLoginRedirectUrl(){return window.location.pathname===r.lf||window.location.pathname===r.ZE||window.location.pathname.startsWith(r.rO)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(r.rO)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){const e=s.Z.getItem(c.kl);if(e&&e.indexOf("|")>-1){const t=e.split("|");return 3===t.length&&(new Date).getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){const e=s.Z.getItem(c.kl);let t=[];e&&(t=e.split("|"),3===t.length&&t.shift());const i=((new Date).getTime()/1e3).toString();t.push(i);const n=t.join("|");s.Z.setItem(c.kl,n)}static isFullyLoggedIn(e,t){return e&&t===o.Z.DEFAULT}static handleRedirect(e){if(!e){e="/";const t=(0,d.Z)();if(t){const i=t.next;i&&(e=i,delete t.next),e=(0,l.Z)(e,t)}}(0,n.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){s.Z.setItem(c.F6,Date.now()),!t&&e&&"/"!==e?h.handleRedirect(e):h.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){const t=window.navigator.credentials;if(t&&e.username_or_email)try{const i=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(i).then((()=>{(0,a.My)("navigatorCredentials.store.success")}))}catch(i){(0,a.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,i){(0,a.My)("multi_step_login"),h.storeLoginCredentialsToBrowser(e),i?i(e,t):(0,a.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}const p=h;function _(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":"other"}function g(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":_(e)}},884732:(e,t,i)=>{i.d(t,{M3:()=>d,PE:()=>r,Q:()=>c,lv:()=>a,r8:()=>s,rl:()=>o,yW:()=>l});var n=i(844974);const o=()=>{try{const e=(0,n.qn)("MULTIPLE_ACCOUNTS");return e?JSON.parse(e):Object.freeze({})}catch(e){return Object.freeze({})}},s=e=>(0,n.Nh)("MULTIPLE_ACCOUNTS",JSON.stringify(e)),r=()=>!!(0,n.qn)("MULTIPLE_ACCOUNTS"),a=()=>Object.keys(o()).length,l=()=>{try{const e=(0,n.qn)("MULTIPLE_ACCOUNTS_GROUP");return e?JSON.parse(e):null}catch(e){return null}},d=e=>(0,n.Nh)("MULTIPLE_ACCOUNTS_GROUP",JSON.stringify(e)),c=()=>({multipleAccountMap:o(),multipleAccountGroupId:l()})},383690:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(773285);const s=()=>{const e=(0,o.F)();return(0,n.useCallback)((()=>{e.flush()}),[e])}},129291:(e,t,i)=>{i.d(t,{MH:()=>l,ad:()=>a,iN:()=>d});var n=i(7789),o=i(584992);const{Provider:s,useHook:r}=(0,o.Z)({name:"board_picker",sampleRate:n.DQ?1:.1}),a=(e,t)=>{let i="unknown";null!=t&&t.includes("pin/")?i="PinCloseup":"/"===t?i="HomeFeed":"PinBookMarklet"===t&&(i="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",i,"STRING")},l=s,d=r},584992:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(425288),s=i(790348),r=i(198462),a=i(383434),l=i(543059),d=i(607150),c=i(638089),u=i(860273),h=i(453821),p=i(558775),_=i(505771),g=i(729524),m=i(169213),f=i(358864),x=i(985271);const b=(0,a.XV)("PwtStopwatch"),y=(e,t)=>{if(x.Z){if("start"===t.type&&!e.isTiming){const{name:i,startTime:n,navigationType:o}=t;return(0,s.A9)(`TIMING.${i}`),{isTiming:!0,name:i,isSampled:t.isSampled,startTime:"number"==typeof n?n:x.Z.now(),metricId:{type:"stopwatch",name:i,navigationType:o},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming){if(!t.bypassIsTimingCheck){const i=t.name||e.name;return b("ignoring action - stopwatch is not actively timing",t),(0,s.A9)(`WARN.${i}.noTiming.${t.type}`),e}b("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t)}if("annotate"===t.type){const i=x.Z.now();return b(`adding annotation {${t.label}: ${i}}`),{...e,annotations:e.annotations.concat([{label:t.label,timestamp:i}])}}if("binaryAnnotate"===t.type)return b(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type){const{value:i,type:n}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const o=e.binaryAnnotations[t.name].value||0;return b(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(o)}\n          operand: ${String(i)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:i?t.operation(o,i):o,type:n}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:i,type:n}}}}if("addSubspan"===t.type){b(`adding subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&b(`WARNING: adding duplicate subspan name {${t.name}}`);const i=t.id||(0,f.Z)();-1!==e.spans.findIndex((e=>e.id===i))&&b(`WARNING: adding duplicate subspan id {${t.name}: ${i}}`);let n=0;return t.startTime?n=t.startTime:e.startTime?n=e.startTime:b(`WARNING: adding subspan {${t.name}} without start time`),{...e,spans:[...e.spans,{name:t.name,id:i,startTime:n,endTime:t.endTime||1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations},parentId:t.parentId}]}}if("subspanStart"===t.type){var i;b(`starting subspan {${t.name}}`);-1!==e.spans.findIndex((e=>e.name===t.name))&&b(`WARNING: starting duplicate subspan name {${t.name}}`);const n=t.id||(0,f.Z)();-1!==e.spans.findIndex((e=>e.id===n))&&b(`WARNING: starting duplicate subspan id {${t.name}: ${n}}`);const o=t.parentName?null===(i=e.spans.find((e=>e.name===t.parentName)))||void 0===i?void 0:i.id:null;return{...e,spans:[...e.spans,{name:t.name,id:n,parentId:t.parentId||o,startTime:x.Z.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStop"===t.type){if(b(`stopping subspan {${t.name}}`),!t.id){e.spans.reduce(((e,i)=>(i.name===t.name&&e.push(i),e)),[]).length>1&&(0,s.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type})}const i=t.id?e.spans.findIndex((e=>e.id===t.id)):e.spans.findIndex((e=>e.name===t.name));return i>-1?(e.spans[i].endTime=x.Z.now(),t.annotations&&(e.spans[i].annotationMap={...e.spans[i].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[i].binaryAnnotationMap={...e.spans[i].binaryAnnotationMap,...t.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.reduce(((e,i)=>(i.name===t.currentName&&e.push(i),e)),[]).length>1&&(0,s.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});const i=e.spans.findIndex((e=>e.name===t.currentName));return i>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[...e.spanNameUpdates,{currentName:t.currentName,newName:t.newName}]:(b(`renaming subspan {${t.currentName}} to {${t.newName}}`),e.spans[i].name=t.newName):(0,s.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){const{startTime:i,metricId:n,pwtStaticContext:o,annotations:s,binaryAnnotations:r,isSampled:a,spans:m,traceId:y}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),a){const a=t.stopTime||x.Z.now(),v=[...m.map((t=>{t.endTime===1/0&&(t.endTime=a);const i=e.spanNameUpdates.findIndex((e=>t.name===e.currentName));return i>-1&&(b(`renaming subspan {${t.name}} to {${e.spanNameUpdates[i].newName}}`),t.name=e.spanNameUpdates[i].newName,e.spanNameUpdates=e.spanNameUpdates.filter((e=>e.newName!==t.name))),t}))];if(t.manualAndResourceSpans||0===m.length){const e=(0,f.Z)();v.push({name:"network_resources",id:e,startTime:i,endTime:a,annotationMap:{},binaryAnnotationMap:{},parentId:null},...(t.customStopwatchBuffer||[]).map((t=>(0,_.Z)((0,h.p)(t,[]),e))).filter(Boolean))}const P="initial_app_load"===n.navigationType&&(0,u.Z)(),w={type:"COMPLETE",traceId:y,startTime:i,endTime:a,spans:v,annotationMap:{...(0,g.Z)(s),...(0,d.jh)("browser_",P?(0,d.D3)(P):{}),...(0,d.jh)("mark_",(0,l.gQ)())},binaryAnnotationMap:(0,c.ng)({metricId:n,pwtStaticContext:o,binaryAnnotations:r,performanceResourceTimings:t.customStopwatchBuffer||[]})};(0,p.Z)({metricId:n,pwtStaticContext:o,result:w})}return{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,f.Z)(),spanNameUpdates:[]}}if("error"===t.type){const{error:i,stopwatchPerformanceObserver:n}=t;return i&&(0,s.H)(i),n&&n.disconnect(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,f.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:i,pwtStaticContext:n}=e,o=t.reason||"";return(0,p.Z)({metricId:i,pwtStaticContext:n,result:{type:"ABORT",reason:o}}),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,f.Z)(),spanNameUpdates:[]}}}return e},v=({name:e,sampleRate:t,navigationType:i,manualAndResourceSpans:o=!1})=>{const s=(0,r.N5)(),a=(0,n.useRef)([]),l=(0,n.useRef)(null),[d,c]=(0,n.useReducer)(y,{isTiming:!1,name:e,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,f.Z)(),spanNameUpdates:[]});return s?{isTiming:d.isTiming,start:n=>{if(window.PerformanceObserver){const e=1e3;a.current=[],l.current=(0,m.Z)({entryTypes:["resource"]},(t=>{a.current=a.current.concat(t.getEntries()),a.current.length>e&&(a.current=a.current.slice(-e))}))}const o={type:"start",startTime:n,name:e,navigationType:i,pwtStaticContext:s,isSampled:!t||Math.random()<t};return c(o)},stop:e=>c({type:"stop",stopTime:e,stopwatchPerformanceObserver:l.current,customStopwatchBuffer:a.current,manualAndResourceSpans:o}),error:e=>{c({type:"error",stopwatchPerformanceObserver:l.current,error:e})},abort:e=>c({type:"abort",stopwatchPerformanceObserver:l.current,customStopwatchBuffer:a.current,reason:e}),annotate:(e,t,i=!1)=>c({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:i}),binaryAnnotate:(e,t,i,n,o=!1)=>c({type:"binaryAnnotate",name:e,value:t,annotationType:i,parentId:n,bypassIsTimingCheck:o}),binaryAnnotateOperation:({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o=!1})=>c({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o}),addSubspan:({name:e,startTime:t,endTime:i,annotations:n={},binaryAnnotations:o={},parentId:s=null,id:r=null,bypassIsTimingCheck:a=!1})=>c({type:"addSubspan",name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a}),subspanStart:({name:e,annotations:t={},binaryAnnotations:i={},parentId:n=null,parentName:o=null,id:s=null,bypassIsTimingCheck:r=!1})=>c({type:"subspanStart",name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r}),subspanStop:({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s=!1})=>c({type:"subspanStop",name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s}),subspanUpdateName:({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n=!0})=>c({type:"subspanUpdateName",currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n}),getSpans:(e,t)=>d.spans.filter((i=>i[e]===t)),getTraceId:()=>d.traceId}:null};var P=i(785893);const w=({name:e,sampleRate:t,abortOnUnloadOrClientNavigation:i=!0,navigationType:a,manualAndResourceSpans:l=!1})=>{const{Provider:d,useMaybeHook:c}=(0,o.Z)(`Stopwatch_${e}`);return{Provider:function({children:o}){const c=v({name:e,sampleRate:t,navigationType:a,manualAndResourceSpans:l}),u=(0,r.fM)(),h=u?u.time:0,p=(0,n.useRef)(!1),_=null==c?void 0:c.isTiming,g=(0,n.useCallback)((t=>{p.current?(p.current=!1,null==c||c.abort(t)):(0,s.A9)(`WARN.${e}.noTiming.abort`)}),[c]),m=(0,n.useCallback)(((e,t)=>{null==c||c.annotate(e,t)}),[c]),f=(0,n.useCallback)(((e,t,i,n)=>{null==c||c.binaryAnnotate(e,t,i,n)}),[c]),x=(0,n.useCallback)((({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o})=>{null==c||c.binaryAnnotateOperation({name:e,binaryAnnotationValueAndType:t,operation:i,parentId:n,bypassIsTimingCheck:o})}),[c]),b=(0,n.useCallback)((({name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a})=>{null==c||c.addSubspan({name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:s,id:r,bypassIsTimingCheck:a})}),[c]),y=(0,n.useCallback)((({name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r})=>{null==c||c.subspanStart({name:e,annotations:t,binaryAnnotations:i,parentId:n,parentName:o,id:s,bypassIsTimingCheck:r})}),[c]),w=(0,n.useCallback)((({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s})=>{null==c||c.subspanStop({name:e,annotations:t,binaryAnnotations:i,id:n,parentId:o,bypassIsTimingCheck:s})}),[c]),I=(0,n.useCallback)((({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n})=>{null==c||c.subspanUpdateName({currentName:e,newName:t,bypassIsTimingCheck:i,updateWhenStopwatchCompletes:n})}),[c]),A=(0,n.useCallback)(((e,t)=>c?c.getSpans(e,t):[]),[c]),E=(0,n.useCallback)((()=>c?c.getTraceId():0),[c]),C=(0,n.useCallback)((t=>{p.current?(p.current=!1,null==c||c.error(t)):(0,s.A9)(`WARN.${e}.noTiming.error`)}),[c]),S=(0,n.useCallback)((e=>{p.current&&(null==c||c.abort("duplicated_init_stopwatch_action")),p.current=!0,null==c||c.start(e)}),[c]),j=(0,n.useCallback)((t=>{p.current?(p.current=!1,null==c||c.stop(t)):(0,s.A9)(`WARN.${e}.noTiming.stop`)}),[c]);(0,n.useEffect)((()=>()=>{i&&g("unloadOrClientNavigation")}),[h]);const T=(0,n.useMemo)((()=>({isTiming:_,abort:g,addAnnotation:m,addBinaryAnnotation:f,binaryAnnotationOperation:x,addSubspan:b,subspanStart:y,subspanStop:w,getSpans:A,getTraceId:E,updateSubspanName:I,stop:j,error:C,start:S})),[_,g,m,f,x,b,y,w,A,E,I,j,C,S]);return(0,P.jsx)(d,{value:T,children:o})},useHook:c}}},311560:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";default:return"OTHER"}}},143461:(e,t,i)=>{i.d(t,{D:()=>l,T:()=>a});var n=i(667294),o=i(874103),s=i(785893);const r=(0,n.createContext)({recaptchaV3Token:"",refreshToken:()=>{}});function a({children:e}){const[t,i]=(0,n.useState)(""),a=(0,n.useCallback)((()=>{(0,o.rY)((e=>i(e)),(e=>{}),o.sk)}),[]);(0,n.useEffect)((()=>{a();const e=setInterval(a,o.yc);return()=>{clearInterval(e)}}),[a]);const l=(0,n.useMemo)((()=>({recaptchaV3Token:t,refreshToken:a})),[t,a]);return(0,s.jsx)(r.Provider,{value:l,children:e})}const l=()=>(0,n.useContext)(r)},874103:(e,t,i)=>{i.d(t,{OA:()=>c,f$:()=>_,rY:()=>l,sk:()=>g,wQ:()=>u,xW:()=>h,yc:()=>d,ys:()=>p});var n=i(172071);const o="onloadRecaptchaJsCallback",s="6Ldx7ZkUAAAAAF3SZ05DRL2Kdh911tCa3qFP0-0r",r="recaptcha-enterprise-src",a=(e,t,i)=>{n.Z.increment("recaptcha_v3.request_token.attempt",.1,{action:i}),void 0===window.grecaptcha||void 0===window.grecaptcha.enterprise?(t(new Error("Error loading reCAPTCHA Enterprise")),n.Z.increment("recaptcha_v3.request_token.js_loading_error",.1,{action:i})):window.grecaptcha.enterprise.ready((()=>{try{window.grecaptcha.enterprise.execute(s,{action:i}).then(e).catch(t)}catch(o){n.Z.increment("recaptcha_v3.request_token.exec_error",.1,{action:i}),t(o)}}))},l=(e,t,i)=>{if(window[o]=()=>a(e,t,i),document.getElementById(r))a(e,t,i);else{const e=document.createElement("script");e.id=r,e.src=`https://www.recaptcha.net/recaptcha/enterprise.js?onload=${o}&render=${s}`;const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}},d=105e3,c=8e3,u="mweb_auth",h="mweb_login",p="mweb_signup",_="web_auth",g="web_unauth"},561195:(e,t,i)=>{i.d(t,{A:()=>r,Z:()=>a});var n=i(667294),o=i(883119),s=i(785893);const r=({fill:e,width:t,color:i})=>{const r="half"===e?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.xu,{position:"absolute",children:(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,s.jsx)(o.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock","data-test-id":`rating-star-${e}`,children:r})};function a({max_rating:e,rating:t,width:i,color:n}){const a=[],l=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(e)||5,parseFloat(t)||0);if(Number.isNaN(l))return null;const d=Math.floor(l),c=l-d;return[...Array(d).keys()].forEach((e=>a.push((0,s.jsx)(r,{color:n,fill:"full",width:i},e)))),c>=.75?a.push((0,s.jsx)(r,{color:n,fill:"full",width:i},a.length)):c>=.25&&a.push((0,s.jsx)(r,{color:n,fill:"half",width:i},a.length)),[...Array(5-a.length).keys()].forEach((()=>a.push((0,s.jsx)(r,{color:n,fill:"empty",width:i},a.length)))),(0,s.jsx)(o.xu,{position:"relative",display:"inlineBlock",children:a})}},780280:(e,t,i)=>{i.d(t,{B:()=>u,LC:()=>d,P2:()=>l,fH:()=>c,gf:()=>h});var n=i(667294),o=i(620707),s=i(608832),r=i(785893);const a=(0,n.createContext)();function l({children:e,value:t}){const[i,l]=(0,n.useState)(t),d=(0,n.useMemo)((()=>({requestContext:i,updateRequestContext:e=>{const t={...i,...e};(0,o.Ak)(i,e)||l(t),(0,s.J)(t)}})),[i]);return(0,r.jsx)(a.Provider,{value:d,children:e})}const d=({children:e})=>{const t=(0,n.useContext)(a);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)},c=({children:e})=>{const t=(0,n.useContext)(a);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)};function u(){const e=(0,n.useContext)(a);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e.requestContext}function h(){const e=(0,n.useContext)(a);if(!e)throw new Error("useUpdateRequestContext must be used within a RequestContextProvider");return e.updateRequestContext}},608832:(e,t,i)=>{let n;function o(e){n=e}function s(){return n}i.d(t,{J:()=>o,l:()=>s})},505920:(e,t,i)=>{i.d(t,{UZ:()=>u,Z8:()=>h,my:()=>p});var n=i(667294),o=(i(702664),i(214494)),s=i(425288),r=i(785893);function a(e,t,i){var n;const o=[...null!==(n=t[e][i.payload.name])&&void 0!==n?n:[],i.payload.handler],s={...t};return s[e]={...t[e],[i.payload.name]:o},s}function l(e,t,i){if(!t[e][i.payload.name])return t;const n=t[e][i.payload.name].filter((e=>e!==i.payload.handler)),o={...t};return o[e]={...t[e],[i.payload.name]:n},o}const{Provider:d,useHook:c}=(0,s.Z)("ResourceContext");function u({children:e}){const[{listeners:t,moreListeners:i},s]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"addListener":return a("listeners",e,t);case"addMoreListener":return a("moreListeners",e,t);case"removeListener":return l("listeners",e,t);case"removeMoreListener":return l("moreListeners",e,t);default:return e}}),{listeners:{},moreListeners:{}});o.Z.fetchCompleteCallback=({resource:e,options:i,response:n,normalizedResponse:o,refresh:s,resourceSchema:r})=>{t[e]&&t[e].forEach((t=>t({isRefresh:s,normalizedResponse:o,options:i,schema:r,resource:e,response:n})))},o.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:n,normalizedResponse:o,refresh:s,resourceSchema:r})=>{i[e]&&i[e].forEach((i=>i({isRefresh:s,normalizedResponse:o,options:t,schema:r,resource:e,response:n})))};const c=(0,n.useMemo)((()=>({listenerDispatch:s})),[]);return(0,r.jsx)(d,{value:c,children:e})}function h(e,t){const{listenerDispatch:i}=c();(0,n.useEffect)((()=>(i({type:"addListener",payload:{name:e,handler:t}}),()=>{i({type:"removeListener",payload:{name:e,handler:t}})})))}function p(e,t){const{listenerDispatch:i}=c();(0,n.useEffect)((()=>(i({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{i({type:"removeMoreListener",payload:{name:e,handler:t}})})))}},784590:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(702664),s=i(616550),r=i(886858),a=i(780280),l=i(248327),d=i(718368);const c={},u=({httpStatus:e})=>!e||e>=500;function h(e){const{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:h,name:p,noCache:_,options:g,schema:m}=null!=e?e:{name:"DisabledResource",options:null},f=!e,x=(0,o.useDispatch)(),b=(0,r.Z)(g),y=(0,n.useRef)(null),v=(0,n.useRef)(),P=(0,s.useHistory)(),w=P&&"POP"!==P.action,I=e=>(e[p]||c)[b]||c,A=(0,o.useSelector)((({resources:e})=>I(e).nextBookmark)),E=(0,o.useSelector)((({resources:e})=>I(e).data)),C=(0,o.useSelector)((({resources:e})=>I(e).auxData)),S=(0,o.useSelector)((({resources:e})=>I(e).error)),j=(0,o.useSelector)((({resources:e})=>Boolean(I(e).fetching))),T=Boolean(S)||void 0!==E,D=T&&!j&&A===d.q,k=Boolean(T&&t&&w&&!f),[z,O]=(0,n.useState)(k),R=(0,n.useCallback)((e=>{y.current=x((0,l.U)(p,{options:g,schema:m,bookmark:e,headers:h}))}),[x,p,b,m,h]),L=()=>{y.current=x((0,l.b)(p,{options:g,schema:m,headers:h}))},{isBot:M}=(0,a.B)(),B=()=>{if(!f&&v.current!==b){const e=void 0===v.current;v.current=b,!T&&!j||e&&S&&u(S)?R():(!M&&_||k)&&L()}};(0,n.useEffect)((()=>{i||B()})),i&&B();const N=(0,n.useCallback)((()=>{f||(L(),O(!0))}),[f,l.b,p,b,h,O]),Z=(0,n.useCallback)((()=>{!A||D||j||f||R(A)}),[f,R,A,D,j]);if(y.current)if(T&&!j)y.current=null;else if(i)throw y.current;const F=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:Z,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:N}),U={auxData:C,data:E,error:S,fetchMore:Z,isAtEnd:D,isFetching:j,isLoaded:T,isRefreshing:z,nextBookmark:A,refresh:N};return(0,o.shallowEqual)(U,F.current)||(!z||!F.current.data&&k||(0,o.shallowEqual)(U.data,F.current.data)||(U.isRefreshing=!1,O(!1)),F.current=U),F.current}},418614:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(784590),o=i(19121);var s=i(616550),r=i(780280),a=i(50286),l=i(826067);function d({checkExperiments:e,disableFetch:t,viewer:i}){var n;const o=(0,s.useLocation)(),d=(0,s.useRouteMatch)(),c=(0,r.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:i,search:n},inviteCode:o,match:{params:s,path:r},viewer:a}){return{advertiser:e,deviceType:t,routeData:{inviteCode:o,matchPath:r,params:s,parsedSearch:(0,l.mB)(n),pathname:i,search:n},user:{country:a.country||void 0,id:a.id||void 0,isAuth:a.isAuth,isEmployee:!!a.isEmployee||!1,isPartner:!!a.isPartner||!1,username:a.username||void 0,firstHomeFeedRequestAfterNux:a.firstHomeFeedRequestAfterNux||void 0}}}({advertiser:c.advertiser,deviceType:(0,a.Mq)(c),location:o,match:d,viewer:i,inviteCode:null!==(n=c.inviteCode)&&void 0!==n?n:""}),h=!!t&&t(u),p=!(!h&&e)||e(c.experimentsClient);return{args:u,fetchDisabled:h||!p}}function c({getOptions:e,checkExperiments:t,disableFetch:i,...s}){const r=function(){const e=(0,o.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0,firstHomeFeedRequestAfterNux:e.firstHomeFeedRequestAfterNux||void 0}}(),{args:a,fetchDisabled:l}=d({checkExperiments:t,disableFetch:i,viewer:r}),c=e?e(a):void 0;return(0,n.Z)(l?null:{options:c,...s})}},995228:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(773285),s=i(780280),r=i(785893);function a({children:e,fallback:t}){const i=t||null,{isAuthenticated:a}=(0,s.B)(),{checkExperiment:l}=(0,o.F)();return(0,r.jsx)(n.Suspense,{fallback:i,children:e})}},947599:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(995228).Z},251183:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(77601);function o({scrollPosition:e,containerSize:t,contentSize:i,intendedDistance:n,extendToEdgeDistance:o=0}){const s=i-t,r=s-e,a=-e;let l=n;return l=Math.min(l,r),l=Math.max(l,a),n>0&&s-(e+l)<=o?l=s-e:n<0&&e+l<=o&&(l=-e),l}const s={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},r={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:(4-2*e)*e-1};function a(e,t,i,a={}){const l={...s,...a},{scrollLeft:d,scrollTop:c,scrollWidth:u,scrollHeight:h,clientWidth:p,clientHeight:_}=e,g=o({scrollPosition:d,containerSize:p,contentSize:u,intendedDistance:t,extendToEdgeDistance:l.extendToEdgeDistanceX}),m=o({scrollPosition:c,containerSize:_,contentSize:h,intendedDistance:i,extendToEdgeDistance:l.extendToEdgeDistanceY}),f=Math.abs(Math.floor(g/l.scrollSpeedPxPerMs)),x=Math.abs(Math.floor(m/l.scrollSpeedPxPerMs));let b=Math.max(f,x);l.minScrollDuration&&(b=Math.max(b,l.minScrollDuration));const y=r[l.easingFunction]||r["ease-in-out"];return(0,n.Z)({window,duration:b,run:t=>{e.scrollLeft=d+g*y(t),e.scrollTop=c+m*y(t),1===t&&l.onAnimationComplete&&setTimeout(l.onAnimationComplete,0)}})}},730447:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(254469);function s({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:i,resourceName:s,resourceOptions:r,value:a}){const l=(0,o.Z)({allowSearchOnMount:e,resourceName:s,resourceOptions:r,value:a});return(0,n.useEffect)((()=>{null!=l&&l.length&&i(l)}),[l]),t||null}},984206:(e,t,i)=>{i.d(t,{Z:()=>n});const n=2},254469:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(214494);const s=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let i=this._uidToData[e];i||(i=new s(e,t),this._uidToData[e]=i,this._numItems+=1),this._moveToFront(i),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const a=r,l=5,d=0;function c({resourceName:e,resourceOptions:t}){const i={...t,count:"count"in t?t.count:l},n=o.Z.create(e,i),s=new a,r=()=>{n.abort()};return async function(e,t){const i=s.get(`${t}-${e}`);if(i){const{items:t}=i;if(t&&t.length){r();const{hint:n}=i;return{hint:n,items:t,term:e}}}return e.length>=d?(async(e,t)=>{var i;if(n.isCalling()){var o,a;const i=null===(o=n.options)||void 0===o?void 0:o.term,s=null===(a=n.options)||void 0===a?void 0:a.pin_scope;if(e===i&&t===s)return;r()}const{bookmarks:l,...d}=n.options||{};n.options={...d,term:e,pin_scope:t};const c=null===(i=(await n.callGet({showError:!1})).resource_response)||void 0===i?void 0:i.data,u=null==c?void 0:c.items,h=(null==c?void 0:c.hint)||{},p={hint:h,items:u};return s.set(`${t}-${e}`,p),{term:e,items:u,hint:h}})(e,t):{hint:{},items:[],term:e}}}function u({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:i={},value:o}){const s=(0,n.useRef)(!1),r=(0,n.useRef)({}),[a,l]=(0,n.useState)([]),d=function({resourceName:e,resourceOptions:t}){const i=(0,n.useRef)();return i.current||(i.current=c({resourceName:e,resourceOptions:t})),i.current}({resourceName:t,resourceOptions:i}),u=i.pin_scope||"pins",h=`${u}-${o}`;return(0,n.useEffect)((()=>{(async()=>{if(null!=o&&(e||s.current))if(h in r.current)l(r.current[h]);else try{const e=await d(o,u);if(e){const{items:t}=e;r.current[h]=t,l(t)}}catch(t){if("Resource call aborted"===t)return;throw t}s.current||(s.current=!0)})()}),[o,u,h]),a}},80816:(e,t,i)=>{i.d(t,{i:()=>n});const n={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",UNKNOWN:"unknown"}},835209:(e,t,i)=>{function n({richPinData:e={}}){return((null==e?void 0:e.products)||[])[0]}i.d(t,{Z:()=>n})},53325:(e,t,i)=>{i.d(t,{$O:()=>a,GZ:()=>d,OE:()=>c,Xv:()=>l,Z0:()=>n,_z:()=>s,fM:()=>r,qA:()=>o,zX:()=>u});const n=40,o=4,s=106,r=133,a=.1,l=10,d=246,c=197,u=236},734765:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(50286),o=i(705064);function s(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"pintergration":return 10;case"creators":return 11;default:return"phone"===e||"tablet"===e?1:0}}({deviceType:(0,n.ZP)(),site:(0,o.uo)()})}},31149:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#EFEFEF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1106 19.6408C18.2759 19.551 18.4653 19.5 18.6667 19.5H37.3333C37.5535 19.5 37.7594 19.561 37.9351 19.667C37.9351 19.667 37.9352 19.667 37.9352 19.667L28.7395 27.2024C28.3095 27.5547 27.6905 27.5547 27.2605 27.2024L18.0648 19.667C18.0799 19.6579 18.0951 19.6492 18.1106 19.6408ZM14 20.8611V20.6667C14 18.0893 16.0893 16 18.6667 16H37.3333C39.9107 16 42 18.0893 42 20.6667V20.8611V34.6667C42 37.244 39.9107 39.3333 37.3333 39.3333H18.6667C16.0893 39.3333 14 37.244 14 34.6667V20.8611ZM38.5 23.7292V34.6667C38.5 35.311 37.9777 35.8333 37.3333 35.8333H18.6667C18.0223 35.8333 17.5 35.311 17.5 34.6667V23.7292L25.0422 29.9095C26.7622 31.319 29.2378 31.319 30.9578 29.9096L38.5 23.7292Z",fill:"black"})]})}},659522:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,n.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]})}},331744:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,n.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]})}},757146:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,n.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649)"}),(0,n.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"paint0_radial_3730_649",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.16 43.826) scale(34.8672)",children:[(0,n.jsx)("stop",{stopColor:"#09F"}),(0,n.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,n.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]})}},464240:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#1DA1F2"}),(0,n.jsx)("path",{d:"M24.34 42c11.37 0 17.591-9.429 17.591-17.591 0-.265 0-.53-.012-.796a12.596 12.596 0 0 0 3.087-3.207c-1.11.494-2.303.82-3.557.976a6.22 6.22 0 0 0 2.725-3.424 12.299 12.299 0 0 1-3.93 1.495 6.17 6.17 0 0 0-4.51-1.953 6.19 6.19 0 0 0-6.186 6.185c0 .483.06.953.157 1.411-5.136-.253-9.694-2.725-12.744-6.463a6.184 6.184 0 0 0-.832 3.111 6.2 6.2 0 0 0 2.749 5.148 6.254 6.254 0 0 1-2.797-.771v.084a6.196 6.196 0 0 0 4.955 6.065 6.028 6.028 0 0 1-1.628.217c-.397 0-.783-.036-1.157-.109a6.182 6.182 0 0 0 5.775 4.293 12.4 12.4 0 0 1-7.68 2.652c-.494 0-.989-.024-1.471-.084A17.587 17.587 0 0 0 24.34 42Z",fill:"#fff"})]})}},22641:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#25D366"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff"})]})}},619277:(e,t,i)=>{i.d(t,{o$:()=>o,ty:()=>s,vE:()=>r});var n=i(425288);const{Provider:o,MaybeConsumer:s,useMaybeHook:r}=(0,n.Z)("inviteContext")},867060:(e,t,i)=>{i.d(t,{LO:()=>s,Pu:()=>r,cc:()=>n,dB:()=>o,yF:()=>a});const n={10:13098,11:13099,6:13100,5:13101,14:13102,12:13103,15:13104,8:13105,4:13106,1:13107,3:13107,18:13108,19:13109,20:13110,21:13111,22:13112,23:13113,26:13114,27:13115,29:13116,9:13286},o={10:13415,11:13416,6:13417,5:13418,14:13419,12:13420,15:13421,8:13422,4:13423,1:13424,3:13424,18:13425,19:13426,20:13427,21:13428,22:13429,23:13430,26:13431,27:13432,29:13433,9:13434},s={10:13436,11:13437,6:13438,5:13439,14:13440,12:13441,15:13442,8:13443,4:13444,1:13445,3:13445,18:13446,19:13447,20:13448,21:13449,22:13450,23:13451,26:13452,27:13453,29:13454,9:13455},r={10:13457,11:13458,6:13459,5:13460,14:13461,12:13462,15:13463,8:13464,4:13465,1:13466,3:13466,18:13467,19:13468,20:13469,21:13470,22:13471,23:13472,26:13473,27:13474,29:13475,9:13476},a={pin:1,board:2,did_it:6,pinner:3,user:3,today_article:8}},223815:(e,t,i)=>{i.d(t,{U:()=>r,Z:()=>a});var n=i(755742),o=i(785893);const s=()=>{},r=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function a({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:a,children:l}){const d=e=>function(e,t){t&&e.keyCode===n.Z.ESCAPE||r(e)}(e,t);return(0,o.jsx)("div",{onAbort:r,onAnimationEnd:r,onAnimationIteration:r,onAnimationStart:r,onBlur:s,onCanPlay:i?s:r,onCanPlayThrough:r,onChange:r,onClick:e?s:r,onCompositionEnd:r,onCompositionStart:r,onCompositionUpdate:r,onContextMenu:r,onCopy:r,onCut:r,onDoubleClick:r,onDurationChange:r,onEmptied:r,onEncrypted:r,onEnded:r,onError:r,onFocus:s,onInput:r,onInvalid:r,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:r,onLoadedData:r,onLoadedMetadata:r,onLoadStart:r,onMouseDown:r,onMouseEnter:r,onMouseLeave:r,onMouseMove:e?s:r,onMouseOut:r,onMouseOver:r,onMouseUp:e?s:r,onPaste:r,onPause:r,onPlay:r,onPlaying:r,onProgress:r,onRateChange:r,onScroll:a?s:r,onSeeked:r,onSeeking:r,onSelect:r,onStalled:r,onSubmit:r,onSuspend:r,onTimeUpdate:r,onTouchCancel:r,onTouchEnd:e?s:r,onTouchMove:e?s:r,onTouchStart:e?s:r,onTransitionEnd:r,onVolumeChange:r,onWaiting:r,onWheel:r,children:l})}},858416:(e,t,i)=>{i.d(t,{Wr:()=>h,Hx:()=>_,RC:()=>p});var n=i(667294),o=i(425288);const s="";var r=i(924687),a=i(311541),l=i(785893);const d=()=>Promise.resolve().then(i.bind(i,924687)),{Provider:c,useHook:u}=(0,o.Z)("IdeaPinVideoPlayer");function h({children:e}){const[t,i]=(0,a.Z)(d,r.initialState),o=(0,n.useMemo)((()=>({dispatch:i,ideaPinVideoPlayerControls:t})),[i,t]);return(0,l.jsx)(c,{value:o,children:e})}function p(){const{dispatch:e}=u();return(0,n.useMemo)((()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||s}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||s}})},updateSeekingIdeaPin:t=>{e(t?{type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t}}:{type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}})),[e])}function _(){const{ideaPinVideoPlayerControls:e}=u();return e}},924687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o,initialState:()=>n});const n={seekTime:void 0,seekTimes:{},isSeekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function o(e=n,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime},seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{},seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,isSeekingIdeaPin:t.payload.isSeekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},224496:(e,t,i)=>{i.d(t,{Cc:()=>h,Gf:()=>m,LX:()=>o,Lc:()=>x,Ls:()=>p,Rf:()=>l,YL:()=>a,ap:()=>s,h8:()=>c,jH:()=>f,pE:()=>d,s5:()=>g,tQ:()=>u,yR:()=>r});var n=i(883119);const o={w:9,h:16},s=o.w/o.h,r=8,a=10,l=5e3;function d(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}const c={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},u=[c.IMAGE,c.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},p=new n.Ry(1),_=new n.Ry(5),g=new n.H3([_]),m=new n.H3([g]),f=new n.Ry(1e3),x=e=>{const t=Math.floor(e||0),i=Math.floor(t/60),n=t-60*i;return`${i<10?`${i}`:i}:${n<10?`0${n}`:n}`}},458451:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>Array.from(e)[0].toUpperCase()+Array.from(e).slice(1).join("")},985913:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(858142);const o=/\{\{\s*(\w+)\s*\}\}/g,s=(e,t)=>(0,n.Z)(o,e,t)},858791:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},936776:(e,t,i)=>{i.d(t,{Z:()=>o});const n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=e=>n.test(e)},858142:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>t?t.replace(e,((e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:"")):""},66699:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(985913),o=i(858791);const s=(e,t)=>{const i={};return Object.keys(t).forEach((e=>{i[e]=t[e]?(0,o.Z)(t[e].toString()):""})),(0,n.Z)(e,i)}},883561:(e,t,i)=>{i.d(t,{ZP:()=>r});const n=80,o="…",s=!1;function r(e,t=n,i=o,r=s){let a;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||r)a=e.substring(0,t);else{const i=e.lastIndexOf(" ",t);a=e.substring(0,i)}return a=a.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),a+i}},70061:(e,t,i)=>{function n(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}i.d(t,{Z:()=>n})},784641:(e,t,i)=>{i.d(t,{E5:()=>d,T7:()=>s,Y_:()=>c,bl:()=>a,d9:()=>h,nx:()=>u,xt:()=>l});i(883119);var n=i(780280),o=i(19121);function s(e,t,i,n){const o=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),s=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(i);return`/today/${o}/${encodeURIComponent(s)}/${n}/`}const r={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]};function a(){var e;const t=(0,n.B)(),i=(0,o.Z)(),s=i.isAuth?i.country:t.country,a=t.locale.substring(0,2);return null===(e=r[a])||void 0===e?void 0:e.includes(s)}const l=(e,t,i)=>e||(t||i||""),d=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),c=e=>"todayarticle"===e.type,u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),h=e=>{var t,i;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(i=e.width)&&void 0!==i?i:1)}},482981:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784641);function o(e){const{article_creator_user:t,display_type:i,feed_source:o,header_pin_id:s,id:r,is_product_pin_feed:a,title:l,video_pin:d}=e;switch(i){case 0:case 1:return l?(0,n.T7)(o,null!=a&&a,l,r):"";case 8:return null!=t&&t.username?`/${encodeURIComponent(t.username)}/`:"";case 3:case 6:return s?`/pin/${s}/`:"";case 2:return null!=d&&d.id?`/pin/${d.id}/`:"";default:return""}}},52022:(e,t,i)=>{i.d(t,{S:()=>a,Z:()=>l});var n=i(667294),o=i(616550),s=i(53987),r=i(867820);const a=e=>(0,s.L6)(e)?"pin":(0,s.am)(e)?"board":(0,s.Xn)(e)?"login":(0,s.C$)(e)?"home":(0,s.cD)(e)?"profile":(0,s.dr)(e)?"ideas":(0,s.gT)(e)?"ideas-root":(0,s.tZ)(e)?"videos":(0,s.Q0)(e)?"videos-category":(0,s.$Y)(e)?"article":(0,s.E0)(e)?"shopping-spotlight":(0,s.Zz)(e)?"today":(0,s.j8)(e)?"unauth-profile":(0,s.f1)(e)?"shopping-root":(0,s.OX)(e)?"shopping-category":"other";function l(){const e=(0,o.useLocation)();return(0,n.useCallback)((({action:t,item:i,within:n})=>{const o=a(e);(0,r.My)(`logged_out_product.interaction.${o}.${t}`,{item:i||"none",within:n||"none"})}),[e])}},207112:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),s=i(785893);class r extends n.Component{constructor(e){var t,i,o;super(e),o={manualTruncate:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,this.ref=(0,n.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:t={}}=this.props,n=this.ref&&this.ref.current;if(!n)return;const o=void 0===n.textContent?"innerText":"textContent",s=n[o];("boolean"!=typeof t.spaces||t.spaces?s.split(" "):s).length<2?this.setState({manualTruncate:!0}):i.e(14118).then(i.bind(i,448433)).then((({default:i})=>{i(n,e,t)}))}render(){const{maxWidthPx:e,maxHeightPx:t,inline:i=!1}=this.props,{manualTruncate:n}=this.state,r={maxWidth:e,maxHeight:t},a=i?{display:"inline",...r}:{...r};return n?(0,s.jsx)(o.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:a},ref:this.ref,"data-test-id":"truncater",children:this.props.children}):(0,s.jsx)(o.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:a},"data-test-id":"truncater",children:this.props.children})}}const a=r},6663:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(883119),s=i(701500),r=i(898781),a=i(391254),l=i(785893);function d({color:e,completeButtonText:t,completeUrl:i,dismissButtonText:d,experienceId:c,external:u,message:h,onComplete:p,onDismiss:_}){const g=(0,r.ZP)(),m=(0,n.useRef)(null),f=({event:e})=>{p&&p(e)},x=({event:e})=>{_&&_(e)},b=h&&!t,y=500735===c,v=t&&(!i||y)&&(0,l.jsx)(o.zx,{color:"white",onClick:f,text:t}),P=t&&i&&(0,l.jsx)(s.Z,{anchor:".HomeButton2",anchorElementRef:m.current,containerBoxConfig:{display:"flex",height:"100%"},children:(0,l.jsx)(o.zx,{accessibilityLabel:t,ref:m,role:"link",href:i,onClick:({event:e})=>f({event:e}),rel:u?"nofollow":"none",size:"md",color:"white",text:t},"naglink")}),w=d&&_&&(0,l.jsx)(o.xu,{mdPaddingX:2,children:(0,l.jsx)(o.zx,{color:e&&"default"!==e?"white":"gray",onClick:x,text:d})}),I=b&&!y&&_&&!d&&(0,l.jsx)(o.hU,{accessibilityLabel:g.bt("Close", "Close", "accessibility close label", undefined, true),bgColor:"lightGray",onClick:x,icon:"cancel",iconColor:"gray",size:"md"});return(0,l.jsxs)(o.xu,{display:"flex",direction:"column",smDirection:"row",color:null!=e?e:"dark",paddingY:3,paddingX:6,alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(o.xu,{column:12,smColumn:b?11:8,children:(0,l.jsxs)(o.xv,{color:"inverse",weight:y?"normal":"bold",children:[(0,l.jsx)(a.Z,{unsafeCSS:".Banner--message a { color: #fff; text-decoration: underline; }"}),(0,l.jsx)("div",{className:"Banner--message",children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})]})}),(0,l.jsxs)(o.kC,{alignItems:"center",justifyContent:"end",children:[w,v||P,I]})]})}},948618:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s({ariaHidden:e=!1,color:t="darkGray",size:i}){return(0,o.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,o.jsx)(n.xv,{color:t,inline:!0,size:null!=i?i:"200",children:"·"})})}},938999:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(785893);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r extends n.Component{constructor(...e){super(...e),s(this,"handleKeyPress",(e=>{const{onClick:t}=this.props;!t||32!==e.charCode&&13!==e.charCode||(e.preventDefault(),t())}))}render(){const{selected:e,rounded:t,color:i,onClick:n,children:s,style:r}=this.props,a={cursor:n?"pointer":"default",borderRadius:t?"8px":0,boxShadow:e?`0 0 0 2px ${i}`:"none",outline:"none",...r};return(0,o.jsx)("div",{role:"button",onClick:n,onKeyPress:this.handleKeyPress,tabIndex:"0",style:a,children:s})}}s(r,"defaultProps",{selected:!1,rounded:!0,color:"#e60023"})},343341:(e,t,i)=>{i.d(t,{F9:()=>s,Zo:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("toastManagerContext")},925797:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(883119),o=i(237056),s=i(898781),r=i(561195),a=i(784590),l=i(785893);const d=20,c=12,u=1,h="M21,17.6119404 L21,9.15332448 C21,7.0136795 20.7772185,6.23779253 20.3588815,5.45557032 C19.9405445,4.67334809 19.3266519,4.05945552 18.5444297,3.64111848 C17.7622075,3.22278146 16.9863205,3 14.8466755,3 L6.3880595,3 C6.46224202,2.80834445 6.54669936,2.63211874 6.64111848,2.45557032 C7.05945552,1.67334809 7.67334809,1.05945552 8.45557032,0.64111848 C9.23779253,0.222781464 10.0136795,0 12.1533245,0 L17.8466755,0 C19.9863205,0 20.7622075,0.222781464 21.5444297,0.64111848 C22.3266519,1.05945552 22.9405445,1.67334809 23.3588815,2.45557032 C23.7772185,3.23779253 24,4.0136795 24,6.15332448 L24,11.8466755 C24,13.9863205 23.7772185,14.7622075 23.3588815,15.5444297 C22.9405445,16.3266519 22.3266519,16.9405445 21.5444297,17.3588815 C21.3678813,17.4533006 21.1916556,17.5377581 21,17.6119404 Z M6.15332448,6 L11.8466755,6 C13.9863205,6 14.7622075,6.22278146 15.5444297,6.64111848 C16.3266519,7.05945552 16.9405445,7.67334809 17.3588815,8.45557032 C17.7772185,9.23779253 18,10.0136795 18,12.1533245 L18,17.8466755 C18,19.9863204 17.7772185,20.7622075 17.3588815,21.5444297 C16.9405445,22.3266518 16.3266519,22.9405445 15.5444297,23.3588815 C14.7622075,23.7772186 13.9863205,24 11.8466755,24 L6.15332448,24 C4.0136795,24 3.23779253,23.7772186 2.45557032,23.3588815 C1.67334809,22.9405445 1.05945551,22.3266518 0.64111849,21.5444297 C0.222781467,20.7622075 0,19.9863204 0,17.8466755 L0,12.1533245 C0,10.0136795 0.222781467,9.23779253 0.64111849,8.45557032 C1.05945551,7.67334809 1.67334809,7.05945552 2.45557032,6.64111848 C3.23779253,6.22278146 4.0136795,6 6.15332448,6 Z";function p({pinId:e}){const t=(0,s.ZP)(),i=(0,o.Z)(),{data:r}=(0,a.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed"}}),p=r&&r.story_pin_data?r.story_pin_data.page_count:null;return(0,l.jsxs)(n.kC,{alignItems:"center",height:d,justifyContent:"start",children:[(0,l.jsx)(n.JO,{dangerouslySetSvgPath:{__path:h},accessibilityLabel:i?t.bt("Pin icon", "Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel.sce", undefined, true):t.bt("Idea Pin Icon", "Idea Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel", undefined, true),size:c,color:"default"}),p&&(0,l.jsx)(n.xu,{marginStart:u,children:(0,l.jsx)(n.xv,{inline:!0,size:"100",weight:"bold",children:p})})]})}function _({color:e="#333",height:t}){const i=14*t/10;return(0,l.jsx)("svg",{width:i,height:t,viewBox:"3 3 18 18",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{fill:e,d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z"})})}const g={__path:"M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},m=({icon:e,i18n:t,ideaPinRenamingEnabled:i})=>{switch(e){case"arrow-up-right":return t.bt("Promoted Pin", "Promoted Pin", "Icon indicating this Pin is promoted", undefined, true);case"play":return t.bt("Video Pin", "Video Pin", "Icon indicating this Pin is a video", undefined, true);case"gif":return t.bt("GIF Pin", "GIF Pin", "Icon indicating this Pin is a GIF", undefined, true);case"tag":return t.bt("Product Pin", "Product Pin", "Icon indicating this Pin is a product", undefined, true);case"star":return t.bt("Recipe Pin", "Recipe Pin", "Icon indicating this Pin is a recipe", undefined, true);case"story-pin":return i?t.bt("Pin", "Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel.sce", undefined, true):t.bt("Idea Pin", "Idea Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel", undefined, true);case"collage":return t.bt("Collage Pin", "Collage Pin", "Icon indicating this Pin is a collage", undefined, true);default:return""}};function f({max_rating:e,icon:t,text:i,rating:a,pinId:d}){const c=(0,s.ZP)(),u=(0,o.Z)();let h;if(t)switch(t){case"star":h=(0,l.jsx)(r.Z,{rating:a||"",max_rating:e,width:10});break;case"gif":h=(0,l.jsx)(_,{height:10,color:"#333"});break;case"story-pin":h=(0,l.jsx)(p,{pinId:d||""});break;default:h=(0,l.jsx)(n.xu,{display:"flex",alignItems:"center",marginEnd:1,children:(0,l.jsx)(n.JO,{dangerouslySetSvgPath:"collage"===t?g:void 0,icon:"collage"===t?void 0:t,accessibilityLabel:m({icon:t,i18n:c,ideaPinRenamingEnabled:u}),color:"default",size:10,inline:!0})})}return(0,l.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[h,i&&(0,l.jsx)(n.xu,{marginStart:1,children:(0,l.jsx)(n.xv,{inline:!0,size:"200",children:i.trim().substring(0,25)})})]})}},123906:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{const i=new URL(e,"https://pinterest.com");return i.search=new URLSearchParams(t).toString(),i.toString().substring(i.origin.length)}},170168:(e,t,i)=>{i.d(t,{Ag:()=>s,C0:()=>l,L1:()=>h,Vi:()=>r,YD:()=>u,kS:()=>o,oo:()=>a,p3:()=>p,vC:()=>d,vI:()=>c});var n=i(401060);const o="https://www.pinterest.com/business/hub/",s="https://www.pinterest.com/homefeed/",r="www.pinterest.com",a="https://help.pinterest.com",l=`${(0,n.Z)({site:"www"})}`,d=(0,n.Z)({site:"developers"}),c=`${(0,n.Z)({site:"sterling"})}`,u=`${(0,n.Z)({site:"analytics"})}`,h=`${(0,n.Z)({site:"trends"})}`,p=`${(0,n.Z)({site:"www",path:"/product-catalogs/data-source/?advertiserId="})}`},934723:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(422586),o=i(966113);function s({advertiser:e,isAdsSite:t,isAnalyticsSite:i,isTrendsSite:s,baseUrl:r,adsUrl:a,isQuickPromote:l,isShoppingCatalogs:d}){if(t&&!e&&!l)return"/";let c=r;return(t||i||s)&&!d?(a||(a=r),e?(c=(0,n.Z)(a,e.id),t||(c=o.au+c)):c=t?a:o.au+c):d?c=o.au+(0,n.Z)(r,e?e.id:""):a||(c=o.au+r),c}},540794:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>window.location.pathname},388619:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(704115);const o=({url:e})=>{if(e){const t=e.split("?");if(t[1])return(0,n.Z)(t[1])}return(0,n.Z)()}},149230:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(954931);const o=({url:e})=>!(!e||!e.match(/^https{0,1}:\/\//)||(0,n.Z)(e))},566101:(e,t,i)=>{i.d(t,{Z:()=>n});const n=({url:e})=>""===e||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(e)},50286:(e,t,i)=>{i.d(t,{HG:()=>u,Kf:()=>r,Mq:()=>o,Wb:()=>c,ZP:()=>h,dA:()=>a,ds:()=>l,ml:()=>d});var n=i(780280);function o(e){const{isMobile:t,isTablet:i}=e.userAgent;return i?"tablet":t?"phone":"desktop"}const s=()=>o((0,n.B)()),r=e=>"phone"===e,a=e=>"tablet"===e,l=e=>"desktop"===e,d=()=>r(s()),c=()=>a(s()),u=()=>l(s()),h=s},311541:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);function o(e,t){const i=(0,n.useRef)([]),[o,s]=(0,n.useState)(),[r,a]=(0,n.useReducer)(null!=o?o:()=>t,t),l=(0,n.useCallback)((t=>{o?a(t):(i.current.length||e().then((e=>{s((()=>e.default))})),i.current=[...i.current,t])}),[e,o]);return(0,n.useEffect)((()=>{o&&(i.current.forEach(a),i.current=[])}),[o]),[r,l]}},215292:(e,t,i)=>{i.d(t,{Z:()=>r,q:()=>s});var n=i(667294);const o=()=>{const[e,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1);return{active:e,focused:i,hovered:s,onBlur:()=>{o(!1),t(!1)},onFocus:()=>o(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>r(!0),onMouseLeave:()=>{r(!1),t(!1)},onMouseUp:()=>t(!1)}};function s({children:e}){return e(o())}const r=o},807609:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294);const o=()=>()=>{},s=()=>!1,r=()=>!0,a=()=>(0,n.useSyncExternalStore)(o,s,r)},19121:(e,t,i)=>{i.d(t,{$:()=>o,Z:()=>r});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("viewer"),r=s},216895:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>{let i;return t.some((t=>{const n=t(e);return n.errors.length>0&&(i=n.errors[0],!0)})),i}},556663:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(883119),s=i(785893);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a={default:{backgroundColor:"#efefef",boxShadow:"none"},drag:{backgroundColor:"rgba(74, 144, 226, 0.08)",boxShadow:"0 0 0 1px #0074e8"},error:{backgroundColor:"rgba(230, 0, 35, 0.03)",boxShadow:"0 0 0 1px #e60023"}},l={error:{backgroundColor:"#FFE0E0",boxShadow:"0 0 0 2px #CC0000"}};class d extends n.Component{constructor(...e){super(...e),r(this,"state",{isDraggingOver:!1,isHoveringOver:!1}),r(this,"handleOnDragEnter",(e=>{const{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)})),r(this,"handleOnDragLeave",(e=>{const{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)})),r(this,"handleOnDragOver",(e=>{const{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)})),r(this,"handleOnDrop",(e=>{const{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)})),r(this,"handleMouseEnter",(()=>{const{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})})),r(this,"handleMouseLeave",(()=>{const{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}))}getDragContainerStyles(e,t){const{experimentsClient:i}=this.props,n=null==i?void 0:i.checkExperiment("aid_exp_error_handling_pin_builder");return t&&"default"===e?{...a[e],backgroundColor:t}:n&&"error"===e?l[e]:a[e]}render(){const{children:e,color:t,dropRounding:i,hasError:n,height:r,position:a,width:l}=this.props,{isDraggingOver:d,isHoveringOver:c}=this.state,u=d?"drag":n?"error":"default";return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(u,t),...i?{borderRadius:i}:{}}},height:r||"100%","data-test-id":"drag-behavior-container",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:a,rounding:2,width:l,children:e(d,c)})}}},281139:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(883119),s=i(556663),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0};class d extends n.Component{constructor(...e){super(...e),a(this,"handleChange",(e=>{const{onChange:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e),e.target.value=""})),a(this,"handleClick",(e=>{const{onClick:t}=this.props;t&&t(e)}))}render(){const{accept:e,accessibilityLabel:t,allowMultipleFiles:i,children:n,color:a,dropRounding:d,hasError:c,height:u,id:h,onDrop:p,position:_,rounding:g=2,width:m,isAriaHidden:f,experimentsClient:x}=this.props;return(0,r.jsx)(s.Z,{color:a,dropRounding:d,hasError:c,height:u,onDrop:p,position:_,width:m,experimentsClient:x,children:s=>(0,r.jsxs)(o.xu,{height:"100%",position:"relative",rounding:g,children:[n(s),(0,r.jsx)("input",{"aria-label":t,id:h,"data-test-id":h,style:l,type:"file",accept:e,onChange:this.handleChange,onClick:this.handleClick,multiple:i,"aria-hidden":f,tabIndex:f?-1:0})]})})}}},893446:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(214494);const o=2e3,s=6e4,r=3e5;function a(e,{onSuccess:t,onError:i,onProcessingStarted:a,resolvedAfterProcessingStarted:l,delay:d=o}){let c,u,h=!1;const p=()=>{clearTimeout(u),clearTimeout(c)},_=()=>{h||n.Z.create("VIPResource",{upload_ids:[e]}).callGet().then((n=>{const{data:o}=n.resource_response;if(o[e]){const{status:n,signature:g,failure_code:m}=o[e];c||(c=setTimeout((()=>{h=!0,i("","registered_timeout")}),s)),u||(u=setTimeout((()=>{h=!0,i("","processing_timeout")}),r)),"processing"===n||"registered"===n?"processing"===n?(clearTimeout(c),a?l?(clearTimeout(u),a(g)):(a(g),setTimeout((()=>_()),d)):setTimeout((()=>_()),d)):setTimeout((()=>_()),d):"succeeded"===n?(p(),t(g)):(p(),i(`VIP status failure code: ${m}`,null))}else i("VIP upload ID was not returned",null)})).catch((()=>{i("VIP failure with checking status",null)}))};_()}},531245:(e,t,i)=>{i.d(t,{P7:()=>o,Zx:()=>a,sc:()=>r,ss:()=>s,xl:()=>n});const n=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],o=["bmp","gif","jpg","jpeg","png","tiff","webp"],s=["video/mp4","video/x-m4v","video/quicktime"],r=["mp4","m4v","mov"],a={border:"2px dashed #DADADA",borderRadius:"32px",pointerEvents:"none"}},41703:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(349700),o=i(299295),s=i(665866);const r=(e,t)=>t.nbt(["pixel", "pixels"], e, "pinBuilder.errorMessaging.pixel", true);function a(e,t,i,a){switch(e){case"FILE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"FILE_UNRECOGNIZED_TYPE",type:"error",message:t.bt("Your upload failed because it is in the wrong format.", "Your upload failed because it's the wrong format.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"IMAGE_OVER_MAX_DIMENSIONS":return{dispatchId:i,id:"IMAGE_OVER_MAX_DIMENSIONS",type:"error",message:t.bt("This image is too large and can't be uploaded. Please try a smaller image size.", "This image is too large and can't be uploaded. Please try a smaller image size.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"IMAGE_UNDER_MIN_DIMENSIONS":const[e,l]=s.Z.enabled("pinQuality")?[300,200]:[100,100];return{dispatchId:i,id:"IMAGE_UNDER_MIN_DIMENSIONS",type:"error",message:(0,n.nk)(t.bt("This image is too small. Make sure your images are at least {{ minWidth }} x {{ minHeight }} {{ pixelString }}.", "Hmm...this image is too small. Make sure your images are at least {{ minWidth }} x {{ minHeight }} {{ pixelString }}.", "vip.errorMessaging.minImageMessage", undefined, true),{minHeight:e,minWidth:l,pixelString:r(l,t)}).join(""),blocking:!0};case"IMAGE_OVER_MAX_FILE_SIZE":const d=20;return{dispatchId:i,id:"IMAGE_OVER_MAX_FILE_SIZE",type:"error",message:(0,n.nk)(t.nbt(["This image is too large and can't be uploaded. Images can't be larger than {{max_size_mb}} MB", "This image is too large and can't be uploaded. Images can't be larger than {{max_size_mb}} MB"], d, "vip.errorMessaging.message", true),{max_size_mb:d}).join(""),blocking:!0};case"IMAGE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"IMAGE_UNRECOGNIZED_TYPE",type:"error",message:t.bt("This image type is invalid – please make sure the image is natively .jpg or .png", "This image type is invalid - please make sure the image is natively .jpg or .png", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_UNDER_MIN_DIMENSIONS":return{dispatchId:i,id:"VIDEO_UNDER_MIN_DIMENSIONS",type:"error",message:(0,n.nk)(t.nbt(["This video is too small and can't be uploaded. Videos must have a height and width larger than {{min_size_video}} pixel", "This video is too small and can't be uploaded. Videos must have a height and width larger than {{min_size_video}} pixels"], 100, "vip.errorMessaging.message", true),{min_size_video:100}).join(""),blocking:!0};case"VIDEO_BELOW_MIN_DURATION":const c=Math.floor(4);return{dispatchId:i,id:"VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,n.nk)(t.nbt(["This video is too short and cannot be uploaded. Videos cannot be shorter than {{minVideoLengthSeconds}} second.", "This video is too short and cannot be uploaded. Videos cannot be shorter than {{minVideoLengthSeconds}} seconds."], c, "vip.errorMessaging.message", true),{minVideoLengthSeconds:c}).join(""),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":const u=o.W_;return{dispatchId:i,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,n.nk)(t.nbt(["This video is too short and cannot be uploaded. Videos cannot be shorter than {{minStoryPinVideoLengthSeconds}} second.", "This video is too short and cannot be uploaded. Videos cannot be shorter than {{minStoryPinVideoLengthSeconds}} seconds."], u, "vip.errorMessaging.storyPinVideoBelowMin.message", true),{minStoryPinVideoLengthSeconds:u}).join(""),blocking:!0};case"VIDEO_COVER_INVALID_ASPECT_RATIO":return{dispatchId:i,id:"VIDEO_COVER_INVALID_ASPECT_RATIO",type:"error",message:t.bt("The video's cover image must have the same dimensions as the video itself", "The video's cover image must be of the same dimensions as the video itself", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_GENERAL_UPLOAD_ERROR":return{dispatchId:i,id:"VIDEO_GENERAL_UPLOAD_ERROR",type:"error",message:t.bt("Your upload failed for some reason. Please try again.", "Hmm, your upload failed for some reason. Please try again.", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_OVER_MAX_DURATION":const h=15;return{dispatchId:i,id:"VIDEO_OVER_MAX_DURATION",type:"error",message:(0,n.nk)(t.nbt(["This video is too long and can't be uploaded. Videos can't be longer than {{max_video_length_minutes}} minute.", "This video is too long and can't be uploaded. Videos can't be longer than {{max_video_length_minutes}} minutes."], h, "vip.errorMessaging.message", true),{max_video_length_minutes:h}).join(""),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_DURATION":return{dispatchId:i,id:"STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:(0,n.nk)(t.bt("This video is too long and can't be uploaded. Videos can't be longer than {{max_video_length_seconds}} seconds.", "This video is too long and can't be uploaded. Videos can't be longer than {{max_video_length_seconds}} seconds.", "vip.errorMessaging.message", undefined, true),{max_video_length_seconds:Math.floor(o.P9)}).join(""),blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":const p=Math.floor(o.FH)/60;return{dispatchId:i,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:(0,n.nk)(t.bt("This video is too long and cannot be uploaded. Videos cannot be longer than {{duration}} minutes.", "This video is too long and can't be uploaded. Videos can't be longer than {{duration}} minutes.", "vip.errorMessaging.storyPinMaxTimeLimit", undefined, true),{duration:p}).join(""),blocking:!0};case"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":const _=Math.floor(null!=a?a:o.FH)/60;return{dispatchId:i,id:"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN",type:"error",message:(0,n.nk)(t.bt("This video is too long and cannot be uploaded. Videos cannot be longer than {{duration}} minutes.", "This video is too long and can't be uploaded. Videos can't be longer than {{duration}} minutes.", "vip.errorMessaging.storyPinMaxTimeLimit", undefined, true),{duration:_}).join(""),blocking:!0};case"VIDEO_OVER_MAX_FILE_SIZE":const g=2;return{dispatchId:i,id:"VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,n.nk)(t.nbt(["This video is too large and can't be uploaded. Videos can't be larger than {{max_video_size_gb}} GB.", "This video is too large and can't be uploaded. Videos can't be larger than {{max_video_size_gb}} GB."], g, "vip.errorMessaging.message", true),{max_video_size_gb:g}).join(""),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{const e=o.Lr/1024/1024;return{dispatchId:i,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,n.nk)(t.nbt(["This video is too large and cannot be uploaded. Videos cannot be larger than {{maxVideoFileSize}} MB.", "This video is too large and cannot be uploaded. Videos cannot be larger than {{maxVideoFileSize}} MB."], e, "vip.errorMessaging.message", true),{maxVideoFileSize:e}).join(""),blocking:!0}}case"VIDEO_UNRECOGNIZED_ENCODING":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING",type:"error",message:t.bt("This video isn't encoded in H.264", "This video isn't encoded in H.264", "vip.errorMessaging.message", undefined, true),blocking:!0};case"VIDEO_UNSUPPORTED_RATIO":return{dispatchId:i,id:"VIDEO_UNSUPPORTED_RATIO",type:"error",message:t.bt("This video is too tall or narrow and can't be uploaded. Videos need to be between 1:2 and 1.91:1 aspect ratio.", "This video is too tall or narrow and can't be uploaded. Videos need to be between 1:2 and 1.91:1 aspect ratio.", "vip.errorMessaging.message", undefined, true),blocking:!0};default:return{dispatchId:i,id:"GENERAL_ERROR",type:"error",message:t.bt("Something went wrong. Please try again.", "Hmm, something went wrong. Please try again.", "vip.errorMessaging.message", undefined, true),blocking:!0}}}},62087:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(172045),o=i(41703);const s=e=>t=>new Promise(((i,s)=>{const r=new Image;r.addEventListener("load",(()=>i({fileSrc:t,height:r.height,id:(0,n.Z)(),name:t.name,size:t.size,src:r.src,type:"localImage",width:r.width}))),r.addEventListener("error",(()=>(e=>t=>t((0,o.Z)("IMAGE_UNRECOGNIZED_TYPE",e)))(e)(s))),r.src=URL.createObjectURL(t)}))},275988:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(172045),o=i(41703);const s=e=>t=>new Promise(((i,s)=>{const r=new FileReader,a=URL.createObjectURL(t);r.addEventListener("load",(()=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",(()=>i({id:(0,n.Z)(),duration:r.duration,fileSrc:t,height:r.videoHeight,name:t.name,size:t.size,src:r.src,thumbnail:0,type:"localVideo",width:r.videoWidth}))),r.addEventListener("error",(()=>(e=>t=>t((0,o.Z)("VIDEO_UNRECOGNIZED_ENCODING",e)))(e)(s))),r.src=a})),r.readAsDataURL(t)}))},471155:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(214494),o=i(893446);const s=1e3,r=[200,201,204],a=2e3,l=8e3;function d(e,t,i=!0,d,c){return new Promise(((u,h)=>{const p={type:t,aux_data:c};n.Z.create("VIPResource",p).callCreate().then((n=>{const{onCancelUpload:c,onFailureUpload:p,onFinishProcessing:_,onFinishUpload:g,onProgress:m,onStartProcessing:f,onStartUpload:x,setXhr:b}=d||{},{upload_id:y,upload_url:v,upload_parameters:P}=n.resource_response.data,w=e.size,I=new Date;x&&x({fileSizeBytes:w,uploadId:y});const A=(e,t)=>{p&&p({failureReason:t,fileSizeBytes:w,message:e,uploadId:y}),h({isError:!0,uploadId:y})},E=new XMLHttpRequest;E.open("POST",v,!0),E.onabort=()=>{c&&c(y),h({isError:!1,uploadId:y})},E.onload=()=>{if(r.includes(E.status)){const e=new Date,n=(e-I)/s;if(g){const e=E.getResponseHeader("x-amz-request-id"),t=E.getResponseHeader("x-amz-id-2");g({amzId2:t,amzRequestId:e,statusCode:E.status,uploadId:y,uploadTime:n})}const r=e=>(f&&f({signature:e,uploadId:y}),i?u({signature:e,uploadId:y}):void 0);(0,o.Z)(y,{onProcessingStarted:r,delay:t.includes("image")?a:l,onError:A,onSuccess:t=>{const i=(new Date-e)/s;return _&&_({fileSizeBytes:w,processingTime:i,signature:t,uploadId:y,uploadTime:n}),u({signature:t,uploadId:y})},resolvedAfterProcessingStarted:i})}else A(`XHR failure status code: ${E.status}`,null)},E.onerror=()=>{E.abort()},m&&(E.upload.onprogress=m),b&&b(E);const C=new FormData;Object.keys(P).forEach((e=>{C.append(e,P[e])})),C.append("file",e),E.send(C)})).catch((e=>{h({isError:!0})}))}))}},123463:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(531245),o=i(41703),s=i(62087),r=i(665866),a=i(451105);function l(e,t,i,n){return i.size>20971520?Promise.resolve((0,o.Z)("IMAGE_OVER_MAX_FILE_SIZE",e)):(0,s.Z)(e)(i).then((i=>function(e,t,i,n){const[o,s]=r.Z.enabled("pinQuality")?[300,200]:[100,100],l=(null==n?void 0:n.minHeight)||o,d=(null==n?void 0:n.minWidth)||s;return i.height*i.width>89478485?(0,a.ZP)({errorId:"IMAGE_OVER_MAX_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):i.height<l||i.width<d?(0,a.ZP)({errorId:"IMAGE_UNDER_MIN_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):i}(e,t,i,n))).catch((e=>e))}var d=i(299295),c=i(275988);const u="enabled_min",h="employees_min";function p(e,t,i){const{forStoryPin:n,allowAllAspectRatios:s}=i||{},a=!!n,l=!!s,c=a&&r.Z.enabled("ideaPinExtendVideoLength"),p=c&&r.Z.enabled("ideaPinExtendVideoLengthAboveTwoMin"),_=(()=>{if(p){const e=r.Z.getExperimentGroup("ideaPinExtendVideoLengthAboveTwoMin");if(e){const t=function(e){return e.startsWith(u)&&e.length>u.length?parseInt(e.substring(u.length),10):e.startsWith(h)&&e.length>h.length?parseInt(e.substring(h.length),10):-1}(e);if(t>0)return 60*t+.5}}return c?d.FH:d.P9})(),g=a?d.W_:4,m=a?_:900;if(t.duration<g)return(0,o.Z)(a?"STORY_PIN_VIDEO_BELOW_MIN_DURATION":"VIDEO_BELOW_MIN_DURATION",e);if(t.duration>m){const t=p?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":c?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":"STORY_PIN_VIDEO_OVER_MAX_DURATION";return(0,o.Z)(a?t:"VIDEO_OVER_MAX_DURATION",e,void 0,_)}return t.width&&t.height?!l&&(t.width/t.height<.5||t.width/t.height>1.91)?(0,o.Z)("VIDEO_UNSUPPORTED_RATIO",e):t.width<100||t.height<100?(0,o.Z)("VIDEO_UNDER_MIN_DIMENSIONS",e):t:(0,o.Z)("VIDEO_UNRECOGNIZED_ENCODING",e)}function _({i18n:e,file:t,options:i,ideaPinRenamingEnabled:s}){const{allowVideo:r,videoOnly:a}=i||{};return n.ss.includes(t.type)&&r?function(e,t,i){const{forStoryPin:n}=i||{},s=n?d.Lr:2147483648;return t.size>s?Promise.resolve((0,o.Z)(n?"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":"VIDEO_OVER_MAX_FILE_SIZE",e)):(0,c.Z)(e)(t).then((t=>p(e,t,i))).catch((e=>e))}(e,t,i):n.xl.includes(t.type)&&!a?l(e,s,t,i):Promise.resolve((0,o.Z)("FILE_UNRECOGNIZED_TYPE",e))}},77891:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(123463);function o({i18n:e,files:t,options:i,ideaPinRenamingEnabled:o}){return Promise.all(t.map((t=>(0,n.Z)({i18n:e,file:t,options:i,ideaPinRenamingEnabled:o}))))}},306732:(e,t,i)=>{i.d(t,{Be:()=>a,DD:()=>w,EK:()=>l,Eo:()=>_,Gv:()=>le,HK:()=>Y,J_:()=>ae,KO:()=>D,MD:()=>O,MU:()=>R,PD:()=>M,Pf:()=>oe,QE:()=>A,QX:()=>U,R0:()=>$,S8:()=>se,V0:()=>m,VO:()=>ie,WH:()=>T,XT:()=>y,Y3:()=>c,aF:()=>N,aZ:()=>n,bS:()=>g,cU:()=>I,cm:()=>V,d0:()=>P,eu:()=>p,g2:()=>E,gd:()=>C,h1:()=>Z,h8:()=>s,hh:()=>v,iu:()=>q,j0:()=>ne,j1:()=>B,k7:()=>X,kc:()=>h,kl:()=>u,kq:()=>f,l5:()=>x,pA:()=>re,pF:()=>L,pM:()=>k,pV:()=>b,ps:()=>r,q9:()=>d,qB:()=>W,qf:()=>ee,r2:()=>S,rC:()=>z,rD:()=>Q,sG:()=>F,ss:()=>te,t7:()=>J,ul:()=>o,vr:()=>K,wZ:()=>G,yA:()=>H,yq:()=>j});const n=864e5,o={IN_STOCK:"in stock",OUT_OF_STOCK:"out of stock",PREORDER:"preorder"},s={NEW:"new",USED:"used",REFURBISHED:"refurbished"},r={MALE:"male",FEMALE:"female",UNISEX:"unisex"},a={1:"All Products",2:"Best Deals",3:"Most Popular",4:"Top Sellers",5:"Back In Stock",6:"New Arrivals"},l={FEATURED:"FEATURED",CAN_FEATURE:"CAN_FEATURE",FEATURING:"FEATURING",NO_FILTERS:"NO_FILTERS",TOO_FEW_PRODUCTS:"TOO_FEW_PRODUCTS",TOO_FEW_UNIQUE_PRODUCTS:"TOO_FEW_UNIQUE_PRODUCTS",TOO_MANY_PRODUCTS:"TOO_MANY_PRODUCTS",MAX_GROUPS_FEATURED:"MAX_GROUPS_FEATURED",UNFEATUREABLE:"UNFEATUREABLE"},d=[1,2,3,4,5,6,7,8],c=[1,2,3,4,5,6,8],u=[1,2,3,4,5,6,7,0,8],h=90,p=350,_=72,g=450,m=200,f=12,x=114,b={MERCHANT_CREATED:"MERCHANT_CREATED",ALL_PRODUCTS:"ALL_PRODUCTS"},y={FEATUREABLE:1,UNFEATUREABLE_NOT_ENOUGH_PINS:2,UNFEATUREABLE_NOT_ENOUGH_UNIQUE_PINS:3,UNFEATUREABLE_EXCEEDED_PINS_LIMIT:4},v={ITEM_ID:"Item ID",PRODUCT_CATEGORY:"Category",PRODUCT_TYPE:"Product type",BRANDS:"Brands",COST:"Cost",CUSTOM_LABEL:"Custom",CUSTOM_LABEL_0:"Custom label 0",CUSTOM_LABEL_1:"Custom label 1",CUSTOM_LABEL_2:"Custom label 2",CUSTOM_LABEL_3:"Custom label 3",CUSTOM_LABEL_4:"Custom label 4",AVAILABILITY:"Availability",PRICE:"Price",GENDER:"Gender",CONDITION:"Condition",CURRENCY:"Currency",ITEM_GROUP_ID:"Item group ID"},P=[v.PRODUCT_CATEGORY,v.PRODUCT_TYPE,v.BRANDS,v.CUSTOM_LABEL_0,v.CUSTOM_LABEL_1,v.CUSTOM_LABEL_2,v.CUSTOM_LABEL_3,v.CUSTOM_LABEL_4],w={[v.ITEM_ID]:["ITEM_ID"],[v.ITEM_GROUP_ID]:["ITEM_GROUP_ID"],[v.PRODUCT_CATEGORY]:["GOOGLE_PRODUCT_CATEGORY_0"],[v.PRODUCT_TYPE]:["PRODUCT_TYPE_0"],[v.COST]:["MIN_PRICE","MAX_PRICE"],[v.BRANDS]:["BRAND"],[v.CUSTOM_LABEL]:["CUSTOM_LABEL_0","CUSTOM_LABEL_1","CUSTOM_LABEL_2","CUSTOM_LABEL_3","CUSTOM_LABEL_4"],[v.AVAILABILITY]:["AVAILABILITY"],[v.CONDITION]:["CONDITION"],[v.GENDER]:["GENDER"]},I=[v.CUSTOM_LABEL,v.COST,v.CURRENCY],A={1:o.IN_STOCK,2:o.OUT_OF_STOCK,3:o.PREORDER},E={1:s.NEW,2:s.USED,3:s.REFURBISHED},C={1:r.MALE,2:r.FEMALE,3:r.UNISEX},S={1:v.ITEM_ID,5:v.PRODUCT_CATEGORY,12:v.PRODUCT_TYPE,3:v.BRANDS,2:v.AVAILABILITY,17:v.CUSTOM_LABEL_0,18:v.CUSTOM_LABEL_1,19:v.CUSTOM_LABEL_2,20:v.CUSTOM_LABEL_3,21:v.CUSTOM_LABEL_4,4:v.CONDITION,25:v.GENDER,22:v.PRICE,23:v.PRICE,26:v.CURRENCY,24:v.ITEM_GROUP_ID},j={[v.ITEM_ID]:1,[v.PRODUCT_CATEGORY]:5,[v.PRODUCT_TYPE]:12,[v.BRANDS]:3,[v.AVAILABILITY]:2,[v.CUSTOM_LABEL_0]:17,[v.CUSTOM_LABEL_1]:18,[v.CUSTOM_LABEL_2]:19,[v.CUSTOM_LABEL_3]:20,[v.CUSTOM_LABEL_4]:21,[v.CONDITION]:4,[v.GENDER]:25,[v.PRICE]:23,[v.CURRENCY]:26,[v.ITEM_GROUP_ID]:24},T={GREATER_INCLUSION:"0",GREATER_EXCLUSION:"1",LESS_INCLUSION:"2",LESS_EXCLUSION:"3"},D={[T.GREATER_EXCLUSION]:{filterType:22,filterOperator:{negated:!1,inclusion:!1}},[T.GREATER_INCLUSION]:{filterType:22,filterOperator:{negated:!1,inclusion:!0}},[T.LESS_EXCLUSION]:{filterType:23,filterOperator:{negated:!1,inclusion:!1}},[T.LESS_INCLUSION]:{filterType:23,filterOperator:{negated:!1,inclusion:!0}}},k="newlyCreatedPGId",z="storefront",O={campaignId:"createNewCampaign",objectiveType:"CATALOG_SALES",absolutify:!0},R=163,L=350,M={LIST:"LIST",GRID:"GRID"},B="236x",N=23,Z=164,F=256,U=112,V="calc(100vh - 175px)",H=75,G=200,W=40,$={PRODUCT_GROUP_NAME:"PRODUCT_GROUP_NAME",PRODUCT_COUNT:"PRODUCT_COUNT",PRODUCT_AVAILABILITY:"PRODUCT_AVAILABILITY",LAST_UPDATE:"LAST_UPDATE",PRODUCT_GROUP_PROMOTED:"PRODUCT_GROUP_PROMOTED",PRODUCT_GROUP_FEATURED:"PRODUCT_GROUP_FEATURED",PRODUCT_GROUP_ACTIONS:"PRODUCT_GROUP_ACTIONS",PG_METRIC:"PG_METRIC",PRODUCT_GROUP_COUNTRY:"PRODUCT_GROUP_COUNTRY"},q=500,X=20,Y=40,K=100,J=4,Q={DELETE_FAILED:"DELETE_FAILED",DELETE_SUCCESSFULLY:"DELETE_SUCCESSFULLY",REMOVE_SUCCESSFULLY:"REMOVE_SUCCESSFULLY"},ee={ALL:"ALL",MIXED:"MIXED",FEED_PROFILE:"FEED_PROFILE"},te="US",ie="selectedCountryKey",ne="selectedFeedProfileId",oe="NEXT_BUTTON",se="PRODUCT_GROUP_NAME_INPUT",re="APPLY_FILTER_BUTTON",ae="activated",le="SIMILARLY_PRICED_PG_GUIDANCE_ID"},869899:(e,t,i)=>{i.r(t),i.d(t,{RoleBasedAccessControlProvider:()=>b,useRoleBasedAccessControlContext:()=>x});var n=i(667294),o=i(425288),s=i(773285),r=i(784590),a=i(19121),l=i(389643),d=i(339363),c=i(70061);const u=e=>{const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,c.Z)(i)]=e[i]:t[(0,c.Z)(i)]=u(e[i]));return t},h=(e,t)=>{const i=[];for(const s in e)s!==t&&i.push({id:s,...u(e[s])});const n=i.sort((({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t))),o=new Map;for(const s of n)o.set(s.id,s);return o},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},_=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=e=>{const[t,i]=(0,n.useReducer)(_,p),o=(({dispatch:e,isEnabled:t,state:i})=>{const{orbacVisibility:o,disableProfileChanger:s,headerVisible:r}=i;return{changeProfile:(0,n.useCallback)((i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})}),[t,e]),toggleORBACVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!o})}),[t,e,o]),toggleDisableProfileChanger:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!s})}),[t,e,s]),toggleHeaderVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!r})}),[t,e,r])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:s,orbacVisibility:r}=t;(0,n.useEffect)((()=>{const e=(0,d.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,n.useEffect)((()=>{const e=(0,d.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,n.useEffect)((()=>{(0,d.Nh)("orbacVisibility",r)}),[r]),(0,n.useEffect)((()=>{(0,d.Nh)("orbacActiveProfile",s)}),[s]);return{state:t,actions:o,receiveProfiles:(0,n.useCallback)(((e,t)=>{i({type:"LOAD_PROFILES",payload:h(e,t)})}),[i])}};var m=i(785893);const{Provider:f,useMaybeHook:x}=(0,o.Z)("RoleBasedAccessControlContext"),b=({children:e})=>{const{checkExperiment:t}=(0,s.F)(),i=(0,a.Z)(),o=Boolean(i.isAuth&&i.isPartner&&t("web_m10n_business_access_orbac_www").anyEnabled),{state:d,actions:c,receiveProfiles:u}=g(o),{activeProfile:h,headerVisible:p,profiles:_=[]}=d,x=_?Array.from(_.values()):[],b=(0,l.Z)(x),y=!!(i.isAuth&&x.length>0)&&b,v=i.isAuth?i.id:"",P=i.isAuth?i.username:"",{changeProfile:w,toggleORBACVisibility:I,toggleDisableProfileChanger:A,toggleHeaderVisibility:E}=c;(0,n.useEffect)((()=>{o&&("string"!=typeof b?h||w(v):w(b))}),[b,v,o,w,h]),(0,n.useEffect)((()=>{o&&(y&&!p&&E(!0),!y&&p&&E(!1))}),[E,y,o,p,_]);const{data:C}=(0,r.Z)(o?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),S=null==C?void 0:C.profiles;let j;i&&i.isAuth&&d.activeProfile===i.id?j={id:i.id,permissions:["OWNER"],user:{username:P,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:h&&d.profiles&&(j=d.profiles.get(h)),(0,n.useEffect)((()=>{S&&u(S,v)}),[u,S,v]);const T=d.profiles?Array.from(d.profiles.values()):[];return(0,m.jsx)(f,{value:{profiles:T,headerVisible:d.headerVisible,activeProfile:j,changeProfile:w,toggleORBACVisibility:I,toggleDisableProfileChanger:A,toggleHeaderVisibility:E},children:e})}},717615:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(773285),o=i(869899),s=i(389643);const r=()=>{const{checkExperiment:e}=(0,n.F)(),t=(0,o.useRoleBasedAccessControlContext)(),{activeProfile:i}=t||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,s.Z)((null==t?void 0:t.profiles)||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return r?l&&!a?Object.freeze({}):i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({}):Object.freeze({})}},389643:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(616550),o=i(53987),s=i(773285),r=i(19121),a=i(350118);const l=e=>{var t,i,l,d;const c=(0,n.useLocation)(),u=(0,r.Z)(),h=(0,a.S6)(),{anyEnabled:p}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_www"),_=(0,n.useRouteMatch)("/:username"),g=null==_||null===(t=_.params)||void 0===t?void 0:t.username,m=(0,n.useRouteMatch)("/pin/:id"),f=!(null==m||null===(i=m.params)||void 0===i||!i.id)&&(null===(l=h(m.params.id))||void 0===l||null===(d=l.pinner)||void 0===d?void 0:d.id);if((0,o.ej)(c))return!1;if((0,o.RU)(c))return!0;if((0,o.mY)(c))return p;const x=e.concat(u.isAuth?{user:{username:u.username},id:u.id}:{}).find((e=>{const{user:t={},id:i}=e||{},{username:n}=t;return!!(n&&g||f&&i)&&(n===g||f===i)}));return!!x&&x.id}},845772:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(19121),o=i(717615),s=i(231947);const r=()=>{const e=(0,n.Z)(),t=(0,o.Z)();return(0,s.lJ)(e,t)}},231947:(e,t,i)=>{i.d(t,{D3:()=>d,DX:()=>a,KY:()=>c,Ms:()=>n,N1:()=>u,_P:()=>r,lJ:()=>s,nl:()=>o,q6:()=>l});const n=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},o=(e,t)=>Boolean(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,i)=>{var n;return i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:null===(n=e.advertiser)||void 0===n?void 0:n.merchant_id},a=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,l=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),d=(e,t,i)=>!!(l(e,t,i)||e&&e.isAuth&&t===e.id),c=(e,t,i)=>{const n=t&&t.owner&&t.owner.id||"";return d(e,n,i)};function u(e,t,i){const n=t?t.id:"";return d(e,n,i)}},641692:(e,t,i)=>{i.d(t,{uB:()=>x,re:()=>b,Xc:()=>P,NH:()=>v,Mz:()=>y,Mj:()=>k,LZ:()=>j,Lu:()=>S,es:()=>T,i5:()=>B,QR:()=>H,xV:()=>R,o_:()=>V,d5:()=>E,if:()=>Z,xQ:()=>A,O9:()=>w,bq:()=>L,HH:()=>M,Ti:()=>z,cG:()=>I,Hw:()=>D,YA:()=>F,HC:()=>O,Y8:()=>N,$n:()=>U});var n=i(983722),o=i(172071),s=i(382891),r=i(709622);const a=({values:e,pin:t,productGroup:i,country:n})=>{const{name:o,destination_url:a,budget:l,duration:d,inclusive_end_date:c,is_ongoing:u,advertiser_id:h,ages:p,interests:_,genders:g,ad_type:m,selected_ocpm_tag:f,isAutoTargeting:x}=e,b=Math.round(l*r.Az),y=(0,s.Z)({ages:p,interests:_,genders:g,country:n}),v={};m===r.Hl.WEB_CONVERSION&&(v.objective_type=r.Hl.WEB_CONVERSION,v.optimization_goal_metadata={conversion_tag_v3_goal_metadata:{conversion_tag_id:f.conversionTagId,conversion_event:f.conversionEvent}});const P={budget_in_micro_currency:b,campaign_name:o&&o.length<64?o:`${(o||"").substr(0,62)}…`,destination_url:t?a:null,duration:parseInt(d,10),auto_targeting_enabled:x,is_ongoing:u,start_now:!0,targeting_spec:y,advertiser_id:h,ads_client_type:"quick_promote",pin_id:t?t.id:null,product_group_id:i?i.id:null,...v};return!u&&c&&c.trim().length>0&&(P.inclusive_end_date=c),P};var l=i(28543),d=i(186656),c=i(251819),u=i(844974),h=i(966113),p=i(867820),_=i(826067),g=i(170168),m=i(934723),f=i(572621);const x=472,b=364,y={VIEW:"view",SUBMIT:"submit",SUBMIT_SUCCESS:"submit.success",SUBMIT_ERROR:"submit.error"},v={CLICK:"click",DISMISS:"dismiss",RENDER:"render"},P={BIZ_HUB_AD_CREDITS:"biz_hub_ad_credits",BIZ_HUB_EMPTY_STATE_ADS_WIDGET:"biz_hub_empty_state_ads_widget",BIZ_HUB_CREATE_AD:"biz_hub_create_ad",CLOSEUP_PARTNER_MODULE:"closeup_partner_module",NAVBAR_PROMOTE_PIN:"navbar_promote_pin",PIN_CREATE_SUCCESS:"pin_create_success",PIN_CREATE_SUCCESS_PINNER:"pin_create_success_pinner",PIN_REP:"pin_rep",PINANALYTICS:"pinanalytics",TRENDS_HOME_PAGE:"trends_home_page",TRENDS_DETAILS_PAGE:"trends_details_page"},w=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e}),I=e=>{const{isAnalyticsSite:t=!1,isSterlingSite:i=!1,isWwwSite:n=!1,loggingType:s}=e;let r="";t?r=".analytics":n?r=".www":i&&(r=".ads"),o.Z.increment(`sterling.quick_promote.page${r}.${s}`,1)},A=e=>e?r.vX.indexOf(e):-1,E=e=>{if(!(null==e||e<0||e>r.vX.length-1))return r.vX[e]},C=e=>e===r.Gl.BUSINESS_FORM?{element:11213,component:13375}:e===r.Gl.BILLING_FORM?{element:11214,component:13376}:{component:205,element:1223},S=(e,t)=>{const i=E(e),{component:n,element:o}=C(i);t({event_type:101,component:n,element:o,aux_data:{page:"GestaltQuickPromote"}})},j=(e,t)=>{const i=E(e),{component:n}=C(i);i===r.Gl.PIN_SELECTION_MODAL?t({event_type:6358,component:13288,aux_data:{page:"GestaltQuickPromote"}}):i===r.Gl.SUCCESS_MODAL&&t({event_type:6358,component:n,aux_data:{page:"GestaltQuickPromote"}})},T=(e,t)=>{const i=[...new Set(null==e?void 0:e.split("+"))];return t&&i.filter((e=>e in t))},D=(e,t)=>{if(!t||!e)return"";return`${`https://${h.KU}`}/advertiser/${e}/billing/${`?campaign_id=${t.campaign_id}&objective_type=CLICKTHROUGH&is_quick_promote=true`}`},k=(e,t)=>{if(!e)return"";const{ad_group_id:i=""}=e,n=(0,l.default)("adgroup",t,{id:i,showAllEntities:!0});return(0,m.Z)({advertiser:null,isAdsSite:!1,isAnalyticsSite:!1,isTrendsSite:!1,baseUrl:n,adsUrl:null,isQuickPromote:!0})},z=e=>({hasValidBusinessInfo:e.hasBusinessAddress||e.hasBusinessInfo,hasValidBillingInfo:e.hasValidBillingProfile||e.hasBillingInfo}),O=e=>{const{pin:t,productGroup:i,country:n,onSaveSuccess:o,onSaveFailed:s,quickPromoteFormValues:r,advertiserId:l}=e,c=t?`/ads/v4/advertisers/${l}/pins/${(null==t?void 0:t.id)||""}/quick_promote/`:`/ads/v4/advertisers/${l}/product_group/${(null==i?void 0:i.id)||""}/quick_promote/`,u=t?"pin":"product_group";(0,d.Z)({url:c,method:"POST",data:a({values:r,pin:t,productGroup:i,country:n})}).then((({resource_response:e})=>{null!=e&&e.data&&o(e.data)})).catch((e=>{const{httpStatus:t,message_detail:i}=e;let n;n=i?{area:401===t?u:"modal",message:i}:{area:"modal"},s(n)}))},R=e=>{const{hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:n,hasBusinessInfo:o,serverErrorArea:s,stepIndex:a,isQuickPromotePage:l=!1}=e,{hasValidBusinessInfo:d,hasValidBillingInfo:c}=z({hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:n,hasBusinessInfo:o});let u=[void 0,null].includes(a)?0:a+1;return E(a)===r.hf&&(s?u="modal"===s?A(r.Gl.ERROR_MODAL):a:d&&c?u=A(r.Gl.SUCCESS_MODAL):d?u=A(r.Gl.BILLING_FORM):l||(u=A(r.Gl.BUSINESS_FORM))),u>r.vX.length-1?void 0:u},L=e=>{let t=r.Pq.WIDE;return e<870?t=r.Pq.NARROW:e>=870&&e<=1275&&(t=r.Pq.MEDIUM),t},M=(e,t,i)=>{var o,s;const{crossSite:r}=(0,_.mB)(e.search);if(null!==(o=null===(s=(0,n.Z)())||void 0===s?void 0:s.experimentsClient.checkExperiment("advertiser_growth_close_modal_window_without_history").anyEnabled)&&void 0!==o&&o&&t.length<=1)window.close();else if(window){const e=i.find((e=>e&&e.location&&e.location.pathname.includes("pin-builder"))),n=Boolean(e)?3:1;[...Array(n)].forEach((()=>r?window.history.back():t.goBack()))}else t.goBack()},B=e=>{switch(e){case 4:return g.YD;case 3:return h.KU;case 0:return g.Vi;default:return null}},N=(e,t,i)=>{(0,u.Nh)(`quickPromote.${t}.${e}`,JSON.stringify({pin:i.pin,dailyBudget:i.dailyBudget,destinationUrl:i.destinationUrl,duration:i.duration,locale:i.locale,name:i.name,interests:i.interests,ages:i.ages,genders:i.genders,adType:i.adType}))},Z=(e,t)=>{if(e&&t){var i;const n=JSON.parse(null!==(i=(0,u.qn)(`quickPromote.${t}.${e}`))&&void 0!==i?i:"{}");return(0,c.Z)(n)?null:n}return null},F=(e,t)=>{e&&t&&(0,u.L_)(`quickPromote.${t}.${e}`)};function U(e,t){const i=[...e],n=i.indexOf(t);return n>-1?i.splice(n,1):i.push(t),i}async function V(e,t,i){const n=e.filter((e=>e.filter_v2));i(t((await Promise.all(n.map((async e=>{try{var t;(0,p.My)("client.partner.shoppingAds.getProductsForCatalog.success");return{productGroup:e,pins:(null===(t=(await(0,d.Z)({url:`/v3/catalogs/product_groups/products/${e.merchant_id}/${e.feed_profile_id}/`,enabledRouteRefresh:!0,data:{filters:JSON.stringify(e.filter_v2)},field_sets:(0,f.G6)()})).resource_response)||void 0===t?void 0:t.data)||[]}}catch(i){return(0,p.My)("client.partner.shoppingAds.getProductsForCatalog.error"),[]}})))).filter((e=>e.productGroup&&Array.isArray(e.pins)&&e.pins.length>0)).map((e=>({productPin:Array.isArray(e.pins)?e.pins[0]:[],productGroup:Array.isArray(e)?null:e.productGroup})))))}async function H(e,t,i,n){if(!t)return;n(i(await Promise.all(t.map((async t=>{try{var i;const n=(null===(i=(await(0,d.Z)({url:`/ads/v4/advertisers/${e}/product_groups/catalogs/`,enabledRouteRefresh:!0,data:{feed_profile_id:t.id}})).resource_response)||void 0===i?void 0:i.data)||[];return{feed:t,productGroups:n.filter((e=>e.product_count&&e.product_count>0))}}catch(n){return[]}})))))}},719286:(e,t,i)=>{i.d(t,{Jg:()=>m,gf:()=>r,i7:()=>_,in:()=>u,j:()=>g,jz:()=>l,pD:()=>a,p_:()=>s,s5:()=>c,tz:()=>h,uE:()=>p,zY:()=>d});const n="iphone",o="android_mobile",s="ipad",r="android_tablet",a="web_mobile",l=["web",a,n,s,o,r],d=["android_mobile","android_tablet","iphone","ipad","web"],c=["android_mobile","android_tablet","iphone","ipad","web"],u=["android_mobile","iphone"],h=["android_mobile","android_tablet","iphone","ipad"],p=[n,o],_=[n,o],g=[n,o,s,r],m=[n,o]},522679:(e,t,i)=>{i.d(t,{N:()=>h,t:()=>g});var n=i(667294),o=i(214494),s=i(78714),r=i(904431),a=i(924196),l=i(425288),d=i(773285),c=i(785893);const{Provider:u,useHook:h}=(0,l.Z)("LinkedAccount"),p=e=>{(0,s.Z)(e?`/?next=${encodeURIComponent(e)}`:"/")},_=e=>{r.Z.reportFacebookConversion(a.Z.FACEBOOK_ADVERTISER_ID,"CompleteRegistration",{content_name:"/business/convert"}),r.Z.reportPinterestConversion("track","lead",{lead_type:"Self-serve"}),r.Z.reportLinkedInConversion(a.Z.LINKEDIN_PARTNER_ID,a.Z.LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT),r.Z.reportGoogleConversion(a.Z.GOOGLE_ADWORDS_ID,a.Z.GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT,"/",e)};function g({children:e}){const[t,i]=(0,n.useState)(!1),[s,r]=(0,n.useState)([]),{checkExperiment:a}=(0,d.F)(),l=a("ppm_p_gate").anyEnabled,h=(0,n.useCallback)((({businessName:e,thirdPartyApps:t,thirdPartyMarketingTrackingEnabled:n,nextUrl:s})=>{i(!0);const r={business_name:e,third_party_apps:t};return o.Z.create("BusinessOwnershipResource",r).callCreate({showError:!0}).then((()=>{n&&_(l),i(!1),p(s)})).catch((e=>(i(!1),Promise.reject({error:e}))))}),[i,l]),g=(0,n.useMemo)((()=>({createLinkedBusinessAccount:h,linkedBusinessCreationLoading:t,userAccounts:s,userAccountsRetrieved:r})),[h,t,r,s]);return(0,c.jsx)(u,{value:g,children:e})}},965900:(e,t,i)=>{i.d(t,{g:()=>p,I:()=>h});var n=i(667294),o=i(425288),s=i(567450),r=i(150361),a=i.n(r);const l={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},d=(e=l,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:s,inVideoGridAutoplayExp:r}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:d,promotedVideosAutoplaying:c,organicVideosAutoplaying:u}=l,h=a()(c),p=a()(u);return!o&&d&&r?e:(o?h[n]={pinId:n,currentTime:s,paused:!1}:p[n]={pinId:n,currentTime:s,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:o?d:n,promotedVideosAutoplaying:h,organicVideosAutoplaying:p}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:s}=i,{videosAutoplaying:r}=e,{promotedVideosAutoplaying:l,organicVideosAutoplaying:d}=r,c=a()(l),u=a()(d);return o?c[n]={...c[n],paused:!0,currentTime:s}:u[n]={...u[n],paused:!0,currentTime:s},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:c,organicVideosAutoplaying:u}}}return"SET_APP_FOCUS_STATE"===t.type?{...e,appInFocus:t.payload}:"SET_VIEWPORT_SIZE"===t.type?{...e,viewportSize:t.payload}:"SET_FOOTER_VISIBILITY_STATE"===t.type?{...e,footerPlusButtonVisible:t.payload}:e};var c=i(785893);const{Provider:u,useHook:h}=(0,o.Z)("AppUI");function p({children:e}){const[t,i]=(0,n.useReducer)(d,l),o=(0,n.useCallback)((e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e})),[]),r=(0,n.useCallback)((e=>i({type:"SET_APP_FOCUS_STATE",payload:e})),[]),a=(0,n.useCallback)((e=>i({type:"SET_CURRENT_VIDEO",payload:e})),[]),h=(0,n.useCallback)((e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e})),[]),p=(0,n.useCallback)((e=>i({type:"SET_IS_AUTOPLAY",payload:e})),[]),_=(0,n.useCallback)((e=>i({type:"SET_VIEWPORT_SIZE",payload:e})),[]),g=(0,n.useCallback)((e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e})),[]),m=(0,n.useMemo)((()=>({pauseAutoplay:o,setCurrentVideo:a,setFooterPlusButtonVisible:h,setIsAutoplay:p,setViewportSize:_,toggleTypeaheadOverlay:g,setAppFocusState:r,appUI:t})),[o,a,h,p,_,g,r,t]);return(0,n.useEffect)((()=>{s.Z.onSessionResume((()=>{r(!0)})).onSessionPause((()=>{r(!1)}))}),[r]),(0,c.jsx)(u,{value:m,children:e})}},225692:(e,t,i)=>{i.d(t,{X:()=>o,Z:()=>s});var n=i(667294);const o=120;function s(e,t=0,i=o){const[s,r]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)((()=>{if(!e){const e=setTimeout((()=>r("inactive")),i);return()=>{clearTimeout(e)}}if(t){const e=setTimeout((()=>r("active")),t);return()=>{clearTimeout(e)}}r("active")}),[e]),s}},697247:(e,t,i)=>{i.d(t,{$:()=>s,B:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("SurfaceContext",{surface:"Unknown"})},841509:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s({children:e,additionalStyles:t={}}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",children:e})}},525199:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(225692),s=i(785893);function r(e,t){return{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function a({children:e,fadeInDuration:t=0,fadeOutDuration:i=o.X,visibility:a}){return"none"!==a&&e?(0,s.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:r(t,i)[a]},children:e}):null}},774763:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(667294),o=i(702664),s=i(883119),r=i(499128),a=i(898781),l=i(773285),d=i(343341),c=i(19121),u=i(717615),h=i(231947),p=i(985913),_=i(121151),g=i(349700),m=i(780280),f=i(785893);function x({boardName:e,collaboratorName:t,onCancelTransferRequest:i,onDismiss:n}){const o=(0,a.ZP)(),r=(0,m.B)();return(0,f.jsx)(_.ZP,{accessibilityModalLabel:o.bt("Board ownership transfer modal", "Board ownership transfer modal", "boardCollabOwnershipTransferModal.accessibilityModalLabel", undefined, true),heading:(0,f.jsxs)(s.xu,{paddingY:8,position:"relative",children:[(0,f.jsx)(s.X6,{align:"center",size:"500",children:o.bt("Collaborators", "Collaborators", "boardCollabOwnershipTransferModal.heading", undefined, true)}),(0,f.jsx)(s.xu,{position:"absolute",top:!0,left:r.isRTL,right:!r.isRTL,paddingY:8,paddingX:6,children:(0,f.jsx)(s.hU,{accessibilityLabel:o.bt("Close", "Close", "boardCollabOwnershipTransferModal.iconAccessibilityLabel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:n,size:"md"})})]}),footer:(0,f.jsxs)(s.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,f.jsx)(s.iP,{fullWidth:!1,onTap:i,children:(0,f.jsx)(s.xv,{weight:"bold",children:o.bt("Cancel request", "Cancel request", "boardCollabOwnershipTransferModal.cancelRequest", undefined, true)})}),(0,f.jsx)(s.zx,{color:"red",onClick:n,size:"lg",text:o.bt("OK", "Got it", "boardCollabOwnershipTransferModal.confirmationButton", undefined, true)})]}),onDismiss:n,children:(0,f.jsx)(s.xu,{paddingX:8,children:(0,f.jsx)(s.xv,{align:"center",children:(0,g.nk)(o.bt("We sent {{ collaboratorName }} your request asking them to own {{ boardName }}. When they accept, you can still add Pins, but you won’t be able to manage collaborators or change the name, cover photo or description of this board.", "We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pins—but you won’t be able to manage collaborators, change the name, cover photo, or description of this board.", "boardCollabOwnershipTransferModal.descriptionText", undefined, true),{collaboratorName:t,boardName:(0,f.jsx)(s.xv,{inline:!0,weight:"bold",children:e})})})})})}var b=i(150963),y=i(781165);const v=1e3;function P({boardId:e,collaboratorId:t,collaboratorName:i,isAcceptedCollaborator:r,onDelete:l}){const d=(0,o.useDispatch)(),c=(0,a.ZP)(),u=(0,n.useRef)(null),[h,p]=(0,n.useState)(!1),[_,g]=(0,n.useState)(!1),{boardName:m,pendingOwnershipTransfer:P}=(0,b.Z)(),w=()=>{d((0,y.xx)(e,t)),p(!1)},I=function({i18n:e,isAcceptedCollaborator:t,onCancelTransferRequest:i,onDelete:n,onRequestTransfer:o,showCancelRequestOption:s,showRequestTransferOption:r}){const a=[{onSelect:n,option:{value:"Remove from board",label:e.bt("Remove from board", "Remove from board", "getCollaboratorDropdownItems.removeText", undefined, true)}}];return t&&(s&&a.push({onSelect:i,option:{value:"Cancel request",label:e.bt("Cancel request", "Cancel request", "getCollaboratorDropdownItems.cancelText", undefined, true)}}),r&&a.push({onSelect:o,option:{value:"Request as board owner",label:e.bt("Request as board owner", "Request as board owner", "getCollaboratorDropdownItems.requestText", undefined, true)}})),a}({i18n:c,isAcceptedCollaborator:r,onCancelTransferRequest:w,onDelete:l,onRequestTransfer:()=>{(async()=>{p(!1),await d((0,y.Cf)(e,t)),g(!0)})()},showCancelRequestOption:P===t,showRequestTransferOption:!P});return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsxs)(s.kC,{justifyContent:"center",children:[(0,f.jsx)(s.hU,{accessibilityLabel:c.bt("Collaborator options", "Collaborator options", "boardCollabInviteOverflowButton.accessibilityLabel", undefined, true),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>p(!h),ref:u,selected:h,size:"md"}),h&&(0,f.jsx)(s.Lt,{anchor:u.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>p(!1),zIndex:new s.Ry(v),children:(0,f.jsx)(s.Lt.Section,{label:c.bt("Options", "Options", "boardCollabInviteOverflowButton.dropdownSection", undefined, true),children:I.map((e=>(0,f.jsx)(s.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),_&&(0,f.jsx)(x,{boardName:m,collaboratorName:i,onCancelTransferRequest:()=>{w(),g(!1)},onDismiss:()=>{g(!1)}})]})}var w=i(29459);function I({actionsDisabled:e,invite:t,invitedUser:i,isDim:n,onApprove:o,onDelete:r}){const d=(0,a.ZP)(),u=(0,c.Z)(),{access:h,board:_,status:g,invited_by_user:m}=t,{pendingOwnershipTransfer:x,viewerIsOwner:y}=(0,b.Z)(),v=u.isAuth&&i.id===u.id,I=u.isAuth&&m.id===u.id,A=i.id===m.id,E="accepted"===g,C=h.includes("approve"),S=h.includes("delete"),j=d.bt("Approve", "Approve", "[button] approve another pinner's request to join the board as a collaborator", undefined, true),T=((e,t,i)=>e?d.bt("Leave", "Leave", "[button] for a collaborator to leave a group board", undefined, true):t&&!i?d.bt("Decline", "Decline", "[button] decline another pinner's request to join board as a collaborator", undefined, true):d.bt("Remove", "Remove", "[button] remove a collaborator from the board]", undefined, true))(v,A,E),D=S&&!C,k=S&&C,z=`/${i.username}/`,{checkExperiment:O}=(0,l.F)(),R=y&&O("web_board_ownership_transfer").anyEnabled,L=R?(0,f.jsx)(P,{boardId:_.id,collaboratorId:i.id,collaboratorName:i.full_name,onDelete:r||(()=>{}),isAcceptedCollaborator:E}):(0,f.jsx)(s.zx,{disabled:e,onClick:r,text:T,size:"lg"}),M=x===i.id,B=R&&(void 0!==n?n:!E);return(0,f.jsxs)(s.xu,{children:[(0,f.jsx)(w.Z,{imageUrl:i.image_medium_url||"",name:i.full_name,title:i.full_name,subtitle:((e,i,n,o,s)=>{const r=t.invited_by_user.full_name;let a;return a=i?d.bt("Invitation pending", "Invitation pending", "boardCollabInviteCell.pendingInvitationText", undefined, true):n?d.bt("That's you", "That's you", "subtext for current user who requested to join this board", undefined, true):o?d.bt("Invited by you", "Invited by you", "subtext for a pending collaborator who was invited by the current viewer", undefined, true):s?d.bt("Requested to join", "Requested to join", "The subtext that identifies a pending collaborator has personally requested to join the board", undefined, true):(0,p.Z)(d.bt("Invited by {{ user_full_name }}", "Invited by {{ user_full_name }}", "The subtext that identifies a pending collaborator who was invited to collaborate on the board", undefined, true),{user_full_name:r}),e&&(a=a.concat(d.bt(" · Ownership pending", " · Ownership pending", "boardCollabInviteCell.pendingOwnershipText", undefined, true))),a})(M,B,v,I,A),linkURL:z,isDim:!R&&(void 0!==n?n:!E),accessory:D&&L}),k&&(0,f.jsxs)(s.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,f.jsx)(s.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,f.jsx)(s.zx,{fullWidth:!0,disabled:e,onClick:r,text:T,size:"lg"})}),(0,f.jsx)(s.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,f.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:e,onClick:o,text:j,size:"lg"})})]})]})}function A(e){const t=(0,a.ZP)(),{onCancel:i,onRemove:n,useGestaltModal:o}=e,r=t.bt("Are you sure you want to leave this group board and remove it from your profile?", "Are you sure you want to leave this group board and remove it from your profile?", " - ", undefined, true),l=o?s.u_:_.ZP;return(0,f.jsx)(l,{accessibilityModalLabel:t.bt("Leave board?", "Leave board?", " - ", undefined, true),heading:t.bt("Leave board?", "Leave board?", " - ", undefined, true),onDismiss:i,size:"sm",footer:(0,f.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsx)(s.zx,{onClick:i,text:t.bt("Cancel", "Cancel", " - ", undefined, true)})}),(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsx)(s.zx,{color:"red",onClick:n,text:t.bt("Leave", "Leave", " - ", undefined, true)})})]}),children:(0,f.jsx)(s.xu,{padding:5,children:(0,f.jsx)(s.xv,{children:r})})})}class E extends n.Component{constructor(...e){var t,i,n;super(...e),n={shouldBlock:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}getBlockDescription(e,t){return"declineRequest"===e?t?(0,g.nk)(this.props.i18n.bt("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.", "This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.", "decline another pinner's request to join board as a collaborator and block them", undefined, true),{invited_user_first_name:t}):this.props.i18n.bt("This will decline this person from joining this board and block them from subsequent collaboration requests.", "This will decline this person from joining this board and block them from subsequent collaboration requests.", "message that explains consequences of declining a request to join board as a collaborator", undefined, true):t?(0,g.nk)(this.props.i18n.bt("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited and all of their Pins.", "This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins.", " - ", undefined, true),{invited_user_first_name:t}):this.props.i18n.bt("This will remove the person, people they invited and all of their Pins.", "This will remove this person, people they invited, and all their Pins.", "message that explains consequences of removing a collaborator", undefined, true)}render(){const{removeType:e,firstName:t,fullName:i,onCancel:o,onRemove:r,onRemoveAndBlock:a,useGestaltModal:l}=this.props,d="declineRequest"===e?(0,g.nk)(this.props.i18n.bt("Decline {{ invited_user_name }}?", "Decline {{ invited_user_name }}?", "[button] to decline a pinner's request to join a board as a collaborator", undefined, true),{invited_user_name:i}).join(""):(0,g.nk)(this.props.i18n.bt("Remove {{ invited_user_name }}?", "Remove {{ invited_user_name }}?", "[button] to remove a pinner as a collaborator from a group board", undefined, true),{invited_user_name:i}).join(""),c=this.props.i18n.bt("This will prevent them from saving Pins to this board. You can also:", "This will keep them from saving Pins to this board. You can also:", "decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.", undefined, true),u=this.getBlockDescription(e,t),h=this.state.shouldBlock?this.props.i18n.bt("Block", "Block", "block another pinner after denying their request to collaborate on a board", undefined, true):this.props.i18n.bt("Remove", "Remove", "decline another pinner's request to collaborate on a board", undefined, true),p=(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(s.xu,{padding:5,children:(0,f.jsx)(s.xv,{children:c})}),(0,f.jsx)(s.iz,{}),(0,f.jsxs)(s.xu,{padding:5,display:"flex",children:[(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsx)(s.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsxs)(s.__,{htmlFor:"banUser",children:[(0,f.jsx)(s.xv,{weight:"bold",children:(0,g.nk)(this.props.i18n.bt("Block {{ name }}", "Block {{ name }}", " - ", undefined, true),{name:t||""})}),(0,f.jsx)(s.xv,{size:"200",children:u})]})})]})]}),m=l?s.u_:_.ZP;return(0,f.jsx)(m,{accessibilityModalLabel:d,heading:d,onDismiss:o,size:"sm",footer:(0,f.jsxs)(s.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsx)(s.zx,{onClick:o,text:this.props.i18n.bt("Cancel", "Cancel", " - ", undefined, true)})}),(0,f.jsx)(s.xu,{paddingX:1,children:(0,f.jsx)(s.zx,{color:"red",onClick:this.state.shouldBlock?a:r,text:h})})]}),children:p})}}function C(e){const t=(0,a.ZP)();return(0,f.jsx)(E,{...e,i18n:t})}var S=i(977558);function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends n.Component{constructor(...e){super(...e),j(this,"state",{currentModal:null,loading:!1}),j(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,t=this.props.i18n.bt("Collaborator removed", "Collaborator removed", "BoardCollabInviteCellContainer.toast", undefined, true);e.showOneToast((({hideToast:e})=>(0,f.jsx)(r.ZP,{duration:3e3,onHide:e,text:t})))})),j(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),j(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),this.props.approveBoardCollabInviteGraphQL?this.props.approveBoardCollabInviteGraphQL(this.props.graphQLParams.boardId,this.props.graphQLParams.invitedUserId):e().then(t).finally((()=>{this.setState({loading:!1})}))})),j(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:i,onInviteDidUpdate:n,orbacSubjectId:o}=this.props,{isViewerInvitedUser:s}=this;this.setState({currentModal:null,loading:!0}),t(s,e,o).then((()=>{n(),this.showRemoveSuccessToast(),s&&i()})).catch((()=>{})).finally((()=>{this.setState({loading:!1})}))})),j(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),j(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),j(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invitedUser:t}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invitedUser:e,invite:{invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invitedUser:e,useGestaltModal:t=!1}=this.props,{currentModal:i}=this.state;return"delete"===i?this.isViewerInvitedUser?(0,f.jsx)(s.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:S.fe+1}},children:(0,f.jsx)(A,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})}):(0,f.jsx)(s.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:S.fe+1}},children:(0,f.jsx)(C,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})}):null}render(){const{invite:e,invitedUser:t,isDim:i}=this.props,{loading:n}=this.state;return(0,f.jsxs)(s.xu,{children:[(0,f.jsx)(I,{invite:e,invitedUser:t,isDim:i&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:n}),this.renderCurrentModal()]})}}function D(e){const{invite:t,invitedUser:{id:i},invite:{board:{id:n}}}=e,s=(0,a.ZP)(),r=(0,o.useDispatch)(),p=(0,c.Z)(),_=(0,u.Z)(),{checkExperiment:g}=(0,l.F)(),{anyEnabled:m}=g("web_m10n_business_access_orbac_ga"),x=m?(0,h.lJ)(p,_):void 0,b=g("graphql_migration_board_sgrowth").anyEnabled,v=(0,y.h6)(),P={boardId:n,invitedUserId:i},w=(0,y.yC)();return(0,f.jsx)(T,{...e,approveBoardCollabInvite:()=>r((0,y.q1)(n,i)),approveBoardCollabInviteGraphQL:b?v:void 0,graphQLParams:P,deleteBoardCollabInvite:(e,i)=>r(b?w(t,e,i):(0,y.Jn)(t,e,i,x)),i18n:s,toastManagerContext:(0,d.F9)(),viewer:(0,c.Z)(),orbacSubjectId:x})}},860426:(e,t,i)=>{i.d(t,{ZP:()=>D,zC:()=>T,DK:()=>j});var n,o=i(667294),s=i(167912),r=i(883119),a=i(172071),l=i(407043),d=i(116303),c=i(898781),u=i(773285),h=i(995228),p=i(730447),_=i(936776),g=i(19121),m=i(717615),f=i(231947),x=i(784590),b=i(845772),y=i(785893);function v({boardId:e,invitedUserId:t,isInvited:i,onClick:n,buttonSize:s="sm"}){const a=(0,c.ZP)(),{anyEnabled:l}=(0,u.F)().checkExperiment("web_m10n_business_access_orbac_ga"),d=(0,b.Z)(),h=(0,x.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t,...l&&d?{orbac_subject_id:d}:{}}});(0,o.useEffect)((()=>{h.refresh()}),[]);const p={text:a.bt("Invite", "Invite", "[button] invite someone to collaborate on a board", undefined, true),color:"red",disabled:!1};return h.isFetching&&(p.text=a.bt("Loading", "Loading", "[button] disabled button status text when checking if the user has been invited", undefined, true),p.color="gray",p.disabled=!0),(i||h.isLoaded&&h.data)&&(p.text=a.bt("Invited", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true),p.color="gray",p.disabled=!0),(0,y.jsx)(r.zx,{fullWidth:!0,color:p.color,size:s,disabled:p.disabled,onClick:n,text:p.text})}function P({boardId:e,invitedUserId:t,isInvited:a,onClick:l,buttonSize:d="sm"}){var u,p;const _=(0,c.ZP)(),g=void 0!==n?n:n=i(873796),[m,f]=(0,o.useState)(null),x=(0,o.useCallback)((()=>{f((e=>{var t;return{fetchKey:(null!==(t=null==e?void 0:e.fetchKey)&&void 0!==t?t:0)+1,fetchPolicy:"network-only"}}))}),[]),b=(0,s.useLazyLoadQuery)(g,{boardId:e,userId:t},null!=m?m:{});(0,o.useEffect)((()=>{x()}),[x]);const v={text:_.bt("Invite", "Invite", "[button] invite someone to collaborate on a board", undefined, true),color:"red",disabled:!1};return(a||null!==(u=b.v3GetUserBoardInviteQuery)&&void 0!==u&&null!==(p=u.data)&&void 0!==p&&p.status)&&(v.text=_.bt("Invited", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true),v.color="gray",v.disabled=!0),(0,y.jsx)(h.Z,{children:(0,y.jsx)(r.zx,{fullWidth:!0,color:v.color,size:d,disabled:v.disabled,onClick:l,text:v.text})})}var w,I,A=i(29459),E=i(619415),C=i(781165);const S=364,j=()=>{const e=void 0!==w?w:w=i(830075),[t]=(0,s.useMutation)(e);return async(e,i,n)=>{const o={boardId:e,collaboratorIds:i,message:n||""};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}},T=()=>{const e=void 0!==I?I:I=i(611534),[t]=(0,s.useMutation)(e);return async(e,i,n)=>{const o={board:e,emails:i,message:n||""};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}};function D({boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:i,shareSuggestions:n}){const{logContextEvent:s}=(0,l.v)(),x=(0,c.ZP)(),{anyEnabled:b}=(0,u.F)().checkExperiment("web_m10n_business_access_orbac_ga"),w=(0,g.Z)(),I=(0,m.Z)(),D=b?(0,f.lJ)(w,I):"",[k,z]=(0,o.useState)(""),[O,R]=(0,o.useState)([]),[L,M]=(0,o.useState)({}),[B,N]=(0,o.useState)({}),{checkExperiment:Z}=(0,u.F)(),F=Z("graphql_migration_board_sgrowth").anyEnabled,U=T(),V=j(),H=F?U:C.OA,G=F?V:C.pS,W=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||x.bt("on Pinterest", "On Pinterest", "is a user of Pinterest", undefined, true);case"emailcontact":case"email_share_suggestion":return e.email||x.bt("Email contact", "Email Contact", "invited user has an email", undefined, true)}return""},$=(n,o)=>{const{id:r,full_name:a,debug_reason:l}=n;let d="";l&&(d=l.reason),((t,i)=>{s({event_type:101,component:13029,element:k?1044:1039,object_id_str:e,view_type:5,view_parameter:3059,aux_data:{entered_query:k,result_index:t+1,rs:i}})})(o,d);const c={...L};c[r]=!0,M(c),G(e,[r],D).then((()=>{i(a,!0)})).catch((e=>{i(a,!1,e);const t={...L};t[r]=!1,M(t)})).finally(t)},q=e=>!!L[e];let X=n;return k&&(X=O),(0,y.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,y.jsx)(r.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,y.jsx)(r.xu,{flex:"grow",children:(0,y.jsx)(p.Z,{onTypeaheadSuggestionsChange:e=>{a.Z.increment("web_contacts_search",1,{source:"board_invite"}),R(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25,...D?{orbac_subject_id:D}:Object.freeze({})},value:k,children:(0,y.jsx)(r.xu,{paddingX:4,children:(0,y.jsx)(r.Um,{accessibilityLabel:x.bt("Search for a name or email address", "Search for a name or email", "accessible label for contact search input field", undefined, true),id:"search",onChange:({value:e})=>{z(e),s({event_type:4113,component:13029,element:1043,view_parameter:3059,aux_data:{entered_query:e}})},placeholder:x.bt("Search by name or email address", "Search by name or email", "search input field prompt for finding contacts", undefined, true),size:"lg",value:k})})})})}),(0,y.jsxs)(r.xu,{overflow:"scrollY",maxHeight:50+S,children:[k&&((0,_.Z)(k)?(0,y.jsx)(A.Z,{name:k,title:k,accessory:(Y=!!B[k],K=()=>{const n=k;if(!(0,_.Z)(n))return;const o={...B};o[n]=!0,N(o),H(e,[n],D).then((()=>{i(n,!0),z("")})).catch((e=>{i(n,!1,e);const t={...B};t[n]=!1,N(t)})).finally(t)},J="lg",(0,y.jsx)(r.zx,{fullWidth:!0,color:Y?"gray":"red",disabled:!!Y,size:J,onClick:K,text:Y?x.bt("Invited", "Invited", "[button] disabled button status text when a user has been invited to a board", undefined, true):x.bt("Invite", "Invite", "[button] invite someone to collaborate on a board", undefined, true)}))}):(0,y.jsx)(E.Z,{iconNode:(0,y.jsx)(d.Z,{name:k,size:"md"}),title:k,subtitle:x.bt("Keep typing!", "Keep typing!", "boardCollabInviterForm.label", undefined, true)})),X.map(((t,i)=>{const n=t.username?`/${t.username}/`:null;return(0,y.jsx)(r.xu,{children:(0,y.jsx)(A.Z,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:W(t),accessory:F?(0,y.jsx)(h.Z,{children:(0,y.jsx)(P,{boardId:e,invitedUserId:t.id,isInvited:q(t.id),onClick:()=>$(t,i),buttonSize:"lg"})}):(0,y.jsx)(v,{boardId:e,invitedUserId:t.id,isInvited:q(t.id),onClick:()=>$(t,i),buttonSize:"lg"}),linkURL:n})},i)}))]})]});var Y,K,J}},741:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(883119),s=i(898781),r=i(349700),a=i(773285),l=i(784590),d=i(845772),c=i(774763),u=i(29459),h=i(150963),p=i(147836),_=i(785893);function g({fetchMore:e,invites:t,isAtEnd:i,isFetching:n,onBoardLeave:r,refreshData:a,renderInvite:l,scroll:d}){const c=(0,s.ZP)();return(0,_.jsxs)(o.xu,{children:[d&&(0,_.jsx)(p.Z,{scrollBuffer:3*d.container.clientHeight,scrollHeight:d.container.scrollHeight,scrollTop:d.top,isAtEnd:i,isFetching:n,fetchMore:e}),t.map(((e,t)=>e&&e.invited_user&&e.invited_user.id?(0,_.jsx)(o.xu,{children:l(e,r,a)},t):null)),n&&!i&&(0,_.jsx)(o.$j,{accessibilityLabel:c.bt("loading board invitations", "loading board invites", "accessibility label for board collaborator invites loading spinner", undefined, true),show:!0})]})}var m=i(425480);class f extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refresh(),t.refresh()},(i="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}shouldComponentUpdate(e){const{invites:{data:t},pendingOwnershipTransfer:i}=e,{invites:{data:n},pendingOwnershipTransfer:o}=this.props;return!(n&&!(o!==i))||!!t&&n.length!==t.length}render(){var e,t;const{board:i,invites:s,invitesPendingApproval:a,scrollInfo:l,onBoardLeave:d,onModalOpen:h,pendingOwnershipTransfer:p,renderInvite:f}=this.props,{full_name:x,image_medium_url:b,username:y}=i.owner,v=null===(e=(s.data||[]).find((e=>{var t;return(null===(t=e.invited_user)||void 0===t?void 0:t.id)===p})))||void 0===e||null===(t=e.invited_user)||void 0===t?void 0:t.full_name,P=p&&v?(0,r.nk)(this.props.i18n.bt("Asked {{ collaboratorName }} to change to board owner", "Requested {{ collaboratorName }} to change to board owner", "boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle", undefined, true),{collaboratorName:v}).join(""):this.props.i18n.bt("Owner of this board", "Owner of this board", "boardInviteSheet.CollaboratorList.boardOwner.subtitle", undefined, true);return(0,_.jsx)(n.Fragment,{children:s.isLoaded||a.isLoaded?(0,_.jsx)(m.Z,{fetchMore:s.fetchMore,children:({onScroll:e,setRef:t})=>(0,_.jsxs)(o.xu,{width:"100%",onScroll:e,ref:t,children:[(0,_.jsx)(g,{fetchMore:a.fetchMore,invites:a.data||[],isAtEnd:a.isAtEnd,isFetching:a.isFetching,onBoardLeave:d,refreshData:this.handleInvitesDidUpdate,scroll:l,renderInvite:f}),(a.data||[]).length>0?(0,_.jsx)(o.xu,{paddingY:3,children:(0,_.jsx)(o.iz,{})}):null,(0,_.jsxs)(o.xu,{paddingY:1,children:[(0,_.jsx)(u.Z,{imageUrl:null!=b?b:"",linkURL:`/${y}/`,name:null!=x?x:"",subtitle:P,title:null!=x?x:""}),(s.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,_.jsx)(c.Z,{invite:e,invitedUser:e.invited_user,onBoardLeave:d,onModalOpen:h,onInviteDidUpdate:s.refresh},e.invited_user.id):null))]})]})}):(0,_.jsx)(o.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Loading", "Loading", "Loading state for showing board collaborators", undefined, true)})})}}function x(e){const t=(0,s.ZP)(),{pendingOwnershipTransfer:i}=(0,h.Z)(),{checkExperiment:n}=(0,a.F)(),{anyEnabled:o}=n("web_m10n_business_access_orbac_ga"),r=(0,d.Z)(),c=(0,l.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1,...o&&r?{orbac_subject_id:r}:{}}}),u=(0,l.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1,...o&&r?{orbac_subject_id:r}:{}}});return(0,_.jsx)(f,{...e,invites:c,invitesPendingApproval:u,i18n:t,pendingOwnershipTransfer:i})}},29459:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294),o=i(883119),s=i(116303),r=i(149230),a=i(785893);function l(e){const{imageUrl:t,name:i,title:l,subtitle:d,accessory:c,linkURL:u,isDim:h}=e,p={__style:{opacity:h?.5:1}},_=(0,r.Z)({url:null!=u?u:""})?"nofollow":"none";return(0,a.jsx)(n.Fragment,{children:i&&l&&(0,a.jsxs)(o.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,a.jsx)(o.xu,{marginEnd:2,dangerouslySetInlineStyle:p,children:(0,a.jsx)(o.iP,{role:"link",rel:_,href:u||"",rounding:"circle",children:(0,a.jsx)(s.Z,{outline:!0,size:"md",name:i,src:t})})}),(0,a.jsxs)(o.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:p,children:[(0,a.jsx)(o.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:(0,a.jsx)(o.rU,{rel:_,href:u||"",children:l})}),(0,a.jsx)(o.xv,{lineClamp:1,size:"100",color:"subtle",children:d})]}),c&&(0,a.jsx)(o.xu,{marginStart:4,children:c})]})})}},619415:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{iconNode:t,title:i,subtitle:s,accessory:r,inContactsSearchform:a}=e;return(0,o.jsxs)(n.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,o.jsx)(n.xu,{marginEnd:a?4:2,children:t}),(0,o.jsxs)(n.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,o.jsx)(n.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:i}),(0,o.jsx)(n.xv,{lineClamp:1,size:"100",color:"subtle",children:s})]}),r&&(0,o.jsx)(n.xu,{children:r})]})}},150963:(e,t,i)=>{i.d(t,{Z:()=>d,k:()=>l});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("BoardOwnershipTransferContext");function l({boardName:e="",children:t,pendingOwnershipTransfer:i=null,viewerIsOwner:o}){const a=(0,n.useMemo)((()=>({boardName:e,pendingOwnershipTransfer:i,viewerIsOwner:o})),[e,i,o]);return(0,s.jsx)(r,{value:a,children:t})}const d=a},333206:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(667294),o=i(702664),s=i(883119),r=i(27255),a=i(898781),l=i(773285),d=i(19121),c=i(717615),u=i(231947),h=i(860426),p=i(959472),_=i(781165),g=i(109892),m=i(785893);function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class x extends n.Component{constructor(...e){super(...e),f(this,"state",{selectedCollaborators:[]}),f(this,"handleSubmit",(e=>{const{advertiserId:t,createBoard:i,onBoardCreate:n,viewer:o,orbacActingAs:s}=this.props,r=(0,u.lJ)(o,s),{name:a,description:l,privacy:d,collab_board_email:c,collaborator_invites_enabled:h}=e;return i({boardCreateOptions:{name:a,description:l,privacy:d,collab_board_email:c,collaborator_invites_enabled:h,...t?{advertiser_id:t}:{},...r?{orbac_subject_id:r}:Object.freeze({})}}).then((e=>{this.inviteSelectedColaborators(e.id),n(e)}))})),f(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,u.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}inviteSelectedColaborators(e){const t=this.state.selectedCollaborators.filter((({type:e})=>"email"===e));t.length>=1&&this.props.InviteEmails(e,t.map((({type:e})=>e)));const i=this.state.selectedCollaborators.filter((({type:e})=>e.startsWith("user")));i.length>=1&&this.props.InviteUsers(e,i.map((({id:e})=>e)))}render(){const{advertiserId:e,isAdAccountOwner:t,onClose:i,privacy:n,useModalWithNoLayer:o}=this.props;return(0,m.jsx)(p.Z,{board:{...this.emptyBoardData,privacy:t?n:r.Z.BoardPrivacy.PROTECTED},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:t,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,onClose:i,onSubmit:this.handleSubmit,submitText:this.props.i18n.bt("Create", "Create", " - ", undefined, true),useModalWithNoLayer:o,title:(0,m.jsx)(s.xu,{paddingY:8,width:"100%",children:(0,m.jsx)(s.X6,{align:"center",size:"500",children:this.props.i18n.bt("Create board", "Create board", "BoardCreate.BoardCreate", undefined, true)})})})}}function b(e){const t=(0,g.Z)(),i=(0,a.ZP)(),n=(0,d.Z)(),s=(0,o.useSelector)((({advertiser:e})=>e?e.id:void 0)),r=(0,c.Z)(),u=(0,o.useSelector)((({advertiser:e})=>!e||n.isAuth&&e.owner_user_id===n.id)),{checkExperiment:p}=(0,l.F)(),f=p("graphql_migration_board_sgrowth").anyEnabled,b=(0,h.zC)(),y=(0,h.DK)();return(0,m.jsx)(x,{...e,advertiserId:s,createBoard:t,dispatch:(0,o.useDispatch)(),isAdAccountOwner:u,viewer:n,i18n:i,orbacActingAs:r,InviteEmails:f?b:_.OA,InviteUsers:f?y:_.pS})}f(x,"defaultProps",{privacy:r.Z.BoardPrivacy.PUBLIC})},959472:(e,t,i)=>{i.d(t,{Z:()=>G});var n=i(667294),o=i(883119),s=i(27255),r=i(121151),a=i(898781),l=i(349700),d=i(773285),c=i(780280),u=i(995228),h=i(66699),p=i(343341),_=i(50286),g=i(19121),m=i(134906),f=i(526760),x=i(607989),b=i(785893);const y=({label:e,labelId:t})=>t?(0,b.jsx)(o.__,{htmlFor:t,children:(0,b.jsx)(o.xv,{size:"100",children:e})}):(0,b.jsx)(o.xv,{size:"100",children:e});function v(e){const{children:t,label:i,labelId:s}=e;return(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(o.xu,{marginBottom:2,children:(0,b.jsx)(y,{label:i,labelId:s})}),t]})}const P=138;function w({coverPin:e,handleShowBoardCoverEditModal:t}){const i=(0,a.ZP)(),[s,r]=(0,n.useState)(!1),{isRTL:l}=(0,c.B)();return(0,b.jsx)(v,{label:i.bt("Board cover", "Board cover", "BoardForm.BoardFormCoverButton", undefined, true),children:(0,b.jsx)(o.xu,{width:P,position:"relative",children:(0,b.jsx)(o.iP,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(o.zd,{height:P,rounding:4,width:P,children:(0,b.jsx)(o.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||P,naturalWidth:e.size&&e.size[0]||P,src:e.image_url})}),(0,b.jsx)(o.xu,{position:"absolute",left:l,right:!l,bottom:!0,padding:2,children:(0,b.jsx)(o.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:s?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,b.jsx)(o.JO,{accessibilityLabel:i.bt("Edit board cover", "Edit board cover", "BoardForm.BoardFormBoardCoverButton", undefined, true),icon:"edit",color:"default",size:16})})})]}):(0,b.jsx)(o.xu,{alignItems:"center",color:s?"darkWash":"secondary",display:"flex",height:P,justifyContent:"center",rounding:4,width:P,children:(0,b.jsx)(o.JO,{accessibilityLabel:i.bt("Add cover photo", "Add cover photo", "BoardForm.BoardFormCoverButton", undefined, true),color:"default",icon:"add",size:24})})})})})}function I({children:e,label:t,labelId:i,subtext:s}){return(0,b.jsx)(n.Fragment,{children:(0,b.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,b.jsx)(o.xu,{marginStart:2,children:(0,b.jsxs)(o.__,{htmlFor:i,children:[(0,b.jsx)(o.xv,{size:"300",weight:"bold",children:t}),s]})})]})})}function A({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:i}){const n=(0,a.ZP)();return t&&(0,b.jsx)(I,{label:n.bt("Email notifications", "Email notifications", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true),labelId:"emailNotificationsCheckbox",subtext:(0,b.jsx)(o.xv,{color:"subtle",size:"300",children:n.bt("Get an email when someone saves Pins to this board", "Get an email when someone saves Pins to this board", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true)}),children:(0,b.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(o.xu,{marginEnd:1,children:(0,b.jsx)(o.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:i})})})})}var E=i(948618),C=i(960278);function S({board:e,onCollaboratorInviteClick:t}){var i;const n=(0,a.ZP)(),s=(0,C.Z)({boardId:e.id,ownerName:null!==(i=e.owner.full_name)&&void 0!==i?i:"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),r=s.slice(0,3).map((e=>e.name));let d="";switch(s.length){case 3:d=(0,l.Wc)(`${n.bt("{{ first }}, {{ second }} and {{ last }}", "{{ first }}, {{ second }}, and {{ last }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars", undefined, true)}`,{first:`${r[0]}`,second:`${r[1]}`,last:`${r[2]}`});break;case 2:d=(0,l.Wc)(`${n.bt("{{ first }} and {{ second }}", "{{ first }} and {{ second }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars", undefined, true)}`,{first:`${r[0]}`,second:`${r[1]}`});break;default:d=r.join(", ")}const c=s.length>3?(0,l.Wc)(n.nbt(["Collaborators: {{ userNames }} and {{ leftCount }} more.", "Collaborators: {{ userNames }} and {{ leftCount }} more."], s.length - 3, "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree", true),{userNames:d,leftCount:""+(s.length-3)}):(0,l.Wc)(`${n.bt("Collaborators: {{ userNames }}.", "Collaborators: {{ userNames }}.", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree", undefined, true)}`,{userNames:d});return(0,b.jsxs)(o.kC,{alignItems:"center",justifyContent:"between",children:[(0,b.jsx)(o.HE,{accessibilityLabel:c,collaborators:s.map((({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e}))),size:"md"}),(0,b.jsx)(o.hU,{accessibilityLabel:n.bt("Invite collaborators", "Invite collaborators", "BoardEdit.BoardCollaboratorsAndInviteSection", undefined, true),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}function j({board:e,onCollaboratorInviteClick:t}){const i=(0,a.ZP)(),n=(0,b.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(o.xv,{size:"100",inline:!0,children:i.bt("Collaborators", "Collaborators", " - ", undefined, true)}),(0,b.jsx)(E.Z,{}),(0,b.jsx)(o.xv,{inline:!0,size:"100",weight:"bold",children:(0,b.jsx)(o.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",underline:"hover",children:i.bt("Learn more", "Learn more", " - ", undefined, true)})})]});return(0,b.jsx)(v,{label:n,labelId:"collaborators",children:(0,b.jsx)(S,{board:e,onCollaboratorInviteClick:t})})}function T({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:i}){const n=(0,a.ZP)();return t&&(0,b.jsx)(I,{label:n.bt("Let collaborators add people", "Let collaborators add people", "BoardForm.BoardFormCollaboratorsInviteToggle", undefined, true),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,b.jsx)(o.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:i})})}function D({description:e,descriptionValidatorErrors:t,onChange:i}){const n=(0,a.ZP)(),s="boardEditDescription";return(0,b.jsx)(v,{label:n.bt("Description", "Description", "BoardForm.BoardFormDescription", undefined, true),labelId:s,children:(0,b.jsx)(o.Kx,{errorMessage:t.join(", "),id:s,name:"description",onChange:i,placeholder:n.bt("What's your board about?", "What's your board about?", " - ", undefined, true),value:e})})}const k=({children:e})=>(0,b.jsx)(o.xu,{paddingX:8,role:"list",children:n.Children.map(e,((t,i)=>t&&(0,b.jsx)(o.xu,{role:"listitem",marginBottom:i===n.Children.count(e)-1?1:8,children:t},i)))});function z({name:e,nameValidatorErrors:t,onChange:i,disabled:n}){const s=(0,a.ZP)();return(0,b.jsx)(v,{label:s.bt("Name", "Name", "BoardForm.BoardFormTitleInput", undefined, true),labelId:"boardEditName",children:(0,b.jsx)(o.nv,{disabled:n,errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:i,placeholder:s.bt("E.g. \"Places to go\" or \"Recipes to make\"", "Like \"Places to Go\" or \"Recipes to Make\"", " - ", undefined, true),size:"lg",value:e})})}const O=({board:e,collabBoardEmail:t,collaboratorInvitesEnabled:i,coverPin:n,currentUserIsOwner:s,description:r,descriptionValidatorErrors:l,handleBoardLeave:d,hideCollaboratorsSection:c,isCollaborative:u,showCoverEdit:h,name:p,nameValidatorErrors:_,handleShowBoardCoverEditModal:g,handleChangeName:m,handleChangeDescription:f,handleShowCollaboratorsModal:x,handleChangeCollabBoardEmail:y,handleChangeCollaboratorInvitesEnabled:v})=>{const P=(0,a.ZP)();return(0,b.jsxs)(k,{children:[h&&(0,b.jsx)(w,{coverPin:n,handleShowBoardCoverEditModal:g}),(0,b.jsx)(z,{disabled:!0,name:p,nameValidatorErrors:_,onChange:m}),(0,b.jsx)(D,{description:r,descriptionValidatorErrors:l,onChange:f}),s&&!!d&&!c&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:x}),u&&(0,b.jsx)(o.xu,{marginBottom:-7,children:(0,b.jsx)(o.xv,{size:"100",children:P.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,b.jsx)(A,{hasCollabBoardEmail:t,isCollaborative:u,onCheckboxChange:y}),(0,b.jsx)(T,{collaboratorInvitesEnabled:i,isCollaborative:u,onCheckboxChange:v})]})};function R({isProtectedToggler:e,isToggleDisable:t,onChange:i,onCheckboxChange:r,privacy:l}){const c=(0,a.ZP)(),u=(0,g.Z)(),{checkExperiment:h}=(0,d.F)();if(u.isPrivateProfile&&h("web_hide_u16_board").anyEnabled)return(0,b.jsxs)(o.kC,{alignItems:"start",direction:"column",gap:2,children:[(0,b.jsx)(o.xv,{size:"100",children:c.bt("Private", "Private", "BoardForm.BoardFormSecretToggle.text", undefined, true)}),(0,b.jsx)(o.xv,{color:"subtle",size:"100",children:c.bt("This board will only be visible to you", "This board will only be visible to you", "BoardForm.BoardFormSecretToggle.subText", undefined, true)})]});if(!0===e)return(0,b.jsx)(I,{label:c.bt("Protected board (not listed on user's profile)", "Protected board (not listed on user's profile)", "BoardForm.BoardFormSecretToggle", undefined, true),labelId:"protected",children:(0,b.jsx)(o.xu,{paddingY:2,children:(0,b.jsx)(o.rs,{onChange:i,switched:l===s.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(l!==s.Z.BoardPrivacy.PROTECTED){const e=c.bt("Keep this board secret", "Keep this board secret", "BoardForm.BoardFormSecretToggle", undefined, true),i=(0,b.jsx)(n.Fragment,{children:(0,b.jsxs)(o.xv,{color:"subtle",size:"300",children:[c.bt("So only you and collaborators can see it.", "So only you and collaborators can see it.", "BoardForm.BoardFormSecretToggle", undefined, true)," ",(0,b.jsx)(o.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",underline:"hover",children:c.bt("Learn more", "Learn more", "BoardForm.BoardFormSecretToggle", undefined, true)})]})});return(0,b.jsx)(I,{label:e,labelId:"secret",subtext:i,children:(0,b.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(o.XZ,{checked:l===s.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:r,disabled:t})})})}return null}function L({allowHomefeedRecommendations:e,onCheckboxChange:t}){const i=(0,a.ZP)();return(0,b.jsx)(I,{label:i.bt("Personalisation", "Personalization", "BoardForm.BoardFormRecommendationToggle", undefined, true),labelId:"recommendation",subtext:(0,b.jsx)(o.xv,{color:"subtle",size:"300",children:i.bt("Show Pins inspired by this board in your home feed.", "Show Pins inspired by this board in your home feed.", "BoardForm.BoardFormRecommendationToggle", undefined, true)}),children:(0,b.jsx)(o.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}var M=i(902840);function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const N=(0,n.lazy)((()=>i.e(3613).then(i.bind(i,903613)))),Z=(e,t)=>(0,m.Gy)({max:e,maxErrorString:(0,h.Z)(t.bt("Please enter no more than {{ maxLength }} characters.", "Please enter no more than {{ maxLength }} characters.", "Validation error when a string is too long", undefined, true),{maxLength:e})}),F=e=>[Z(s.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],U=e=>[(0,m.aH)({message:e.bt("Don't forget to name your board!", "Don't forget to name your board!", " - ", undefined, true)}),Z(s.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],V=({condition:e,children:t})=>e?(0,b.jsx)(o.xu,{position:"absolute",zIndex:r.b7,children:t}):t;class H extends n.Component{constructor(e){super(e),B(this,"handleChangeName",(({value:e})=>{const t=(0,m.FU)(U(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})})),B(this,"handleChangeDescription",(({value:e})=>{const t=(0,m.FU)(F(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})})),B(this,"handleChangePrivacyToggle",(({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})})),B(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),B(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),B(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),B(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),B(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),B(this,"handleCheckboxChange",(e=>({event:t,checked:i})=>e({event:t,value:i}))),B(this,"handleSubmit",(e=>{const{onSubmit:t}=this.props,{collab_board_email:i,collaboratorInvitesEnabled:n,description:o,name:s,privacy:r,allowHomefeedRecommendations:a}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const l=s.trim(),d=o.trim();this.setState({submitting:!0,submitError:""}),t({name:l,collab_board_email:i,collaborator_invites_enabled:n,description:d,privacy:r,allow_homefeed_recommendations:a}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let t=this.props.i18n.bt("Something went wrong.", "Uh oh! Something went wrong.", " - ", undefined, true);if(e.message){const{message:i,message_detail:n}=e;t=n?`${i} ${n}`:i}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})}))})),B(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),B(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),B(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),B(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),B(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)}));const{board:{collab_board_email:t,collaborator_invites_enabled:i,description:n,name:o,pin_count:s,privacy:r,allow_homefeed_recommendations:a}}=e;this.state={collab_board_email:t,description:n,name:o,pin_count:s,privacy:r,allowHomefeedRecommendations:a,collaboratorInvitesEnabled:i,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:o,previousDescription:n,previousPrivacy:r}}static getDerivedStateFromProps(e,t){const i={};return e.board.name&&e.board.name!==t.previousName&&(i.previousName=e.board.name,i.nameValidatorErrors=(0,m.FU)(U(e.i18n),e.board.name)),e.board.description&&e.board.description!==t.previousDescription&&(i.previousDescription=e.board.description,i.descriptionValidatorErrors=(0,m.FU)(F(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==t.previousPrivacy&&(i.previousPrivacy=e.board.privacy),i}getFormFooter(){const{submitText:e}=this.props,{submitError:t}=this.state;return(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(o.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,b.jsx)(o.xu,{children:(0,b.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",children:(0,b.jsx)(o.xu,{height:48,children:(0,b.jsx)(o.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,b.jsx)(o.xu,{paddingX:1,"aria-live":"polite",tabIndex:"0",children:(0,b.jsx)(o.xv,{color:"error",children:t})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:i,submitting:n}=this.state;return!t||i.length>0||e.length>0||n}render(){const{board:e,board:{archived_by_me_at:t,cover_pin:i,id:s,is_collaborative:a},coverImageHeight:d,coverImageWidth:c,currentUserIsOwner:h,handleBoardLeave:p,hideCollaboratorsSection:_,isAdAccount:g,isAdAccountOwner:m,isDeletable:y,isDesktop:v,isEditable:P,isNameAndSecretView:I,isSoftDeletedBoardsEnabled:E,onClose:C,onDeleteButtonClick:S,requestContext:B,title:Z,useModalWithNoLayer:F}=this.props,{allowHomefeedRecommendations:U,collab_board_email:H,collaboratorInvitesEnabled:G,description:W,descriptionValidatorErrors:$,name:q,nameValidatorErrors:X,pin_count:Y,privacy:K,showBoardCoverEdit:J,showCollaboratorsModal:Q,showSecretConfirmation:ee}=this.state,te=P&&Y>0,ie=e.is_ads_only;let ne=(0,b.jsxs)(k,{children:[te&&(0,b.jsx)(w,{coverPin:i,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,b.jsx)(z,{disabled:ie,name:q,nameValidatorErrors:X,onChange:this.handleChangeName}),(0,b.jsx)(D,{description:W,descriptionValidatorErrors:$,onChange:this.handleChangeDescription}),h&&!!p&&!_&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,b.jsx)(o.xu,{marginBottom:-7,children:(0,b.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,b.jsx)(R,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:K}),!t&&(0,b.jsx)(L,{allowHomefeedRecommendations:U,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,b.jsx)(A,{hasCollabBoardEmail:H,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,b.jsx)(T,{collaboratorInvitesEnabled:G,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),y&&(0,b.jsxs)(o.xu,{marginTop:-6,paddingY:4,children:[(0,b.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Action", "Action", "BoardForm.BoardForm.Action", undefined, true)}),(0,b.jsxs)(o.iP,{onTap:S,children:[(0,b.jsx)(o.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,b.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Delete board", "Delete board", "BoardForm.Delete", undefined, true)})}),E?(0,b.jsx)(o.xv,{size:"300",color:"subtle",children:(0,l.nk)(this.props.i18n.bt("You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted board. After that, it will be deleted permanently.", "You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted Board. After that, it will be permanently deleted.", "boardForm.delete.helperText", undefined, true),{MAX_AGE_RECENTLY_DELETED_BOARD:f.Xq})}):(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(o.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("Delete this board and all of its Pins forever.", "Delete this board and all its Pins forever.", "BoardForm.BoardForm.Delete.Label", undefined, true)}),(0,b.jsx)(o.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("You can't undo this.", "You can't undo this!", "BoardForm.BoardForm.Delete.LabelTwo", undefined, true)})]})]})]})]});h?I&&(ne=(0,b.jsxs)(k,{children:[(0,b.jsx)(z,{disabled:ie,name:q,nameValidatorErrors:X,onChange:this.handleChangeName}),(0,b.jsx)(R,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,privacy:K,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):ne=(0,b.jsxs)(k,{children:[!!p&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,b.jsx)(A,{hasCollabBoardEmail:H,isCollaborative:a,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&ie&&(0,b.jsx)(L,{allowHomefeedRecommendations:U,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,b.jsx)(o.xv,{color:"subtle",size:"300",children:(0,l.nk)(this.props.i18n.bt("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "BoardForm.CollaboratorPermissionsCopy", undefined, true),{boardOwner:(0,b.jsx)(o.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});const oe=F?o.u_:r.ZP,se=this.props.i18n.bt("Change board cover", "Change board cover", "BoardForm.BoardCoverEdit.heading", undefined, true),re=(0,b.jsxs)(o.xu,{paddingY:8,position:"relative",children:[(0,b.jsx)(o.X6,{align:"center",size:"500",children:se}),(0,b.jsx)(o.xu,{position:"absolute",top:!0,left:B.isRTL,right:!B.isRTL,paddingY:8,paddingX:6,children:(0,b.jsx)(o.hU,{accessibilityLabel:this.props.i18n.bt("Cancel change board cover", "Cancel change board cover", "BoardForm.BoardCoverEdit.cancel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]});return(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(V,{condition:!!F,children:!J&&!Q&&(0,b.jsx)(oe,{accessibilityModalLabel:this.props.i18n.bt("Board form", "Board form", "BoardForm.BoardForm", undefined, true),size:"sm",onDismiss:C,footer:this.getFormFooter(),heading:Z,children:(0,b.jsx)(o.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,b.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!ie&&ne,ie&&(0,b.jsx)(O,{board:e,collabBoardEmail:H,collaboratorInvitesEnabled:G,coverPin:i,currentUserIsOwner:h,description:W,descriptionValidatorErrors:$,handleBoardLeave:p,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleChangeName:this.handleChangeName,handleChangeDescription:this.handleChangeDescription,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),hideCollaboratorsSection:_,isCollaborative:a,showCoverEdit:te,name:q,nameValidatorErrors:X})]})})})}),J&&v&&(0,b.jsx)(u.Z,{children:(0,b.jsx)(N,{boardId:s,boardName:q,coverPinId:null==i?void 0:i.pin_id,frameHeight:d,frameWidth:c,heading:re,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),ee&&(0,b.jsx)(x.Z,{confirmButtonLabel:this.props.i18n.bt("Make secret", "Make secret", "Setting the boards visibility to secret", undefined, true),heading:this.props.i18n.bt("Are you sure?", "Are you sure?", "Warning label asking users to be sure of their action", undefined, true),message:this.props.i18n.bt("If you make this board secret, some active ads will stop running", "If you make this board secret, some active ads will stop running", "Explicitly warning users of the board visibility action they are doing", undefined, true),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),Q&&(0,b.jsx)(M.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}function G(e){const t=(0,a.ZP)(),i="desktop"===(0,_.ZP)(),n=(0,g.Z)(),{checkExperiment:o}=(0,d.F)(),s="control"!==o("curation_board_holdout_h1").group,r=!!n.isPrivateProfile&&o("web_hide_u16_board").anyEnabled&&!o("web_hide_u16_group_board_v2").anyEnabled;return(0,b.jsx)(H,{...e,hideCollaboratorsSection:r,isDesktop:i,i18n:t,isSoftDeletedBoardsEnabled:s,requestContext:(0,c.B)(),toastManagerContext:(0,p.F9)()})}B(H,"defaultProps",{isNameAndSecretView:!1})},313951:(e,t,i)=>{i.d(t,{i5:()=>b,sX:()=>P,aX:()=>y,Z5:()=>x,NG:()=>v,MT:()=>w,iu:()=>I});var n=i(667294),o=i(214494),s=i(425288),r=i(505920),a=i(682492),l=i.n(a);const d=(e,t)=>e.data[t]&&e.data[t].messages||[];function c(e,t){const i={};return e.filter((e=>!!e)).reduce(((e,n)=>{const o=t(n);return i[o]?(l()(i[o],n),e):(i[o]=n,e.concat([n]))}),[])}function u(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function h(e,t,i){return u(c(d(e,t).concat(i),(e=>e.id)))}const p={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function _(e=p,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const i={...e,data:{...e.data}},{id:n}=t.payload;return delete i.data[n],i}if("FETCH_COMPLETE"===t.type){const{options:i,resource:n,response:o}=t.payload,s=o.resource_response.data;if("ConversationMessagesResource"===n){const t=s||[],n=(null==i?void 0:i.conversation_id)||"",o=h(e,n,t),r=o[o.length-1];return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:o,unread:0,last_message:r}}}}if("ConversationsResource"===n){const t=s||[],i={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:n,name:o,board:s,emails:r,unread:a,users:l,last_message:d}=e,c=h(i,t,[d]);i.data[t]={...i.data[t],id:t,created_at:n,name:o,board:s,emails:r||[],unread:a||0,users:l||[],last_message:d,messages:c}})),i}if("ConversationResource"===n){const t=s||{},{id:i}=t,n={...e,data:{...e.data}};return i&&(n.data[i]={...n.data[i],...t}),n}if("NewsHubBadgeResource"===n){if(s){const t=s.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:i,message:n}=t.payload;return e.data[i]?{...e,data:{...e.data,[i]:{...e.data[i],id:i,messages:[...e.data[i].messages,n]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){const{id:i,tempMessage:n,newMessage:o}=t.payload;if(e.data[i]){if(d(e,i).find((e=>e.id===n.id&&e.created_ms===n.created_ms))){const t=u(c(d(e,i).filter((e=>e.id!==n.id)).concat([o]),(e=>e.id)));return{...e,data:{...e.data,[i]:{...e.data[i],last_message:o,messages:t}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===t.type){const{id:i,tempMessageId:n}=t.payload;if(e.data[i]){const t=d(e,i).filter((e=>e.id!==n));return{...e,data:{...e.data,[i]:{...e.data[i],messages:t}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:i}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:i}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload};if("CLEAR_MESSAGE_BADGE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],unread:0}}}}if("CONVERSATION_SAVE_POSITION"===t.type){const{id:i,position:n}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:n}}}}if("CONVERSATION_RESET_POSITION"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:null}}}}if("SET_OBJECT_ATTACHMENT"===t.type){const{objectAttachment:i}=t.payload;return{...e,objectAttachment:i}}if("REMOVE_OBJECT_ATTACHMENT"===t.type)return{...e,objectAttachment:null}}return e}var g=i(785893);const m=(()=>{let e=0;return()=>e++})(),{Provider:f,useHook:x}=(0,s.Z)("Conversations");function b({children:e}){const[t,i]=(0,n.useReducer)(_,p),s=(0,n.useCallback)((e=>i({type:"FETCH_COMPLETE",payload:e})),[]);(0,r.Z8)("ConversationMessagesResource",s),(0,r.my)("ConversationMessagesResource",s),(0,r.Z8)("ConversationsResource",s),(0,r.Z8)("ConversationResource",s),(0,r.Z8)("NewsHubBadgeResource",s);const a=(0,n.useCallback)(((e,t=!1,n="")=>i({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:n}})),[]),l=(0,n.useCallback)(((e,t="",n=!1)=>i({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:n}})),[]),d=(0,n.useCallback)((e=>i({type:"CONVERSATION_CREATE",payload:e})),[]),c=(0,n.useCallback)((e=>i({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),u=(0,n.useCallback)(((e,t)=>i({type:"CONVERSATION_SAVE_POSITION",payload:{id:e,position:t}})),[]),h=(0,n.useCallback)((e=>i({type:"CONVERSATION_RESET_POSITION",payload:{id:e}})),[]),m=(0,n.useCallback)(((e,t,n)=>{o.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;i({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";n(t)}))}),[]),x=(0,n.useCallback)((()=>{i({type:"CLOSE_DROPDOWN"})}),[]),b=(0,n.useCallback)((()=>{i({type:"OPEN_DROPDOWN"})}),[]),y=(0,n.useCallback)((e=>{i({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),v=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),P=(0,n.useCallback)(((e,t,n)=>i({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:n}})),[]),w=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}})),[]),I=(0,n.useCallback)((e=>i({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),A=(0,n.useCallback)((e=>i({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),E=(0,n.useCallback)((e=>i({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}})),[]),C=(0,n.useCallback)((e=>i({type:"SET_OBJECT_ATTACHMENT",payload:{objectAttachment:e}})),[]),S=(0,n.useCallback)((()=>i({type:"REMOVE_OBJECT_ATTACHMENT"})),[]),j=(0,n.useMemo)((()=>({clearMessageBadge:E,conversationOpen:a,conversationClose:l,conversationCreate:d,conversationDelete:c,conversationGet:m,saveConversationPosition:u,resetConversationPosition:h,dropdownClose:x,dropdownOpen:b,newMessageOpen:y,pendingMessageSend:v,pendingMessageSuccess:P,pendingMessageFailure:w,updateNewsHubCount:I,updateUnreadCount:A,conversations:t,setObjectAttachment:C,removeObjectAttachment:S})),[E,a,l,d,c,m,u,h,x,b,y,v,P,w,I,A,t,C,S]);return(0,g.jsx)(f,{value:j,children:e})}function y(){const{conversationCreate:e}=x();return async t=>{let i;const n=o.Z.create("ConversationsResource",t);try{var s;const t=null===(s=(await n.callCreate()).resource_response)||void 0===s?void 0:s.data;t&&(e(t),i=t)}catch(r){throw new Error(r.message)}return i}}function v(){const{conversations:e,conversationCreate:t,pendingMessageSend:i,pendingMessageSuccess:n,pendingMessageFailure:s}=x();return async(r,a,l,d)=>{const{text:c,pinId:u,boardId:h,userId:p,didItId:_}=a;async function g(){const e=o.Z.create("ConversationMessagesResource",{conversation_id:r,text:c,pin:u,board:h,user:p,user_did_it_data:_,source:l}),t=`${m()}`,a={text:c,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,type:"tempMessage"};i(r,a);try{var g;const t=null===(g=(await e.callCreate()).resource_response)||void 0===g?void 0:g.data;t&&n(r,a,t)}catch(f){throw s(r,t),new Error(f.message)}}if(e.data[r])await g();else{const e=o.Z.create("ConversationResource",{conversation_id:r});try{var f;const i=null===(f=(await e.callGet()).resource_response)||void 0===f?void 0:f.data;i&&(t(i),await g())}catch(x){throw new Error(x.message)}}}}function P(e){const{conversations:t}=x();return t.data[e]}function w(e){const{conversations:t}=x();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}function I(){const{conversations:{data:e}}=x(),t=(i=e,Object.keys(i).map((e=>i[e]))).filter((e=>e.users&&e.last_message));var i,n;return n=t,Array.from(n).sort(((e,t)=>new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)))}},312918:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var n=i(667294),o=i(883119),s=i(987765),r=i(116303),a=i(694379),l=i(898781),d=i(349700),c=i(773285),u=i(985913),h=i(883561),p=i(941646),_=i(954931),g=i(215292),m=i(202870),f=i(777906),x=i(785893);const b=function(e){const t=(0,l.ZP)(),{followerCount:i,fullName:b,hasVerifiedIdentity:y,imageUrl:v,isPromoted:P,isVerifiedMerchant:w,profileUrl:I,sponsorName:A,sponsorshipStatus:E,sponsorUsername:C="",verified:S,color:j="default",onAvatarClick:T,onNavigateClick:D,onNavigateSponsorClick:k,openNewTab:z,isLeadPin:O=!1}=e,R=(0,c.F)().checkExperiment("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled,L=(0,u.Z)(t.bt("{{ fullName }} avatar link", "{{ fullName }} avatar link", "creatorCardProfile.avatar.accessibilityLabel", undefined, true),{fullName:null!=b?b:""}),M=(0,x.jsx)(g.q,{children:({active:e,focused:t,hovered:i,onBlur:n,onFocus:s,onMouseEnter:a,onMouseLeave:l})=>(0,x.jsx)(o.xu,{onBlur:n,onFocus:s,onMouseEnter:a,onMouseLeave:l,onMouseDown:()=>{T&&T()},children:(0,x.jsx)(o.zd,{rounding:"circle",wash:i||e||t,children:(0,x.jsx)(r.Z,{accessibilityLabel:L,name:null!=b?b:"",size:"md",src:null!=v?v:"",verified:S})})})}),B=(0,h.ZP)(b,70),N=(0,x.jsxs)(n.Fragment,{children:[P&&(0,x.jsx)(s.Z,{size:"200",lineClamp:1,weight:"bold",children:t.bt("Promoted by", "Promoted by", "indicating the username of the person who promoted the pin", undefined, true)}),(0,x.jsx)(p.Z,{id:"creator-profile-name",children:(0,x.jsx)(o.xu,{maxWidth:270,children:(0,x.jsx)(o.xv,{color:j,size:"200",weight:O?"normal":"bold",children:y||w?(0,x.jsx)(f.Z,{badgeSize:"xs",badgeSpacing:2,fullName:B,identityIsVerified:y,isVerifiedMerchant:w}):b})})})]}),Z=C&&A||m.j.includes(E)&&R,F=`/${null!=C?C:""}/`;return(0,x.jsxs)(o.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"creator-card-profile",children:[(0,x.jsx)(o.xu,{"data-test-id":"creator-avatar",flex:"none",paddingX:1,children:I?(0,x.jsx)(o.iP,{role:"link",rel:(0,_.Z)(I)?"none":"nofollow",target:z?"blank":null,onTap:D,href:I,children:M}):M}),(0,x.jsxs)(o.xu,{children:[(0,x.jsx)(o.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingX:1,children:I?(0,x.jsx)(o.rU,{underline:"none",href:I,onClick:D,rel:(0,_.Z)(I)?"none":"nofollow",target:z?"blank":null,children:N}):N}),Z?(0,x.jsx)(o.xu,{"data-test-id":"sponsor-title",display:"flex",paddingX:1,children:(0,x.jsx)(m.Z,{href:F,isPromoted:P,sponsorName:A,sponsorUsername:C,sponsorshipStatus:E,onNavigateSponsorClick:k})}):!!i&&(0,x.jsx)(o.xu,{"data-test-id":"follower-count",display:"flex",paddingX:1,children:(0,x.jsx)(o.xv,{color:j,size:"200",children:(0,d.nk)(t.nbt(["{{ followerCount }} follower", "{{ followerCount }} followers"], i, "closeup.creator.followerCount", true),{followerCount:(0,x.jsx)(a.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i},i)})})})]})]})}},329900:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(407043),o=i(780280),s=i(619277),r=i(948376),a=i(172071),l=i(780678),d=i(826067);const c="http://play.google.com/store/apps/details?id=com.pinterest",u=["access_token","new_password","new_password_confirm","password","next"],h=(e,t)=>t?(0,d.ru)(e,{invite_code:t}):e,p=(e,t,i)=>{if("ios"===t&&"string"==typeof e&&e.startsWith("discover/article/")){const t=e.split("/")[2];e=`discover_article/${t}/?is_deeplink=1`}return"string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e?h(e,i):"ios"===t||"ipad"===t?h(e.iOS,i):"android"===t?h(e.android,i):null},_=({deeplinkUri:e,fallbackUrl:t,invite_code:i,logContextEvent:n,platform:o,redirectToLite:s,unauthId:r,userAgent:h,within:_})=>{if(null==n||n({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),e){const g=(({deeplinkUri:e,invite_code:t,platform:i,fallbackUrl:n,unauthId:o})=>({deeplink_path:p(e,i,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",u),install_id:o,utm_source:140,utm_medium:2152,...n?{af_r:n}:null}))({deeplinkUri:e,fallbackUrl:t,invite_code:i,platform:o,unauthId:r,userAgent:h});if(a.Z.increment("mweb.deeplink",1,{platform:o}),i&&a.Z.increment("mweb.deeplink.invite_code",1),a.Z.increment("mweb.deeplink.unauthId",1,{withUnauthId:Boolean(r)}),s){a.Z.increment("mweb.deeplink.lite_link",1),null==n||n({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}});const e=(({unauthId:e})=>{const t=(0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e});return{referrer:encodeURI(t)}})({unauthId:r});window.location.href=(0,d.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===o){const t=(({deeplinkUri:e,invite_code:t,platform:i,unauthId:n})=>{const o=JSON.stringify({deeplink_path:p(e,i,t),current_page_url:(0,d.Gw)("undefined"!=typeof window?window.location.href:"",u),install_id:n});return{referrer:(0,d.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:o})}})({deeplinkUri:e,invite_code:i,platform:o,unauthId:r});(0,l.v)()?(0,l.Z)().then((e=>{if(e.length>0){null==n||n({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}});const e=(0,d.ru)(window.location.href,g);window.open(e)}else null==n||n({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)(c,t)})).catch((()=>{a.Z.increment("mweb_android.deeplink.playStore.error",1)})):(null==n||n({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)(c,t))}else{if(a.Z.increment("mweb.deeplink.appsflyer_link",1),"ios"===o&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal"))return void(window.location.href=(0,d.ru)("https://pinterest.com/pinterest-predicts",g));null==n||n({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:_}}),window.location.href=(0,d.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",g)}}};var g=i(785893);function m({children:e,invite_code:t}){const{unauthId:i,userAgent:{platform:s,raw:a}}=(0,o.B)(),{logContextEvent:l}=(0,n.v)();return e((async(e,n,o)=>{l({component:14347,element:13582,event_type:3830,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:n}}),_({deeplinkUri:e,fallbackUrl:o,invite_code:t,logContextEvent:l,platform:s,redirectToLite:(0,r.Rp)({platform:s,userAgent:a}),unauthId:i,userAgent:a,within:n})}))}const f=e=>(0,g.jsx)(s.ty,{children:t=>(0,g.jsx)(m,{...e,invite_code:t})});f.displayName="DeepLinkNavigator";const x=f},857752:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(240684),o=i(194249),s=i(785893);const r=(0,n.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(72586),i.e(46888),i.e(35978)]).then(i.bind(i,400049)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 400049}});function a(e){return(0,s.jsx)(r,{...e,fallback:(0,s.jsx)(o.Z,{})})}},194249:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);function r(){const e=(0,o.ZP)();return(0,s.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(n.$j,{accessibilityLabel:e.bt("Loading editor", "Loading editor", "EditorWithMentionsFallback.loading", undefined, true),show:!0})})}},634449:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(676553);function s({children:e}){return e((0,n.useContext)(o.Z))}},676553:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(667294).createContext)([null,()=>{}])},495794:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(667294),o=i(883119),s=i(407043),r=i(316271),a=i(121151),l=i(898781),d=i(349700),c=i(780280),u=i(785893);const h={backgroundColor:"transparent",border:0,borderRadius:"8px",bottom:0,cursor:"pointer",height:"100%",left:0,padding:0,position:"relative",right:0,top:0,width:"100%"};function p({activeColor:e="#a3081a",delay:t=0,disabledTimer:i=!1,duration:s,height:a,hoverColor:l="#ad081b",onClick:d,text:c}){const[p,_]=(0,n.useState)(0),[g,m]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),b=(0,n.useCallback)((()=>m(!1)),[]),y=(0,n.useCallback)((()=>m(!0)),[]),v=(0,n.useCallback)((()=>x(!0)),[]),P=(0,n.useCallback)((()=>x(!1)),[]),w=(0,n.useRef)(null),I=(0,n.useRef)(null),A=(0,n.useCallback)((()=>{clearTimeout(w.current),clearTimeout(I.current),w.current=null,I.current=null})),E=(0,n.useCallback)((()=>{A(),d(),x(!1),_(0)}),[d]);return(0,n.useEffect)((()=>{i||(I.current=setTimeout((()=>_(100)),t),w.current=setTimeout(E,t+s))}),[i]),(0,n.useEffect)((()=>A),[]),(0,u.jsx)(o.xu,{color:"primary","data-test-id":"timed-button",height:a,minWidth:100,onBlur:P,onFocus:v,onMouseEnter:y,onMouseLeave:b,overflow:"hidden",position:"relative",rounding:5,children:(0,u.jsxs)("button",{style:h,onClick:E,children:[(0,u.jsx)(o.xu,{color:"selected",dangerouslySetInlineStyle:{__style:{backgroundColor:i?"transparent":e,borderRadius:"8px 0px 0px 8px",transition:i?void 0:(0,r.Z)({duration:s,property:"width",timingFunction:"linear"})}},"data-test-id":"timed-button-progress-bar",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,width:`${p}%`}),(0,u.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:f||g?l:void 0}},display:"flex",justifyContent:"center",height:"100%",position:"relative",rounding:2,children:(0,u.jsx)(o.xu,{paddingX:2,children:(0,u.jsx)(o.xv,{color:"inverse",overflow:"normal",weight:"bold",children:c})})})]})})}const _={delay:700,duration:600,property:"opacity",timingFunction:"easeInOut"},g={delay:800,duration:600,property:"opacity",timingFunction:"easeInOut"},m={property:"opacity",duration:500,timingFunction:"easeIn",delay:3300},f=9e3,x=3300;function b({autoAdvance:e=!0,completionButtonText:t,containsHlsVideoComponent:i,isDismissable:h=!0,onComplete:b,onDismiss:y,steps:v}){const{logContextEvent:P}=(0,s.v)(),w=(0,l.ZP)(),[I,A]=(0,n.useState)(0),[E,C]=(0,n.useState)(0),[S,j]=(0,n.useState)(!1),{isRTL:T}=(0,c.B)(),D=(0,n.useCallback)((()=>{j(!0)}),[]),k=()=>{P({event_type:101,component:13473,element:11556,aux_data:{education_active_step_id:v[I]&&v[I].id}}),b()},z=()=>{P({event_type:101,component:13473,element:11557,aux_data:{education_active_step_id:v[I]&&v[I].id}}),y()},O=(0,n.useCallback)((()=>{I<v.length-1?(P({event_type:101,component:13472,element:11559}),A(I+1),j(!1)):k()}),[P,v,I,k]);return(0,n.useEffect)((()=>{S&&C(1)}),[I,S]),(0,u.jsx)(a.ZP,{accessibilityModalLabel:w.bt("In-product education modal", "In-product education modal", "EducationModal.accessibilityModalLabel", undefined, true),allowMediaPlay:i,heading:(0,u.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{opacity:E,transition:(0,r.Z)(_)}},height:474,width:"100%",children:[(0,n.cloneElement)(v[I].element,{onStart:D}),(0,u.jsx)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:E,transition:e?(0,r.Z)(m):void 0}},display:"flex",left:!0,marginBottom:5,padding:2,position:"absolute",right:!0,children:(0,u.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:[v.length>1&&(0,u.jsx)(o.xv,{color:"subtle",size:"200",weight:"bold",children:(0,d.nk)(w.bt("{{ index }} of {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in guide screen (e.g. 1 of 3)", undefined, true),{index:I+1,totalSteps:v.length})}),(0,u.jsx)(o.xu,{bottom:!0,marginEnd:5,position:"absolute",right:!T,left:T,children:(0,u.jsx)(p,{disabledTimer:!e||I===v.length-1||!S,delay:0===I?x:void 0,duration:f,height:36,onClick:O,text:I<v.length-1?w.bt("Next", "Next", "Button text to go to next step in education", undefined, true):t||w.bt("Take tour", "Take Tour", "Button text to start tour", undefined, true)})})]})}),h&&(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{opacity:E,transition:(0,r.Z)(g)}},position:"absolute",marginEnd:4,marginTop:4,right:!T,left:T,top:!0,children:(0,u.jsx)(o.hU,{accessibilityLabel:w.bt("Cancel", "Cancel", "Icon Button text to Cancel", undefined, true),icon:"cancel",onClick:z,iconColor:"gray",size:"md"})})]}),onDismiss:z,role:"alertdialog",size:"lg"})}},537339:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(667294),o=i(23279),s=i.n(o),r=i(883119),a=i(464657),l=i(792182),d=i(407043),c=i(898781),u=i(349700),h=i(755742),p=i(829407);function _(e){return{type:"UPDATE_STATUS",payload:{status:e}}}var g=i(785893);function m({anchor:e,children:t,footer:i,onDismiss:n,size:o="lg",idealDirection:s}){const a=(0,c.ZP)();return(0,g.jsx)(r.J2,{anchor:e,onDismiss:()=>{},positionRelativeToAnchor:!1,size:o,idealDirection:s,children:(0,g.jsxs)(r.xu,{direction:"column",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,g.jsx)(r.xu,{position:"absolute",right:!0,top:!0,margin:4,children:(0,g.jsx)(r.hU,{accessibilityLabel:a.bt("End tour", "End tour", "Icon button to end the education tour", undefined, true),icon:"cancel",iconColor:"gray",onClick:n,size:"xs"})}),(0,g.jsx)(r.xu,{display:"flex",padding:2,marginTop:2,children:t}),(0,g.jsx)(r.xu,{children:i})]})})}const f={content:null,selector:null,index:-1,left:0,right:0,bottom:0,top:0,width:0,height:0,status:"INIT"};function x(e=f,t){switch(t.type){case"START_TOUR":{const{content:i,selector:n}=t.payload;return{...e,selector:n,content:i,status:"IN_PROGRESS",index:0}}case"NEXT_STEP":{const{content:i,index:n,selector:o}=t.payload;return{...e,content:i,selector:o,index:n}}case"UPDATE_RECT":return{...e,...t.payload};case"UPDATE_STATUS":{const{status:i}=t.payload;return{...e,status:i}}default:return e}}const b=8,y=16,v={__style:{color:"#000"}};function P({padding:e=y,bottomMargin:t=0,targetLeft:i,targetTop:n,targetWidth:o,targetHeight:s,showMask:a=!0}){const{width:d,height:c}=(0,l.Z)()||{width:0,height:0},u=n-e,h=i-e,p=s+2*e+t,_=o+2*e;return u<0?null:(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:v,position:"fixed",left:!0,top:!0,width:"100%",height:"100%",opacity:.7,children:(0,g.jsxs)("svg",{width:d,height:c,xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsxs)("defs",{children:[(0,g.jsxs)("mask",{id:"mask-main",children:[(0,g.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"white"}),(0,g.jsx)("rect",{x:h,y:u,width:_,height:p,fill:"black",rx:b,ry:b})]}),(0,g.jsxs)("clipPath",{id:"clip-path",children:[(0,g.jsx)("rect",{x:0,y:0,width:d,height:u}),(0,g.jsx)("rect",{x:0,y:u,width:h,height:p}),(0,g.jsx)("rect",{x:h+_,y:u,width:d-_-h,height:p}),(0,g.jsx)("rect",{x:0,y:u+p,width:d,height:c-p-u})]})]}),(0,g.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",mask:"url(#mask-main)"}),a&&(0,g.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",clipPath:"url(#clip-path)",pointerEvents:"auto"}),(0,g.jsx)("rect",{x:i,y:n,width:o,height:s,pointerEvents:"auto",fill:"transparent",display:"block"})]})})}function w({keyCode:e,handler:t}){(0,n.useEffect)((()=>{function i(i){i.keyCode===e&&t()}return window.addEventListener("keyup",i),()=>window.removeEventListener("keyup",i)}),[e,t])}function I(e,{duration:t=660,offset:i,callback:n}){const o=window.pageYOffset,s=function(e,t=0){return e.getBoundingClientRect().top+window.pageYOffset+t}(e,i),r=performance.now(),a=()=>{const i=performance.now()-r,l=function(e,t,i,n){return i>n?t:e+(t-e)*((o=i/n)<.5?2*o*o:(4-2*o)*o-1);var o}(o,s,i,t);window.scroll(0,l),i>t?"function"==typeof n&&n(e):window.requestAnimationFrame(a)};a()}const A=20,E=999;function C({onComplete:e,onDismiss:t,scrollOffset:i,steps:o,zIndex:b}){const{logContextEvent:y}=(0,d.v)(),v=(0,c.ZP)(),[C,S]=(0,a.Z)(),[j,T]=(0,n.useReducer)(x,f),[D,k]=(0,n.useState)(null),{width:z,height:O}=(0,l.Z)()||{width:0,height:0},R=e=>o[j.index]&&o[j.index].height?o[j.index].height:e,L=e=>{const t=e=>{const t=e.getBoundingClientRect();T(_("IN_PROGRESS")),k(e);const{bottom:i,left:n,right:o,top:s,width:r,height:a}=t,l=R(a);T({type:"UPDATE_RECT",payload:{bottom:i,left:n,right:o,top:s,width:r,height:l}})};if(e){const n=e.getBoundingClientRect();if(function({top:e,right:t,bottom:i,left:n,windowHeight:o,windowWidth:s,threshold:r=0}){return e>=0+r&&n>=0+r&&i<=o-r&&t<=s-r}({left:n.left,right:n.right,top:n.top,bottom:n.bottom,windowHeight:O,windowWidth:z,threshold:25}))t(e);else{const o=i||(R(n.height)>O?-25:-O/2+R(n.height)/2);T(_("SCROLLING")),I(e,{offset:o,callback:t})}}},M=()=>{y({event_type:101,component:13472,element:11556,aux_data:{education_active_guide_id:o[j.index]&&o[j.index].id}}),S(),e()},B=()=>{y({event_type:101,component:13472,element:11557,aux_data:{education_active_guide_id:o[j.index]&&o[j.index].id}}),S(),t()},N=(0,n.useCallback)((()=>{const{onNext:e}=o[j.index]||{};e&&e();const{content:t,selector:i}=o[j.index+1]||{};j.index<o.length-1?(y({event_type:101,component:13472,element:11559}),T(function(e,t,i){return{type:"NEXT_STEP",payload:{content:e,selector:t,index:i}}}(t,i,j.index+1))):M()}),[y,o,j.index,M]);w({keyCode:h.Z.RIGHT,handler:N}),w({keyCode:h.Z.ESCAPE,handler:B}),(0,p.Z)((()=>{C();const{content:e,selector:t}=o[0]||{};T(function(e,t){return{type:"START_TOUR",payload:{content:e,selector:t}}}(e,t))})),(0,n.useLayoutEffect)((()=>{const e="string"==typeof j.selector?document.querySelector(j.selector):j.selector;L(e);const t=s()((()=>L(e)),25);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[j.index,j.selector]);const{left:Z,top:F,height:U,width:V}=j,H=R(U);return(0,g.jsxs)(r.mh,{children:[(0,g.jsxs)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:b||E}},left:!0,position:"absolute",right:!0,top:!0,children:[(0,g.jsx)(P,{padding:o[j.index]&&o[j.index].padding,bottomMargin:o[j.index]&&o[j.index].bottomMargin,targetLeft:Z,targetTop:F,targetWidth:V,targetHeight:H,showMask:"IN_PROGRESS"===j.status}),"IN_PROGRESS"===j.status&&(0,g.jsx)(m,{idealDirection:o[j.index]?o[j.index].idealDirection:void 0,anchor:D,size:o[j.index]&&o[j.index].size,footer:(0,g.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,g.jsx)(r.xu,{display:"flex",flex:"grow",paddingX:2,children:(0,g.jsx)(r.xv,{color:"subtle",size:"200",weight:"bold",children:(0,u.nk)(v.bt("{{ index }} of {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in tour (e.g. 1 of 3)", undefined, true),{index:j.index+1,totalSteps:o.length})})}),(0,g.jsx)(r.xu,{"data-test-id":"guide-next-button",children:(0,g.jsx)(r.zx,{fullWidth:!0,color:"gray",onClick:N,text:j.index<o.length-1?v.bt("Next", "Next", "Button text to go to next guide", undefined, true):v.bt("Done", "Done", "Button text to end education tour", undefined, true)})})]}),onDismiss:B,children:j.content})]}),(0,g.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{left:Z-A,top:F-A}},height:H+2*A,position:"absolute",width:V+2*A})]})}},939853:(e,t,i)=>{i.d(t,{I:()=>n});const n="completed-in-product-education"},43898:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){const{htmlFor:t,errorMessage:i,icon:s}=e;return(0,o.jsx)(n.__,{htmlFor:t,children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.kC,{direction:"row",gap:2,children:[s,(0,o.jsx)(n.xv,{color:"error",size:"200",children:i})]})})})}},142103:(e,t,i)=>{i.d(t,{Z:()=>E});var n=i(667294),o=i(702664),s=i(883119),r=i(407043),a=i(11363),l=i(946984),d=i(918301),c=i(898781),u=i(349700),h=i(584595),p=i(957161),_=i(343341),g=i(829407),m=i(694379),f=i(785893);const x=({followText:e,followerCount:t,userFollowed:i})=>{const n=(0,c.ZP)();return(0,u.nk)(n.bt("{{ followCount }} {{ followText }}", "{{ followCount }} {{ followText }}", " - ", undefined, true),{followCount:(0,f.jsx)(s.xu,{"data-test-id":"followCount",paddingX:1,opacity:i?void 0:.8,children:(0,f.jsx)(s.xv,{color:i?"subtle":"inverse",children:(0,f.jsx)(m.Z,{value:t,shortform:!0,shortformMaximumFractionDigits:0})})},"followCount"),followText:(0,f.jsx)(s.xu,{"data-test-id":"followText",paddingX:1,children:(0,f.jsx)(s.xv,{color:i?"default":"inverse",weight:"bold",children:e})},"followText")})};var b=i(807532),y=i(461773),v=i(698330),P=i(201155),w=i(299899);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A extends n.PureComponent{constructor(...e){super(...e),I(this,"handleButtonClick",(({event:e})=>{const{requireAuth:t,i18n:i,userFollowed:n}=this.props;if(t)return e.stopPropagation(),void t({loginModalHeader:(0,a.N4)({i18n:i,toFollow:!n})});const{shouldStopEventPropagation:o,loggingData:s}=this.props;o&&(e.preventDefault(),e.stopPropagation()),this.props.logContextEvent({event_type:101,component:13672,element:11951,object_id_str:this.props.id,view_type:this.props.viewType,view_parameter:this.props.viewParameter,...s||Object.freeze({})}),this.toggleFollowUnfollow()})),I(this,"handleClick",(({event:e})=>{const{requireAuth:t}=this.props;(t||this.props.shouldStopEventPropagation)&&e.stopPropagation(),t?t():this.toggleFollowUnfollow()})),I(this,"toggleFollowUnfollow",(()=>{const{id:e,mostRecentPinId:t,loggingData:i,userFollowed:n,viewType:o,viewParameter:s}=this.props;n?(this.props.logContextEvent({event_type:46,object_id_str:e,view_type:o,view_parameter:s,aux_data:{pin_id:t},...i||Object.freeze({})}),this.unfollow()):(this.props.logContextEvent({event_type:45,object_id_str:e,view_type:o,view_parameter:s,aux_data:{pin_id:t},...i||Object.freeze({})}),this.follow())})),I(this,"follow",(()=>{const{follow:e,id:t,onUserFollow:i,mostRecentPinId:n,setMostRecentPinId:o}=this.props;e(t,n,this.showConfirmation,this.showError),i&&i(!0),o(null)})),I(this,"showToast",(e=>{const{id:t,imageUrl:i,profileUrl:n,toastManagerContext:o,suppressToasts:s}=this.props;s||o.showOneToast((({hideToast:o})=>(0,f.jsx)(P.Z,{href:n,userId:t,imageUrl:i,handleHide:o,text:e})))})),I(this,"showConfirmation",(()=>{const e=(0,f.jsx)(s.xv,{children:this.props.i18n.bt("Following! Their created Pins will show up in your home feed!", "Following! Their created Pins will show up in your home feed!", "userFollowButton.informationalToastText2", undefined, true)});this.showToast(e)})),I(this,"showError",(e=>{const{fullName:t,userFollowed:i,showEmailVerificationReminderModal:n}=this.props,o=i?this.props.i18n.bt("Error unfollowing {{ usernameComponent }}.", "Error unfollowing {{ usernameComponent }}.", "UserFollowButton.error.unfollowing", undefined, true):this.props.i18n.bt("Error following {{ usernameComponent }}.", "Error following {{ usernameComponent }}.", "UserFollowButton.error.following", undefined, true);if(e&&e.api_error_code===h.H9)return void n();const r=(0,f.jsx)(s.xv,{children:(0,u.nk)(o,{usernameComponent:(0,f.jsx)(s.xv,{weight:"bold",inline:!0,children:t})})});this.showToast(r)})),I(this,"unfollow",(()=>{const{id:e,onUserFollow:t,unfollow:i,mostRecentPinId:n,setMostRecentPinId:o}=this.props;i(e,n,(()=>{}),this.showError),t&&t(!1),o(null)}))}renderButton(){const{button:e,followerCount:t,inline:i=!1,isOwnProfile:n,invertButtonColor:o,isSecondaryButton:r,size:a,showFollowerCount:l,userFollowed:d}=this.props,c=d?this.props.i18n.bt("Following", "Following", "User follow button", undefined, true):this.props.i18n.bt("Follow", "Follow", "User follow button", undefined, true);if(e)return e({followText:c,onClick:this.handleButtonClick,userFollowed:d});if(n)return(0,f.jsx)(s.zx,{fullWidth:!0,disabled:!0,text:this.props.i18n.bt("This is you", "This is you", "Button label to note that this is your Profile", undefined, true)});if(l){const e="number"==typeof t?(0,f.jsx)(x,{followerCount:t,userFollowed:d,followText:c}):c;return(0,f.jsx)(s.iP,{onTap:this.handleClick,children:(0,f.jsx)(s.xu,{color:d?"secondary":"primary",rounding:2,paddingX:3,paddingY:3,children:(0,f.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:e})})})}return(0,f.jsx)(s.xu,{display:"inlineBlock","data-test-id":`user-${d?"unfollow":"follow"}-button`,children:(0,f.jsx)(s.zx,{accessibilityLabel:d?this.props.i18n.bt("Unfollow", "Unfollow", "userUnfollowButton.button.accessibilityLabel", undefined, true):this.props.i18n.bt("Follow", "Follow", "userFollowButton.button.accessibilityLabel", undefined, true),color:r||d?"gray":"red",selected:o?!d:!!d,fullWidth:i,onClick:this.handleButtonClick,size:null!=a?a:void 0,text:c})})}render(){const{showPulsar:e,userFollowed:t}=this.props;return(0,f.jsxs)(s.xu,{position:"relative",display:"flex",children:[this.renderButton(),e&&(0,f.jsx)(s.iP,{onTap:this.handleClick,children:(0,f.jsx)(s.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,f.jsx)(s.o3,{paused:t||!1})})})]})}}function E(e){const{logContextEvent:t}=(0,r.v)(),i=(0,c.ZP)(),{id:n,setMostRecentPinId:s}=(0,b.f)(),a=(0,l.Z)(),u=(0,o.useDispatch)(),{showEmailVerificationReminderModal:h}=(0,d.y9)(),m=(0,v.mN)()(e.id),x=null==m?void 0:m.follower_count,P=m?m.explicitly_followed_by_me:e.userFollowed;return(0,g.Z)((()=>{const{id:t}=e,i=p.Z.getItem(w.AG)||"";i&&i===t&&(p.Z.removeItem(w.AG),u((0,y.ZN)(i)))})),(0,f.jsx)(A,{...e,follow:(e,t,i,n)=>{u((0,y.yA)(e,t)).then(i).catch((e=>{n(e)}))},followerCount:x,i18n:i,logContextEvent:t,mostRecentPinId:n,requireAuth:a,setMostRecentPinId:s,showEmailVerificationReminderModal:h,toastManagerContext:(0,_.F9)(),unfollow:(e,t,i,n)=>{u((0,y.KF)(e,t)).then(i,n)},userFollowed:P})}},833991:(e,t,i)=>{i.d(t,{HW:()=>r,YW:()=>u,i3:()=>h,o2:()=>c});var n=i(667294),o=i(425288),s=i(785893);const r=660,a={educationId:null,paddingRight:0,zIndex:r};function l(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":const{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":const{paddingRight:n}=t.payload;return{...e,paddingRight:n};case"FOOTER_SET_Z_INDEX":const{zIndex:o}=t.payload;return{...e,zIndex:o};default:return e}}const{Provider:d,Consumer:c,useHook:u}=(0,o.Z)("footerContext");function h({children:e}){const[t,i]=(0,n.useReducer)(l,a),o=(0,n.useCallback)((e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}})),[]),r=(0,n.useCallback)((e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}})),[]),c=(0,n.useCallback)((e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})),[]),u=(0,n.useMemo)((()=>({...t,setEducationId:r,setPaddingRight:o,setZIndex:c})),[t,r,o,c]);return(0,s.jsx)(d,{value:u,children:e})}},697335:(e,t,i)=>{i.d(t,{c:()=>o,t:()=>s});var n=i(883521);function o({children:e}){const{height:t}=(0,n.J)();return e(t)}function s(){const{height:e}=(0,n.J)();return e}},883521:(e,t,i)=>{i.d(t,{J:()=>d,Z:()=>p});var n=i(667294),o=i(425288),s=i(522679),r=i(977558),a=i(785893);const{Provider:l,useHook:d}=(0,o.Z)("Header"),c={childList:!0,attributes:!0,subtree:!0},u={height:r.cI,isInBiznuxFullscreen:!1,repinPinId:null,repinStartAnimation:!1,showAccountMenuFlyout:!1};function h(e,t){switch(t.type){case"showAccountMenuFlyout":return{...e,showAccountMenuFlyout:!0};case"hideAccountMenuFlyout":return{...e,showAccountMenuFlyout:!1};case"showRepinAnimation":return{...e,repinStartAnimation:!0,repinPinId:t.payload};case"hideRepinAnimation":return{...e,repinStartAnimation:!1,repinPinId:null};case"updateHeight":return{...e,height:t.payload};case"updateIsInBiznuxFullscreen":return{...e,isInBiznuxFullscreen:t.payload};default:throw new Error("action type not supported")}}function p({children:e}){const t=(0,n.useRef)(null),[{height:i,isInBiznuxFullscreen:o,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_},g]=(0,n.useReducer)(h,u);(0,n.useEffect)((()=>{const e=document.getElementById(r.WZ),i=()=>{e&&g({type:"updateHeight",payload:e.clientHeight})};return e&&"undefined"!=typeof MutationObserver&&(t.current=new MutationObserver(i),t.current.observe(e,c)),()=>{var e;null===(e=t.current)||void 0===e||e.disconnect()}}));const m=(0,n.useMemo)((()=>({height:i,isInBiznuxFullscreen:o,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_,updateHeaderState:g})),[g,i,o,d,p,_]);return(0,a.jsx)(l,{value:m,children:(0,a.jsx)(s.t,{children:e})})}},977558:(e,t,i)=>{i.d(t,{L1:()=>s,Rz:()=>l,WZ:()=>r,cI:()=>o,fe:()=>a,hu:()=>n});const n=64,o=80,s=22,r="HeaderContent",a=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},500985:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(616550),o=i(237056),s=i(898781),r=i(829407),a=i(980968),l=i(785893);function d(){const e=(0,n.useHistory)(),t=(0,n.useRouteMatch)(),i=(0,s.ZP)(),d=(0,o.Z)();return(0,r.Z)((()=>{"/story-pin-invite/"===t.url&&e.push("/idea-pin-invite/")})),(0,l.jsx)(a.Z,{titleText:d?i.bt("Get the app to create Pins", "Get the app to create Pins", "inviteLandingPageV2.appUpsellPage.heading.sce", undefined, true):i.bt("Get the app to create Idea Pins", "Get the app to create Idea Pins", "inviteLandingPageV2.appUpsellPage.heading", undefined, true),bodyText:d?i.bt("The Pinterest app has the tools you need to publish your first Pin. Download, be inspired, then start creating.", "The Pinterest app has the tools you need to publish your first Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description.sce", undefined, true):i.bt("The Pinterest app has the tools you need to publish your first Idea Pin. Download, be inspired, then start creating.", "The Pinterest app has the tools you need to publish your first Idea Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description", undefined, true),buttonText:i.bt("Get the app", "Get the app", "inviteLandingPageV2.appUpsellPage.cta", undefined, true),deeplink:"/idea-pin-builder/"})}},807532:(e,t,i)=>{i.d(t,{C:()=>l,f:()=>a});var n=i(667294),o=i(425288),s=i(785893);const{Provider:r,useHook:a}=(0,o.Z)("MostRecentPin");function l({children:e}){const[t,i]=(0,n.useState)(),[o,a]=(0,n.useState)(),l=(0,n.useCallback)((e=>{const t=o?o.slice(0,10):[],i=[e].concat(t.filter((t=>t!==e)));a(i)}),[o]),d=(0,n.useMemo)((()=>({id:t,plpImageSignatures:o,setMostRecentPinId:i,setMostRecentPinImage:l})),[t,o,l]);return(0,s.jsx)(r,{value:d,children:e})}},131555:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784590);function o({children:e,fieldSetKey:t,pinId:i}){const{data:o,error:s,isLoaded:r}=(0,n.Z)({name:"PinResource",options:{id:i,field_set_key:t}});return e({pin:o,loading:!r,error:(s||{}).message})}},350118:(e,t,i)=>{i.d(t,{AF:()=>a,H0:()=>l,S6:()=>d,_S:()=>c});var n=i(702664),o=i(425288),s=i(785893);const{Provider:r,useHook:a,useMaybeHook:l}=(0,o.Z)("Pins");function d(){const e=a();return t=>e[t]}function c({children:e}){const t=(0,n.useSelector)((({pins:e})=>e),n.shallowEqual);return(0,s.jsx)(r,{value:t,children:e})}},698330:(e,t,i)=>{i.d(t,{Tt:()=>u,cm:()=>c,kW:()=>l,kY:()=>h,mN:()=>d});var n=i(702664),o=i(425288),s=i(19121),r=i(785893);const{Provider:a,useHook:l}=(0,o.Z)("Users");function d(){const e=l();return t=>e[t]}function c(){const e=l();return t=>{const i=Object.keys(e).find((i=>e[i].username===t));return e[null!=i?i:""]}}function u(){const{id:e}=(0,s.Z)();return l()[null!=e?e:""]}function h({children:e}){const t=(0,n.useSelector)((({users:e})=>e),n.shallowEqual);return(0,r.jsx)(a,{value:t,children:e})}},615298:(e,t,i)=>{i.d(t,{j:()=>s});const n={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=e=>{if(!e)return"";let t="";for(let i=0;i<e.length;i+=1)t+=n[e.charAt(i)]||e.charAt(i);return t},s=(e,t,i="name")=>{const n=t.toLowerCase();return e.filter((e=>((e,t)=>{const i=t.split(" "),n=e.split(" ");let s=0;for(let r=0;r<n.length;r+=1)(o(n[r]).includes(i[s])||n[r].includes(i[s]))&&(s+=1);return s===i.length})(e[i].toLowerCase(),n)))}},425480:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(700380);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r extends n.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",(e=>{this.containerRef=e})),s(this,"fetchMoreIfNecessary",(0,o.Z)((()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:i},n)=>e+t+(n?n(t):2*t)>i)(this.containerRef,t)&&e()}),200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},2396:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(112690),o=i(667294),s=i(883119),r=i(946984),a=i(121151),l=i(482981),d=i(750869),c=i(827021),u=i(785893);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=new s.Ry(1),_=({children:e})=>e((0,r.Z)());class g extends o.Component{constructor(...e){super(...e),h(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),h(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),h(this,"flyoutProps",(()=>{var e;const{gridDescription:t,idealDirection:i,imageSrc:n,pinId:o,userId:s,board:r,sendType:a,fullName:h,profileUrl:p,element:_,viewParameter:g,component:m,viewType:f,onExternalSend:x,showCaret:b,todayArticle:y,ownerId:v}=this.props;let P={description:t,id:o,imageUrl:n,name:"",type:d.d.PIN,url:`/pin/${o}/`,ownerId:v},w=d.d.PIN;switch(a){case"user":P={description:t,id:s,imageUrl:n,name:h,type:d.d.PINNER,url:p},w=d.d.USER;break;case"board":P=r&&{description:r.description,id:r.id,imageUrl:r.imageUrl,name:r.name,type:d.d.BOARD,url:r.url,ownerId:null===(e=r.owner)||void 0===e?void 0:e.id},w=d.d.BOARD;break;case"today_article":P=y&&{description:y.subtitle||"",id:y.id,imageUrl:n,name:y.title,type:d.d.TODAY_ARTICLE,url:(0,l.Z)(y)},w=d.d.TODAY_ARTICLE}const I={element:_,component:m,onHide:this.onHide,onExternalSend:x,sendType:w,sharedObject:P,viewParameter:g,viewType:f};return{anchor:this.flyoutAnchor,idealDirection:i,onDismiss:this.handleDismiss,showCaret:b,children:(0,u.jsx)(c.default,{...I})}}))}toggle(){const{isOwnProfile:e,onToggleFlyout:t,sendType:i,userId:n,logContextEvent:o}=this.props;"user"===i&&o({event_type:101,component:13675,element:1079,object_id_str:n,view_type:4,view_parameter:e?3106:3107}),t()}render(){const{Subject:e,inModal:t,isFlyoutOpen:i,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:r,idealDirection:l,showCaret:d,children:c}=this.flyoutProps(),h=(0,u.jsx)(s.xu,{children:(0,u.jsx)(_,{children:t=>(0,u.jsx)(e,{handleSendShareFlyoutButtonClick:e=>{t?t():(null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle())},...this.props})})}),g=i&&(n||o?(0,u.jsx)(s.mh,{zIndex:o?p:void 0,children:(0,u.jsx)(s.xu,{zIndex:t?a.b7:void 0,position:t?"absolute":void 0,top:!!t||void 0,children:(0,u.jsx)(s.J2,{anchor:r,idealDirection:l,onDismiss:()=>{this.handleDismiss()},showCaret:d,size:"flexible",positionRelativeToAnchor:!1,children:c})})}):(0,u.jsx)(s.J2,{anchor:r,idealDirection:l,onDismiss:()=>{this.handleDismiss()},showCaret:d,size:"flexible",children:c}));return(0,u.jsxs)(s.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[h," ",g]})}}function m(e){return t=>{const i=(0,n.Z)();return(0,u.jsx)(g,{Subject:e,logContextEvent:i,...t})}}h(g,"defaultProps",{idealDirection:"down",onClick:()=>{}})},17676:(e,t,i)=>{i.d(t,{l:()=>c,E:()=>d});var n=i(667294),o=i(425288),s=i(505920);function r(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var i;const n=t.payload.response.resource_response.data||[],{term:s=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[s]:n}}if("ShareSuggestionsTypeaheadResource"===o.resource){var n;const i=(t.payload.response.resource_response.data||{}).items||[],{term:s=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[s]:i}}}return e}var a=i(785893);const{Provider:l,useHook:d}=(0,o.Z)("ShareSuggestions");function c({children:e}){const[t,i]=(0,n.useReducer)(r,{}),o=e=>{i({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,s.Z8)("ShareSuggestionsResource",o),(0,s.Z8)("ShareSuggestionsTypeaheadResource",o);const d=(0,n.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,a.jsx)(l,{value:d,children:e})}},327096:(e,t,i)=>{i.d(t,{j:()=>c,f:()=>d});var n=i(667294),o=i(425288);const s={currentPinDraftId:null,mostRecentTaggedObjectId:null,selectedStlItemId:null,stlCallout:{showCallout:!1},stlTaggedCoords:null,stlHoveredTaggedObjectId:null},r=(e=s,t)=>{switch(t.type){case"STL_SELECT":return{...e,selectedStlItemId:t.payload.selectedStlItemId};case"STL_SHEET":return{...e,currentPinDraftId:t.payload.currentPinDraftId};case"STL_TAGGED_PIN":return{...e,stlTaggedCoords:t.payload.stlTaggedCoords};case"STL_ERROR_STATE":return{...e,stlCallout:{showCallout:t.payload.stlCallout.showCallout,type:t.payload.stlCallout.type}};case"STL_MOST_RECENT_TAGGED_OBJECT_ID":return{...e,mostRecentTaggedObjectId:t.payload.mostRecentTaggedObjectId};case"SET_STL_HOVERED_TAGGED_OBJECT_ID":return{...e,stlHoveredTaggedObjectId:t.payload.stlHoveredTaggedObjectId};default:return e}};var a=i(785893);const{Provider:l,useHook:d}=(0,o.Z)("ShopTheLook");function c({children:e}){const[t,i]=(0,n.useReducer)(r,s),o=(0,n.useMemo)((()=>({shopTheLook:t,setStlSelection:e=>{i({type:"STL_SELECT",payload:{selectedStlItemId:e}})},setCurrentPinDraftId:e=>{i({type:"STL_SHEET",payload:{currentPinDraftId:e}})},setStlTaggedCoord:e=>{i({type:"STL_TAGGED_PIN",payload:{stlTaggedCoords:e}})},setStlCallout:({showCallout:e,type:t})=>{i({type:"STL_ERROR_STATE",payload:{stlCallout:{showCallout:e,type:t}}})},setMostRecentTaggedObjectId:e=>{i({type:"STL_MOST_RECENT_TAGGED_OBJECT_ID",payload:{mostRecentTaggedObjectId:e}})},setStlHoveredTaggedObjectId:e=>{i({type:"SET_STL_HOVERED_TAGGED_OBJECT_ID",payload:{stlHoveredTaggedObjectId:e}})}})),[t]);return(0,a.jsx)(l,{value:o,children:e})}},202870:(e,t,i)=>{i.d(t,{Z:()=>d,j:()=>l});var n=i(883119),o=i(898781),s=i(349700),r=i(773285),a=i(785893);const l=[0,2,3];function d({hasAffiliateProducts:e,href:t,isPromoted:i,onNavigateSponsorClick:d,sponsorName:c,sponsorUsername:u,sponsorshipStatus:h,textWeight:p="bold"}){const _=(0,o.ZP)(),g=(0,r.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,m=(0,r.F)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,f=t||(u?`/${u}/`:null),x=f&&c?(0,a.jsx)(n.rU,{href:f,onClick:d,children:(0,a.jsx)(n.xv,{weight:p,size:"200",children:c})},c):void 0;let b;i?b=(0,s.nk)(_.bt("Promoted by {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:x}):h||0===h?c&&!l.includes(h)?b=(0,s.nk)(_.bt("Paid partnership with {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:x}):m&&2===h||(b=_.bt("Paid partnership", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):e&&(b=_.bt("Includes sponsored products", "Includes sponsored products", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true));const y=g&&!i?"Ad • ":"";return(0,a.jsxs)(n.xv,{inline:!0,size:"200",lineClamp:2,children:[y,b]})}},777906:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),s=i(865607),r=i(785893);const a=function({badgeSize:e,badgeSpacing:t,fullName:i,identityIsVerified:a,isVerifiedMerchant:l,truncate:d=!1}){const c=i.split(" "),u=c.slice(0,c.length-1).join(" "),h=" ".concat(c[c.length-1]);return d?(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,r.jsx)(o.xv,{lineClamp:1,weight:"bold",children:i}),(0,r.jsx)(o.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,r.jsx)(s.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]}):(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("span",{children:u}),(0,r.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[h," ",(0,r.jsx)(o.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,r.jsx)(s.Z,{size:e,hasVerifiedIdentity:a,isVerifiedMerchant:l})})]})]})}},526760:(e,t,i)=>{i.d(t,{FC:()=>a,FP:()=>s,M0:()=>o,Xq:()=>l,s0:()=>n,z9:()=>r});const n=44,o=236,s=157,r=320,a=213,l=7},607989:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(121151),s=i(898781),r=i(785893);function a({cancelButtonLabel:e,confirmButtonLabel:t,heading:i,message:a,onCancel:l,onConfirm:d}){const c=(0,s.ZP)(),u=i||c.bt("Are you sure?", "Are you sure?", " - ", undefined, true),h=e||c.bt("Cancel", "Cancel", " - ", undefined, true);return(0,r.jsx)(o.ZP,{accessibilityModalLabel:u,footer:(0,r.jsxs)(n.xu,{marginEnd:-1,marginStart:-1,children:[(0,r.jsx)(n.xu,{"data-test-id":"cancel-button",padding:1,children:(0,r.jsx)(n.zx,{fullWidth:!0,onClick:l,size:"lg",text:h})}),(0,r.jsx)(n.xu,{"data-test-id":"confirm-button",padding:1,children:(0,r.jsx)(n.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:t})})]}),heading:u,onDismiss:l,role:"alertdialog",children:(0,r.jsx)(n.xu,{padding:4,children:(0,r.jsx)(n.xv,{children:a})})})}},147836:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);class o extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=()=>{const{isAtEnd:e,isFetching:t,fetchMore:i,scrollBuffer:n,scrollHeight:o,scrollTop:s}=this.props;e||t||s+n>o&&i()},(i="check")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},92261:(e,t,i)=>{i.d(t,{$T:()=>m,CI:()=>s,Ch:()=>a,Gb:()=>l,Gg:()=>n,Ie:()=>h,KP:()=>p,Kn:()=>r,Uj:()=>d,bx:()=>_,d2:()=>u,g9:()=>g,iB:()=>f,u6:()=>o,zT:()=>c});const n=508,o=2*n,s=488,r=992,a=672,l=1176,d=.6,c=.84,u=40,h=72,p=740,_=912,g=32,m=24,f={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},814197:(e,t,i)=>{i.d(t,{Cq:()=>u,Dk:()=>p,Fk:()=>s,fS:()=>c,km:()=>h,lI:()=>a,lJ:()=>r,mS:()=>d,qW:()=>l,t5:()=>_});var n=i(883119),o=i(977558);const s=new n.Ry(1),r=3,a=new n.Ry(r),l=2,d=new n.Ry(l),c=3,u=4,h=new n.Ry(5),p=new n.Ry(100),_=new n.Ry(o.fe+1)},361115:(e,t,i)=>{i.d(t,{J:()=>r,U:()=>s});var n=i(780280),o=i(50286);const s=({isDesktop:e,viewerType:t})=>"bot"===t?"seo_graphql_pin_page":"auth"===t?e?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page":e?"unauth_dweb_graphql_pin_page":"unauth_mweb_graphql_pin_page",r=()=>{const e=(0,o.HG)(),t=(()=>{const{isAuthenticated:e,isBot:t}=(0,n.B)();return t?"bot":e?"auth":"unauth"})();return s({isDesktop:e,viewerType:t})}},846760:(e,t,i)=>{i.d(t,{xH:()=>Y,uC:()=>q,sR:()=>X,DR:()=>$});var n=i(667294),o=i(702664),s=i(883119),r=i(214494),a=i(407043),l=i(898781),d=i(391254),c=i(773285),u=i(129291),h=i(780280),p=i(414327),_=i(784590),g=i(984206),m=i(941646),f=i(19121),x=i(717615),b=i(231947),y=i(814197),v=i(27255),P=i(486746),w=i(785893);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A extends n.Component{constructor(...e){super(...e),I(this,"state",{hovered:!1}),I(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),I(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),I(this,"handleTouch",(()=>{const{board:e,onClick:t}=this.props;t(e)})),I(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()})),I(this,"tapAreaRef",(0,n.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){const{hovered:e}=this.state,{accessibilityLabelText:t,board:i,buttonText:n,displayAlreadySavedMsg:o,i18n:r,isSectionOpen:a,shouldOpenSections:l,showSaveToProfile:d,showFlyoutSaveButton:c,useLegoLayout:u}=this.props,h=!!i.section_count&&i.section_count>0,p=h?"boardWithSection":"boardWithoutSection",{images:_,image_cover_url:g}=i||{},f=!(null!=g&&g.includes("custom"))&&_&&_["75x75"]&&_["75x75"][_["75x75"].length-1].url,x=f||g;return(0,w.jsx)(m.Z,{id:p,children:(0,w.jsx)(s.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,w.jsxs)(s.xu,{alignItems:"center",color:e?"secondary":"default","data-test-id":`board-row-${i.name||""}`,display:"flex",height:u?64:52,marginStart:u?2:3,marginEnd:u?2:3,marginBottom:u?0:1,marginTop:u?0:1,padding:u?2:0,rounding:3,children:[(0,w.jsxs)(s.xu,{"aria-hidden":"true",flex:"none",height:u?48:36,marginBottom:u?0:1,marginStart:u?0:2,marginEnd:u?2:3,marginTop:u?0:1,overflow:"hidden",width:u?48:36,children:[d&&"boardless"===i.type&&(0,w.jsx)(s.zd,{rounding:2,width:48,height:48,children:(0,w.jsx)(s.xu,{color:e?"default":"secondary",display:"flex",height:"100%",width:"100%",children:(0,w.jsx)(s.xu,{padding:3,children:(0,w.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Save to profile icon", "Save to profile icon", "BoardRow.TapArea.Icon", undefined, true),color:"default",icon:"history",size:24})})})}),x&&!l&&(0,w.jsx)(s.zd,{height:u?48:36,rounding:2,wash:!0,width:u?48:36,children:(0,w.jsx)(s.Ee,{src:x,alt:"",naturalHeight:u?48:36,naturalWidth:u?48:36,fit:"cover"})}),x&&l?(0,w.jsx)(s.zd,{rounding:2,wash:!0,width:u?48:36,height:u?48:36,children:(0,w.jsx)(s.Ee,{src:x,alt:"",naturalHeight:u?48:36,naturalWidth:u?48:36,fit:"cover"})}):(0,w.jsx)(s.xu,{color:l?"secondary":"transparent",width:"100%",height:"100%"})]}),(0,w.jsxs)(s.xu,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:u?0:1,children:[(0,w.jsx)(s.xv,{lineClamp:1,weight:l||!l?"bold":"normal",children:i.name}),o&&(0,w.jsx)(s.xu,{marginTop:1,children:(0,w.jsx)(s.xv,{align:"start",color:"default",size:"100",children:r.bt("Saved here already", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})})]}),i&&(!e||e&&h&&!a)?(0,w.jsx)(s.xu,{children:(0,w.jsx)(P.Z,{board:i,isOpen:i.isOpen,showCollaborativeIcon:!!i.is_collaborative,showPrivateIcon:i.privacy===v.Z.BoardPrivacy.SECRET,showProtectedIcon:i.privacy===v.Z.BoardPrivacy.PROTECTED,showSectionsIcon:h&&l,useLegoLayout:u})}):null,e&&(0===i.section_count||!l)&&c&&(0,w.jsx)(s.xu,{marginEnd:u?0:2,flex:"none",children:(0,w.jsx)(s.zx,{accessibilityLabel:t||this.props.i18n.bt("Save button", "save button", "boardRow.saveButton", undefined, true),color:"red",onClick:this.handleButtonClick,text:n||this.props.i18n.bt("Save", "Save", "save button", undefined, true)})})]})})})}}I(A,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});const E=(0,n.forwardRef)(((e,t)=>{const i=(0,l.ZP)();return(0,w.jsx)(A,{...e,ref:t,i18n:i})}));var C=i(24886);function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class j extends n.Component{constructor(...e){super(...e),S(this,"state",{hovered:!1}),S(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),S(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),S(this,"handleTouch",(()=>{const{board:e,onClick:t,section:i}=this.props;t(i,e)})),S(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()})),S(this,"tapAreaRef",(0,n.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){var e,t,i,n,o,r;const{hovered:a}=this.state,{buttonText:l,section:d,showSectionSaveButton:c,useLegoLayout:u}=this.props;return(0,w.jsx)(s.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,w.jsxs)(s.xu,{color:a?"secondary":"default","data-test-id":`section-row-${d.title||""}`,display:"flex",alignItems:"center",height:u?64:52,marginStart:u?2:0,marginEnd:u?2:0,padding:u?2:0,marginTop:u?0:1,rounding:3,dangerouslySetInlineStyle:{__style:u?{}:{marginLeft:53,marginRight:11}},children:[u&&!(null===(e=d.preview_pins)||void 0===e||!e.length)&&(0,w.jsx)(C.Z,{image_url:null!==(t=d.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(i=null===(n=d.preview_pins[0].image_square_size_pixels)||void 0===n?void 0:n.height)&&void 0!==i?i:1,naturalWidth:null!==(o=null===(r=d.preview_pins[0].image_square_size_pixels)||void 0===r?void 0:r.width)&&void 0!==o?o:1}),(0,w.jsx)(s.xu,{flex:"grow",paddingY:1,marginStart:u?0:4,children:(0,w.jsx)(s.xv,{lineClamp:1,weight:u?"bold":"normal",children:d.title})}),a&&c&&(0,w.jsx)(s.xu,{marginEnd:u?0:2,flex:"none",children:(0,w.jsx)(s.zx,{accessibilityLabel:"save button",color:"red",text:l||this.props.i18n.bt("Save", "Save", "save button", undefined, true),onClick:this.handleButtonClick})})]})})}}function T(e){const t=(0,l.ZP)();return(0,w.jsx)(j,{...e,i18n:t})}function D(e){const t=(0,l.ZP)(),{board:i,buttonText:n,onClick:o,onButtonClick:r,showSectionSaveButton:a,useLegoLayout:d}=e,c=(0,x.Z)(),u=(0,f.Z)(),h=(0,b.lJ)(u,c),p=(0,_.Z)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:h},noCache:!0}),g=p&&p.data||[];return(0,w.jsxs)(s.xu,{children:[!p.isLoaded&&(0,w.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,w.jsx)(s.$j,{accessibilityLabel:t.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),p.isLoaded&&(0,w.jsxs)(s.xu,{children:[d&&(0,w.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,w.jsx)(s.xv,{size:"100",children:t.bt("Section", "Section", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),g.map((e=>(0,w.jsx)(T,{board:i,buttonText:n,onButtonClick:r,onClick:o,section:e,showSectionSaveButton:a,useLegoLayout:d},e.id)))]})]})}S(j,"defaultProps",{showSectionSaveButton:!0});const k=52,z=64;function O({onClick:e,title:t,showIcon:i}){const o=(0,l.ZP)(),[r,a]=(0,n.useState)(!1);return(0,w.jsx)(s.iP,{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onTap:()=>{e({title:t})},children:(0,w.jsxs)(s.xu,{color:r?"secondary":"default",display:"flex",alignItems:"center",height:i?z:k,marginStart:3,marginEnd:3,marginBottom:1,rounding:3,children:[(0,w.jsx)(s.xu,{flex:"none",marginBottom:1,marginStart:i?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:i?48:36,height:i?48:36,rounding:i?2:1,children:(0,w.jsx)(s.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,w.jsx)(s.JO,{icon:"add",color:"default",size:20,accessibilityLabel:o.bt("Create board icon", "Create board icon", "BoardSuggestionRow.AccessibilityLabel.Text", undefined, true)})})}),(0,w.jsx)(s.xu,{flex:"grow",paddingY:1,children:(0,w.jsx)(s.xv,{lineClamp:1,weight:"bold",children:t})}),r&&(0,w.jsx)(s.xu,{marginEnd:2,children:(0,w.jsx)(s.zx,{accessibilityLabel:"create button",color:"red",text:o.bt("Create", "Create", "create button to create a new board", undefined, true)})})]})})}function R(e){const t=(0,l.ZP)(),{suggestionsResource:i,onClick:o,pinBuilderSuggestions:r,inWebRepinFlowExp:a}=e,d=r||i&&i.data||[],c=(0,w.jsxs)(n.Fragment,{children:[a&&(0,w.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,w.jsx)(s.xv,{size:"100",children:t.bt("Suggestions", "Suggestions", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),d.map(((e,t)=>(0,w.jsx)(O,{title:e.title,onClick:o,showIcon:a},t)))]});return(0,w.jsx)(n.Fragment,{children:d?c:(0,w.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,w.jsx)(s.$j,{accessibilityLabel:t.bt("loading board suggestions", "loading board suggestions", "accessibility text for loading spinner", undefined, true),show:!0})})})}function L({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){const o=(0,l.ZP)(),[r,a]=(0,n.useState)(!1);return(0,w.jsx)(s.xu,{"data-test-id":"create-board",height:"100%",display:"flex",children:(0,w.jsx)(s.iP,{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onTap:t,rounding:2,children:(0,w.jsxs)(s.xu,{display:"flex",alignItems:"center",padding:i?4:2,color:r?"secondary":"default",width:"100%",height:"100%",children:[(0,w.jsx)(s.xu,{rounding:i?2:0,dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginStart:i?0:4,marginEnd:i?2:5,color:i?"secondary":"transparent",children:(0,w.jsx)(s.JO,{accessibilityLabel:"",size:i?20:28,icon:i?"add":"add-circle",color:i?"default":"error"})}),e?(0,w.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Create board", "Create board", " - ", undefined, true)}):(0,w.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:o.bt("Create section", "Create section", " - ", undefined, true)})]})})})}var M=i(615298),B=i(217641);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Z=e=>e?498:439,F=360,U=e=>e?80:52;class V extends n.PureComponent{constructor(...e){var t;super(...e),t=this,N(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),N(this,"getItems",(e=>{const{boardResource:t,changeBoardModal:i,showSaveToProfile:n}=this.props;if(null==t||!t.data)return[];const{all_boards:o}=t.data,s=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n.bt("Profile", "Profile", "pinBetterSave.initialSelection.boardlessPinsOption", undefined, true),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],r=this.getAllBoards().map((e=>this.mapBoards(e,"allBoards",0))),a=this.getShortlist().map(((e,t)=>this.mapBoards(e,"shortlist",t+1))),{checkExperiment:l}=this.props,{group:d}=l("board_picker_holdout"),c="enabled_no_profile"===d,u=n&&!i&&o.length>=3&&!c?[...s,...a.slice(0,2)]:a,{searchQuery:h}=this.state;return h.length>=g.Z?[...(0,M.j)(r,h)]:[...o.length<3&&n&&!c?[{type:"header",title:this.props.i18n.bt("Quick save and organise later", "Quick save and organize later", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle", undefined, true)},...s]:[],...o.length>=3&&u&&u.length?[{type:"header",title:e?this.props.i18n.bt("Top choices", "Top choices", "PinBetterSave.BoardFlyout.TopChoicesSectionTitle", undefined, true):this.props.i18n.bt("Top board suggestions", "Top board suggestions", "Header for top suggesions in board picker", undefined, true)},...u]:[],...o.length>0?[{type:"header",title:o.length<3&&n?this.props.i18n.bt("Save to board", "Save to board", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle", undefined, true):this.props.i18n.bt("All boards", "All boards", "Header for all boards in board picker", undefined, true)},...r]:[]]})),N(this,"mapBoards",((e,t,i)=>{const{selectedBoardId:n,selectedBoardCategory:o}=this.state,s=e.id===n&&t===o;return{...e,category:t,isOpen:s,gridIndex:i}})),N(this,"handleBack",(()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)})),N(this,"handleSectionClick",((e,t)=>{const{onItemChosen:i,logContextEvent:n,pin:o}=this.props,{searchQuery:s}=this.state,r=this.getSuggestedBoardsIds();n({event_type:101,component:13282,element:36,object_id_str:t.id,view_type:91,aux_data:{board_id:t.id,grid_index:t.gridIndex,is_profile_save:!1,pin_id:null==o?void 0:o.id,search_query:s,section_id:e.id,suggested_boards:r}}),i({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})})),N(this,"getPinBuilderSuggestions",(async function(){const{pin:e}=t.props;if(e){var i;const n=r.Z.create("BoardTitleSuggestionsResource",{pin_id:e.id}),o=await n.callGet({showError:!1});if(null!==(i=o.resource_response)&&void 0!==i&&i.data){const e=o.resource_response.data.map((e=>({title:e.title})))||[];t.setState({boardSuggestions:e})}}})),N(this,"getAllBoards",(()=>{var e;const{boardResource:t,advertiser_id:i}=this.props;return((null==t||null===(e=t.data)||void 0===e?void 0:e.all_boards)||[]).filter((e=>!i||"secret"!==e.privacy))})),N(this,"getShortlist",(()=>{var e;const{suggestedBoardsShortListResource:t,displayShortlistMostRecentBoard:i,boardResource:n}=this.props,o=(null==n||null===(e=n.data)||void 0===e?void 0:e.boards_shortlist)||[];return i?o:(null==t?void 0:t.data)||[]})),N(this,"getBoards",(e=>"allBoards"===e?this.getAllBoards():"shortlist"===e?this.getShortlist():[])),N(this,"getSuggestedBoardsIds",(()=>{const{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map((e=>e.id));return e&&t.unshift("PROFILE_PINS"),t})),N(this,"handleBoardWithSectionsClick",(e=>{const{setBoardWithSection:t}=this.props,{selectedBoardId:i,selectedBoardCategory:n}=this.state,o=this.getBoards(e.category).find((({id:t})=>t===e.id)),s=i===e.id&&n===e.category;o&&t&&t(o),this.setState({isSectionOpen:!0,selectedBoardId:s?"":e.id,selectedBoardCategory:s?"":e.category})})),N(this,"handleBoardClick",(({board:e,toggleSections:t})=>{const{onItemChosen:i,logContextEvent:n,pin:o}=this.props,{searchQuery:s}=this.state,r=this.getSuggestedBoardsIds();this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(n({event_type:101,component:13282,element:36,object_id_str:e.id,view_type:91,aux_data:{board_id:e.id,grid_index:e.gridIndex,is_profile_save:"boardless"===e.type,pin_id:null==o?void 0:o.id,search_query:s,suggested_boards:r}}),i({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))})),N(this,"handleSearchQueryUpdate",(e=>{this.setState((t=>({...t,searchQuery:e})))})),N(this,"handleCreateBoardClick",(()=>{const{logContextEvent:e,onBoardCreate:t}=this.props,{searchQuery:i}=this.state;e({event_type:101,component:13282,element:249,view_type:91,aux_data:{search_query:i}}),t({title:i})})),N(this,"handleBoardSuggestionClick",(e=>{const{logContextEvent:t,onBoardCreate:i}=this.props;t({event_type:101,component:13282,element:23,view_type:91}),i(e)})),N(this,"boardSectionsHeaderRef",(0,n.createRef)())}componentDidMount(){var e;(this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.props.setBoardWithSection&&this.props.setBoardWithSection(null),this.props.showSaveToProfile)&&this.props.logContextEvent({event_type:13,component:13282,element:11933,aux_data:{pin_id:null===(e=this.props.pin)||void 0===e?void 0:e.id}})}componentDidUpdate(e,t){var i,n;if(e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus(),(null===(i=e.suggestedBoardsShortListResource)||void 0===i||!i.isLoaded)&&null!==(n=this.props.suggestedBoardsShortListResource)&&void 0!==n&&n.isLoaded){const e=this.getSuggestedBoardsIds();var o;if(e.length>0)this.props.logContextEvent({event_type:13,component:13282,element:1001,aux_data:{pin_id:null===(o=this.props.pin)||void 0===o?void 0:o.id,suggested_boards:e}})}}setPWTLoadingEnd(){const{boardResource:e,boardPickerStopwatch:t}=this.props;t&&(!e||e.error?t.error():t.stop())}render(){const{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:o,customItem:r,onButtonClick:a,paneHeight:l,paneWidth:c,requestContext:u,showSaveToProfile:h,showCreateBoardButton:p,showFlyoutSaveButton:_,showSections:g,showSectionSaveButton:f,suggestedBoardsShortListResource:x,pinAlreadySavedBoard:b,useStoryboardStyle:v,useLegoLayout:P}=this.props,{boardSuggestions:I,isSectionOpen:A,searchBoxFocused:C,searchQuery:S}=this.state;if(!t)return null;const{isLoaded:j,error:T}=t;let k=[];(j&&!T||x&&x.data&&!x.error)&&(k=this.getItems(!!P));const z=k.filter((e=>e&&"allBoards"===e.category)).length;z<=3&&0===I.length&&this.getPinBuilderSuggestions();const O=v?200:322,M=v?214:334,N=l||290,V=u.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft";let H="";null!==A&&(H=u.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");const G=e=>(0,w.jsxs)(n.Fragment,{children:[!P&&(0,w.jsx)(s.iz,{}),(0,w.jsx)(s.xu,{overflow:"hidden",height:U(P),borderStyle:P&&z>=3&&k.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},children:(0,w.jsx)(L,{onCreateBoardClick:this.handleCreateBoardClick,isBoardCreate:e,useLegoLayout:P})})]});return(0,w.jsxs)(s.xu,{width:P&&!o?"100%":c,rounding:2,overflow:"hidden",height:v||o?"100%":Z(P),color:"default",zIndex:y.lI,children:[(0,w.jsx)(d.Z,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),j?null:(0,w.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:P&&!o?F:c,children:(0,w.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),(0,w.jsx)(s.kC,{direction:"row",children:j&&(0,w.jsx)("div",{className:A?V:H,children:(0,w.jsx)(s.xu,{position:"relative",children:(0,w.jsxs)(s.xu,{display:"flex",direction:"row",width:P&&!o?720:2*(null!=c?c:0),zIndex:new s.Ry(0),children:[(0,w.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:P&&!o?F:c,children:[P&&!o&&(0,w.jsx)(s.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,w.jsx)(s.xv,{align:"center",size:"300",weight:"bold",children:h?this.props.i18n.bt("Save", "Save", "PinBetterSave.BoardFlyout.SavePlaceholder", undefined, true):this.props.i18n.bt("Save to board", "Save to board", "PinBetterSave.BoardFlyout.SaveToBoardPlaceholder", undefined, true)})}),!o&&(0,w.jsx)(s.xu,{padding:P?0:3,paddingX:P?4:3,height:P?64:"auto",children:(0,w.jsx)(B.Z,{accessibilityLabel:this.props.i18n.bt("Search through your boards", "Search through your boards", "search bar placeholder text", undefined, true),focused:C,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n.bt("Search", "Search", "search bar placeholder text", undefined, true),value:S})}),(0,w.jsxs)(s.xu,{minHeight:P?290:O,maxHeight:P?N:O,overflow:"scrollY",children:[x&&!x.isLoaded?(0,w.jsx)(m.Z,{id:"suggestedBoardsContainer",children:(0,w.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,w.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})})}):null,r,k.map(((t,n)=>"header"===t.type?(0,w.jsx)(s.xu,{paddingX:P?4:3,paddingY:1,marginTop:n>0?2:1,children:(0,w.jsx)(s.xv,{size:P?"100":"200",children:t.title})},t.title):(0,w.jsx)(s.xu,{children:(0,w.jsx)(E,{accessibilityLabelText:e,board:t,buttonText:i,displayAlreadySavedMsg:b&&b.id===t.id,onClick:e=>{this.handleBoardClick({board:e,toggleSections:g&&!!e.section_count})},onButtonClick:a,shouldOpenSections:g,showFlyoutSaveButton:_,showSaveToProfile:h,useLegoLayout:P})},`${t.category}-${t.id}`))),z<=3&&(0,w.jsx)(R,{onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:I,inWebRepinFlowExp:P})]}),p&&G(!0)]}),A&&(0,w.jsxs)(s.xu,{display:"flex",direction:"column",width:P&&!o?F:c,marginBottom:P?2:0,children:[(0,w.jsxs)(s.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,w.jsx)(s.sg,{span:2,children:(0,w.jsx)(s.xu,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3,children:(0,w.jsx)(s.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,w.jsx)(s.sg,{span:8,children:(0,w.jsx)(s.kC,{alignItems:"center",height:P?64:52,justifyContent:"center",children:(0,w.jsx)(s.xv,{weight:"bold",children:P?this.props.i18n.bt("Save Pin to", "Save Pin to", "PinBetterSave.BoardFlyout.SectionHeader", undefined, true):this.props.i18n.bt("Choose section", "Choose section", "Header for section header", undefined, true)})})}),(0,w.jsx)(s.sg,{span:2,children:(0,w.jsx)(s.xu,{})})]}),!P&&(0,w.jsx)(s.iz,{}),(0,w.jsx)(s.xu,{minHeight:P?354:M,maxHeight:P?N:M,overflow:"scrollY",children:k?(0,w.jsx)(n.Fragment,{children:k&&k.map((e=>"header"===e.type?null:(0,w.jsx)(s.xu,{children:e.isOpen&&(0,w.jsxs)(n.Fragment,{children:[P&&(0,w.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,w.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Board", "Board", "PinBetterSave.BoardFlyout.BoardPickerTitle", undefined, true)})}),(0,w.jsx)(E,{board:e,buttonText:i,displayAlreadySavedMsg:b&&b.id===e.id,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:a,shouldOpenSections:!1,showFlyoutSaveButton:_,ref:this.boardSectionsHeaderRef,useLegoLayout:P}),(0,w.jsx)(D,{board:e,buttonText:i,onClick:this.handleSectionClick,onButtonClick:a,showSectionSaveButton:f,useLegoLayout:P})]})},`${e.category}-${e.id}`)))}):null}),p&&!o&&G(!1)]})]})})})})]})}}function H(e){const{logContextEvent:t}=(0,a.v)(),i=(0,l.ZP)(),{checkExperiment:n}=(0,c.F)();return(0,w.jsx)(V,{...e,boardPickerStopwatch:(0,u.iN)(),checkExperiment:n,requestContext:(0,h.B)(),i18n:i,logContextEvent:t})}function G(e,t,i){const{advertiser:n}=e;let o;if(i&&i.user&&i.user.username&&(o=i.user.username),t&&n){const i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,username:o}}function W(e){const{advertiser_id:t,hasMUA:i}=e,{username:n}=e;let o={field_set_key:"board_picker",filter:i?"protected":"all",...n?{username:n}:Object.freeze({}),...t?{advertiser_id:t}:{}};return(!e.useStoryboardStyle||e.isORBACBeta)&&e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(o={...o,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id}),o}function $(e,t){return(i,n)=>i((0,p.jB)("BoardPickerBoardsResource",W(G(n(),e,t))))}function q(e){const t=(0,f.Z)(),i={...e,...(0,o.useSelector)((e=>G(e,t)))},n=(0,_.Z)({name:"BoardPickerBoardsResource",options:W(i)});return(0,w.jsx)(H,{...i,boardResource:n})}function X(e){const t=(0,x.Z)(),i=(0,f.Z)(),n=(0,b.lJ)(i,t),{anyEnabled:o}=(0,c.F)().checkExperiment("web_m10n_business_access_orbac_www");return(0,w.jsx)(q,{...e,orbacActingAs:n?t:void 0,isORBACBeta:o})}function Y(e){const t=(0,_.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3}}),{data:i}=(0,_.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pin.id}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,w.jsx)(H,{...e,suggestedBoardsShortListResource:t,pinAlreadySavedBoard:null==i?void 0:i.pinned_to_board})}N(V,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},486746:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(883119),o=i(758119),s=i(488769),r=i(785893);const a=({collaborator_count:e,useLegoLayout:t,type:i})=>t?(0,r.jsx)(n.xu,{marginEnd:e?2:0,children:(0,r.jsx)(s.Z,{type:i})}):(0,r.jsx)(s.Z,{type:i}),l=({board:e,showCollaborativeIcon:t,showPrivateIcon:i,showProtectedIcon:l,showSectionsIcon:d,useLegoLayout:c})=>{var u;const h=(null==e||null===(u=e.collaborating_users)||void 0===u?void 0:u.length)||0;return t||i||l||d?(0,r.jsxs)(n.xu,{display:"flex",direction:"row",marginEnd:c?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center",children:[i&&(0,r.jsx)(a,{collaborator_count:h,useLegoLayout:c,type:"secret"}),l&&(0,r.jsx)(a,{collaborator_count:h,useLegoLayout:c,type:"protected"}),t&&(c?(0,r.jsx)(o.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,r.jsx)(s.Z,{type:"group"})),d&&(0,r.jsx)(s.Z,{type:"sections"})]}):null}},970576:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(883119),o=i(499128),s=i(898781),r=i(349700),a=i(785893);const l=3e3;function d({boardName:e,boardUrl:t,isBoardlessPin:i,isFromPinBuilder:d,newPin:c,onChangeButtonClick:u,onVisitButtonClick:h=(()=>{}),onHide:p,onUndo:_,pinImageUrl:g}){const m=(0,s.ZP)();let f;return d?f={accessibilityLabel:m.bt("Visit Pin", "Visit Pin", "PostSavedPinToast.a11yVisitButton", undefined, true),label:m.bt("Visit", "Visit", "PostSavedPinToast.VisitButton", undefined, true),size:"lg",onClick:h}:(u||_)&&(f={accessibilityLabel:c&&i&&u?m.bt("Change Pin destination", "Change Pin destination", "PostSavedPinToast.a11yChangeButton", undefined, true):m.bt("Undo saved Pin", "Undo Saved Pin", "PostSavedPinToast.a11yUndoButton", undefined, true),label:c&&i&&u?m.bt("Change", "Change", "PostSavedPinToast.ChangeButton", undefined, true):m.bt("Undo", "Undo", "PostSavedPinToast.UndoButton", undefined, true),size:"lg",onClick:c&&i&&u?()=>u(c):_}),(0,a.jsx)(o.ZP,{primaryAction:f,duration:i?2*l:l,thumbnail:i?{icon:(0,a.jsx)(n.JO,{accessibilityLabel:m.bt("Saved to profile thumbnail", "Saved to profile thumbnail", "PostSavedPinToast.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"history",size:24})}:void 0,imageUrl:g,onHide:p,text:(0,a.jsx)(n.xv,{size:"200",overflow:"normal",children:(0,r.nk)(m.bt("Saved to {{ destination }}", "Saved to {{ destination }}", "PostSavedPinToast.SavedToBoardLabel", undefined, true),{destination:(0,a.jsx)(n.rU,{href:i?"/me/":null!=t?t:"",children:(0,a.jsx)(n.xv,{size:"200",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},24886:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);const s=({image_url:e,naturalHeight:t,naturalWidth:i})=>(0,o.jsx)(n.xu,{"aria-hidden":"true",marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,children:(0,o.jsx)(n.zd,{wash:!0,width:48,height:48,rounding:2,children:(0,o.jsx)(n.Ee,{src:e,alt:"",naturalHeight:t,naturalWidth:i})})})},274495:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const s={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function r(){return(0,o.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:s,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a({disabled:e,name:t,onClick:i,size:s,submitting:a,text:l}){return(0,o.jsxs)(n.xu,{display:"flex",position:"relative",children:[a&&(0,o.jsx)(r,{}),(0,o.jsx)(n.zx,{color:"red",disabled:e||a,name:t,onClick:i,size:s,type:"submit",text:l})]})}},865607:(e,t,i)=>{i.d(t,{O:()=>d,Z:()=>c});var n=i(667294),o=i(883119),s=i(898781),r=i(966113),a=i(785893);const l={xs:12,sm:16,md:20,lg:24};function d({children:e}){const t=(0,s.ZP)();return(0,a.jsx)(o.u,{link:(0,a.jsx)(o.rU,{href:r.vB,target:"blank",children:(0,a.jsx)(o.xv,{color:"inverse",size:"100",weight:"bold",children:t.bt("Learn more", "Learn more", "verifiedBadge.tooltip.link", undefined, true)})}),text:t.bt("This retailer meets Pinterest's Merchant Guidelines", "This retailer meets Pinterest's Merchant Guidelines", "merchantVerification.badge.tooltip", undefined, true),children:e})}function c({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:i,showText:r,size:c}){const u=(0,s.ZP)(),h=(0,a.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(o.JO,{accessibilityLabel:u.bt("Merchant verification badge icon", "Merchant verification badge icon", "merchantVerification.badge.icon", undefined, true),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[c]}),r&&(0,a.jsx)(o.xu,{marginStart:2,children:(0,a.jsx)(o.xv,{color:"shopping",inline:!0,weight:"bold",children:u.bt("Verified merchant", "Verified merchant", "creator.header.verifiedMerchant", undefined, true)})})]});return(0,a.jsxs)(n.Fragment,{children:[i&&!t&&(0,a.jsx)(d,{children:h}),i&&t&&h,e&&!i&&(0,a.jsx)(o.JO,{accessibilityLabel:u.bt("Domain verification icon", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:l[c]})]})}},948376:(e,t,i)=>{i.d(t,{G3:()=>c,Rp:()=>d,kp:()=>l});var n=i(202139),o=i(844974),s=i(339363);const r=14*n.F4;function a(e,t,i){return e-t>i}const l=e=>{const t=function(){const e=Date.now(),t=Number((0,o.qn)("appUpsell"));return{currentTime:e,firstUpsellTime:Number((0,o.qn)("firstUpsellTime")),lastUpsellTime:t,showedAppUpsellCurrentSession:Boolean((0,s.qn)("showedAppUpsellCurrentSession"))}}();return e?function(e,t,i){const{currentTime:n,firstUpsellTime:s,lastUpsellTime:l,showedAppUpsellCurrentSession:d}=e;return i=i||r,!s||function(e,t,i){return e<t+i}(n,s,t)?!d:!!a(n,l,i)&&((0,o.L_)("firstUpsellTime"),!0)}(t,n.F4):function(e,t){const{currentTime:i,lastUpsellTime:n}=e;return t=t||r,!n||a(i,n,t)}(t)},d=({platform:e,userAgent:t})=>{try{return"android"===e&&parseFloat((e=>{const t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(t))<7}catch(i){return!1}},c=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},116485:(e,t,i)=>{i.d(t,{AA:()=>s,E9:()=>g,EU:()=>x,IO:()=>f,Jd:()=>p,KH:()=>c,QR:()=>d,Uw:()=>o,ZR:()=>b,dy:()=>l,eA:()=>h,fo:()=>_,k7:()=>r,rT:()=>m,tz:()=>u,u9:()=>y,zR:()=>a,zu:()=>n});const n="OPEN_UNAUTH",o="openUnauthType",s="_isAfterLogin",r="_lastVisitedPages",a="_lastVisitedPagesBeforeLogin",l="_lastVisitedBoardPages",d="_lastVisitedPagesBeforeNavPage",c="_lastVisitedSessionPages",u="_unauthVisitedPages",h=20,p="_unauthInviteCode",_="_unauthReferrerString",g="unauthTopicsFollowed",m=["US","CA","NZ","AU"],f=new Set(["GB","IE"]),x=new Set(["AT","BE","CH","DE","DK","ES","FR","IT","NL","NO","PT","SE"]),b=new Set(["BR","MX","AR","CL","CO","PE"]),y="ad_img"},987318:(e,t,i)=>{i.d(t,{H:()=>s,o:()=>o});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("LimitedLogin")},843940:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(667294),o=i(883119),s=i(898781),r=i(376030),a=i(785893);const l=37.8,d=277.1569,c=()=>(0,a.jsxs)("svg",{width:440,height:316,style:{opacity:1,overflow:"visible",transform:"scale(.95)"},viewBox:"0 0 440 316",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,a.jsxs)("defs",{children:[(0,a.jsx)("path",{d:"M15.9508 11.963c-2.2026 0-3.9877 1.7852-3.9877 3.9878 0 2.2025 1.7851 3.9877 3.9877 3.9877 2.2025 0 3.9877-1.7852 3.9877-3.9877 0-2.2026-1.7852-3.9877-3.9877-3.9877m-11.9631 0c2.2025 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7852 3.9877-3.9877 3.9877C1.7852 19.9385 0 18.1533 0 15.9508c0-2.2026 1.7852-3.9877 3.9877-3.9877zm23.9261 0c2.2026 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7851 3.9877-3.9877 3.9877-2.2025 0-3.9876-1.7852-3.9876-3.9877 0-2.2026 1.7851-3.9877 3.9876-3.9877z",id:"a"}),(0,a.jsx)("path",{d:"M8.4456.6691l1.3182 4.3182h4.3945c.8974 0 1.2824 1.153.569 1.705L11.133 9.4709l1.3475 4.4165c.2699.8827-.7398 1.5963-1.4654 1.0349l-3.466-2.6794-3.4659 2.6794c-.7266.5614-1.7363-.1522-1.4664-1.035L3.9653 9.471.37 6.6923c-.7124-.552-.3274-1.705.57-1.705h4.3935L6.6527.6691c.2727-.8921 1.5202-.8921 1.7929 0",id:"b"}),(0,a.jsx)("path",{d:"M8.0882 12.9614c-2.6756 0-4.853-2.1808-4.853-4.8606 0-2.6797 2.1774-4.8605 4.853-4.8605 2.6756 0 4.853 2.1808 4.853 4.8605 0 2.6798-2.1774 4.8606-4.853 4.8606m10.6126 2.3314l-3.444-3.4486c.5848-1.1203.9197-2.3921.9197-3.7434C16.1765 3.6268 12.5554 0 8.0882 0 3.6211 0 0 3.6267 0 8.1008s3.6211 8.1009 8.0882 8.1009c1.3492 0 2.619-.3354 3.7376-.921L15.269 18.73c.948.9494 2.4839.9494 3.4318 0 .948-.9486.948-2.4878 0-3.4372",id:"c"}),(0,a.jsx)("path",{d:"M0 39.5562c0 16.8872 10.5846 31.3054 25.4808 36.9784-.3626-3.0887-.7483-8.1815.0824-11.7548.7153-3.0722 4.6182-19.5737 4.6182-19.5737s-1.1768-2.3569-1.1768-5.8477c0-5.472 3.171-9.5594 7.1234-9.5594 3.3622 0 4.984 2.5217 4.984 5.5444 0 3.3788-2.1525 8.4288-3.2633 13.113-.9263 3.9193 1.9679 7.1167 5.8312 7.1167 6.9982 0 12.381-7.3805 12.381-18.0343 0-9.4308-6.7772-16.0202-16.452-16.0202-11.201 0-17.7772 8.4023-17.7772 17.0882 0 3.3854 1.302 7.0114 2.9305 8.9859.3197.3922.3692.7318.2736 1.1306-.3 1.246-.9659 3.9194-1.0944 4.4666-.1747.7186-.5703.8735-1.3186.524-4.9181-2.2876-7.9903-9.477-7.9903-15.2521 0-12.424 9.022-23.8293 26.0148-23.8293 13.66 0 24.2776 9.7341 24.2776 22.7415 0 13.571-8.554 24.4952-20.434 24.4952-3.992 0-7.74-2.0767-9.0255-4.526 0 0-1.9745 7.5223-2.4525 9.3617-.9295 3.5732-3.5073 8.0958-5.106 10.6637 3.6853 1.134 7.5948 1.7437 11.6493 1.7437 21.8449 0 39.5561-17.7112 39.5561-39.5561C79.1123 17.7112 61.4011 0 39.5562 0 17.7112 0 0 17.7113 0 39.5562",id:"d"})]}),(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{d:"M15.12 33.6034c-7.6878 0-13.92 6.2322-13.92 13.92V300.88c0 7.6878 6.2322 13.92 13.92 13.92h409.76c7.6878 0 13.92-6.2322 13.92-13.92V47.5234c0-7.6878-6.2322-13.92-13.92-13.92H15.12z",stroke:"#DEDEDE",strokeWidth:"2.4",fill:"#FFF"}),(0,a.jsxs)("g",{transform:"translate(0 32.441)",children:[(0,a.jsx)("path",{d:"M15.12 0h409.76C433.2305 0 440 6.7695 440 15.12v48.6067H0V15.12C0 6.7695 6.7695 0 15.12 0z",fill:"#DEDEDE"}),(0,a.jsx)("rect",{fill:"#FFF",x:"15.5858",y:"12.0152",width:"218.9216",height:"38.8841",rx:"19.442"}),(0,a.jsx)("use",{fill:"#FFF",xlinkHref:"#a",transform:"translate(384.8501 15.6198)"}),(0,a.jsx)("use",{fill:"#DEDEDE",xlinkHref:"#b",transform:"translate(206.2125 24.0304)"}),(0,a.jsx)("use",{fill:"#DEDEDE",xlinkHref:"#c",transform:"translate(26.376 21.6274)"})]}),(0,a.jsxs)("g",{fill:"#DEDEDE",children:[(0,a.jsx)("rect",{id:"content-morph",x:31,y:139,width:"230.7843",height:"126.3732"}),(0,a.jsx)("rect",{className:"content-bar",x:"281.4706",y:"139.3346",width:"126.1765",height:"14.0415"}),(0,a.jsx)("rect",{className:"content-bar",x:"281.4706",y:"164.1772",width:"85.1961",height:"14.0415"})]}),(0,a.jsx)("ellipse",{fill:"#FFF",fillOpacity:"0.49",cx:38,cy:38,rx:38,ry:37.8,id:"pinterest-logo-pop-bg"}),(0,a.jsxs)("g",{id:"pinterest-logo",transform:"translate(277.1569) scale(1)",children:[(0,a.jsx)("ellipse",{fill:"#FFF",cx:"37.8",cy:"37.8479",rx:l,ry:l}),(0,a.jsxs)("g",{transform:"translate(0 .0493)",children:[(0,a.jsx)("mask",{id:"e",fill:"#fff",children:(0,a.jsx)("use",{xlinkHref:"#d"})}),(0,a.jsx)("g",{mask:"url(#e)",fill:"#E60023",children:(0,a.jsx)("rect",{width:"80.1649",height:"80.1649"})})]})]})]})]});const u=(e,t,i)=>e-t/2*(i-1),h=30,p=u(d,75.6,1.4),_=u(0,75.6,1.4),g=u(279,76,2.1),m=u(2,75.6,2.1),f={targets:".simplePopExtensionContent",opacity:[0,1],duration:500,easing:"easeInOutQuad"},x={targets:["#content-morph",".content-bar"],opacity:[0,1]},b={targets:"#content-morph",width:h,height:h,x:220,y:203,rx:20},y={targets:".content-bar",width:0,height:0,x:215,y:218},v={targets:"#content-morph",x:301,y:24},P={targets:"#pinterest-logo",translateX:[d,p],translateY:_,scale:1.4,direction:"alternate"},w={targets:"#pinterest-logo",translateX:[p,d],translateY:0,scale:1,direction:"alternate"},I={targets:"#pinterest-logo-pop-bg",translateX:[279,g],translateY:[2,m],scale:2.1,direction:"alternate"},A={targets:"#pinterest-logo-pop-bg",translateX:[g,279],translateY:[m,2],scale:1};class E extends n.PureComponent{componentDidMount(){const{isLooping:e}=this.props;window.requestAnimationFrame((()=>{const t=(e=>{const t=500+(e?0:750),i=t+300,n=i,o=i+280,s=n+210,a=r.Z.timeline({easing:"easeInOutQuad",loop:e,direction:"normal",autoplay:!1});return a.add({...x,duration:500}),e||a.add({duration:750}),a.add({...b,duration:300},t).add({...y,duration:300},t).add({...v,duration:300},i).add({...P,duration:280},i).add({...I,duration:210},n).add({...w,duration:190,easing:"cubicBezier(0, 0, 0.23, 0.8)"},o).add({...A,duration:300},s).add({duration:1400}),a})(e);(0,r.Z)(f).finished.then((()=>t.play()))}))}render(){return(0,a.jsx)(o.xu,{display:"flex",flex:"grow",justifyContent:"center",alignItems:"center",marginTop:8,children:(0,a.jsx)(c,{})})}}var C,S,j;j={isLooping:!1},(S="defaultProps")in(C=E)?Object.defineProperty(C,S,{value:j,enumerable:!0,configurable:!0,writable:!0}):C[S]=j;const T=E,D=({header:e,installClick:t,isExtensionInstalled:i=!1,isFromPinBuilder:r,skipClick:l,subheader:d})=>{const c=(0,s.ZP)(),u=c.bt("Get the Pinterest browser button", "Get the Pinterest browser button", "extensionUpsell.modal.defaultHeader", undefined, true),h=c.bt("Save creative ideas from around the web", "Save creative ideas from around the web", "extensionUpsell.modal.defaultSubheader", undefined, true),p=c.bt("With the Pinterest Save button, you can save your favourite ideas without ever leaving the page you're on.", "With the Pinterest Save Button you can save your favorite ideas without ever leaving the page you're on.", "extensionUpsell.modal.defaultHeader", undefined, true),_=c.bt("Save your favourite ideas with just one click", "Save your favorite ideas with just one click", "extensionUpsell.modal.defaultSubheader", undefined, true);return r?(0,a.jsxs)(o.xu,{children:[(0,a.jsx)(o.Ee,{src:"https://i.pinimg.com/originals/d4/d9/89/d4d9897b5d404678fa38c9cad904fc85.png",alt:c.bt("Pinterest browser extension", "Pinterest Browser Extension", "extensionUpsell.graphicAltText", undefined, true),naturalHeight:258,naturalWidth:540,children:(0,a.jsx)(o.xu,{display:"block",height:40,marginEnd:4,marginStart:4,marginTop:4,position:"absolute",right:!0,top:!0,width:40,children:(0,a.jsx)(o.hU,{accessibilityLabel:c.bt("Close", "Close", "extensionUpsell.cancelLabel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:l,size:"md"})})}),(0,a.jsxs)(o.xu,{display:"flex",direction:"column",margin:"auto",width:360,children:[(0,a.jsx)(o.xu,{marginTop:8,children:(0,a.jsx)(o.X6,{size:"500",align:"center",children:e||_})}),(0,a.jsx)(o.xu,{marginTop:4,children:(0,a.jsx)(o.xv,{align:"center",children:d||p})}),(0,a.jsx)(o.xu,{display:"flex",direction:"row",marginTop:8,marginBottom:8,children:i?(0,a.jsx)(o.zx,{accessibilityLabel:c.bt("OK", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:l,text:c.bt("OK", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(o.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginStart:12,children:(0,a.jsx)(o.zx,{fullWidth:!0,accessibilityLabel:c.bt("Maybe later", "Maybe Later", "extensionUpsell.button.maybeLaterLabel", undefined, true),onClick:l,text:c.bt("Maybe later", "Maybe Later", "extensionUpsell.button.maybeLaterLabel", undefined, true),size:"lg"})}),(0,a.jsx)(o.xu,{display:"inlineBlock",marginStart:2,children:(0,a.jsx)(o.zx,{accessibilityLabel:c.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:c.bt("Get it now", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})})]})})]})]}):(0,a.jsxs)(o.xu,{padding:8,children:[(0,a.jsx)(o.X6,{align:"center",size:"500",children:e||h}),(0,a.jsx)(o.xu,{marginTop:4,children:(0,a.jsx)(o.xv,{align:"center",children:d||u})}),(0,a.jsx)(o.xu,{display:"flex",flex:"grow",marginTop:8,paddingY:8,children:(0,a.jsx)(T,{isLooping:!0})}),(0,a.jsx)(o.kC,{alignItems:"stretch",justifyContent:"end",children:i?(0,a.jsx)(o.zx,{accessibilityLabel:c.bt("OK", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:l,text:c.bt("OK", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(o.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginEnd:2,children:(0,a.jsx)(o.zx,{fullWidth:!0,accessibilityLabel:c.bt("Cancel", "Cancel", "extensionUpsell.button.cancelLabel", undefined, true),onClick:l,text:c.bt("Cancel", "Cancel", "extensionUpsell.button.cancel", undefined, true),size:"lg"})}),(0,a.jsx)(o.zx,{accessibilityLabel:c.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:c.bt("Get it now", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})]})})]})}},310147:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(449656),o=i(780280),s=i(50286),r=i(500985),a=i(586061),l=i(785893);function d(){const{isAuthenticated:e,userAgent:t}=(0,o.B)(),i=(0,s.HG)(),{isTablet:d}=t;return!e||d?(0,l.jsx)(n.l_,{to:"/"}):i?(0,l.jsx)(a.Z,{}):(0,l.jsx)(r.Z,{})}},586061:(e,t,i)=>{i.d(t,{Z:()=>Jt});var n=i(667294),o=i(702664),s=i(616550),r=i(172045),a=i(883119),l=i(237056),d=i(367139),c=i.n(d),u=i(844889),h=i.n(u),p=i(825444),_=i.n(p),g=i(998499),m=i(316271),f=i(898781),x=i(66743),b=i(309256),y=i(785893);const v={property:"opacity",duration:1600,timingFunction:"easeInOut",delay:500},P={start:{opacity:1},end:{opacity:0}},w=[{property:"height",duration:400,timingFunction:"easeInOut",delay:500},{property:"width",duration:400,timingFunction:"easeInOut",delay:500},{property:"left",duration:400,timingFunction:"easeInOut",delay:500},{property:"top",duration:400,timingFunction:"easeInOut",delay:500},{property:"box-shadow",duration:500,timingFunction:"easeInOut",delay:900}],I={start:{boxShadow:"0 0 0 500px rgba(197, 226, 238, 0)",top:"0%",left:"0%",height:"100%",width:"100%"},end:{boxShadow:"0 0 0 500px rgba(197, 226, 238, 1)",left:"8%",top:"8%",height:"84%",width:"84%"}},A=[{property:"opacity",duration:200,timingFunction:"easeInOut",delay:1500},{property:"left",duration:800,timingFunction:"easeInOut",delay:2e3}],E={start:{opacity:0,left:"0px"},end:{left:"164px",opacity:1}},C={property:"background-color",duration:"medium",timingFunction:"easeIn",delay:4200},S={start:{backgroundColor:"rgba(17, 82, 194, 0)",marginLeft:"8px"},end:{backgroundColor:"rgba(17, 82, 194, 1)"}},j=3200,T=500;function D({onStart:e}){const t=(0,f.ZP)(),i=(0,n.useRef)(null),o=(0,n.useRef)(0),s=(0,n.useRef)(null),[r,l]=(0,n.useState)({cropper:!1,font:!1,image:!1,logo:!1}),[d,u]=(0,n.useState)(null),[p,D]=(0,n.useState)(!1),[k,z]=(0,n.useState)(I.start),[O,R]=(0,n.useState)(E.start),[L,M]=(0,n.useState)(P.start),[B,N]=(0,n.useState)(S.start),[Z,F]=(0,n.useState)(" "),U=t.bt("Picture-perfect outdoor seating", "Picture-perfect outdoor seating", "Sample text describing an image of visually-appealing outdoor seating", undefined, true);(0,n.useEffect)((()=>{r.font||(0,b.a2)().then((()=>{u(b.Wt[x.WK]),l({...r,font:!0})})),Object.keys(r).reduce(((e,t)=>e&&r[t]),!0)&&D(!0)}),[r]),(0,n.useEffect)((()=>{if(p){z(I.end),R(E.end),M(P.end),N(S.end),e&&e();const t=setTimeout((()=>setInterval((()=>function(e){const t=o.current;F(e.substr(0,t)),t>U.length&&(clearInterval(s.current),s.current=null),o.current=t+1}(U)),T/U.length)),j);i.current=t}return()=>{clearTimeout(i.current),clearInterval(s.current),i.current=null,s.current=null}}),[p,e]);const V=[t.bt("Crop images or use a preset size", "Crop images or use a preset size", "Text describing editing images", undefined, true),t.bt("Add a logo to showcase your brand", "Add a logo to showcase your brand", "Text describing adding a logo to images", undefined, true),t.bt("Use fonts and colours to make text pop", "Use fonts and colors to make text pop", "Text describing the text overlay feature in Pin creation", undefined, true)];return(0,y.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-editing-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,y.jsx)(a.xu,{alignItems:"center",minWidth:342,dangerouslySetInlineStyle:{__style:{backgroundColor:"#c5e2ee"}},display:"flex",justifyContent:"center",padding:8,position:"relative",width:342,children:(0,y.jsxs)(a.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",rounding:2,children:[(0,y.jsx)(a.xu,{left:!0,right:!0,bottom:!0,top:!0,position:"absolute",rounding:2,children:(0,y.jsx)(a.Ee,{alt:t.bt("Sample image of a Pin of outdoor furniture", "Sample image of a Pin of outdoor furniture", "Alt text describing image of outdoor furniture", undefined, true),fit:"contain",onLoad:()=>{l({...r,image:!0})},src:_(),naturalHeight:568,naturalWidth:804})}),(0,y.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{...k,transition:(0,g.Z)(w,{execution:"parallel"})}},position:"absolute",right:!0,bottom:!0,rounding:2,children:[(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...L,transition:(0,m.Z)(v)}},left:!0,right:!0,bottom:!0,top:!0,position:"absolute",children:(0,y.jsx)(a.Ee,{alt:"Cropper",fit:"contain",onLoad:()=>{l({...r,cropper:!0})},src:c(),naturalWidth:568,naturalHeight:804})}),(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...O,transition:(0,g.Z)(A,{execution:"parallel"})}},margin:4,position:"relative",top:!0,width:36,height:36,children:(0,y.jsx)(a.Ee,{onLoad:()=>{l({...r,logo:!0})},alt:t.bt("A sample logo on an image to demonstrate editing on Pinterest", "A sample logo on an image to demonstrate editing on Pinterest", "A sample logo on an image to demonstrate image editing features on Pinterest", undefined, true),color:"transparent",fit:"contain",src:h(),naturalWidth:60,naturalHeight:70})}),(0,y.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...B,borderRadius:"0 0 8px 8px",transition:(0,m.Z)(C)}},display:"flex",position:"absolute",bottom:!0,justifyContent:"center",left:!0,right:!0,padding:4,children:(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...d,color:"white",fontSize:"21px",textAlign:"center"}},children:Z})})]})]})}),(0,y.jsx)(a.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,y.jsxs)(a.xu,{children:[(0,y.jsx)(a.X6,{children:t.bt("New ways to edit", "New ways to edit", "Heading for describing ways to edit Pins", undefined, true)}),(0,y.jsx)(a.xu,{paddingY:4,children:V.map(((e,t)=>(0,y.jsxs)(a.xu,{alignItems:"center",display:"flex",flex:"none",paddingY:1,children:[(0,y.jsx)(a.xu,{color:"selected",display:"flex",rounding:"circle",width:8,height:8}),(0,y.jsx)(a.xu,{paddingX:2,children:(0,y.jsx)(a.xv,{overflow:"normal",children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`editing-screen-point-${t}`)))})]})})]})}var k=i(121313),z=i.n(k);const O={start:{top:474},end:{top:-276}},R={property:"top",duration:8e3,timingFunction:"easeOut",delay:250};function L({onStart:e}){const t=(0,f.ZP)(),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),[l,d]=(0,n.useState)(O.start);(0,n.useEffect)((()=>{s&&(o(!0),e&&e()),i&&d(O.end)}),[i,s,e]);const c=[t.bt("Make multiple Pins at the same time", "Make multiple Pins at a time", "Text describing that multiple Pins can be at once", undefined, true),t.bt("Create any format, from video to carousel", "Create any format, from video to carousel", "Text describing the different Pin formats that can be used", undefined, true),t.bt("See how Pins look before you publish", "See how Pins look before you publish", "Text describing the Pin preview feature", undefined, true)];return(0,y.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-publish-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,y.jsx)(a.xu,{minWidth:342,dangerouslySetInlineStyle:{__style:{backgroundColor:"#fbcccd"}},position:"relative",width:342,children:(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...l,transition:(0,m.Z)(R)}},height:"100%",paddingX:8,position:"relative",width:"100%",children:(0,y.jsx)(a.Ee,{alt:t.bt("Example Pins", "Example Pins", "Alt text for an image showing example Pins", undefined, true),onLoad:()=>r(!0),src:z(),naturalHeight:1660,naturalWidth:606})})}),(0,y.jsx)(a.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,y.jsxs)(a.xu,{children:[(0,y.jsx)(a.X6,{children:t.bt("Why stop at one?", "Why stop at one?", "A heading text for describing creating multiple Pins at once", undefined, true)}),(0,y.jsx)(a.xu,{paddingY:4,children:c.map(((e,t)=>(0,y.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,y.jsx)(a.xu,{color:"selected",display:"flex",flex:"none",rounding:"circle",width:8,height:8}),(0,y.jsx)(a.xu,{paddingX:2,children:(0,y.jsx)(a.xv,{children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`publish-screen-point-${t}`)))})]})})]})}var M=i(556213),B=i.n(M),N=i(530137),Z=i.n(N),F=i(226474),U=i.n(F),V=i(326880),H=i.n(V),G=i(351267),W=i.n(G);const $={property:"top",timingFunction:"easeInOut",duration:3700,delay:1725},q=[{property:"opacity",duration:500,timingFunction:"easeInOut",delay:4200},{property:"margin-top",duration:500,timingFunction:"easeInOut",delay:4200}],X=[{src:B(),keyframe:{start:{top:-77},end:{top:-663}},naturalHeight:1684,naturalWidth:360},{src:Z(),keyframe:{start:{top:-1},end:{top:-636}},naturalHeight:1684,naturalWidth:360},{src:U(),keyframe:{start:{top:-121},end:{top:-654}},naturalHeight:1684,naturalWidth:360},{src:H(),keyframe:{start:{top:-5},end:{top:-646}},naturalHeight:1684,naturalWidth:360},{src:W(),keyframe:{start:{top:-142},end:{top:-650}},naturalHeight:1684,naturalWidth:360}],Y={start:{marginTop:24,maxWidth:500,opacity:0},end:{marginTop:0,maxWidth:500,opacity:1}};function K({onStart:e}){const t=(0,f.ZP)(),[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)([]),[l,d]=(0,n.useState)(Y.start),[c,u]=(0,n.useState)(X.reduce(((e,t)=>[...e,t.keyframe.start]),[]));return(0,n.useEffect)((()=>{const e=X.map((()=>!0));r(e)}),[]),(0,n.useEffect)((()=>{0===s.filter((e=>e)).length&&(o(!0),e&&e()),i&&(d(Y.end),u(X.reduce(((e,t)=>[...e,t.keyframe.end]),[])))}),[i,s,e]),(0,y.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-welcome-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[X.map(((e,i)=>{const{src:n,naturalHeight:o,naturalWidth:l}=X[i],d=i>X.length/2?4:void 0,u=i<X.length/2-1?4:void 0;return(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...c[i],transition:(0,m.Z)($)}},height:240,marginStart:d,marginEnd:u,width:164,position:"relative",children:(0,y.jsx)(a.Ee,{alt:t.bt("Column of example Pins", "Column of example Pins", "Image alt text describing a column of example Pins", undefined, true),color:"transparent",onLoad:()=>{const e=[...s];e[i]=!1,r(e)},naturalHeight:o,naturalWidth:l,src:n})},`education-image-strip-${i}`)})),(0,y.jsx)(a.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,y.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...l,transition:`${(0,g.Z)(q,{execution:"parallel"})}`}},direction:"column",display:"flex",justifyContent:"center",padding:12,children:[(0,y.jsx)(a.X6,{children:t.bt("Great Pins made easy", "Great Pins made easy", "In-product education heading text for creating Pins", undefined, true)}),(0,y.jsx)(a.xu,{paddingY:4,children:(0,y.jsx)(a.xv,{align:"center",children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:t.bt("Add text and logos, make multiple Pins at the same time and edit like a pro. New tools let you create Pins your way.", "Add text and logos, make multiple Pins at once and edit like a pro. New tools let you create Pins your way.", "Text describing how to make Pins on Pinterest", undefined, true)})})})]})})]})}var J=i(915206),Q=i(407043),ee=i(121151),te=i(349700),ie=i(299295),ne=i(346360),oe=i(474394),se=i(106331);function re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ae extends n.Component{constructor(...e){super(...e),re(this,"state",{description:this.props.initialDescription,descriptionFocused:!1,dirtyFields:new Set,link:this.props.initialLink,linkError:null,publishOption:this.props.initialPublishOption,scheduledDate:this.props.initialScheduledDate,scheduledTime:this.props.initialScheduledTime,selectedItem:this.props.initialSelectedItem,title:this.props.initialTitle,titleFocused:!1}),re(this,"mounted",!1),re(this,"handleDescriptionFocus",(()=>{this.setState({descriptionFocused:!0})})),re(this,"handleDescriptionBlur",(()=>{this.setState({descriptionFocused:!1})})),re(this,"handleTitleFocus",(()=>{this.setState({titleFocused:!0})})),re(this,"handleTitleBlur",(()=>{this.setState({titleFocused:!1})})),re(this,"handleLinkBlur",(({value:e})=>{const{i18n:t,ideaPinRenamingEnabled:i}=this.props;(0,ne.qi)({i18n:t,ideaPinRenamingEnabled:i,link:e}).then((e=>{if(e&&e.length>0&&this.mounted){const{message:t}=e[0];this.setState({linkError:t})}}))})),re(this,"handleDescriptionChange",(({value:e})=>{this.setState((t=>({description:e.substring(0,ie.JO),dirtyFields:t.dirtyFields.add("description")})))})),re(this,"handleLinkChange",(({value:e})=>{this.setState((t=>({link:e,linkError:null,dirtyFields:t.dirtyFields.add("link")})))})),re(this,"handleTitleChange",(({value:e})=>{this.setState((t=>({title:e.substring(0,ie.Ke),dirtyFields:t.dirtyFields.add("title")})))})),re(this,"handleBoardItemChosen",(e=>{this.setState((t=>({selectedItem:e,dirtyFields:t.dirtyFields.add("board")})))})),re(this,"handleSubmitClick",(()=>{const{i18n:e,ideaPinRenamingEnabled:t,onDismiss:i,onSubmit:n}=this.props,{description:o,link:s,publishOption:r,scheduledDate:a,scheduledTime:l,selectedItem:d,title:c}=this.state;this.props.logContextEvent({event_type:101,component:13396,element:11331}),(0,ne.qi)({i18n:e,ideaPinRenamingEnabled:t,link:s}).then((e=>{if(!e||e&&0===e.length)n({...null!=o?{description:o}:Object.freeze({}),...null!=s?{link:s}:Object.freeze({}),...null!=r?{publishOption:r}:Object.freeze({}),...void 0!==a?{scheduledDate:a}:Object.freeze({}),...void 0!==l?{scheduledTime:l}:Object.freeze({}),...void 0!==d?{selectedItem:d}:Object.freeze({}),...null!=c?{title:c}:Object.freeze({})}),i();else if(e&&this.mounted){const{message:t}=e[0];this.setState({linkError:t})}}))}))}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{numPins:e,onDismiss:t}=this.props,{description:i,descriptionFocused:n,dirtyFields:o,link:s,linkError:r,selectedItem:l,title:d,titleFocused:c}=this.state,u=this.props.i18n.bt("Field updated", "Field updated", "Icon symbolizing that the value for a field will be updated", undefined, true);return(0,y.jsx)(ee.ZP,{accessibilityModalLabel:this.props.i18n.bt("Edit Pin info", "Edit Pin info", "Label to describe the bulk Pin edit modal", undefined, true),footer:(0,y.jsxs)(a.xu,{padding:1,display:"flex",justifyContent:"between",alignItems:"center",children:[(0,y.jsx)(a.xu,{paddingX:3,children:(0,y.jsx)(a.xv,{size:"200",color:"subtle",children:(0,te.nk)(this.props.i18n.nbt(["Editing info for {{ numPins }} Pin", "Editing info for {{ numPins }} Pins"], e, "Number of Pins selected for bulk edit", true),{numPins:e})})}),(0,y.jsx)(a.xu,{"data-test-id":"pin-builder-edit-modal-save-button",children:(0,y.jsx)(a.zx,{text:this.props.i18n.bt("Update info", "Update info", "Button to save info to selected Pins", undefined, true),color:"red",disabled:0===o.size,onClick:this.handleSubmitClick})})]}),heading:this.props.i18n.bt("Edit info", "Edit info", "Heading for the bulk Pin info edit modal", undefined, true),onDismiss:t,size:"md",children:(0,y.jsxs)(a.xu,{column:12,paddingX:8,paddingY:6,"data-test-id":"pinbuilder-bulk-edit-modal",children:[(0,y.jsxs)(a.xu,{marginBottom:6,children:[(0,y.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-board",children:(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,y.jsx)(a.xv,{children:this.props.i18n.bt("Board", "Board", "Label for bulk apply board dropdown", undefined, true)}),o.has("board")&&(0,y.jsx)(a.xu,{paddingX:1,children:(0,y.jsx)(a.JO,{icon:"check-circle",accessibilityLabel:u,color:"success",size:12})})]})}),(0,y.jsx)(J.Z,{flyoutSize:480,onItemChosen:this.handleBoardItemChosen,placeholder:void 0===l?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for board dropdown with multiple boards", undefined, true):this.props.i18n.bt("Select", "Select", "Placeholder text for board dropdown to select board", undefined, true),selectedItem:l,showButton:!1,showCreateBoardButton:!1,showFlyoutSaveButton:!1,showSectionSaveButton:!1,useLayer:!1})]}),(0,y.jsxs)(a.xu,{marginBottom:6,children:[(0,y.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-title",children:(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,y.jsx)(a.xv,{children:this.props.i18n.bt("Title", "Title", "Label for bulk apply title text field", undefined, true)}),o.has("title")&&(0,y.jsx)(a.xu,{paddingX:1,children:(0,y.jsx)(a.JO,{icon:"check-circle",accessibilityLabel:u,color:"success",size:12})})]})}),(0,y.jsx)(a.nv,{id:"pin-builder-edit-modal-title",onBlur:this.handleTitleBlur,onChange:this.handleTitleChange,onFocus:this.handleTitleFocus,onKeyDown:this.handleTitleChange,placeholder:void 0===d?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for title field with multiple titles", undefined, true):void 0,size:"lg",value:d||""}),(0,y.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:c&&(0,y.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,y.jsx)(a.xu,{flex:"grow",children:(0,y.jsx)(a.xv,{size:"100",color:"subtle",children:this.props.i18n.bt("The first 40 characters are what usually show up in feeds", "Your first 40 characters are what usually show up in feeds", "pinbuilder.header.editModal.title.helper", undefined, true)})}),(0,y.jsx)(a.xu,{flex:"none",children:(0,y.jsx)(a.xv,{size:"100",color:"default",children:ie.Ke-(d||"").length})})]})})]}),(0,y.jsxs)(a.xu,{marginBottom:6,children:[(0,y.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-description",children:(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,y.jsx)(a.xv,{children:this.props.i18n.bt("Description", "Description", "Label for bulk apply description text field", undefined, true)}),o.has("description")&&(0,y.jsx)(a.xu,{paddingX:1,children:(0,y.jsx)(a.JO,{icon:"check-circle",accessibilityLabel:u,color:"success",size:12})})]})}),(0,y.jsx)(a.Kx,{id:"pin-builder-edit-modal-description",onChange:this.handleDescriptionChange,onKeyDown:this.handleDescriptionChange,onFocus:this.handleDescriptionFocus,onBlur:this.handleDescriptionBlur,placeholder:void 0===i?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for description field with multiple descriptions", undefined, true):void 0,rows:4,value:i||""}),(0,y.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:n&&(0,y.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,y.jsx)(a.xu,{flex:"grow",children:(0,y.jsx)(a.xv,{size:"100",color:"subtle",children:this.props.i18n.bt("People will usually see the first 50 characters when they click on your Pin", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.header.editModal.description.helper", undefined, true)})}),(0,y.jsx)(a.xu,{flex:"none",children:(0,y.jsx)(a.xv,{size:"100",color:"default",children:ie.JO-(i||"").length})})]})})]}),(0,y.jsxs)(a.xu,{children:[(0,y.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-link",children:(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",marginBottom:1,children:[(0,y.jsx)(a.xv,{children:this.props.i18n.bt("Link", "Link", "Label for bulk apply link text field", undefined, true)}),(o.has("link")||!!r)&&(0,y.jsx)(a.xu,{paddingX:1,children:(0,y.jsx)(a.JO,{icon:r?"alert":"check-circle",accessibilityLabel:u,color:r?"error":"success",size:12})})]})}),(0,y.jsx)(a.nv,{hasError:!!r,id:"pin-builder-edit-modal-link",onBlur:this.handleLinkBlur,onChange:this.handleLinkChange,onKeyDown:this.handleLinkChange,placeholder:void 0===s?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for link field with multiple links", undefined, true):void 0,size:"lg",value:s||""}),(0,y.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:!!r&&(0,y.jsx)(a.xu,{column:12,display:"flex",justifyContent:"between",children:(0,y.jsx)(a.xv,{size:"100",color:"error",children:r})})})]})]})})}}function le(e){const{logContextEvent:t}=(0,Q.v)(),i=(0,f.ZP)(),n=(0,l.Z)(),s=(0,o.useSelector)(se.p),r=(0,o.useSelector)((e=>(0,se.xA)(e).length)),a=(0,o.useDispatch)();return(0,y.jsx)(ae,{...e,i18n:i,ideaPinRenamingEnabled:n,logContextEvent:t,...s,numPins:r,onSubmit:e=>a((0,oe.setPinBuilderSharedData)(e))})}function de(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ce extends n.Component{constructor(...e){super(...e),de(this,"state",{showModal:!1}),de(this,"handleShowModal",(()=>{this.props.logContextEvent({event_type:101,component:13208,element:11325}),this.setState({showModal:!0})})),de(this,"handleHideModal",(()=>{this.setState({showModal:!1})}))}render(){const{showModal:e}=this.state;return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Edit", "Edit", "Button to bulk edit Pin images", undefined, true),icon:"edit",onClick:this.handleShowModal,iconColor:"gray",size:"md"}),e&&(0,y.jsx)(le,{onDismiss:this.handleHideModal})]})}}function ue(e){const{logContextEvent:t}=(0,Q.v)(),i=(0,f.ZP)();return(0,y.jsx)(ce,{...e,i18n:i,logContextEvent:t})}var he=i(19121),pe=i(717615),_e=i(231947),ge=i(957161);function me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class fe extends n.Component{constructor(...e){super(...e),me(this,"state",{checked:!1}),me(this,"handleChange",(({checked:e})=>{this.setState({checked:e})})),me(this,"handleButtonClick",(({event:e})=>{const{onButtonClick:t}=this.props,{checked:i}=this.state;t({event:e,checked:i})}))}render(){const{alertText:e,buttonText:t,headingText:i,id:n,onDismiss:o}=this.props,{checked:s}=this.state;return(0,y.jsx)(a.u_,{accessibilityModalLabel:this.props.i18n.bt("Alert modal", "Alert modal", "Alert modal to confirm action", undefined, true),heading:(0,y.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginTop:6,children:(0,y.jsx)(a.X6,{size:"500",children:i})}),onDismiss:o,footer:(0,y.jsxs)(a.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[(0,y.jsx)(a.xu,{flex:"grow",paddingX:1,children:(0,y.jsx)(a.zx,{fullWidth:!0,text:this.props.i18n.bt("Cancel", "Cancel", "Button to close alert modal", undefined, true),onClick:o,size:"lg"})}),(0,y.jsx)(a.xu,{flex:"grow",paddingX:1,children:(0,y.jsx)(a.zx,{fullWidth:!0,text:t,onClick:this.handleButtonClick,color:"red",size:"lg"})})]}),size:"sm",role:"alertdialog",children:(0,y.jsxs)(a.xu,{children:[(0,y.jsx)(a.xv,{align:"center",children:e}),(0,y.jsxs)(a.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginTop:4,children:[(0,y.jsx)(a.XZ,{checked:s,id:n,size:"sm",onChange:this.handleChange}),(0,y.jsx)(a.__,{htmlFor:n,children:(0,y.jsx)(a.xu,{paddingX:2,children:(0,y.jsx)(a.xv,{children:this.props.i18n.bt("Do not show this message again", "Do not show this message again", "Checkbox option to never show alert modal again", undefined, true)})})})]})]})})}}function xe(e){const t=(0,f.ZP)();return(0,y.jsx)(fe,{...e,i18n:t})}var be=i(395024),ye=i(299899);function ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Pe extends n.Component{constructor(...e){super(...e),ve(this,"state",{showModal:!1}),ve(this,"handleShowModal",(()=>{this.setState({showModal:!0})})),ve(this,"handleHideModal",(()=>{this.setState({showModal:!1})})),ve(this,"handleButtonClick",(()=>{const{onClickDelete:e,logContextEvent:t}=this.props,i=ge.Z.getItem(ye.Lj);t({event_type:101,component:13208,element:11327}),i?e():this.handleShowModal()})),ve(this,"handleAlertButtonClick",(({checked:e})=>{const{onClickDelete:t}=this.props;e&&ge.Z.setItem(ye.Lj,!0),t()}))}render(){const{showModal:e}=this.state;return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Delete", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),bgColor:"transparent",icon:"trash-can",onClick:this.handleButtonClick,iconColor:"gray",size:"md"}),e&&(0,y.jsx)(xe,{alertText:this.props.i18n.bt("This will delete your entire Pin canvas. This action cannot be undone", "This will delete your entire Pin canvas. This action cannot be undone", "Warning message shown before Pin drafts are deleted", undefined, true),buttonText:this.props.i18n.bt("Delete", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),headingText:this.props.i18n.bt("Are you sure?", "Are you sure?", "Alert modal to confirm action", undefined, true),id:"pin-builder-delete-menu-alert-modal",onButtonClick:this.handleAlertButtonClick,onDismiss:this.handleHideModal})]})}}function we(e){const{logContextEvent:t}=(0,Q.v)(),i=(0,f.ZP)(),n=(0,o.useDispatch)(),s=(0,he.Z)(),r=s.isAuth&&s.isEmployee;return(0,y.jsx)(Pe,{...e,onClickDelete:()=>n((0,be.Z)({i18n:i,isEmployee:r})),i18n:i,logContextEvent:t})}var Ie=i(264938);function Ae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Ee extends n.Component{constructor(...e){super(...e),Ae(this,"handleSelectAllClick",(()=>{const{onSelectAll:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11323}),e()})),Ae(this,"handleClearAllClick",(()=>{const{onClickClear:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11324}),e()})),Ae(this,"handlePublishClick",(()=>{const{numSelected:e,onClickPublish:t,logContextEvent:i}=this.props;i({event_type:101,component:13208,element:11328,aux_data:{pin_builder_data:JSON.stringify({publish_count:e})}}),t()}))}render(){const{allSelected:e,numSelected:t}=this.props;return(0,y.jsxs)(a.xu,{display:"flex",color:"default",justifyContent:"between",alignItems:"center",height:"100%",children:[(0,y.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(a.xu,{paddingX:6,children:(0,y.jsx)(a.xv,{color:"default",children:(0,te.nk)(this.props.i18n.nbt(["{{ numSelected }} Pin selected", "{{ numSelected }} Pins selected"], t, "Number of Pins selected for bulk edit or save", true),{numSelected:t})})}),(0,y.jsx)(a.xu,{width:1,height:32,color:"secondary"}),(0,y.jsx)(a.xu,{paddingX:4,"data-test-id":"pin-builder-select-all",children:(0,y.jsx)(a.zx,{text:e?this.props.i18n.bt("Deselect all", "Deselect all", "Button to deselect all Pin drafts for bulk actions", undefined, true):this.props.i18n.bt("Select all", "Select all", "Button to select all Pin drafts for bulk actions", undefined, true),color:"white",onClick:e?this.handleClearAllClick:this.handleSelectAllClick})})]}),(0,y.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",paddingX:5,children:[(0,y.jsx)(a.xu,{paddingX:1,"data-test-id":"pin-builder-edit-selected",children:(0,y.jsx)(ue,{})}),(0,y.jsx)(a.xu,{paddingX:1,"data-test-id":"pin-builder-delete-selected",children:(0,y.jsx)(we,{})}),(0,y.jsx)(a.xu,{paddingX:1,"data-test-id":"pin-builder-publish-all",children:(0,y.jsx)(a.zx,{color:"red",name:"publish",onClick:this.handlePublishClick,text:this.props.i18n.bt("Publish", "Publish", "Button to publish all selected Pins", undefined, true)})})]}),(0,y.jsx)(a.xu,{width:1,height:32,color:"secondary"}),(0,y.jsx)(a.xu,{paddingX:6,children:(0,y.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Cancel changes", "Cancel changes", "Button to deselect all Pins", undefined, true),bgColor:"transparent",icon:"cancel",onClick:this.handleClearAllClick,iconColor:"gray",size:"md"})})]})]})}}function Ce(e){const{logContextEvent:t}=(0,Q.v)(),i=(0,f.ZP)(),n=(0,o.useDispatch)(),s=(0,he.Z)(),r=(0,pe.Z)(),a=(0,_e.lJ)(s,r),l=s.isAuth?s.id:"",d=s.isAuth?s.country:"",c=s.isAuth&&s.isPartner,u=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length)),h=(0,o.useSelector)((({pinbuilder:{pinDrafts:e,pinDraftIds:t,selectedPinDraftIds:i}})=>t.filter((t=>!ie.x1.includes(e[t].status))).length===i.length));return(0,y.jsx)(Ee,{...e,allSelected:h,i18n:i,logContextEvent:t,numSelected:u,onClickClear:()=>n((0,oe.clearSelectedPinBuilderPinDrafts)()),onClickPublish:()=>n((0,Ie.Z)(l,d,c,i,t,a)),onSelectAll:()=>n((0,oe.selectAllPinBuilderPinDrafts)())})}var Se=i(553558),je=i(665866),Te=i(780280),De=i(938999);function ke(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ze={checked:{__style:{border:"solid 2px #e60023"}},unchecked:{__style:{border:"dashed 2px #767676"}}};class Oe extends n.Component{constructor(...e){super(...e),ke(this,"state",{isHovering:!1}),ke(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),ke(this,"handleMouseLeave",(()=>{this.setState({isHovering:!1})}))}render(){const{checked:e,onClick:t}=this.props,{isHovering:i}=this.state;return(0,y.jsx)(a.xu,{rounding:"circle",color:e?"primary":"transparent",dangerouslySetInlineStyle:e?ze.checked:ze.unchecked,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:(0,y.jsx)(a.hU,{accessibilityLabel:e?this.props.i18n.bt("Deselect Pin", "Deselect Pin", "Button to deselect Pin from bulk editing", undefined, true):this.props.i18n.bt("Select Pin", "Select Pin", "Button to select Pin from bulk editing", undefined, true),bgColor:"transparent",icon:e||i?"check":void 0,iconColor:e?"white":"gray",onClick:t,size:"md"})})}}function Re(e){const t=(0,f.ZP)();return(0,y.jsx)(Oe,{...e,i18n:t})}var Le=i(327096);function Me(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Be=new a.H3([new a.Ry(ie.v9)]);class Ne extends n.Component{constructor(...e){super(...e),Me(this,"pinDraftRef",(0,n.createRef)()),Me(this,"handleSelectPinDraft",(()=>{const{selectPinDraft:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11332}),e()})),Me(this,"getCallout",(()=>({error:{title:this.props.i18n.bt("Product tagging limit reached", "Product tagging limit reached", "pinbuilder.productTagging.error", undefined, true),message:this.props.i18n.bt("To add another item, remove one or more tagged products", "To add another item, remove one or more tagged products", "pinbuilder.productTagging.error.instructions", undefined, true)},warning:{title:this.props.i18n.bt("Products will be deleted", "Products will be deleted", "pinbuilder.carousel.warningHeader", undefined, true),message:this.props.i18n.bt("Your tagged products will be deleted if you add a carousel image", "Your tagged products will be deleted if you add a carousel image", "pinbuilder.carousel.warning", undefined, true)}}))),Me(this,"handleClick",(()=>{const{deselectPinDraft:e,pinDraftId:t,selectedPinDraftIds:i,status:n}=this.props,o=!ie.x1.includes(n);i.includes(t)?e():o&&this.handleSelectPinDraft()}))}componentDidMount(){this.pinDraftRef.current&&!this.props.skipScrolling&&this.pinDraftRef.current.scrollIntoView({behavior:"smooth",block:"start"})}render(){const{numPinDrafts:e,pinDraftId:t,selectedPinDraftIds:i,status:n,setStlCallout:o,stlCallout:s,requestContext:{isRTL:r}}=this.props,{showCallout:l,type:d}=s||{},c=i.includes(t),u=i.length,h=r?{left:"-60px",transformOrigin:"right center"}:{right:"-60px",transformOrigin:"left center"},p={__style:{top:"20px",opacity:c?void 0:.6,transition:`transform 250ms ${ie.rc}`,transform:u>0?"scale(2)":void 0,...h}},_={backgroundColor:"rgba(255,255,255,0.7)",borderRadius:16,height:"100%",width:"100%",zIndex:"publishing"===n?ie.v9:void 0},g="publishing"===n||"uploading"===n&&1===e,m=!ie.x1.includes(n),f=this.getCallout();return(0,y.jsxs)(a.xu,{paddingY:3,ref:this.pinDraftRef,"data-group-id":"pin-builder-pin-draft","data-test-id":`pin-builder-pin-draft-${t}`,children:[(0,y.jsxs)(a.xu,{position:"relative",children:[(0,y.jsx)(Se.ZP,{pinDraftId:t}),e>1&&m&&(je.Z.enabled("multi_pin")||je.Z.enabled("multi_pin_pinner"))&&(0,y.jsx)(a.xu,{position:"absolute",dangerouslySetInlineStyle:p,"data-test-id":"pin-draft-select",children:(0,y.jsx)(Re,{checked:c,onClick:this.handleClick})}),(u>0||g)&&(0,y.jsx)(a.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:Be,children:(0,y.jsx)(De.Z,{selected:c,onClick:this.handleClick,style:_,children:g&&(0,y.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:(0,y.jsx)(a.$j,{show:!0,accessibilityLabel:this.props.i18n.bt("Saving Pin...", "Saving Pin...", "Spinner accessibility label when saving the pin", undefined, true)})})})})]}),l&&d&&(0,y.jsx)(a.xu,{position:"absolute",bottom:!0,width:ie.of,dangerouslySetInlineStyle:{__style:{marginBottom:"30px"}},children:(0,y.jsx)(a.UW,{dismissButton:{accessibilityLabel:this.props.i18n.bt("Dismiss banner", "Dismiss banner", "pinbuilder.error.dismissButton", undefined, true),onDismiss:o},iconAccessibilityLabel:this.props.i18n.bt("Error icon", "Error icon", "pinBuilder.taggedObjects.error", undefined, true),type:d,title:f[d].title,message:f[d].message})})]})}}function Ze(e){const{logContextEvent:t}=(0,Q.v)(),i=(0,f.ZP)(),{shopTheLook:n,setStlCallout:s}=(0,Le.f)(),{pinDraftId:r,skipScrolling:a}=e,l=(0,o.useDispatch)(),{pinDraftIds:d,pinDrafts:c,selectedPinDraftIds:u}=(0,o.useSelector)((({pinbuilder:e})=>e)),{stlCallout:h}=n;return(0,y.jsx)(Ne,{...e,deselectPinDraft:()=>l((0,oe.deselectPinBuilderPinDraft)(r)),numPinDrafts:d.length,selectedPinDraftIds:u,status:c[r].status,stlCallout:h,requestContext:(0,Te.B)(),selectPinDraft:()=>l((0,oe.selectPinBuilderPinDraft)(r)),setStlCallout:()=>s({showCallout:!1}),skipScrolling:a,i18n:i,logContextEvent:t})}var Fe=i(869636);function Ue({setPinDraftRef:e}){(0,Fe.Z)(1000287),(0,Fe.Z)(1000288);const t=(0,o.useSelector)((({pinbuilder:e})=>e.pinDraftIds)),i=(0,o.useSelector)((({pinbuilder:e})=>e.selectedPinDraftIds.length>0)),n={__style:{transformOrigin:"top center",transition:`transform 250ms ${ie.rc}, height 250ms ${ie.rc}`,transform:i?"scale(0.5)":void 0,height:i?"50%":"100%"}};return(0,y.jsx)(a.xu,{dangerouslySetInlineStyle:n,children:(0,y.jsx)(a.xu,{display:"flex",direction:"column",alignItems:"center",paddingY:7,children:(0,y.jsx)(a.xu,{children:(0,y.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:(0,y.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:t.map((i=>(0,y.jsx)(a.xu,{ref:t=>e(i,t),children:(0,y.jsx)(Ze,{pinDraftId:i,skipScrolling:1===t.length})},i)))})})})})})}var Ve=i(430957),He=i(448994);const Ge={__style:{borderRadius:2}};class We extends n.Component{constructor(...e){var t,i,n;super(...e),n=()=>{const{addPinDraft:e,location:t,logContextEvent:i}=this.props;i({event_type:101,component:13395,element:11329});const{board:n,boardSection:o}=t.state||{};e(n?{selectedItem:{boardId:n.id,title:o?o.title:n.name,...o?{sectionId:o.id}:{}}}:{})},(i="handleAddDraftClick")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{disabled:e,isAddPinDraftRemoved:t,pinDraftIds:i,pinDraftRefs:n,scrollPosition:o,requestContext:{isRTL:s}}=this.props,r=i.length,l={backgroundColor:"#fff",border:0,borderRadius:8,boxSizing:"border-box",cursor:e?"default":"pointer",height:60,outline:"none",opacity:e?.5:void 0,padding:0,width:40};return(0,y.jsxs)(a.xu,{height:"100%",display:"flex",direction:"column","data-test-id":"pin-builder-controls",children:[!t&&(0,y.jsx)(a.xu,{"data-tutorial-id":"pin-builder-batch-create",flex:"none",padding:4,children:(0,y.jsx)("button",{onClick:this.handleAddDraftClick,disabled:e,style:l,children:(0,y.jsx)(a.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center","data-test-id":"pin-builder-add-draft",children:(0,y.jsx)(a.JO,{accessibilityLabel:this.props.i18n.bt("Create new Pin", "Create new Pin", "Button to add another Pin draft", undefined, true),icon:"add",color:e?"subtle":"default"})})})}),(0,y.jsx)(a.xu,{height:1,color:"lightWash",marginStart:2,marginEnd:2}),(0,y.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",overflow:"auto",children:(0,y.jsx)(a.xu,{marginTop:3,children:i.map(((e,t)=>(0,y.jsxs)(a.xu,{paddingX:4,paddingY:1,position:"relative",children:[(0,y.jsx)(Ve.Z,{pinDraftId:e,pinDraftRefs:n}),Math.min(Math.floor(o*r),r-1)===t&&(0,y.jsx)(a.xu,{position:"absolute",top:!0,bottom:!0,left:!s,right:s,marginTop:1,marginBottom:1,color:"dark",width:4,dangerouslySetInlineStyle:Ge})]},e)))})})]})}}function $e(e){const{isAddPinDraftRemoved:t}=e,{logContextEvent:i}=(0,Q.v)(),a=(0,f.ZP)(),l=(0,he.Z)(),d=l.isAuth&&l.isEmployee,c=(0,o.useDispatch)(),{pinDrafts:u,pinDraftIds:h,selectedPinDraftIds:p}=(0,o.useSelector)((({pinbuilder:e})=>e));return(0,y.jsx)(We,{...e,addPinDraft:(0,n.useCallback)((e=>c((0,He.Z)({i18n:a,isEmployee:d,pinDraft:e,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))),[]),disabled:p.length>0||h.filter((e=>"succeeded"!==u[e].status)).length>=ie.TK,isAddPinDraftRemoved:t,location:(0,s.useLocation)(),pinDraftIds:h,requestContext:(0,Te.B)(),i18n:a,logContextEvent:i})}var qe=i(377184),Xe=i(918301),Ye=i(332611),Ke=i(70943),Je=i(558068),Qe=i(454074),et=i(584595),tt=i(773285),it=i(784590),nt=(i(6663),i(826067)),ot=i(323716),st=i(388619),rt=i(954931),at=i(508847),lt=i(566101),dt=i(829407),ct=i(77891),ut=i(939853),ht=i(676553),pt=i(495794),_t=i(537339);var gt=i(833991),mt=i(977558),ft=i(725108),xt=i(562559),bt=i(965900),yt=i(944546);const vt="https://v1.pinimg.com/videos/mc/hls/7f/20/86/7f20869b2522dca00ebf1f745313b90b.m3u8";function Pt({onStart:e}){const t=(0,f.ZP)(),[i,o]=(0,n.useState)(!1),{appUI:{appInFocus:s}}=(0,bt.I)();(0,n.useEffect)((()=>{i&&e&&e()}),[i,e]);const r=[t.bt("Combine up to 5 images", "Combine up to 5 images", "Text describing maximum images can be combined", undefined, true),t.bt("Reorder images to make it yours", "Reorder images to make it yours", "Text describing reordering images", undefined, true),t.bt("Pick the best Pin size for your content", "Pick the best Pin size for your content", "Text describing changing Pin size", undefined, true)];return(0,y.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-layouts-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,y.jsx)(a.xu,{color:"secondary",position:"relative",width:342,children:(0,y.jsx)(xt.Z,{accessibilityMaximizeLabel:"",accessibilityMinimizeLabel:"",accessibilityMuteLabel:"",accessibilityPauseLabel:"",accessibilityPlayLabel:"",accessibilityProgressBarLabel:t.bt("Progress bar", "Progress bar", "LayoutsScreen.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:"",aspectRatio:i?342/474:0,appInFocus:s,captions:"",hlsConfig:{startLevel:yt.VS},isAutoPlay:!0,loop:!0,onReady:()=>o(!0),playing:!0,onPlay:()=>{},onPlayError:()=>{},src:vt,volume:0})}),(0,y.jsx)(a.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,y.jsxs)(a.xu,{children:[(0,y.jsx)(a.X6,{children:t.bt("Create a collage", "Create a collage", "A heading text for creating a collage Pin", undefined, true)}),(0,y.jsx)(a.xu,{paddingY:4,children:r.map(((e,t)=>(0,y.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,y.jsx)(a.xu,{color:"selected",display:"flex",flex:"none",rounding:"circle",width:8,height:8}),(0,y.jsx)(a.xu,{paddingX:2,children:(0,y.jsx)(a.xv,{children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`layouts-screen-point-${t}`)))})]})})]})}function wt(e){return[{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-title-and-description"]',id:"guide-pin-builder-title",heading:e.bt("Title & description", "Title & description", "Heading text describing the title and description step when creating Pins", undefined, true),description:e.bt("Add a title and description to help tell your story. People see this in their home feed, in search and when they tap on your Pin.", "Add a title and description to help tell your story. People see this in their home feed, on search and when they tap on your Pin.", "Text describing the reason to add title and description to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-destination-link"]',id:"guide-pin-builder-link",heading:e.bt("Destination link", "Destination link", "Heading text describing the destination link step when creating Pins", undefined, true),description:e.bt("Pick where people land when they tap on your Pin. Make sure it’s relevant!", "Pick where people land when they tap on your Pin. Make sure it’s relevant!", "Text describing the reason to add a destination link to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-media-draft-view"]',id:"guide-pin-builder-media-draft-view",heading:e.bt("Edits", "Edits", "Heading text describing the ability to edit Pins while creating them", undefined, true),description:e.bt("Upload an image or video, then personalise it by cropping, trimming or adding logos and text", "Upload an image or video, then personalize it by cropping, trimming or adding logos and text", "Text describing the ability to edit images and videos when creating Pins", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-batch-create"]',id:"guide-pin-builder-batch-create",heading:e.bt("Batch create", "Batch create", "Heading text describing the ability to create multipe Pins at once", undefined, true),description:e.bt("Lots to say? Add more images and videos to create multiple Pins in one go.", "Lots to say? Add more images and videos to create multiple Pins at once.", "Text describing the ability to create multiple Pins at once", undefined, true),padding:0}]}var It=i(456463),At=i(537929),Et=i(305782),Ct=i(490072),St=i(919974);function jt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Tt=new a.H3([new a.Ry(mt.fe)]),Dt=1000135,kt=501657;class zt extends n.Component{constructor(...e){super(...e),jt(this,"pinDraftRefs",new Map),jt(this,"setPinDraftRef",((e,t)=>{this.pinDraftRefs.set(e,t)}))}componentDidUpdate(){const{footerContext:{zIndex:e,setZIndex:t},showInProductEducationExperience:i,viewEducation:n}=this.props,[o,s]=this.context;"number"==typeof e&&o&&o!==ut.I&&t(null),i&&!o&&(s(ie.Lc),n())}render(){const{children:e}=this.props,[t,i]=this.context;return e({educationId:{value:t,set:i},pinDraftRefs:{set:this.setPinDraftRef,value:this.pinDraftRefs}})}}function Ot({advertiser:e,externalButtonQuery:t,headerHeight:i,inStlToolingExp:d,pinDraftType:c,requestContext:u,providerClassChildrenContext:{educationId:{value:h,set:p},pinDraftRefs:{value:_,set:g}}}){const m=(0,n.useRef)(null),{previous:x}=(0,Je.Hv)(),[b,v]=(0,n.useState)(!1),[P,w]=(0,n.useState)(0),I=(0,gt.YW)(),A=(0,f.ZP)(),E=(0,l.Z)(),{logContextEvent:C}=(0,Q.v)(),S=(0,he.Z)(),j=(0,o.useDispatch)(),T=(0,s.useHistory)(),k=(0,s.useLocation)(),z=(0,it.Z)({name:"UserResource",options:{username:S.isAuth&&S.username,field_set_key:"profile"}}),{showEmailVerificationReminderModal:O}=(0,Xe.y9)(),{checkExperiment:R}=(0,tt.F)(),{closeupImageSignature:M,entryPoint:B,pinDraftIds:N,pinDrafts:Z,showDisabledPinCreationBanner:F}=(0,o.useSelector)((e=>e.pinbuilder)),U=N[0],V=U?Z[U]:null,H=null==V?void 0:V.type,G=S.isAuth&&S.isEmployee,{isRTL:W}=u;(0,n.useEffect)((()=>{N.some((e=>Z[e].apiErrorCode===et.H9))&&R("require_email_verification_pin_create").anyEnabled&&(O(),N.forEach((e=>j((0,Et.lT)(e,null)))))})),(0,Fe.Z)(1000161);const $=(0,o.useSelector)((e=>{var t;const i=U?(0,Ct.nL)()(e,{pinDraftId:U}):null;if(null===i)return null;const n=("story"===H?e.pinbuilder.storyPinItems:e.pinbuilder.pinItems)[i];return n&&(null===(t=n.media)||void 0===t?void 0:t.type)})),{setExtraContext:q}=(0,Fe.Z)(1000135,{format_type:H,media_type:$}),X=(0,n.useRef)($);(0,n.useEffect)((()=>{X.current!==$&&(X.current=$,q({firstPinDraftMediaType:$}))}));const Y=(0,pe.Z)(),J=Y&&Y.id,ee=(0,n.useRef)("not_set");(0,n.useEffect)((()=>{let i;"story"===c?i="story_pin":t&&(i="offsite_pin_creation"),je.Z.initialize({user:z.isLoaded?z.data:null,requestContext:u,viewer:S,location:k,advertiser:e,scenario:i,orbacActingAs:Y})}),[z.isLoaded]),(0,n.useEffect)((()=>{if(ee.current!==J){var e,i,n,o;ee.current=J;const s=null===(e=k.state)||void 0===e?void 0:e.disableAddPinDraft;if(N.length>0||s)return;const a=null===(i=k.state)||void 0===i?void 0:i.board,l=null===(n=k.state)||void 0===n?void 0:n.boardSection,d=a||c?{selectedItem:a?{boardId:a.id,title:l?l.title:a.name,...l?{sectionId:l.id}:Object.freeze({}),ownerUsername:null==a||null===(o=a.owner)||void 0===o?void 0:o.username}:void 0,...c?{type:c}:{}}:void 0,u=(0,r.Z)();j((0,He.Z)({i18n:A,isEmployee:G,pinDraft:d,pinDraftId:u,storyPinPublishStopwatch:void 0}));const{tab:h,url:p}=(0,st.Z)({url:(0,ot.Z)()});if(R("web_bizhub_create_pin_from_website").anyEnabled&&p&&(j((0,Et.c8)(u,"scrape")),j((0,Et.f9)(u,p,null,""))),t){j((0,Et.c8)(u,"external")),j((0,Et.e5)(u,t.method));const e={height:1,width:1,id:(0,r.Z)(),sourceURL:t.url,src:t.media,type:"webImage"};j((0,Et.dj)(u,e)),je.Z.enabled("offsite_pin_creation_multi_select")?j((0,Et.f9)(u,t.url,null,t.media)):j((0,Et.q0)(u,"external",h===ie.ro?"IDEA_PIN":"PIN"))}}})),(0,dt.Z)((()=>(d&&C({event_type:13,component:13308,view_type:212,aux_data:{...M?{image_signature:M}:{},entry_point_source:B}}),"story"===c&&C({event_type:13,view_type:226,view_parameter:3228}),t&&(window.opener||"bookmarklet"===t.method)&&(window.innerHeight<qe.CX||window.innerWidth<qe.N$)&&window.resizeTo(qe.N$,qe.CX),()=>{j((0,oe.clearPinBuilderPinDrafts)())}))),(0,dt.Z)((()=>{const{tab:e}=(0,st.Z)({url:(0,ot.Z)()});if(e===ie.ro){const e=(0,r.Z)();j((0,oe.clearPinBuilderPinDrafts)()),j((0,He.Z)({i18n:A,isEmployee:G,pinDraft:void 0,pinDraftId:e,storyPinPublishStopwatch:void 0})),j((0,Et.c8)(e,"scrape"))}}));const te=0===x.length,ne=N.length>0,se=(0,n.useRef)(ne);(0,n.useEffect)((()=>{if(se.current!==ne&&(se.current=ne,!ne)){const{crossSite:e,redirUrl:t}=(0,nt.mB)(k.search);e?window.history.back():t&&(0,lt.Z)({url:t})&&(0,rt.Z)(t)?T.push((0,at.Z)({url:t})):te?T.push("/"):T.goBack()}}));const re=(0,o.useSelector)((e=>e.pinbuilder.selectedPinDraftIds.length>0)),ae=je.Z.enabled("multi_pin")||je.Z.enabled("multi_pin_pinner"),le=N.reduce(((e,t)=>null!=e?e:Z[t].apiError),null),{tab:de}="undefined"!=typeof window&&(0,st.Z)({url:(0,ot.Z)()})||{};return(0,y.jsxs)(n.Fragment,{children:[re&&(0,y.jsx)(a.xu,{height:i,top:!0,left:!0,right:!0,position:"fixed",zIndex:Tt,children:(0,y.jsx)(Ce,{})}),(0,y.jsxs)(a.xu,{position:"fixed",left:!0,right:!0,bottom:!0,display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{top:i}},children:[null,(0,y.jsx)(a.xu,{flex:"none",children:le?(0,y.jsx)(ft.Z,{errorMessage:le,primaryAction:(0,y.jsx)(a.hU,{accessibilityLabel:A.bt("Close error banner", "Close Error Banner", "Accessibility label to close the error banner", undefined, true),icon:"cancel",iconColor:"white",onClick:()=>j((0,Et.lT)(N[0],null)),size:"sm"})}):(0,y.jsx)(Ke.default,{placementId:1000161})}),(0,y.jsxs)(a.xu,{color:"secondary","data-test-id":"pin-builder",flex:"grow",height:"100%",onDragEnter:()=>{(je.Z.enabled("multi_pin")||je.Z.enabled("multi_pin_pinner"))&&v(!0)},onDragLeave:()=>v(!1),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),v(!1),je.Z.enabled("multi_pin")||je.Z.enabled("multi_pin_pinner")){const t=(0,Qe.Z)(e.dataTransfer);(0,ct.Z)({i18n:A,ideaPinRenamingEnabled:E,files:t,options:{allowVideo:je.Z.enabled("video")}}).then((e=>{const t=e.reduce(((e,t)=>("error"!==t.type&&e.push(t),e)),[]);if(t.length>0){const e=S.isAuth?S.id:"",i=S.isAuth?S.country:"";j((0,At.Z)({assets:t,checkExperiment:R,country:i,i18n:A,ideaPinRenamingEnabled:E,isEmployee:G,logContextEvent:C,userId:e}))}}))}},position:"relative",children:[(0,y.jsx)(a.xu,{display:"visuallyHidden",children:(0,y.jsx)(a.X6,{accessibilityLevel:1,children:A.bt("Pin builder", "Pin Builder", "pinBuilder.heading", undefined, true)})}),F&&(0,y.jsx)(a.xu,{"data-test-id":"disable-banner",marginStart:7,marginTop:5,paddingX:3,children:(0,y.jsx)(St.Z,{})}),(0,y.jsx)(a.xu,{height:"100%",overflow:"auto",ref:m,dangerouslySetInlineStyle:{__style:{border:"4px solid "+(b?"#0074e8":"transparent")}},onScroll:e=>{const{clientHeight:t,scrollHeight:i,scrollTop:n}=e.currentTarget;w(n/(i-t))},children:(0,y.jsx)(Ue,{setPinDraftRef:g})}),ae&&(0,y.jsx)(a.xu,{position:"absolute",top:!0,left:!W,right:W,bottom:!0,children:(0,y.jsx)($e,{isAddPinDraftRemoved:de===ie.ro,pinDraftRefs:_,scrollPosition:P})})]})]}),h===ie.Lc&&(0,y.jsx)(pt.Z,{containsHlsVideoComponent:!!je.Z.enabled("layouts"),onComplete:()=>{var e;null===(e=m.current)||void 0===e||e.scroll(0,0),p(ie.aD)},onDismiss:()=>{p(ut.I),I.setZIndex(gt.HW),j((0,Ye.Qu)(Dt,kt))},steps:[{id:"pinbuilder-welcome",element:(0,y.jsx)(K,{})},{id:"pinbuilder-editing",element:(0,y.jsx)(D,{})},...je.Z.enabled("layouts")?[{id:"pinbuilder-layout",element:(0,y.jsx)(Pt,{})}]:[],{id:"pinbuilder-publish",element:(0,y.jsx)(L,{})}]}),h===ie.aD&&(0,y.jsx)(_t.Z,{steps:(0,It.Z)(wt(A)),onComplete:()=>{p(ut.I),I.setZIndex(gt.HW),j((0,Ye.CK)(Dt,kt))},onDismiss:()=>{p(ut.I),I.setZIndex(gt.HW),j((0,Ye.Qu)(Dt,kt))}})]})}function Rt(e){const t=(0,o.useDispatch)(),i=(0,gt.YW)(),{search:n}=(0,s.useLocation)(),{tab:r}=(0,nt.mB)(n),a=(0,o.useSelector)((({experiences:e,pinbuilder:{pinDraftIds:t,pinDrafts:i}})=>{const n=t[0],o=n?i[n]:null,s=e&&e[1000135];return"story"!==(null==o?void 0:o.type)&&r!==ie.ro&&501657===(null==s?void 0:s.experience_id)}));return(0,y.jsx)(zt,{showInProductEducationExperience:a,footerContext:i,viewEducation:()=>t((0,Ye.UT)(Dt,kt)),children:t=>(0,y.jsx)(Ot,{...e,providerClassChildrenContext:t})})}jt(zt,"contextType",ht.Z);var Lt=i(773515),Mt=i(81636),Bt=i(451820),Nt=i(782534),Zt=i(319915),Ft=i(499128),Ut=i(248327),Vt=i(418614),Ht=i(947599),Gt=i(858416),Wt=i(343341),$t=i(697335);var qt=i(798477);const Xt=(0,n.lazy)((()=>Promise.all([i.e(72586),i.e(86352),i.e(16708)]).then(i.bind(i,616641)))),Yt=2e3,Kt=5e3;function Jt(){const e=(0,s.useHistory)(),t=(0,f.ZP)(),i=(0,s.useLocation)(),n=(0,he.Z)(),r=(0,o.useSelector)(se.vd),a=(0,o.useDispatch)(),{checkExperiment:l}=(0,tt.F)(),d=(0,Wt.F9)(),c=(0,$t.t)(),u=(0,Te.B)(),h=i.pathname.startsWith("/story-pin-builder")||i.pathname.startsWith("/idea-pin-builder")||i.pathname.startsWith("/pin-creation-tool")||i.pathname.startsWith("/idea-ads-tool")?"story":null;(0,Mt.Q)({view_type:212}),(0,Vt.Z)({name:"UserResource",getOptions:({advertiser:e,user:t})=>({field_set_key:"grid_item",user_id:(null==e?void 0:e.owner_user_id)||t.id||""})}),(0,Vt.Z)({name:"UserResource",getOptions:({user:e})=>({field_set_key:"profile",username:e.username||""})}),(0,Vt.Z)({name:"PinResource",getOptions:({routeData:e})=>({field_set_key:"detailed",id:e.params.pin_id}),disableFetch:({routeData:e})=>!e.params.pin_id});const p=(0,pe.Z)(),{anyEnabled:_}=l("web_m10n_business_access_orbac_www"),g=(0,o.useSelector)((({feeds:e})=>e)),m=(0,_e.nl)(n,p)&&"ad_creation"!==je.Z.scenario()&&l("web_stl_tooling").anyEnabled,x=(0,nt.mB)(i.search);let b=null;try{b=(0,Lt.Z)(x)?{...x,media:decodeURIComponent(x.media),url:decodeURIComponent(x.url)}:null}catch(I){}const v=n.isAuth?n.id:null,P=_?(0,_e.lJ)(n,p):"",w=P||v;return"story"===h?(0,y.jsx)(Zt.Z,{name:"SafeSuspense_PinBuilderPage_StoryboardComponent",children:(0,y.jsx)(Ht.Z,{children:(0,y.jsx)(Xt,{advertiser:u.advertiser,headerHeight:c,requestContext:u,userId:w,onDismiss:({draftStage:e,pinDraftId:t})=>{const i=(()=>{const e=w?g[`storyPinData:${w}`]:[];return(null!=e?e:[]).map((({id:e})=>e))})();"upload"===e&&i.length>1||0===i.length?a((0,qt.Z)(t)):setTimeout((()=>{a((0,Ut.U)("StoryPinDraftsResource",{options:{redux_normalize_feed:!0,userId:w,orbacSubjectId:P}})),window.location.reload()}),Yt)},onSuccess:(i,o,s)=>{if(r.length>0&&a({type:"PIN_BUILDER_DELETE_PIN_DRAFT",payload:{pinDraftId:r[0]}}),o&&s){const i=new Date(o.getFullYear(),o.getMonth(),o.getDate(),s.getHours(),s.getMinutes(),s.getSeconds());e.replace(n.isAuth?`/${n.username}/scheduled-pins/`:"/"),d.showToast((({hideToast:e})=>(0,y.jsx)(Ft.ZP,{duration:Kt,onHide:e,text:(0,te.nk)(t.bt("Scheduled for {{ date }} at {{ scheduledTime }}", "Scheduled for {{ date }} at {{ scheduledTime }}", "schedulePinConfirmation.toast.description", undefined, true),{date:(0,Bt.Z)(u.locale,o,Nt.k.SHORT_MONTH_DAY,!1),scheduledTime:i.toLocaleTimeString([u.locale],{hour:"2-digit",minute:"2-digit"})}).join("")})))}else e.replace(`/pin/${i}`)},orbacSubjectId:P})})}):(0,y.jsx)(Gt.Wr,{children:(0,y.jsx)(Rt,{advertiser:u.advertiser,headerHeight:c,inStlToolingExp:m,pinDraftType:h,requestContext:u,externalButtonQuery:b})})}},709622:(e,t,i)=>{i.d(t,{Az:()=>m,DI:()=>Pe,Gl:()=>Ae,Hl:()=>ke,Kb:()=>Re,NA:()=>n,NG:()=>d,OC:()=>Te,Pq:()=>Se,QM:()=>_,Sk:()=>Ie,UF:()=>x,Uo:()=>je,WF:()=>a,Xm:()=>c,Zf:()=>s,_D:()=>Oe,_N:()=>p,ac:()=>r,e_:()=>h,gf:()=>f,hf:()=>Ee,i_:()=>l,jY:()=>ve,ni:()=>we,qg:()=>u,rX:()=>o,vX:()=>Ce,wO:()=>ze,yG:()=>g,yq:()=>De});const n="10",o=1,s=365,r=64,a=8,l=9,d=11,c=15,u=16,h=17,p=18,_=19,g=20,m=1e6,f=m,x="US",b="USD",y="$",v="AT",P="EUR",w="€",I="AU",A="AUD",E="$",C="BE",S="EUR",j="€",T="CA",D="CAD",k="$",z="CH",O="CHF",R="CHF",L="DE",M="EUR",B="€",N="DK",Z="DKK",F="kr",U="ES",V="EUR",H="€",G="FI",W="EUR",$="€",q="FR",X="EUR",Y="€",K="GB",J="GBP",Q="£",ee="IE",te="EUR",ie="€",ne="IT",oe="EUR",se="€",re="NL",ae="EUR",le="€",de="NO",ce="NOK",ue="kr",he="NZ",pe="NZD",_e="$",ge="PT",me="EUR",fe="€",xe="SE",be="SEK",ye="kr";function ve(e){let t=b,i=y;switch(e){case v:t=P,i=w;break;case I:t=A,i=E;break;case C:t=S,i=j;break;case T:t=D,i=k;break;case z:t=O,i=R;break;case L:t=M,i=B;break;case N:t=Z,i=F;break;case U:t=V,i=H;break;case G:t=W,i=$;break;case q:t=X,i=Y;break;case K:t=J,i=Q;break;case ee:t=te,i=ie;break;case ne:t=oe,i=se;break;case re:t=ae,i=le;break;case de:t=ce,i=ue;break;case he:t=pe,i=_e;break;case ge:t=me,i=fe;break;case xe:t=be,i=ye}return[t,i]}const Pe={AU:{budget:1,duration:"10"},CA:{budget:1,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:1,duration:"10"},GB:{budget:1,duration:"10"},IE:{budget:1,duration:"10"},NZ:{budget:1,duration:"10"},US:{budget:3,duration:"10"},AT:{budget:1,duration:"10"},DE:{budget:1,duration:"10"},IT:{budget:1,duration:"10"},ES:{budget:1,duration:"10"},NL:{budget:1,duration:"10"},PT:{budget:1,duration:"10"},BE:{budget:1,duration:"10"},CH:{budget:1,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:1,duration:"10"}},we={AU:{budget:9,duration:"10"},CA:{budget:8,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:8,duration:"10"},GB:{budget:5,duration:"10"},IE:{budget:8,duration:"10"},NZ:{budget:9,duration:"10"},US:{budget:8,duration:"10"},AT:{budget:8,duration:"10"},DE:{budget:8,duration:"10"},IT:{budget:8,duration:"10"},ES:{budget:8,duration:"10"},NL:{budget:8,duration:"10"},PT:{budget:8,duration:"10"},BE:{budget:8,duration:"10"},CH:{budget:8,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:8,duration:"10"}},Ie={AT:1,AU:1,BE:1,CA:1,CH:1,CZ:11,DE:1,ES:1,DK:1,FI:1,FR:1,GB:1,IE:1,IT:1,NO:1,NZ:1,NL:1,PT:1,SE:1,US:1},Ae={PIN_SELECTION_MODAL:"PIN_SELECTION_MODAL",BUSINESS_FORM:"QUICK_PROMOTE_BUSINESS_FORM",BILLING_FORM:"QUICK_PROMOTE_BILLING_FORM",SUCCESS_MODAL:"SUCCESS_MODAL",ERROR_MODAL:"ERROR_MODAL",TAG_MODAL:"TAG_MODAL",GDPR_MODAL:"GDPR_MODAL"},Ee="QUICK_PROMOTE_PAGE",Ce=[Ae.GDPR_MODAL,Ae.PIN_SELECTION_MODAL,Ee,Ae.BUSINESS_FORM,Ae.BILLING_FORM,Ae.SUCCESS_MODAL,Ae.ERROR_MODAL],Se={NARROW:"NARROW",MEDIUM:"MEDIUM",WIDE:"WIDE"},je=e=>e>=1&&e<=2,Te="qp-fac-education-id",De="qp-fac-modal-education-id",ke={CONSIDERATION:"CONSIDERATION",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES"},ze={PINS:0,PRODUCT_GROUPS:1,BOARDS:2,SELECTED:3,SEARCH_RESULTS:4},Oe={MOST_RECENT:"RECENT",PROMOTED_PINS:"PROMOTED"},Re=300},596505:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(294184),s=i.n(o),r=i(883119),a=i(898781),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=()=>{};class u extends n.Component{constructor(e){super(e),d(this,"setValue",(e=>{const t={selected:e};this.fireChangeEvent(t),this.setState(t),this.handleClose()})),d(this,"handleMouseDown",(e=>{"mousedown"===e.type&&0!==e.button||(this.isOpen?this.handleClose():this.handleOpen())})),d(this,"handleOpen",(()=>{this._shouldManageOwnState?this.setState({isOpen:!0}):this.props.onOpen()})),d(this,"handleClose",(()=>{this._shouldManageOwnState?this.setState({isOpen:!1}):this.props.onClose()})),this._shouldManageOwnState=e.onOpen===c&&e.onClose===c,this.state={selected:e.value,isOpen:!1},this.mounted=!0}static getDerivedStateFromProps(e,t){return e.value&&e.value!==t.selected?{selected:e.value}:null}componentDidUpdate(){this.mounted&&this.isOpen&&this.scrollItemIntoView(this.selectedOption)}get isOpen(){return this._shouldManageOwnState?Boolean(this.state.isOpen):Boolean(this.props.isOpen)}scrollItemIntoView(e){const{menu:t}=this,i=e;t&&i&&(i.offsetTop>t.scrollTop+t.offsetHeight||i.offsetTop<t.scrollTop)&&(t.scrollTop=i.offsetTop-t.offsetTop)}fireChangeEvent(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}renderOption(e){const t=e===this.state.selected,i=s()({ReactDropdown__option:!0,"ReactDropdown__option--selected":t});return(0,l.jsx)("div",{className:i,onClick:()=>this.setValue(e),onMouseDown:()=>this.setValue(e),ref:t?e=>{this.selectedOption=e}:null,role:"button",tabIndex:"0",children:e.label},e.value)}renderMenu(e=[]){const t=e.map((e=>{if("group"===e.type){var t;const i=(0,l.jsx)("div",{className:"title",children:e.name});return(0,l.jsxs)("div",{className:"group",children:[i,null===(t=e.items)||void 0===t?void 0:t.map((e=>this.renderOption(e)))]},e.name)}return this.renderOption(e)}));return t.length?t:(0,l.jsx)("div",{className:"ReactDropdown--noresults",children:this.props.i18n.bt("No options found", "No options found", " - ", undefined, true)})}render(){const{isOpen:e}=this,t=s()({ReactDropdown:!0,"ReactDropdown--open":e}),i=s()({ReactDropdown__control:!0,"ReactDropdown__control--advertiserDropdown":this.props.isAdvertiserDropdown});let n=null;return e&&(n=(0,l.jsx)("div",{className:"ReactDropdown__menu",ref:e=>{this.menu=e},children:this.renderMenu(this.props.options)})),(0,l.jsxs)("div",{className:t,children:[(0,l.jsx)("div",{className:i,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown,children:(0,l.jsxs)("div",{className:"ReactDropdown__placeholder",children:[this.state.selected.label,(0,l.jsx)("span",{className:"caret",children:(0,l.jsx)(r.JO,{accessibilityLabel:this.props.i18n.bt("see options", "see options", "accessible label for dropdown arrow", undefined, true),color:"default",icon:"arrow-down",size:18})})]})}),n]})}}d(u,"defaultProps",{isAdvertiserDropdown:!1,isOpen:!1,onChange:c,onClose:c,onOpen:c,options:[],value:{label:"Select...",value:""}});const h=function(e){const t=(0,a.ZP)();return(0,l.jsx)(u,{...e,i18n:t})}},580189:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(170168);const o={0:n.C0,3:n.vI,4:n.YD};function s({currentSiteType:e,destinationSiteType:t,inputPath:i}){const n=Object.keys(o).includes(String(e))&&Object.keys(o).includes(String(t)),s="/"===i[0]?i:`/${i}`;return n&&t!==e?`${o[t]}${s}`:s}},151416:(e,t,i)=>{i.d(t,{V3:()=>r,e_:()=>o,lE:()=>s});var n=i(425288);const{Provider:o,Consumer:s,useHook:r}=(0,n.Z)("pinBuilderContext",{shouldRenderPinEditorStandalone:!1,openHelpTextInNewWindow:!1,allowMultiplePins:!0,allowCarouselPin:!0})},916655:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(883119),s=i(407043),r=i(898781),a=i(454074),l=i(531245),d=i(281139),c=i(785893);const u={default:{backgroundImage:"linear-gradient(to left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.03) 50%, rgba(0, 0, 0, 0))"},drag:{backgroundImage:"linear-gradient(to left, rgba(74, 144, 226, 0), rgba(74, 144, 226, 0.03) 50%, rgba(74, 144, 226, 0))"},error:{backgroundImage:"linear-gradient(to left, rgba(230, 0, 35, 0), rgba(230, 0, 35, 0.03) 50%, rgba(230, 0, 35, 0))"}};function h({addAssets:e,errorMessage:t,imageOnly:i,isDeprecateCoverExpEnabled:h=!1}){const{logContextEvent:p}=(0,s.v)(),_=(0,r.ZP)(),[g,m]=(0,n.useState)(!1),f=(0,n.useRef)(!1);(0,n.useEffect)((()=>(f.current=!0,()=>{f.current=!1})));const x=h?(0,c.jsx)(o.xu,{padding:5,children:(0,c.jsx)(o.xv,{color:"subtle",size:"100",children:_.bt("Supports PNG, JPG, GIF up to 10 MB", "Supports PNG, JPG, GIF up to 10MB", "emptyPane.fileTypeText", undefined, true)})}):(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)(o.xu,{display:"flex",padding:5,children:[(0,c.jsx)(o.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(o.JO,{accessibilityLabel:_.bt("Image icon", "Image icon", "accessibilitiy label for image icon", undefined, true),icon:"camera-roll",size:22})}),(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(o.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("High resolution images", "High resolution images", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(o.xv,{color:"subtle",size:"100",children:_.bt("PNG, JPG, GIF up to 10 MB", "PNG, JPG, GIF up to 10MB", "Image type and limits that can be uploaded", undefined, true)})]})]}),!i&&(0,c.jsxs)(o.xu,{display:"flex",padding:5,children:[(0,c.jsx)(o.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(o.JO,{accessibilityLabel:_.bt("Video icon", "Video icon", "accessibilitiy label for video icon", undefined, true),icon:"video-camera",size:24})}),(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(o.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("High quality video", "High-quality video", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(o.xv,{color:"subtle",size:"100",children:_.bt("MOV, MP4, up to 2 GB, 5 min.", "MOV, MP4, up to 2GB, 5min.", "Video type and limits that can be uploaded", undefined, true)})]})]})]});return(0,c.jsx)(d.Z,{accept:[...l.xl,...i?[]:l.ss].join(","),allowMultipleFiles:!0,color:"white",hasError:!!t,id:"asset-picker-upload",onChange:t=>{m(!0);const i=Array.from(t.target.files);m(!0),p({event_type:101,component:13392,element:11265}),e(i).then((()=>{f.current&&m(!1)}))},onDrop:t=>{m(!0);const i=(0,a.Z)(t.dataTransfer);m(!0),p({event_type:3502,component:13392,element:11265}),e(i).then((()=>{f.current&&m(!1)}))},children:e=>(0,c.jsxs)(o.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[g?(0,c.jsx)(o.$j,{accessibilityLabel:_.bt("Loading...", "Loading...", "Loading assets", undefined, true),show:!0}):(0,c.jsx)(o.xu,{padding:2,children:(0,c.jsxs)(o.kC,{alignItems:"center",direction:"column",gap:{row:0,column:4},justifyContent:"center",children:[(0,c.jsx)(o.JO,{color:h?"default":"subtle",icon:h?"camera-roll":"arrow-circle-up",accessibilityLabel:i?_.bt("Add an image", "Add an image", "uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel", undefined, true):_.bt("Add an image or video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),size:h?22:32}),(0,c.jsx)(o.xv,{children:h?_.bt("Drag and drop an image, or browse from your computer", "Drag and drop an image, or browse from your computer", "emptyPane.dragAndDropText", undefined, true):_.bt("Drag and drop assets", "Drag and drop assets", "A drag and drop prompt for adding assets", undefined, true)}),(0,c.jsx)(o.zx,{color:h?"gray":"red",text:h?_.bt("Browse", "Browse", "emptyPane.button", undefined, true):_.bt("Upload from your computer", "Upload from your computer", "Button text on asset picker to upload image from a computer", undefined, true)})]})}),(0,c.jsx)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:h?void 0:{__style:u[e?"drag":t?"error":"default"]},display:"flex",justifyContent:"center",left:!0,right:!0,position:"absolute",children:t?(0,c.jsx)(o.xu,{padding:5,maxWidth:468,children:(0,c.jsx)(o.xv,{align:"center",color:"error",size:"200",children:t})}):x})]})})}},725108:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);function r({errorMessage:e,primaryAction:t,secondaryAction:i}){const r=(0,o.ZP)();return(0,s.jsxs)(n.xu,{alignItems:"center",color:"errorBase","data-test-id":"error-banner",display:"flex",height:64,paddingX:3,position:"relative",children:[(0,s.jsx)(n.xu,{paddingX:2,children:(0,s.jsx)(n.JO,{accessibilityLabel:r.bt("Error alert", "Error Alert", "Alert icon for error banner", undefined, true),color:"inverse",icon:"alert",size:24})}),(0,s.jsx)(n.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",paddingX:1,children:(0,s.jsx)(n.xv,{align:"center",color:"inverse",weight:"bold",children:e})}),(!!t||!!i)&&(0,s.jsxs)(n.kC,{alignItems:"end",justifyContent:"start",children:[!!i&&(0,s.jsx)(n.xu,{height:"100%",padding:1,children:i}),!!t&&(0,s.jsx)(n.xu,{height:"100%",padding:1,children:t})]})]})}},841064:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(294184),s=i.n(o),r=i(883119),a=i(665866),l=i(780280),d=i(19121),c=i(717615),u=i(231947),h=i(785893);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _={__style:{pointerEvents:"none"}};class g extends n.Component{constructor(...e){super(...e),p(this,"state",{focused:!1}),p(this,"setTextAreaRef",(e=>{this.textArea=e})),p(this,"setTextAreaHeight",(()=>{this.textArea&&(this.textArea.style.height="auto",this.textArea.style.height=`${this.textArea.scrollHeight}px`)})),p(this,"handleChange",(e=>{const{onChange:t}=this.props;t({event:e,value:e.target.value})})),p(this,"handleInput",(()=>{this.setTextAreaHeight()})),p(this,"handleBlur",(e=>{this.setState({focused:!1},this.setTextAreaHeight);const{onBlur:t}=this.props;t&&t({event:e,value:e.currentTarget.value})})),p(this,"handleFocus",(e=>{this.setState({focused:!0},this.setTextAreaHeight);const{onFocus:t}=this.props;t&&t({event:e,value:e.currentTarget.value})})),p(this,"getColor",(()=>{const{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:n,value:o}=this.props,{focused:s}=this.state;return e?"#e60023":s||n&&t?"#0074e8":o&&!i?"transparent":"rgba(142, 142, 142, 0.5)"}))}componentDidMount(){this.setTextAreaHeight(),this.props.shouldFocusOnRender&&this.textArea&&this.textArea.focus()}componentDidUpdate(){this.setTextAreaHeight()}render(){const{bold:e,muted:t,italic:i,disabled:n,errorMessage:o,warningMessage:l,height:d,helperMessage:c,hideScrollbars:p,id:g,maxLength:m,placeholder:f,requestContext:x,size:b,spellCheck:y,showOnBlur:v,showWarningOnBlur:P,value:w="",viewer:I,wrap:A,orbacActingAs:E}=this.props,{focused:C}=this.state,S={__style:{boxShadow:`0 ${C||!!o||P&&!!l?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},j=(0,u.nl)(I,E)&&"ad_creation"!==a.Z.scenario()&&x.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,h.jsxs)(r.xu,{column:12,display:"flex",direction:"column",children:[(0,h.jsxs)(r.xu,{column:12,position:"relative",children:[(0,h.jsx)("textarea",{className:s()("TextArea__"+(j?"experimentalTextArea":"textArea"),{TextArea__bold:e,TextArea__dark:null==m&&!n,TextArea__hide_scrollbars:p,TextArea__disabled:n,TextArea__enabled:!n,TextArea__small:"sm"===b,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__wrap:A,TextArea__nowrap:!A,TextArea__sm:!A,TextArea__smHeight:"sm"===d,TextArea__mdHeight:"md"===d,TextArea__muted:!j&&t,TextArea__italic:!j&&w&&i}),disabled:n,id:g,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onInput:this.handleInput,placeholder:f,spellCheck:y,ref:this.setTextAreaRef,rows:1,value:null==m||C?w:w.substring(0,m)}),null!=m&&!n&&(0,h.jsx)(r.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:_,children:(0,h.jsx)("div",{className:s()("TextArea__"+(j?"ghostTextArea":"textArea"),"TextArea__dark",{TextArea__bold:e,TextArea__muted:!j&&t,TextArea__italic:!j&&i,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__small:"sm"===b,TextArea__wrap:A,TextArea__nowrap:!A}),children:w.substring(0,m)})})]}),(0,h.jsxs)("div",{className:C||v||o||P&&l||!w?"":"TextArea__hidden",children:[!j&&(0,h.jsx)(r.xu,{column:12,dangerouslySetInlineStyle:S}),(0,h.jsx)(r.xu,{column:12,marginTop:j?0:1,minHeight:15,children:(C||v||!!o||P&&!!l)&&(0,h.jsxs)(r.xu,{column:12,display:"flex",justifyContent:"between",children:[!!o&&(0,h.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-error",children:(0,h.jsx)(r.xv,{size:"100",color:"error",children:o})}),(P||C)&&!o&&!!l&&(0,h.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-warning",children:(0,h.jsx)(r.xv,{size:"100",color:"subtle",children:l})}),(v||C)&&!o&&!l&&(0,h.jsx)(r.xu,{flex:"grow","data-test-id":"text-area-helper",children:(0,h.jsx)(r.xv,{size:"100",color:"subtle",children:c})}),C&&null!=m&&(0,h.jsx)(r.xu,{flex:"none",children:(0,h.jsx)(r.xv,{size:"100",color:o?"error":"subtle",children:m-w.length})})]})})]})]})}}function m(e){return(0,h.jsx)(g,{...e,requestContext:(0,l.B)(),viewer:(0,d.Z)(),orbacActingAs:(0,c.Z)()})}p(g,"defaultProps",{italic:!1,muted:!1,bold:!1,disabled:!1,size:"md",wrap:!0,hideScrollbars:!1,shouldFocusOnRender:!1,orbacActingAs:{}})},415480:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(883119),s=i(898781),r=i(755742),a=i(780280),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(e){var t;super(e),d(this,"state",{currentValue:this.props.value,hovered:!1}),d(this,"addStep",(e=>{if(e&&"keyup"===e.type&&e.charCode!==r.Z.SPACE&&e.charCode!==r.Z.ENTER)return;const{maxValue:t,onChange:i,value:n,step:o=0}=this.props,s=this._roundToStepDecimalDigits(Math.min(t,n+o));i(s),this.setState({currentValue:s})})),d(this,"minusStep",(e=>{if(e&&"keyup"===e.type&&e.charCode!==r.Z.SPACE&&e.charCode!==r.Z.ENTER)return;const{minValue:t,onChange:i,value:n,step:o=0}=this.props,s=this._roundToStepDecimalDigits(Math.max(t,n-o));i(s),this.setState({currentValue:s})})),d(this,"onChange",(e=>{const t=Number(e.target.value);this.setState({currentValue:t})})),d(this,"onKeyUp",(e=>{const{onChange:t}=this.props,{currentValue:i}=this.state;e&&[r.Z.ENTER,r.Z.UP,r.Z.DOWN].includes(e.keyCode)&&t(Number(i))})),d(this,"handleMouseEnter",(()=>{this.setState({hovered:!0})})),d(this,"handleMouseLeave",(()=>{this.setState({hovered:!1})})),d(this,"onBlur",(()=>{const{minValue:e,maxValue:t,onChange:i,value:n}=this.props,o=parseFloat(this.state.currentValue),s=isNaN(o)?n:o,r=this._roundToStepDecimalDigits(Math.min(Math.max(s,e),t));i(r),this.setState({currentValue:r})}));const i=(null!==(t=e.step)&&void 0!==t?t:0).toString().split(".");this._shiftBy=i[1]?10**i[1].length:1}componentDidUpdate(e){e.textBlockId!==this.props.textBlockId&&this.setState({currentValue:this.props.value})}_roundToStepDecimalDigits(e){return Math.round(e*this._shiftBy)/this._shiftBy}render(){const{disableOnBlur:e,iconName:t,id:i,requestContext:n,useLegoStyle:s}=this.props,{currentValue:r,hovered:a}=this.state,{isRTL:d}=n,c=[{iconName:"arrow-up",accessibilityLabel:this.props.i18n.bt("Increase by the step specified, for example 1 or 0.1", "Increase by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.addStep},{iconName:"arrow-down",accessibilityLabel:this.props.i18n.bt("Decrease by the step specified, for example 1 or 0.1", "Decrease by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.minusStep}],u={input:{border:"solid 2px #efefef",borderRadius:s?16:8,boxSizing:"border-box",fontSize:"16px",outline:"none",padding:"10px 16px",width:"100%",WebkitAppearance:"textfield",MozAppearance:"textfield"},buttonContainer:{__style:{borderRadius:d?s?"14px 0px 0px 14px":"6px 0px 0px 6px":s?"0px 14px 14px 0px":"0px 6px 6px 0px",left:d?"2px":"auto",right:d?"auto":"2px"}},button:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"50%",cursor:"pointer",userSelect:"none",outline:"none"}};return(0,l.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:40,width:"100%",children:(0,l.jsxs)(o.xu,{display:"flex",position:"relative",justifyContent:"center",alignItems:"center",column:12,height:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,rounding:2,children:[(0,l.jsx)("input",{autoComplete:"off","data-test-id":i,id:i,onBlur:e?void 0:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,size:"20",style:u.input,type:"number",value:r}),a?(0,l.jsx)(o.xu,{position:"absolute",display:"flex",direction:"column",justifyContent:"center",alignItems:"center",color:"secondary",width:28,height:"100%",overflow:"hidden",dangerouslySetInlineStyle:u.buttonContainer,children:c.map((e=>(0,l.jsx)("div",{"data-test-id":e.iconName,onKeyUp:e.onClick,onClick:e.onClick,role:"button",tabIndex:"0",style:u.button,children:(0,l.jsx)(o.JO,{icon:e.iconName,accessibilityLabel:e.accessibilityLabel,size:8,color:"default"})},e.iconName)))}):(0,l.jsx)(o.xu,{position:"absolute",right:!d,left:d,marginEnd:3,children:(0,l.jsx)(o.JO,{icon:t,accessibilityLabel:t,size:16})})]})})}}function u(e){const t=(0,s.ZP)();return(0,l.jsx)(c,{...e,i18n:t,requestContext:(0,a.B)()})}d(c,"defaultProps",{step:1})},783879:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({fillColor:e="rgba(0, 0, 0, 0.06)",size:t=8}){return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",style:{display:"flex"},preserveAspectRatio:"none",children:[(0,n.jsxs)("pattern",{id:"pattern",x:0,y:0,width:2*t,height:2*t,patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{fill:e,x:0,width:t,height:t,y:0}),(0,n.jsx)("rect",{fill:e,x:t,width:t,height:t,y:t})]}),(0,n.jsx)("rect",{fill:"url(#pattern)",x:0,y:0,width:"100%",height:"100%"})]})}},815542:(e,t,i)=>{i.d(t,{kw:()=>x,ZP:()=>v});var n=i(667294),o=i(883119),s=i(407043),r=i(898781),a=i(783879),l=i(755742),d=i(785893);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),c(this,"handleClick",(()=>{const{color:e,onClick:t}=this.props;t({value:e})})),c(this,"handleKeyPress",(e=>{const{onClick:t}=this.props;!t||e.charCode!==l.Z.SPACE&&e.charCode!==l.Z.ENTER||(e.preventDefault(),this.handleClick())}))}render(){const{size:e,color:t,isSelected:i,dataTestId:n}=this.props;return(0,d.jsx)(o.iP,{rounding:"circle",onTap:this.handleClick,children:(0,d.jsx)(o.xu,{"data-test-id":n,role:"button",height:e,onKeyPress:this.handleKeyPress,overflow:"hidden",rounding:"circle",width:e,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box",cursor:"pointer",border:"solid 2px #F0F0F0",backgroundColor:""===t?void 0:t,boxShadow:i?"0 0 0 2px #f35e5f":"none",outline:"none"}},tabIndex:0,children:""===t&&(0,d.jsx)(a.Z,{size:6})})})}}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={input:{minWidth:0,flex:1,fontSize:"16px",color:"#333",border:"0px",outline:"none",boxSizing:"border-box",padding:0}};class _ extends n.Component{constructor(...e){super(...e),h(this,"state",{color:this.props.color}),h(this,"isValidHex",(e=>!!e&&/^#([0-9a-f]{6})$/i.test(e))),h(this,"startsWithValidHex",(e=>!!e&&/^#([0-9a-f]{0,6})$/i.test(e))),h(this,"handleInputChange",(e=>{const{onChange:t}=this.props,i="#"+e.target.value.toUpperCase();this.startsWithValidHex(i)&&(this.setState({color:i}),this.isValidHex(i)&&t(i))}))}render(){const{id:e,width:t,height:i,color:n}=this.props,{color:s}=this.state,r=this.input===document.activeElement?s:n.toUpperCase();return(0,d.jsxs)(o.xu,{width:t,height:i,paddingX:2,rounding:2,display:"flex",alignItems:"center",borderStyle:"lg",children:[(0,d.jsx)(o.xv,{color:"subtle",children:"#"}),(0,d.jsx)("input",{id:e,ref:e=>this.input=e,style:p.input,value:r.replace("#",""),onChange:this.handleInputChange})]})}}const g=_;function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const f=["#ffffff","#f15758","#e60023","#e37325","#f8b917","#0ba573","#096a56","#558dca","#0f4d8f","#7c499d","#73295E","#843922","#555555","#000000"],x=["#FFFFFF","#FCE2CF","#F7F2BB","#D8F0A8","#BEF4EE","#DCD4F7","#F9B8F2","#F65E55","#F69855","#F6E955","#79DD3C","#25E4F4","#AA6AFB","#F655C9","#C20000","#B85C00","#807500","#02882A","#0045CC","#8000BD","#97026D","#5E031A","#573700","#363F03","#01564C","#00205C","#370052","#111111"],b={container:{__style:{boxShadow:"0 0 0 2px #efefef inset"}}};class y extends n.Component{constructor(...e){super(...e),m(this,"state",{isOpen:!1}),m(this,"setAnchorRef",(e=>{this.anchor=e})),m(this,"handleClick",(()=>{this.setState((e=>({isOpen:!e.isOpen})))})),m(this,"handleDismiss",(()=>{this.setState({isOpen:!1})})),m(this,"onNoColorFillChange",(({checked:e})=>{this.props.onSelectColor({value:e?"":"#ffffff"}),this.props.logContextEvent({event_type:101,component:13780,element:12165,aux_data:{value:e}})})),m(this,"onColorClick",(({value:e})=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:101,component:13780,element:12166,aux_data:{value:e}})})),m(this,"onHexColorChange",(e=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:7472,component:13780,element:12167,aux_data:{value:e}})}))}renderTransparencyControl(){const{showTransparencyControl:e,transparencyIndex:t,onSelectTransparency:i}=this.props;if(!e||void 0===t||!i)return null;const n=this.props.i18n.bt("Full opacity", "Full opacity", "Adjust the transparency to opaque,", undefined, true),s=this.props.i18n.bt("Semi-transparent", "Semi-transparent", "Adjust the transparency to 75%.", undefined, true),r=[(0,d.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-opaque-button",children:(0,d.jsx)(o.u,{text:n,children:(0,d.jsx)(o.JO,{accessibilityLabel:n,icon:"fill-opaque",color:0===t?"default":"subtle",size:20})})}),(0,d.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-transparent-button",children:(0,d.jsx)(o.u,{text:s,children:(0,d.jsx)(o.JO,{accessibilityLabel:s,icon:"fill-transparent",color:1===t?"default":"subtle",size:20})})})];return(0,d.jsx)(o.xu,{marginStart:4,children:(0,d.jsx)(o.sY,{selectedItemIndex:t,onChange:i,items:r})})}renderFlyout(){const{showNoFillControl:e,showTransparencyControl:t,colorSelected:i,imagePalette:s,showExpanded:r}=this.props,a=r?x:f;return(0,d.jsx)(o.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleDismiss,size:"md",showCaret:!0,children:(0,d.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",paddingY:4,width:"100%",children:[e&&(0,d.jsxs)(o.xu,{marginBottom:4,children:[(0,d.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,paddingX:4,children:[(0,d.jsx)(o.XZ,{checked:!i,id:"no-color-fill",name:"no-color-fill",onChange:this.onNoColorFillChange,size:"sm"}),(0,d.jsx)(o.__,{htmlFor:"no-color-fill",children:(0,d.jsx)(o.xu,{paddingX:2,children:(0,d.jsx)(o.xv,{size:"200",children:this.props.i18n.bt("No background fill", "No background fill", "Don't fill any background color", undefined, true)})})})]}),(0,d.jsx)(o.iz,{})]}),(0,d.jsxs)(o.xu,{paddingX:4,children:[s&&s.length>0&&(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(o.xu,{paddingX:1,children:(0,d.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Your image colours", "Your image colors", "Colors from the image being added", undefined, true)})}),(0,d.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:s.map(((e,t)=>(0,d.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-palette-color-picker-button",padding:1,children:(0,d.jsx)(u,{color:e,dataTestId:`pinbuilder-editor-palette-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e)))}),(0,d.jsx)(o.xu,{paddingX:1,marginTop:2,children:(0,d.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("More options", "More options", "Default colors", undefined, true)})})]}),(0,d.jsx)(o.kC,{alignItems:"stretch",justifyContent:"between",wrap:!0,children:a.map(((e,t)=>(0,d.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-color-picker-button",padding:1,children:(0,d.jsx)(u,{color:e,dataTestId:`pinbuilder-editor-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e)))}),(0,d.jsxs)(o.xu,{display:"flex",alignItems:"center",marginTop:3,children:[(0,d.jsx)(g,{onChange:this.onHexColorChange,color:i,width:94,height:40}),t&&this.renderTransparencyControl()]})]})]})})}render(){const{id:e,width:t,showTransparencyControl:i,transparencyIndex:n,colorSelected:s}=this.props,{isOpen:r}=this.state,l={__style:{border:s&&"#ffffff"!==s.toLowerCase()?"none":"solid 2px #efefef",borderRadius:"16px 0 0 16px",background:s||"linear-gradient(to bottom right, white 48.5%, #e600234d 48.5%, #e600234d 51.5%, white 51.5%)"}};return(0,d.jsxs)(o.xu,{"data-test-id":e,width:t,children:[(0,d.jsx)(o.iP,{fullHeight:!0,onTap:this.handleClick,rounding:4,children:(0,d.jsxs)(o.xu,{rounding:4,overflow:"hidden",height:40,display:"flex",justifyContent:"end",color:"secondary",dangerouslySetInlineStyle:b.container,ref:this.setAnchorRef,children:[(0,d.jsx)(o.xu,{flex:"grow",dangerouslySetInlineStyle:l,children:s&&i&&1===n&&(0,d.jsx)(a.Z,{})}),(0,d.jsx)(o.xu,{alignItems:"center",color:"secondary","data-test-id":"storyboard-editor-details-layout-color-picker-icon",display:"flex",flex:"none",justifyContent:"center",width:28,children:(0,d.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Open drop-down colour picker", "Open dropdown color picker", "Open the color picker in a dropdown flyout", undefined, true),color:"default",icon:"arrow-down",size:8})})]})}),r&&this.renderFlyout()]})}}function v(e){const{logContextEvent:t}=(0,s.v)(),i=(0,r.ZP)();return(0,d.jsx)(y,{...e,i18n:i,logContextEvent:t})}m(y,"defaultProps",{showNoFillControl:!1,showTransparencyControl:!1,width:84})},456463:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);function s(e){return e.reduce(((e,t)=>[...e,{selector:t.selector,content:(0,o.jsxs)(n.xu,{"data-test-id":`${t.id||""}`,paddingY:2,children:[t.heading&&(0,o.jsx)(n.xu,{children:(0,o.jsx)(n.X6,{size:"400",children:t.heading})}),(0,o.jsx)(n.xu,{paddingY:2,children:(0,o.jsx)(n.xv,{children:t.description})})]}),id:t.id,padding:t.padding,onNext:t.onNext}]),[])}},451105:(e,t,i)=>{i.d(t,{GB:()=>h,ZP:()=>u,q0:()=>c});var n=i(883119),o=i(349700),s=i(299295),r=i(966113),a=i(540794),l=i(41703),d=i(785893);const c=e=>e.bt("Not a valid URL.", "Not a valid URL.", "storyPinBuilder.errorMessaging.message", undefined, true);function u({dispatchId:e,errorId:t,i18n:i,ideaPinRenamingEnabled:a}){const u=(0,l.Z)(t,i,e);if("GENERAL_ERROR"!==u.id)return u;switch(t){case"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("This description is getting long. Try cutting it down.", "Ooops! This description is getting long. Try trimming it down.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",type:"error",message:i.bt("Too many user mentions. Please keep to 5 max.", "Ooops! Too many user mentions. Try keeping it to 5 max.", "pinBuilder.errorMessaging.descriptionMentionLimit", undefined, true)};case"TITLE_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"TITLE_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("This title is getting long. Try cutting it down.", "Ooops! This title is getting long. Try trimming it down.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":return{dispatchId:e,id:"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO",type:"error",message:i.bt("This image does not have the recommended aspect ratio.", "This image does not have the recommended aspect ratio.", "storyPinBuilder.errorMessaging.message", undefined, true)};case"TAG_SAME_PRODUCT_LINK":return{dispatchId:e,id:"TAG_SAME_PRODUCT_LINK",type:"error",message:i.bt("You can't tag from the same page twice.", "You can't tag from the same page twice.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TAG_OVER_MAX_PRODUCTS_LIMIT":return{dispatchId:e,id:"TAG_OVER_MAX_PRODUCTS_LIMIT",type:"error",message:i.bt("You've reached the maximum number of products for a tag.", "You've reached the maximum number of products for a tag.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"BOARD_MISSING":return{dispatchId:e,id:"BOARD_MISSING",type:"error",message:i.bt("A board is required to create a Pin.", "A board is required to create a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_IN_PAST":return{dispatchId:e,id:"DATE_IN_PAST",type:"error",message:i.bt("A future date is required to schedule a Pin.", "A future date is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE",type:"error",message:i.bt("Make sure you schedule a Pin for less than 14 days in the future.", "Make sure you schedule a Pin less than 14 days in the future.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE_EXTENDED":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE_EXTENDED",type:"error",message:i.bt("Make sure you schedule a Pin less than 30 days in the future.", "Make sure you schedule a Pin less than 30 days in the future.", "storyPinBuilder.errorMessaging.30DayMessage", undefined, true),blocking:!0};case"DATE_MISSING":return{dispatchId:e,id:"DATE_MISSING",type:"error",message:i.bt("A date is required to schedule a Pin.", "A date is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"DESCRIPTION_INVALID":return{dispatchId:e,id:"DESCRIPTION_INVALID",type:"error",message:i.bt("The description is invalid.", "The description is invalid.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"MEDIA_MISSING":return{dispatchId:e,id:"MEDIA_MISSING",type:"error",message:i.bt("An image is required to create a Pin.", "An image is required to create a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TAG_INVALID":return{dispatchId:e,id:"TAG_INVALID",type:"error",message:i.bt("You can only tag images linking to your claimed website.", "You can only tag images linking to your claimed website.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TAG_EMPTY":return{dispatchId:e,id:"TAG_EMPTY",type:"error",message:i.bt("You must tag at least one feature Pin to continue.", "You must tag at least one feature Pin to continue.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TIME_MISSING":return{dispatchId:e,id:"TIME_MISSING",type:"error",message:i.bt("A time is required to schedule a Pin.", "A time is required to schedule a Pin.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"TITLE_INVALID":return{dispatchId:e,id:"TITLE_INVALID",type:"error",message:i.bt("The title is invalid.", "The title is invalid.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_INVALID":return{dispatchId:e,id:"URL_INVALID",type:"error",message:c(i),blocking:!0};case"URL_MISSING":return{dispatchId:e,id:"URL_MISSING",type:"error",message:i.bt("URL is required.", "URL is required.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_CONTAINS_PORN_DOMAIN":return{dispatchId:e,id:"URL_CONTAINS_PORN_DOMAIN",type:"error",message:(0,o.nk)(i.bt("Some nudity is OK on Pinterest, some isn't. Make sure you understand {{ policy_link }}", "Some nudity is okay for Pinterest, some isn't. Make sure you understand {{ policy_link }}", "storyPinBuilder.errorMessaging.message", undefined, true),{policy_link:(0,d.jsx)(n.rU,{href:r.Ms,display:"inlineBlock",target:"blank",underline:"hover",children:(0,d.jsx)(n.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:i.bt("our policies", "our policies", "Link to policy page", undefined, true)})},0)}),blocking:!0};case"CAROUSEL_DIFFERENT_RATIOS":return{dispatchId:e,id:"CAROUSEL_DIFFERENT_RATIOS",type:"error",message:i.bt("Carousel images must have the same height and width", "Carousel images must have the same height and width", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"CAROUSEL_INVALID_FORMAT":return{dispatchId:e,id:"CAROUSEL_INVALID_FORMAT",type:"error",message:i.bt("Carousels can only contain images", "Carousels can only contain images", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_IS_REDIRECT":return{dispatchId:e,id:"URL_IS_REDIRECT",type:"error",message:i.bt("URL is a redirect. Please enter a URL without a redirect.", "URL is a redirect. Please enter a URL without a redirect.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"URL_UNREACHABLE":return{dispatchId:e,id:"URL_UNREACHABLE",type:"error",message:i.bt("URL is unreachable. Please check that it is correct.", "URL is unreachable. Please check that it is correct.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",type:"error",message:i.bt("Edit the image on the cover page to have a 9:16 ratio", "Edit the image on the cover page to have a 9:16 ratio", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_COVER_PAGE_IMAGE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",type:"error",message:a?i.bt("Please provide an image for the cover page of your Pin", "Please provide an image for the cover page of your Pin", "storyPinBuilder.errorMessaging.storypinCoverPageImageMissing", undefined, true):i.bt("Please provide an image for the cover page of your Idea Pin", "Please provide an image for the cover page of your Idea Pin", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",type:"error",message:a?i.bt("Cannot save Pin without signature set on cover", "Cannot save Pin without signature set on cover", "storyPinBuilder.errorMessaging.storyPinCoverPageSignatureMissing", undefined, true):i.bt("Cannot save Idea Pin without signature set on cover", "Cannot save Idea Pin without signature set on cover", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_COVER_PAGE_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_TITLE_MISSING",type:"error",message:a?i.bt("Give your Pin a title before you publish", "Give your Pin a title before you publish", "storyPinBuilder.errorMessaging.storyPinCoverPageTittleMissing", undefined, true):i.bt("Give your Idea Pin a title before you publish", "Give your Idea Pin a title before you publish", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_MEDIA_SIGNATURES_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_MEDIA_SIGNATURES_MISSING",type:"error",message:a?i.bt("Cannot save Pin without signatures set on all media blocks/items", "Cannot save Pin without signatures set on all media blocks/items", "storyPinBuilder.errorMessaging.storyPinMediaSignatureMissing", undefined, true):i.bt("Cannot save Idea Pin without signatures set on all media blocks/items", "Cannot save Idea Pin without signatures set on all media blocks/items", "storyPinBuilder.errorMessaging.message", undefined, true)};case"STORY_PIN_NOT_ENOUGH_PAGES":return{dispatchId:e,id:"STORY_PIN_NOT_ENOUGH_PAGES",type:"error",message:a?i.bt("Create at least 2 pages to publish a Pin", "Create at least 2 pages to publish a Pin", "storyPinBuilder.errorMessaging.storyPinNotEnoughPages", undefined, true):i.bt("Create at least 2 pages to publish an Idea Pin", "Create at least 2 pages to publish an Idea Pin", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_TOO_MANY_PAGES":return{dispatchId:e,id:"STORY_PIN_TOO_MANY_PAGES",type:"error",message:(0,o.nk)(i.nbt(["There cannot be more than {{max_pages}} page", "There cannot be more than {{max_pages}} pages"], s.yX, "storyPinBuilder.errorMessaging.message", true),{max_pages:s.yX}).join(""),blocking:!0};case"STORY_PIN_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_TITLE_MISSING",type:"error",message:a?i.bt("Give your Pin a title before you publish", "Give your Pin a title before you publish", "storyPinBuilder.errorMessaging.storyPinTitleMissing", undefined, true):i.bt("Give your Idea Pin a title before you publish", "Give your Idea Pin a title before you publish", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":{const t=Math.floor(s.W_);return{dispatchId:e,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,o.nk)(i.nbt(["This video is too short and can't be uploaded. Videos can't be shorter than {{minVideoLengthSeconds}} second.", "This video is too short and can't be uploaded. Videos can't be shorter than {{minVideoLengthSeconds}} seconds."], t, "storyPinBuilder.errorMessaging.message", true),{minVideoLengthSeconds:t}).join(""),blocking:!0}}case"STORY_PIN_VIDEO_ON_COVER":return{dispatchId:e,id:"STORY_PIN_VIDEO_ON_COVER",type:"error",message:i.bt("The cover page cannot contain a video", "The cover page cannot contain a video", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{const t=s.Lr/1024/1024;return{dispatchId:e,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,o.nk)(i.nbt(["This video is too large and can't be uploaded. Videos can't be larger than {{maxVideoFileSize}} MB.", "This video is too large and can't be uploaded. Videos can't be larger than {{maxVideoFileSize}} MB."], t, "storyPinBuilder.errorMessaging.message", true),{maxVideoFileSize:t}).join(""),blocking:!0}}case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i.bt("This alt text is getting a bit long. Try trimming it down.", "Ooops! This alt text is getting long. Try trimming it down.", "pinBuilder.errorMessaging.message", undefined, true)};default:return{dispatchId:e,id:"GENERAL_ERROR",type:"error",message:i.bt("Something went wrong. Please try again.", "Hmm, something went wrong. Please try again.", "storyPinBuilder.errorMessaging.message", undefined, true),blocking:!0}}}function h(e,t,i){i({event_type:7564,view_type:212,component:(0,a.Z)().includes("create")?13762:13308,aux_data:{error_message:t,error_id:e}})}},596284:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(702664),s=i(883119),r=i(237056),a=i(898781),l=i(299295),d=i(665866),c=i(773285),u=i(19121),h=i(717615),p=i(231947),_=i(841064),g=i(451105),m=i(305782),f=i(785893);function x({pinDraftId:e}){const t=(0,a.ZP)(),i=(0,r.Z)(),x=(0,u.Z)(),{checkExperiment:b}=(0,c.F)(),y=(0,h.Z)(),v=(0,p.nl)(x,y)&&"ad_creation"!==d.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,[P,w]=(0,n.useState)(!1),I=(0,o.useDispatch)(),A=(0,o.useSelector)((t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altText})),E=(0,o.useSelector)((t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altTextError}))||"",{anyEnabled:C}=b("aid_exp_error_handling_pin_builder");return(0,f.jsxs)(s.xu,{marginTop:C?0:2,children:[!P&&(0,f.jsx)(s.xu,{"data-test-id":"pin-draft-alt-text-button",flex:"grow",children:(0,f.jsx)(s.zx,{onClick:()=>w(!0),text:t.bt("Add alt text", "Add alt text", "pinbuilder.alt_text.button", undefined, true),size:C?"lg":"md"})}),P&&(0,f.jsxs)(s.xu,{children:[(0,f.jsx)(s.xu,{marginStart:1,marginBottom:1,children:v&&(0,f.jsx)(s.xv,{size:"100",color:"default",children:t.bt("Alt text", "Alt text", "pinbuilder.altText.title", undefined, true)})}),(0,f.jsx)(_.Z,{height:v?"md":void 0,size:"sm",helperMessage:t.bt("This text will be read aloud by screen readers", "This text will be read aloud by screen readers", "web.altText.helperMessage", undefined, true),id:`pin-draft-alttext-${e}`,maxLength:l.lx,onChange:({value:n})=>{I((0,m.DL)(e,n)),n&&n.length>l.lx&&I((0,m.KN)(e,(0,g.ZP)({errorId:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",i18n:t,ideaPinRenamingEnabled:i}).message)),E&&(!n||n.length<=l.lx)&&I((0,m.KN)(e,""))},onBlur:()=>{},placeholder:t.bt("Explain what people can see in the Pin", "Explain what people can see in the Pin", "web.altText.placeholder", undefined, true),value:A||"",viewer:x,errorMessage:E,muted:!0,italic:!0,shouldFocusOnRender:!0})]})]})}},956069:(e,t,i)=>{i.d(t,{Py:()=>r,VX:()=>n,i9:()=>s,op:()=>a,tN:()=>o});const n=8,o=24,s=4,r=148,a=16},353428:(e,t,i)=>{function n(e){const t=e.split("/");return t[t.length-1].split(".")[0]}i.d(t,{Z:()=>n})},875108:(e,t,i)=>{function n({x:e,y:t}){return e>0&&e<=100&&t>0&&t<=100}i.d(t,{Z:()=>n})},940765:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(702664),o=i(883119),s=i(407043),r=i(898781),a=i(19121),l=i(667294),d=i(299295),c=i(941646),u=i(785893);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p={__style:{zIndex:d.v9}};class _ extends l.Component{constructor(...e){super(...e),h(this,"state",{showFlyout:!1}),h(this,"buttonRef",(0,l.createRef)()),h(this,"handleShowFlyout",(()=>{this.setState({showFlyout:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12123})})),h(this,"handleHideFlyout",(()=>{this.setState({showFlyout:!1})}))}render(){const{accessibilityLabel:e,icon:t,items:i,size:n}=this.props,{showFlyout:s}=this.state;return(0,u.jsxs)(o.xu,{position:"relative",dangerouslySetInlineStyle:s?p:void 0,children:[(0,u.jsx)(o.xu,{ref:this.buttonRef,children:(0,u.jsx)(o.hU,{accessibilityLabel:e,icon:t,onClick:this.handleShowFlyout,size:null!=n?n:"md",iconColor:"gray"})}),s&&(0,u.jsx)(o.Lt,{id:"icon-button-menu",anchor:this.buttonRef.current,idealDirection:"down",onDismiss:this.handleHideFlyout,children:i.map((({onClick:e,legend:t,dataTestId:i})=>(0,u.jsx)(o.Lt.Item,{onSelect:()=>{this.handleHideFlyout(),e()},option:{label:t,value:t},children:(0,u.jsx)(c.Z,{id:i,children:(0,u.jsx)(o.xv,{weight:"bold",children:t})})},`${t.toLocaleLowerCase()}`)))})]})}}function g(e){const{logContextEvent:t}=(0,s.v)();return(0,u.jsx)(_,{...e,logContextEvent:t})}var m=i(794843),f=i(474394);const x=(e,t)=>{t({event_type:101,component:13308,element:12124,aux_data:{value:e}})};function b({pinDraftId:e}){const t=(0,r.ZP)(),{logContextEvent:i}=(0,s.v)(),l=(0,a.Z)(),d=l.isAuth&&l.isEmployee,c=(0,n.useDispatch)();return(0,u.jsx)(o.xu,{paddingX:3,"data-test-id":"pindraft-option-menu",children:(0,u.jsx)(g,{accessibilityLabel:t.bt("Options", "Options", "Button to open options menu for this Pin", undefined, true),icon:"ellipsis",items:[{legend:t.bt("Delete", "Delete", "Button to delete Pin draft", undefined, true),dataTestId:"delete-pin-draft",onClick:()=>{c((0,m.Z)({i18n:t,isEmployee:d,pinDraftId:e})),x("delete",i)}},{legend:t.bt("Duplicate", "Duplicate", "Button to duplicate Pin draft to another", undefined, true),dataTestId:"duplicate-pin-draft",onClick:()=>{c((0,f.duplicatePinDraft)(e)),x("duplicate",i)}}]})})}},984268:(e,t,i)=>{i.d(t,{BE:()=>u,mt:()=>h,ir:()=>c,VX:()=>d,Bc:()=>l});var n=i(35495),o=i(623568),s=i(883561);const r=({url:e})=>{if(!e||0===e.length)return!1;const t=new RegExp("itunes\\.apple\\.com\\/(?:.*\\/)?app\\/(?:.*\\/)?id([0-9]+)"),i=new RegExp("play.google.com/store/apps/details");return t.test(e)||i.test(e)};var a=i(566101);function l(e){if(e){if(e.carousel_data&&e.carousel_data.carousel_slots&&e.carousel_data.carousel_slots.length>1)return!1;if(e.videos&&(0,o.iR)(e.videos))return!1;if((0,n.nn)(e)||e.aggregated_pin_data&&e.aggregated_pin_data.is_shop_the_look)return!1;if(e.story_pin_data_id&&e.story_pin_data_id.length>0)return!1;const t=e.link?e.link.trim():"";if(!(t.length>0&&(0,a.Z)({url:t}))||t.length>0&&r({url:t}))return!1;if("pin"===e.type)return!0}return!1}function d(e){return!!(e&&l(e)&&(e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products.length>0&&e.rich_metadata.products[0].offer_summary&&e.rich_metadata.products[0].offer_summary.price||e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0&&e.rich_summary.products[0].offer_summary&&e.rich_summary.products[0].offer_summary.price))}function c(e,t){if(e){const i=t.toLowerCase();if(!t||t&&t.length<=3||e.title&&e.title.toLowerCase().includes(i)||e.grid_title&&e.grid_title.toLowerCase().includes(i)||e.closeup_description&&e.closeup_description.toLowerCase().includes(i)||e.description&&e.description.toLowerCase().includes(i))return!0}return!1}function u(e){if(!e)return"";const{grid_title:t,rich_summary:i,rich_metadata:n,title:o}=e,r=i&&"mobile application"!==i.type_name,a=o||t||r&&i.display_name||(null==n?void 0:n.title);return a?(0,s.ZP)(a.trim(),30):""}function h(e){var t,i,n,o,s,r;if(!e)return"";const{rich_summary:a,rich_metadata:l}=e,d=null==a||null===(t=a.products)||void 0===t||null===(i=t[0])||void 0===i||null===(n=i.offer_summary)||void 0===n?void 0:n.price,c=null==l||null===(o=l.products)||void 0===o||null===(s=o[0])||void 0===s||null===(r=s.offer_summary)||void 0===r?void 0:r.price;return d||c}},699109:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(265696),o=i(955625);function s(e,t,i){return(0,n.Z)().then((n=>{const s=e[0],{media:r}=t[s]||{},{width:a}=r||{},l=e.every((e=>{const{media:i}=t[e]||{};if(!i)return!0;const{width:n}=i||{};return n===a}))?a:o.IU,d=e.map((e=>{const o=new n(document.createElement("div")),{canvasJson:s,media:r}=t[e]||{};if(!r)return t[e];const a=()=>(o.setAspectRatio(i),{...t[e],canvasJson:o.toJSON(),media:{...r,...o.getCanvasOutput({width:l})}});return s?o.loadFromJSON(s).then(a):o.setImage(r.src).then(a)}));return Promise.all(d)}))}},801815:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(724565);function o(e,t){const{layout:i}=t||{},{sections:o}=i||{},s=o&&1===o.length?o[0]:{},{media:r}=s||{},{viewbox:a,angle:l,width:d,height:c}=r||{};let u={},h=!1;if(a){const t=Math.round(a.width*d),i=Math.round(a.height*c),o=Math.round(a.left*d-t/2),s=Math.round(a.top*c-i/2),r=l||0;u={origin_x:o,origin_y:s,width:t,height:i,rotation:r},h=o>Number.EPSILON||s>Number.EPSILON||1-a.width>Number.EPSILON||1-a.height>Number.EPSILON||0!==r;const p=e.duration?e.duration:0,_=e.trimmedStartTime?e.trimmedStartTime:0,g=e.trimmedEndTime?e.trimmedEndTime:p;return u={...u,time_start:(0,n.TA)(_),time_end:(0,n.TA)(g)},h=h||_>Number.EPSILON||p-g>.01,h?u:null}return null}},69183:(e,t,i)=>{i.d(t,{B:()=>d,v:()=>l});var n=i(172071);const o=50,s=.005,r=4294967295,a=5;function l(e,t,i){return new Promise((l=>{const d=document.createElement("video");let c;const u=()=>{const e=d.seekable.length;e&&d.seekable.end(e-1)>=t&&(window.clearInterval(c),d.currentTime=t)};let h=0;const p=()=>{c=window.setInterval(u,o)};const _=()=>{d.removeEventListener("loadedmetadata",p);const{x:o,y:c,width:u,height:g}=i||{x:0,y:0,width:d.videoWidth,height:d.videoHeight},m=document.createElement("canvas");m.height=g,m.width=u;if(m.getContext("2d").drawImage(d,o,c,m.width,m.height,0,0,m.width,m.height),function(e){const{height:t,width:i}=e,n=e.getContext("2d");return new Uint32Array(n.getImageData(0,0,i,t).data.buffer).filter((e=>e!==r)).length/(i*t)<s}(m)&&h<a)return h+=1,d.addEventListener("loadedmetadata",p),d.src=e.src,void d.load();if(h>0){const{duration:i,id:o,name:s,signature:r,size:a}=e;n.Z.increment("storypin.publish.thumbnail.isblank",1,{duration:i,id:o,name:s,signature:r,size:a,time:t,retrySeekNumber:h})}d.removeEventListener("seeked",_),d.remove(),l(m.toDataURL("image/jpeg",1))};d.addEventListener("loadedmetadata",p),d.addEventListener("seeked",_),d.src=e.src}))}function d(e,t){return new Promise((i=>{const n=document.createElement("img");n.onload=function(){const{x:e,y:o,width:s,height:r}=t||{x:0,y:0,width:n.width,height:n.height},a=document.createElement("canvas");a.height=r,a.width=s;a.getContext("2d").drawImage(n,e,o,a.width,a.height,0,0,a.width,a.height),i(a.toDataURL("image/jpeg",1))},n.src=e}))}},623320:(e,t,i)=>{i.d(t,{Ch:()=>w,Fv:()=>g,GV:()=>y,Ix:()=>x,Mi:()=>h,Yv:()=>b,f:()=>p,iX:()=>m,wL:()=>P,xc:()=>v,zp:()=>_});var n=i(214494),o=i(628551),s=i(840839),r=i(66699),a=i(567831),l=i(893446),d=i(471155);const c=1e3,u=8e3;function h(e,t=512){const i=e.split(";"),n=i[0].split(":")[1],o=i[1].split(",")[1],s=atob(o),r=[];for(let a=0;a<s.length;a+=t){const e=s.slice(a,a+t),i=new Array(e.length);for(let t=0;t<e.length;t+=1)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);r.push(n)}return new Blob(r,{type:n})}const p=e=>{const[t,i,n]=[e.substring(0,2),e.substring(2,4),e.substring(4,6)];return e?`https://i.pinimg.com/736x/${t}/${i}/${n}/${e}.jpg`:""};function _(e){return new Promise((t=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=()=>{if(200===i.status){const e=i.response,n=new FileReader;n.onloadend=()=>{const e="string"==typeof n.result?n.result:"";t(e)},n.readAsDataURL(e)}},i.send()}))}function g(e){return n.Z.create("VisualLinkBoardResource",e?{orbacSubjectId:e}:{}).callCreate().then((e=>e.resource_response.data))}function m(e){return n.Z.create("PinResource",e).callCreate().then((e=>e.resource_response.data))}function f(e,t){return new Promise(((i,n)=>{const s=new FormData;s.append("img",e);const l=new XMLHttpRequest;l.open("POST",(0,a.Z)("/upload-image/"),!0),l.setRequestHeader("x-CSRFToken",(0,o.getCsrfToken)()),l.onload=()=>{if(200===l.status){const e=JSON.parse(l.responseText);e.success?i(e):n(new Error(e.error))}else 413===l.status?n(new Error(t.bt("Something went wrong while uploading your image. Try uploading a smaller image.", "Oops! Something went wrong while uploading your image. Try uploading a smaller image.", "pinBuilderResource.uploadImage.error.smallerImage", undefined, true))):n(new Error((0,r.Z)(t.bt("Something went wrong while uploading your image (status code {{statusCode}})", "Oops! Something went wrong while uploading your image (Status code {{statusCode}})", "pinBuilderResource.uploadImage.genericError", undefined, true),{statusCode:l.status})))},l.send(s)}))}function x(e,t){return"string"==typeof e?e.startsWith("data")?f(h(e),t):_(e).then((e=>f(h(e),t))):f(e,t)}function b(e,t,i,o){return new Promise(((s,r)=>{n.Z.create("VIPEditResource",{type:t,video_signature:e,...i}).callCreate().then((e=>{const{onStartEdits:t,onFinishEdits:i}=o||{},{tracking_id:n}=e.resource_response.data,a=new Date;t&&t(n),(0,l.Z)(n,{delay:u,onError:e=>r(e),onProcessingStarted:e=>s({signature:e,uploadId:n}),onSuccess:e=>{const t=(new Date-a)/c;i&&i(n,t,e),s({signature:e,uploadId:n})},resolvedAfterProcessingStarted:!0})})).catch((()=>{r()}))}))}function y(e,t,i){return"string"==typeof e?e.startsWith("data")?(0,d.Z)(h(e),t,!1,i):_(e).then((e=>(0,d.Z)(h(e),t,!1,i))):(0,d.Z)(e,t,!1,i)}function v(e,t,i,n){return y(e,3===n?"ads-builder-pinimage":"pinimage",{onFailureUpload:({fileSizeBytes:e,uploadId:n})=>function({fileSizeBytes:e,pinDraftId:t,uploadId:i},n){(0,s.Z)(n,{event_type:8785,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:i,pin_draft_id:t}})}({pinDraftId:t,uploadId:n,fileSizeBytes:e},i),onFinishProcessing:({fileSizeBytes:e,processingTime:n,signature:o,uploadId:r,uploadTime:a})=>function({fileSizeBytes:e,imageSignature:t,pinDraftId:i,uploadId:n,uploadTimeSec:o},r){(0,s.Z)(r,{event_type:8781,aux_data:{file_size_mb:e/Math.pow(1024,2),image_signature:t,media_upload_id:n,pin_draft_id:i,upload_time:o}})}({fileSizeBytes:e,imageSignature:o,pinDraftId:t,uploadId:r,uploadTimeSec:n+a},i),onStartUpload:({fileSizeBytes:e,uploadId:n})=>function({fileSizeBytes:e,pinDraftId:t,uploadId:i},n){(0,s.Z)(n,{event_type:8780,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:i,pin_draft_id:t}})}({pinDraftId:t,uploadId:n,fileSizeBytes:e},i)})}function P(e,t,i,o,s){return function(e,t,i,n){return v(e,t,i,n).then((({signature:e})=>{if(!e)throw new Error;return{image_url:p(e),success:!0}}))}(e,t,i,s).then((e=>new Promise(((t,i)=>{const s=e.image_url;n.Z.create("ScheduledPinResource",{image_url:s,method:"upload",...o?{orbac_subject_id:o}:{}}).callCreate().then((e=>{const{data:{image_signature:i}}=e.resource_response;t(i)})).catch((()=>{i(new Error("Cannot schedule the Pin."))}))})))).catch((e=>{throw e}))}function w(e,t,i){const n=e.filter((e=>!!e.media));return Promise.all(n.map((e=>{var n,o;return v(null!==(n=null===(o=e.media)||void 0===o?void 0:o.src)&&void 0!==n?n:"",t,i).then((({signature:e,uploadId:t})=>{if(!e)throw new Error;return{signature:e,uploadId:t}}))}))).then((e=>{var t,i,o,s;const r=n.findIndex(((t,i)=>!!e[i].signature)),{description:a}=null!==(t=n.find((e=>!!e.description)))&&void 0!==t?t:{},{link:l}=null!==(i=n.find((e=>!!e.link)))&&void 0!==i?i:{},{title:d}=null!==(o=n.find((e=>!!e.title)))&&void 0!==o?o:{};return{metadata:{description:null!=a?a:"",title:null!=d?d:"",link:null!=l?l:"",image_signature:null!==(s=e[r].signature)&&void 0!==s?s:""},slots:n.map(((t,i)=>{const{description:n,title:o,link:s}=t,{signature:r,uploadId:a}=e[i];return{title:o,description:n,link:s,image_signature:r,tracking_id:a}}))}})).catch((e=>{throw e}))}},346360:(e,t,i)=>{i.d(t,{DY:()=>I,J6:()=>N,Oc:()=>w,f5:()=>Z,gn:()=>v,qi:()=>P,x:()=>B});var n=i(172045),o=i(214494),s=i(969759),r=i(299295),a=i(665866),l=i(886858),d=i(414327),c=i(134906),u=i(451105),h=i(502890),p=i(490072),_=i(122668);const g=e=>e.reduce(((e,t)=>e.concat(t)),[]);function m(e,t){const{pinItemIds:i,pinItemIndex:n}=e.pinbuilder.pinDrafts[t];return i[n]}function f(e,t){const{pinbuilder:{pinItems:i}}=e;return i[m(e,t)]}function x(e,t,i){if(e){const n=Object.keys(e),o=[];return n.forEach((n=>{const s=Object.keys(e[n]),r=e=>(0,u.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:i,dispatchId:n});s.length>0&&s.forEach((e=>{switch(parseInt(e,10)){case 1:o.push(r("URL_UNREACHABLE"));break;case 2:o.push(r("URL_CONTAINS_PORN_DOMAIN"));break;case 304:o.push(r("IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO"));break;case 301:o.push(r("IMAGE_UNDER_MIN_DIMENSIONS"));break;case 9:o.push(r("LINK_LOADS_SLOWLY"));break;case 10:o.push(r("LINK_IS_AGGREGATOR"));break;case 305:o.push(r("IMAGE_IS_SCREENSHOT"));break;case 306:o.push(r("IMAGE_IS_BLURRY"))}}))})),o}return[]}function b(e,t){return(i,n)=>{const o=n(),{pinItems:s}=o.pinbuilder,r={},{signals:a}=s[e];switch(t){case"link_url":Object.prototype.hasOwnProperty.call(a,"URL_CONTAINS_PORN_DOMAIN")&&(r.URL_CONTAINS_PORN_DOMAIN=!1),Object.prototype.hasOwnProperty.call(a,"URL_UNREACHABLE")&&(r.URL_UNREACHABLE=!1);break;case"image_signature":Object.prototype.hasOwnProperty.call(a,"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO")&&(r.IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO=!1),Object.prototype.hasOwnProperty.call(a,"IMAGE_UNDER_MIN_DIMENSIONS")&&(r.IMAGE_UNDER_MIN_DIMENSIONS=!1)}Object.keys(r).length>0&&i((0,h.nh)(e,{signals:r}))}}function y(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{selectedItem:o,pinIsAdsOnly:r}=s.pinbuilder.pinDrafts[e];n(r||o?null:(0,u.ZP)({errorId:"BOARD_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}}function v(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{isTaggable:o,pinTagIds:r}=f(s,e),a=r.filter((e=>"deleted"!==s.pinbuilder.pinTags[e].status)),{isShowcase:l}=s.pinbuilder.pinDrafts[e];l&&a.length<1?n((0,u.ZP)({errorId:"TAG_EMPTY",i18n:t,ideaPinRenamingEnabled:i,dispatchId:m(s,e)})):!o&&a.length>0?n((0,u.ZP)({errorId:"TAG_INVALID",i18n:t,ideaPinRenamingEnabled:i,dispatchId:m(s,e)})):n(null)}))}}function P({i18n:e,ideaPinRenamingEnabled:t,link:i,pinItemId:s,resources:r,dispatch:l,isShowcase:h}){return new Promise((p=>{const _=s||(0,n.Z)();if(i)if((0,c.CB)(i))if(a.Z.enabled("linkStatusValidation")){const n="PinCreationQualitySignalResource",s={pin_items:{[_]:{link_url:i}}};if(r&&r[n]&&r[n][i]){const o={[_]:r[n][i]};p(x(o,e,t))}else o.Z.create(n,s).callGet().then((o=>{const{data:a}=o.resource_response;!function(e,t,i){if(t){const n=i[Object.keys(i)[0]];e&&(e.PinCreationQualitySignalResource={...e.PinCreationQualitySignalResource,[t]:n})}}(r,i,a),l&&l((0,d.Sr)(n,s,o)),p(x(a,e,t))})).catch((()=>p(null)))}else p(null);else p([(0,u.ZP)({errorId:"URL_INVALID",i18n:e,ideaPinRenamingEnabled:t,dispatchId:_})]);else a.Z.enabled("requireLink")&&!h?p([(0,u.ZP)({errorId:"URL_MISSING",i18n:e,ideaPinRenamingEnabled:t,dispatchId:_})]):p(null)}))}function w(e,t,i){return(n,o)=>{const s=o(),{pinbuilder:r,resources:a}=s,{pinDrafts:l,pinItems:d,storyPinItems:c}=r,{pinItemIds:u,type:h,isShowcase:p}=l[e];return u.filter((e=>"carousel"!==h||!!d[e].media)).map((e=>("story"!==h&&n(b(e,"link_url")),P({i18n:t,ideaPinRenamingEnabled:i,link:"story"===h?c[e].linkBlock&&c[e].linkBlock.srcUrl:d[e].link,pinItemId:e,resources:a,dispatch:n,isShowcase:p}))))}}function I(e,t,i,n){return(s,r)=>{const a=r(),{pinbuilder:c,resources:u}=a,{pinDrafts:h,pinItems:p,storyPinItems:_}=c,{pinItemIds:g,type:m}=h[e],f="PinCreationQualitySignalResource";if("story"===m)return Promise.resolve([]);const y={pin_items:g.reduce(((e,t)=>{const n="story"===m,{title:o,description:s,media:r}=n?_[t]:p[t],a=n?_[t].linkBlock.srcUrl:p[t].link;return{...e,[t]:{title:o,description:s,image_signature:r&&"localImage"===r.type?r.signature:"",link_url:a,fields_to_check:[i]}}}),{})},v=(0,l.Z)(y);if(u&&u[f]&&u[f][v]){const{data:e}=u[f][v];return g.map((e=>s(b(e,i)))),Promise.resolve(x(e,t,n))}return new Promise((e=>{o.Z.create(f,y).callGet().then((o=>{const{data:r}=o.resource_response;return g.map((e=>s(b(e,i)))),s((0,d.Sr)(f,y,o)),e(x(r,t,n))})).catch((()=>e([])))}))}}function A(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{(0,p.q7)(s,{pinDraftId:e}).filter((e=>null!==e.media)).length<r.fk?n((0,u.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):n(null)}))}}function E(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.q7)(s,{pinDraftId:e}).filter((e=>!!e.blockIds.length));0===o.length?n((0,u.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i})):o.length>r.yX?n((0,u.ZP)({errorId:"STORY_PIN_TOO_MANY_PAGES",i18n:t,ideaPinRenamingEnabled:i})):n(null)}))}}function C(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.pq)(s,{pinDraftId:e});return 1!==(0,_.yp)(s,{pinItemId:o[0]}).filter((e=>("story_pin_image_block"===e.type||"story_pin_video_block"===e.type)&&!!e.media)).length?n((0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",i18n:t,ideaPinRenamingEnabled:i})):n(null)}))}}function S(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>n((0,p.pc)(s,{pinDraftId:e})?null:(0,u.ZP)({errorId:"STORY_PIN_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))))}}const j=[y,w,function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{type:o}=s.pinbuilder.pinDrafts[e],{media:r}=f(s,e);n("carousel"===o||r?null:(0,u.ZP)({errorId:"MEDIA_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}},v,function(e,t,i){return(n,o)=>{const l=o();return new Promise((n=>{const{publishOption:o,scheduledDate:d}=l.pinbuilder.pinDrafts[e],c=a.Z.enabled("ideaPinScheduling"),h=c?r.$K:r.TZ,p=c?"DATE_TOO_FAR_IN_FUTURE_EXTENDED":"DATE_TOO_FAR_IN_FUTURE",_=new Date;_.setHours(0,0,0,0),"publish-immediately"!==o&&(d?d<_?n((0,u.ZP)({errorId:"DATE_IN_PAST",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):d>(0,s.Z)(new Date,h)&&n((0,u.ZP)({errorId:p,i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):n((0,u.ZP)({errorId:"DATE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))),n(null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{publishOption:o,scheduledTime:r}=s.pinbuilder.pinDrafts[e];n("publish-immediately"===o||r?null:(0,u.ZP)({errorId:"TIME_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}}],T=[y,w,function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{canvasJson:r}=s.pinbuilder.storyPinItems[o[0]];r&&r.aspectRatio&&9===r.aspectRatio.w&&16===r.aspectRatio.h?n(null):n((0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{media:r}=s.pinbuilder.storyPinItems[o[0]];r&&"localVideo"===r.type?n((0,u.ZP)({errorId:"STORY_PIN_VIDEO_ON_COVER",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):n(null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const{pinItemIds:o}=s.pinbuilder.pinDrafts[e],{title:r}=s.pinbuilder.storyPinItems[o[0]];r||n((0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})),n(null)}))}},A],D=[y,C,E,S],k=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?D:T},z=[y,w,A],O=[y,C,E,S],R=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?O:z},L=[function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=(0,p.uO)(s,{pinDraftId:e});let r=!1;for(let e=0;e<o.length;e+=1){var a;if(null!==(a=o[e].media)&&void 0!==a&&a.type){const{media:t}=o[e];let i;switch(t.type){case"localImage":i=t.signatureEdited;break;case"localVideo":i=void 0===t.trimmedEndTime||void 0===t.trimmedStartTime||0===t.trimmedStartTime&&t.trimmedEndTime===t.duration?t.signature:t.signatureEdited;break;case"webImage":case"webVideo":i=t.signature}if(!i){r=!0;break}}}return n(r?(0,u.ZP)({errorId:"STORY_PIN_MEDIA_SIGNATURES_MISSING",i18n:t,ideaPinRenamingEnabled:i}):null)}))}},function(e,t,i){return(n,o)=>{const s=o();return new Promise((n=>{const o=s.pinbuilder.pinDrafts[e].pinItemIds[0];return s.pinbuilder.storyPinItems[o].coverImgSignature?n(null):n((0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))}))}}],M=(e,t)=>{const{pinItemIds:i}=e.pinbuilder.pinDrafts[t];return(i.length?e.pinbuilder.storyPinItems[i[0]]:{}).blockIds.length?L:[]};function B(e,t,i){return(n,o)=>{const s=o(),{type:r}=s.pinbuilder.pinDrafts[e],a=g([..."story"===r?k(s,e):j].map((o=>n(o(e,t,i)))));return Promise.all(a).then((e=>g(e.filter(Boolean))))}}function N(e,t,i){return(n,o)=>{const s=o(),{type:r}=s.pinbuilder.pinDrafts[e],a=g([..."story"===r?R(s,e):j].map((o=>n(o(e,t,i)))));return Promise.all(a).then((e=>g(e.filter(Boolean))))}}function Z(e,t,i){return(n,o)=>{const s=o(),r=s.pinbuilder.pinDrafts[e],a=s.pinbuilder.storyPinItems[r.pinItemIds[0]].blockIds.length>0,l=g([...a?M(s,e):[]].map((o=>n(o(e,t,i)))));return Promise.all(l).then((e=>g(e.filter(Boolean))))}}},382964:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(883119),s=i(319915),r=i(898781),a=i(947599),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=(0,n.lazy)((()=>Promise.all([i.e(32777),i.e(17621),i.e(19790),i.e(9977)]).then(i.bind(i,382210))));class u extends n.Component{constructor(...e){super(...e),d(this,"loaded",!1),d(this,"setRef",(e=>{const{onLoaded:t}=this.props;!this.loaded&&t&&t(e),this.loaded=!0}))}render(){const{borderRadius:e,height:t,width:i}=this.props;return(0,l.jsx)(s.Z,{name:"SafeSuspense_PinCanvasLoader_PinCanvas",children:(0,l.jsx)(a.Z,{fallback:(0,l.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,l.jsx)(o.$j,{accessibilityLabel:this.props.i18n.bt("Loading image editor", "Loading image editor", "accessibility label for loading spinner", undefined, true),show:!0})}),children:(0,l.jsx)(c,{borderRadius:e,width:i,height:t,ref:this.setRef})})})}}function h(e){const t=(0,r.ZP)();return(0,l.jsx)(u,{...e,i18n:t})}},265696:(e,t,i)=>{function n(){return Promise.all([i.e(32777),i.e(17621),i.e(19790)]).then(i.bind(i,237403)).then((({default:e})=>e))}i.d(t,{Z:()=>n})},955625:(e,t,i)=>{i.d(t,{$R:()=>k,AW:()=>s,De:()=>Z,Dp:()=>T,Hv:()=>I,IU:()=>a,IW:()=>A,Ir:()=>P,J6:()=>l,JK:()=>B,Nv:()=>m,QS:()=>V,SX:()=>z,VC:()=>C,Vv:()=>u,Wx:()=>d,ZT:()=>F,_y:()=>o,as:()=>N,bg:()=>S,f5:()=>g,fD:()=>h,fI:()=>j,fQ:()=>n,g6:()=>b,hp:()=>L,it:()=>p,ln:()=>x,oH:()=>v,pg:()=>U,qs:()=>c,re:()=>y,rh:()=>D,sT:()=>w,uN:()=>E,uO:()=>H,vF:()=>M,xZ:()=>r,z2:()=>_,zA:()=>f,zU:()=>O,zs:()=>R});const n=600,o=64,s=600,r=150,a=750,l="jpeg",d=.92,c="#efefef",u=.7,h=2,p=16,_="#e60023",g=8,m="#e60023",f=1,x="white",b="#efefef",y=.7,v=2,P=8,w="#ffb3be",I=1,A=16,E="#ffb3be",C=1,S="white",j=50,T="#e60023",D="#e60023",k=4,z="black",O=58,R="#0074e8",L=.94,M=8,B="white",N="bold 16px sans-serif",Z=.1,F={w:2,h:3},U=5,V={1:[{viewbox:{top:0,left:0,width:1,height:1},roundedCorners:{tl:!0,tr:!0,bl:!0,br:!0},internalEdges:{mt:!1,mb:!1,ml:!1,mr:!1}}],2:[{viewbox:{top:0,left:0,width:1,height:2/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[0]}}],3:[{viewbox:{top:0,left:0,width:1,height:1/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:1/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!1,mr:!1},alignedSections:{mt:[],mb:[]},againstSections:{mt:[0],mb:[2]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[1]}}],4:[{viewbox:{top:0,left:0,width:.5,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[2],mr:[1]},againstSections:{mb:[1,3],mr:[2,3]}},{viewbox:{top:.5,left:0,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[3],mr:[0]},againstSections:{mt:[0,2],mr:[2,3]}},{viewbox:{top:0,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[0],ml:[3]},againstSections:{mb:[1,3],ml:[0,1]}},{viewbox:{top:.5,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[1],ml:[2]},againstSections:{mt:[0,2],ml:[0,1]}}],5:[{viewbox:{top:0,left:0,width:.6,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[],mr:[1]},againstSections:{mb:[1],mr:[2,3,4]}},{viewbox:{top:.5,left:0,width:.6,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[],mr:[0]},againstSections:{mt:[0],mr:[2,3,4]}},{viewbox:{top:0,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[],ml:[3,4]},againstSections:{mb:[3],ml:[0,1]}},{viewbox:{top:1/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!0,mr:!1},alignedSections:{mt:[],mb:[],ml:[2,4]},againstSections:{mt:[2],mb:[4],ml:[0,1]}},{viewbox:{top:2/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[],ml:[2,3]},againstSections:{mt:[3],ml:[0,1]}}]},H={sm:20,md:30,lg:40}},758119:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(189734),o=i.n(n),s=i(883119),r=i(898781),a=i(349700),l=i(19121),d=i(785893);function c(e){var t,i,n,o;const s=null!==(t=null!==(i=null==e?void 0:e.imageMediumUrl)&&void 0!==i?i:null==e?void 0:e.image_medium_url)&&void 0!==t?t:"";return{name:null!==(n=null!==(o=null==e?void 0:e.fullName)&&void 0!==o?o:null==e?void 0:e.full_name)&&void 0!==n?n:"",src:"https://s.pinimg.com/images/user/default_75.png"===s?void 0:s}}function u({board:e,forceViewer:t,isCompact:i,ownerOnly:n}){var u,h,p,_,g;const m=(0,r.ZP)(),f=(0,l.Z)(),x=n?[c(null==e?void 0:e.owner)]:function(e,t,i){const{collaborated_by_me:n,collaborating_users:s,owner:r}=null!=e?e:{},a=null!=s?s:[],l=[r];if(n||i){const e=a.findIndex((e=>t.isAuth&&e.id===t.id));if(-1!==e){const t=a.splice(e,1)[0];l.push(t)}else l.push(t)}const d=o()(a,"full_name");return[...l,...d]}(e,f,t).map(c),b=x.slice(0,3).map((e=>e.name));let y="";switch(x.length){case 3:y=(0,a.Wc)(`${m.bt("{{ first }}, {{ second }} and {{ last }}", "{{ first }}, {{ second }}, and {{ last }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars", undefined, true)}`,{first:`${null!==(u=b[0])&&void 0!==u?u:""}`,second:`${null!==(h=b[1])&&void 0!==h?h:""}`,last:`${null!==(p=b[2])&&void 0!==p?p:""}`});break;case 2:y=(0,a.Wc)(`${m.bt("{{ first }} and {{ second }}", "{{ first }} and {{ second }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars", undefined, true)}`,{first:`${null!==(_=b[0])&&void 0!==_?_:""}`,second:`${null!==(g=b[1])&&void 0!==g?g:""}`});break;default:y=b.join(", ")}const v=x.length>3?(0,a.Wc)(`, ${m.nbt(["Collaborators: {{ userNames }} and {{ leftCount }} more.", "Collaborators: {{ userNames }} and {{ leftCount }} more."], x.length - 3, "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree", true)}`,{userNames:y,leftCount:""+(x.length-3)}):(0,a.Wc)(`, ${m.bt("Collaborators: {{ userNames }}.", "Collaborators: {{ userNames }}.", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree", undefined, true)}`,{userNames:y});return(0,d.jsx)(s.HE,{accessibilityLabel:v,collaborators:x,size:i?"xs":"sm"})}},505132:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(883119),o=i(121151),s=i(898781),r=i(780280),a=i(553751),l=i(785893);const d=400;function c(e){const t=(0,s.ZP)(),{onSectionCreate:i,onClose:c,selectedBoard:u,useLayer:h=!0}=e,{isRTL:p}=(0,r.B)(),_=h?o.ZP:n.u_,g=(0,l.jsx)(n.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,l.jsxs)(n.kC,{alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(n.xu,{maxWidth:d,children:(0,l.jsx)(n.X6,{align:"center",size:"500",children:t.bt("Add section", "Add section", "Modal header for adding a section", undefined, true)})}),(0,l.jsx)(n.xu,{left:p,paddingX:6,paddingY:5,position:"absolute",right:!p,top:!0,children:(0,l.jsx)(n.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t.bt("Close", "Close", "CreateSection.Modal.Icon", undefined, true),onClick:c})})]})});return(0,l.jsx)(_,{accessibilityModalLabel:t.bt("Add a section to the board", "Add a section to the board", "modal to add a section to a board", undefined, true),heading:g,onDismiss:c,size:"sm",children:(0,l.jsx)(n.xu,{display:"flex",color:"default",rounding:2,children:(0,l.jsx)(a.Z,{board:u,completeCreateSectionAction:i,onClearModal:c,positionRelative:!0,showTitle:!1})})})}},59644:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>`${e}:${t||""}`},678638:(e,t,i)=>{i.d(t,{$n:()=>b,A4:()=>w,CE:()=>_,ET:()=>S,F$:()=>x,Kw:()=>E,Nv:()=>A,PA:()=>P,X_:()=>C,d9:()=>y,e1:()=>p,o4:()=>I,vB:()=>m});var n=i(782677),o=i(214494),s=i(186656),r=i(248327),a=i(414327),l=i(254176),d=i(956800),c=i(563339),u=i(483025),h=i(492583);function p(e){return t=>{const{boardId:i,sectionIdBefore:n,sectionIdAfter:o,sourceSectionId:r,targetSectionId:a}=e;t((0,d._f)({feedType:h.Z.BOARD_SECTIONS,feedId:i,itemType:"boardsection",sourceItemId:r,targetItemId:a}));let l=Object.freeze({});return n&&(l={...l,section_before:n}),o&&(l={...l,section_after:o}),(0,s.Z)({url:`/v3/board/sections/${r}/reorder/`,method:"POST",data:l})}}function _(e,t){return i=>i((0,r.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}function g(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function m({boardId:e,name:t,nameSource:i,pinImport:n,initialPinIds:s=[]},r,u){let p=0;"RECOMMENDATION"===i?p=1:"EDITED_RECOMMENDATION"===i&&(p=2);const _={board_id:e,initial_pins:n&&!n.all?n.pinIds:s,name:t,name_source:p,...u?{orbac_subject_id:u}:Object.freeze({})};return t=>o.Z.create("BoardSectionResource",_).callCreate({showError:!1}).then((({resource_response:{data:i}})=>{t(g(e,i)),t((0,d.vX)({feedId:e,feedType:h.Z.BOARD_SECTIONS,itemIds:[i.id],itemType:"boardsection"})),t((0,l.Tq)(e,"pin_count")),t((0,a.jB)("BoardSectionsRepinResource",{board_id:e}));const{all:o,pinIds:s}=n||{all:!1,pinIds:[]};return o?new Promise(((n,o)=>t((0,c.Z)({inverseSelection:!0,selectedPinIds:s,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:i.id}},r)).then((()=>n(i))).catch(o))):(s.length>0&&t((0,d.N8)(h.Z.BOARDFEED,e)),i)}))}function f(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}function x(e,t,i){return n=>o.Z.create("BoardSectionEditResource",{section_id:t,...i?{orbac_subject_id:i}:Object.freeze({})}).callDelete({showError:!1}).then((()=>Promise.all([n(f(e,t)),n((0,d.EX)({feedId:e,feedType:h.Z.BOARD_SECTIONS,itemIds:[t],itemType:"boardsection"})),n((0,l.Tq)(e,"pin_count")),n((0,a.jB)("BoardSectionsRepinResource",{board_id:e}))])))}function b(e,t,i,n){return s=>o.Z.create("BoardSectionEditResource",{section_id:t,title:i,...n?{orbac_subject_id:n}:Object.freeze({})}).callCreate({showError:!1}).then((t=>{const i=t.resource_response.data;return s(function(e,t){return i=>{const n=t.board;var o,s,r,a,c;n&&n.id!==e?(i(f(e,null!==(o=t.id)&&void 0!==o?o:"")),i((0,d.EX)({feedId:e,feedType:h.Z.BOARD_SECTIONS,itemIds:[null!==(s=t.id)&&void 0!==s?s:""],itemType:"boardsection"})),i((0,l.Tq)(e,"pin_count")),i(g(null!==(r=n.id)&&void 0!==r?r:"",t)),i((0,d.vX)({feedId:null!==(a=n.id)&&void 0!==a?a:"",feedType:h.Z.BOARD_SECTIONS,itemIds:[null!==(c=t.id)&&void 0!==c?c:""],itemType:"boardsection"})),i((0,l.Tq)(e,"pin_count"))):i({type:"SECTION_UPDATED",payload:{boardId:e,section:t}})}}(e,i)),s((0,a.jB)("BoardSectionsRepinResource",{board_id:e})),i}))}function y(e,t,i){return n=>(0,s.Z)({url:`/v3/board/sections/${t}/merge/${i}/`,method:"POST",data:{fields:["boardsection.id","boardsection.board()","board.id","board.blocking_actions"]}}).then((o=>Promise.all([n(f(e,t)),n((0,a.jB)("BoardSectionsRepinResource",{board_id:e})),n(_(i)),n((0,d.N8)(h.Z.BOARD_SECTION_PINS,i))]).then((()=>o))))}const v=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t}),P=(e,t)=>i=>o.Z.create("BoardSectionEditResource",{...t,section_id:e}).callCreate().then((e=>(i(v(0,t)),e.resource_response.data))),w=e=>t=>{const i={section_id:e};return o.Z.create("BoardSectionResource",i).callGet().then((e=>{var i;const n=(null===(i=e.resource_response)||void 0===i?void 0:i.data)||{id:"",title:""};return t(v(0,n)),e}))},I=(e,t,i,n)=>s=>{const r=o.Z.create("BoardSectionEditResource",{section_id:t}).callDelete();return s(((e,t,i,n)=>({type:"BOARD_SECTION_DELETE",payload:{userId:e,boardSectionId:t,boardId:i,pinCount:n}}))(e,t,i,n)),r},A=(e,t,i)=>s=>{const r={board_id:e,initial_pins:t,name:i},l="BoardSectionResource";return o.Z.create(l,r).callCreate().then((i=>{const o=i.resource_response.data,c=(0,n.Fv)(o,u.Z[l]);return s((0,a.XM)(l,r,i,c)),s(g(e,o)),s((0,d.vX)({feedId:e,feedType:h.Z.BOARD_SECTIONS,itemIds:[o.id],itemType:"boardsection"})),t.length&&s({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:o.id},pinIds:t}}),i}))},E=e=>t=>{const{source:i,target:s,pinIds:r}=e;if(t({type:"PINS_MOVE",payload:e}),i.boardlessPins||s.boardId!==i.boardId){const e={board_id:s.boardId,pin_ids:r,section_id:s.sectionId},t="BulkEditResource";return o.Z.create(t,e).callUpdate()}if(s.sectionId){const e={section_id:s.sectionId,pins:r},i="BoardSectionEditResource";return o.Z.create(i,e).callUpdate().then((o=>{const s=(0,n.Fv)(o.resource_response.data,u.Z[i]);return t((0,a.XM)(i,e,o,s)),o}))}const l={section_id:i.sectionId,pins:r};return o.Z.create("BoardSectionPinsResource",l).callDelete()},C=e=>t=>{t({type:"PINS_MOVE_ALL",payload:e});const{source:i,target:n,excludePinIds:s}=e,r={board_id:i.boardId,new_board_id:n.boardId,pin_ids:s,old_section_id:i.sectionId,new_section_id:n.sectionId};return o.Z.create("BulkEditSelectAllResource",r).callUpdate()},S=(e,t,i,n)=>o=>o(A(e,[],t)).then((t=>{const s=t.resource_response.data.id;return o(C({source:{boardId:e,sectionId:n},target:{boardId:e,sectionId:s},excludePinIds:i}))}))},781165:(e,t,i)=>{i.d(t,{A8:()=>b,CQ:()=>E,Cf:()=>f,GJ:()=>A,Jn:()=>m,OA:()=>h,RZ:()=>y,SD:()=>v,h6:()=>_,pS:()=>p,q1:()=>g,sJ:()=>I,tV:()=>w,xx:()=>x,yC:()=>C});var n,o,s,r,a,l=i(702664),d=i(167912),c=i(214494),u=i(186656);function h(e,t,i){return c.Z.create("BoardEmailInviteResource",{board_id:e,emails:t,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate()}function p(e,t,i){return c.Z.create("BoardInviteResource",{board_id:e,invited_user_ids:t,...i?{orbac_subject_id:i}:Object.freeze({})}).callCreate()}const _=()=>{const e=void 0!==n?n:n=i(847902),[t]=(0,d.useMutation)(e);return async(e,i)=>{const n={boardId:e,userId:i};return await new Promise(((e,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}};function g(e,t){return()=>c.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().catch((()=>{}))}function m(e,t,i,n){return async()=>{const{invited_user:t,status:o,board:{id:s}}=e;t&&await c.Z.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:i,board_id:s,field_set_key:"boardEdit",invited_user_id:t.id,...n?{orbac_subject_id:n}:{}}).callDelete({showError:!1})}}function f(e,t){return async i=>{await(0,u.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),i(function(e,t){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}}}(e,t))}}function x(e,t){return async i=>{await(0,u.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),i(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}const b=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),y=()=>{const e=void 0!==o?o:o=i(758395),[t]=(0,d.useMutation)(e);return async e=>{const i={boardId:e};return await new Promise(((e,n)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&n(i[0]),e(t)},onError:e=>n(e)})}))}},v=(e,t)=>i=>{i(b(e,t)),c.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()};function P(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}const w=()=>{const e=void 0!==s?s:s=i(526075),[t]=(0,d.useMutation)(e),n=(0,l.useDispatch)();return async(e,i)=>{const o={boardId:e,message:i||""};return await new Promise(((i,s)=>{t({variables:{...o},onCompleted:(t,o)=>{o&&(n(P(e,!1)),s(o[0])),n(P(e,!0)),i(t)},onError:t=>{n(P(e,!1)),s(t)}})}))}};function I(e){return t=>{(0,u.Z)({url:`/v3/boards/${e}/collaborators/request/`,method:"POST",data:{board:e}}).catch((()=>{t(P(e,!1))})),t(P(e,!0))}}function A(e,t){return i=>{(0,u.Z)({url:`/v3/boards/${e}/collaborators/request/${t}/`,method:"DELETE",data:{board:e,user:t}}).catch((()=>{i(P(e,!0))})),i(P(e,!1))}}const E=()=>{const e=void 0!==r?r:r=i(266970),[t]=(0,d.useMutation)(e);return async(e,i,n)=>{const o={boardId:e,userId:i,ban:n||!1};return await new Promise(((e,i)=>{t({variables:{...o},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}},C=()=>{const e=E(),t=(()=>{const e=void 0!==a?a:a=i(767656),[t]=(0,d.useMutation)(e);return async(e,i)=>{const n={board:e,collaboratorIds:[i]};return await new Promise(((e,i)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&i(n[0]),e(t)},onError:e=>i(e)})}))}})();return(i,n,o)=>async()=>{const{invited_user:n,status:s,board:{id:r}}=i;n&&("accepted"===s?t(r,n.id):e(r,n.id,o))}}},576028:(e,t,i)=>{i.d(t,{V:()=>r,u:()=>s});var n=i(214494),o=i(254176);const s=e=>t=>{const i={board_id:e};return n.Z.create("BoardResource",i).callGet().then((e=>{const i=e&&e.resource_response&&e.resource_response.data;return i&&t((0,o.yT)(i)),e}))};function r(e,t,i){return(s,r)=>{const{boards:a}=r(),l=a[e],d=void 0===t.collaborator_requests_enabled||null===t.collaborator_requests_enabled?Object.freeze({}):{collaborator_requests_enabled:t.collaborator_requests_enabled},c={allow_homefeed_recommendations:t.allow_homefeed_recommendations,category:t.category,collab_board_email:t.collab_board_email,collaborator_invites_enabled:t.collaborator_invites_enabled,collaborator_permissions_setting:t.collaborator_permissions_setting,description:t.description,name:t.name,privacy:t.privacy,sensitivity:t.sensitivity||null,...i?{orbac_subject_id:i}:Object.freeze({}),...d};return s((0,o.yT)({...c,id:e})),n.Z.create("BoardResource",{...c,board_id:e}).callUpdate().then((e=>{const i=e&&e.resource_response&&e.resource_response.data||t;return s((0,o.yT)(i)),e})).catch((e=>{throw l&&s((0,o.yT)(l)),e}))}}},956800:(e,t,i)=>{function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function o(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>r,N8:()=>o,Qv:()=>s,_f:()=>n,vX:()=>a});const s=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function a(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},563339:(e,t,i)=>{i.d(t,{Z:()=>p,S:()=>h});var n=i(214494),o=i(254176),s=i(678638),r=i(956800),a=i(492583),l=i(124237);const d=e=>t=>{l.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t.bt("Please wait until the previous board action finishes.", "Please wait until the previous board action finishes.", " - ", undefined, true);default:return e.message}}(t,e))},c=e=>(0,r.N8)(e.sectionId?a.Z.BOARD_SECTION_PINS:a.Z.BOARDFEED,e.sectionId||e.boardId);function u(e,t){const{source:i,target:n}=e;n.boardId!==i.boardId?(t((0,o.Tq)(i.boardId,"pin_count")),t((0,o.Tq)(n.boardId,"pin_count"))):i.sectionId&&n.sectionId||t((0,o.Tq)(n.boardId,"pin_count")),i.sectionId&&t((0,s.CE)(i.sectionId)),n.sectionId&&t((0,s.CE)(n.sectionId))}function h(e){return t=>{const{selectedPinIds:i,source:n,target:o}=e;t((0,r.EX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?a.Z.BOARD_SECTION_PINS:a.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,r.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?a.Z.BOARD_SECTION_PINS:a.Z.BOARDFEED,itemIds:i,itemType:"pin"})),u(e,t)}}function p(e,t){return i=>function(e,t,i){const{inverseSelection:o,selectedPinIds:s,source:l,target:u,orbacSubjectId:h}=e;if(l.boardId===u.boardId&&(l.sectionId||null)===(u.sectionId||null))return Promise.reject();if(o){const e={board_id:l.boardId,new_board_id:u.boardId,old_section_id:l.sectionId||void 0,new_section_id:u.sectionId||void 0,pin_ids:s,orbac_subject_id:h};return n.Z.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then((()=>Promise.all([t(c(l)),t(c(u))]))).catch(d(i))}{const e=(e,i)=>{t((0,r.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?a.Z.BOARD_SECTION_PINS:a.Z.BOARDFEED,itemIds:s,itemType:"pin"})),t((0,r.vX)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?a.Z.BOARD_SECTION_PINS:a.Z.BOARDFEED,itemIds:s,itemType:"pin"}))};e(l,u);const o=()=>e(u,l);if(u.boardId===l.boardId){if(u.sectionId){const e={section_id:u.sectionId,pins:s,orbac_subject_id:h};return n.Z.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch((e=>{o(),d(i)(e)}))}{const e={section_id:l.sectionId,pins:s,orbac_subject_id:h};return n.Z.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch((e=>{o(),d(i)(e)}))}}{const e={board_id:u.boardId,section_id:u.sectionId||void 0,pin_ids:s,orbac_subject_id:h};return n.Z.create("BulkEditResource",e).callUpdate({showError:!1}).catch((e=>{o(),d(i)(e)}))}}}(e,i,t).then((()=>u(e,i)))}},314123:(e,t,i)=>{function n(e,t){return{type:"PIN_BUILDER_REMOVE_PIN_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t}}}function o(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_UPLOAD",payload:{pinDraftId:e}}}function s(e,t){return(i,s)=>{const r=s(),{pinDraftIdUploadStatusMap:a}=r.pinbuilder,l=a[e];l&&l.items[t]&&l.items[t].xhr&&(l.items[t].xhr.abort(),Object.keys(l.items).length<=1?i(o(e)):i(n(e,t)))}}i.d(t,{$Z:()=>s,su:()=>n,y2:()=>o})},761218:(e,t,i)=>{function n(e){return{type:"PIN_BUILDER_ADD_CREATED_PIN_ID",payload:{pinId:e}}}i.d(t,{F:()=>n})},205474:(e,t,i)=>{function n(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:i}}}i.d(t,{Z:()=>n})},174807:(e,t,i)=>{function n(e,t,i,n){return{type:"PIN_DRAFT_ADD_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:n}}}i.d(t,{Z:()=>n})},622296:(e,t,i)=>{function n(e,t,i){return{type:"PIN_ITEM_ADD_PIN_TAG",payload:{pinItemId:e,pinTagId:t,pinTag:i}}}i.d(t,{Z:()=>n})},347619:(e,t,i)=>{function n(e,t,i){return{type:"PIN_TAG_ADD_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t,taggedObject:i}}}i.d(t,{Z:()=>n})},448994:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(172045),o=i(205474),s=i(174807),r=i(748254),a=i(690374);function l({i18n:e,isEmployee:t,pinDraft:i,pinDraftId:l,storyPinPublishStopwatch:d}){return c=>{if(!i||!i.pinItemIds){const e=(0,n.Z)();c((i&&"story"===i.type?r.Z:s.Z)(l,e))}"story"===(null==i?void 0:i.type)&&c((0,a.Z)({i18n:e,isEmployee:t,pinDraftId:l,storyPinPublishStopwatch:d})),c((0,o.Z)(l,i))}}},537929:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(172045),o=i(174807),s=i(448994),r=i(474394),a=i(798477),l=i(923490);function d({assets:e,checkExperiment:t,country:i,i18n:d,ideaPinRenamingEnabled:c,isEmployee:u,logContextEvent:h,userId:p,isShowcase:_,parentPinId:g,isQuizAd:m=!1}){return(f,x)=>{const b=x(),{pinDraftIds:y}=b.pinbuilder;e.concat().reverse().reduce(((e,r)=>e.then((()=>{const e=(0,n.Z)(),a=(0,n.Z)();"localImage"!==r.type&&"webImage"!==r.type&&"localVideo"!==r.type||(f((0,o.Z)(e,a,{media:r,..."webImage"===r.type?{link:r.sourceURL}:{}})),"localVideo"===r.type&&f((0,l.dG)({pinDraftId:e,pinItemId:a,userId:p,country:i,i18n:d,logContextEvent:h,checkExperiment:t,ideaPinRenamingEnabled:c}))),f((0,s.Z)({i18n:d,isEmployee:u,pinDraft:{pinItemIds:[a],isShowcase:_,parentPinId:g,isQuizAd:m},pinDraftId:e,storyPinPublishStopwatch:void 0}))}))),Promise.resolve()).then((()=>{const e=y.findIndex((e=>!(0,r._isPristine)(b,e)));y.slice(0,e>=0?e:void 0).forEach((e=>f((0,a.Z)(e))))}))}}},794843:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(172045),o=i(448994),s=i(798477);function r({i18n:e,isEmployee:t,pinDraftId:i}){return(r,a)=>{const l=a(),{pinDraftIds:d}=l.pinbuilder;r((0,s.Z)(i)),d.length<=1&&r((0,o.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,n.Z)(),storyPinPublishStopwatch:void 0}))}}},395024:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(172045),o=i(448994),s=i(474394),r=i(798477);function a({i18n:e,isEmployee:t}){return(i,a)=>{const{pinbuilder:l}=a(),{pinDraftIds:d,selectedPinDraftIds:c}=l;c.forEach((e=>{i((0,s.deselectPinBuilderPinDraft)(e)),i((0,r.Z)(e))})),c.length===d.length&&i((0,o.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,n.Z)(),storyPinPublishStopwatch:void 0}))}}},474394:(e,t,i)=>{i.r(t),i.d(t,{_isPristine:()=>f,addPinBuilderAsset:()=>m,addPinBuilderPinDraftItemUpload:()=>v,clearCreatedPinIds:()=>A,clearPinBuilderPinDrafts:()=>l,clearSelectedPinBuilderPinDrafts:()=>h,deselectAllPinBuilderPinDrafts:()=>_,deselectPinBuilderPinDraft:()=>u,duplicatePinDraft:()=>d,removeCreatedPinId:()=>I,selectAllPinBuilderPinDrafts:()=>p,selectPinBuilderPinDraft:()=>c,setCloseupImageSignature:()=>E,setPinBuilderBatchEditMode:()=>b,setPinBuilderEntryPoint:()=>C,setPinBuilderFailureErrorLogged:()=>x,setPinBuilderPinItemUploadStatus:()=>P,setPinBuilderPinItemUploadXhr:()=>w,setPinBuilderSharedData:()=>g,setPinEditorPinDraft:()=>y,setShowDisabledPinCreationBanner:()=>j,setShowFeedbackModal:()=>S});var n=i(172045),o=i(299295),s=i(205474),r=i(174807),a=i(305782);function l(){return{type:"PIN_BUILDER_CLEAR_PIN_DRAFTS"}}function d(e){return(t,i)=>{const o=i(),{pinDrafts:a,pinItems:l}=o.pinbuilder,d=a[e],c=(0,n.Z)(),u=d.pinItemIds.map((e=>{const i=(0,n.Z)();return t((0,r.Z)(c,i,l[e])),i}));t((0,s.Z)(c,{...d,pinItemIds:u},{insertBefore:e}))}}function c(e){return{type:"PIN_BUILDER_SELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function u(e){return{type:"PIN_BUILDER_DESELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function h(){return{type:"PIN_BUILDER_CLEAR_SELECTED_PIN_DRAFTS"}}function p(){return(e,t)=>{const{pinbuilder:i}=t(),{selectedPinDraftIds:n,pinDrafts:s,pinDraftIds:r}=i;r.forEach((t=>{const{status:i}=s[t];n.includes(t)||o.x1.includes(i)||e(c(t))}))}}function _(){return(e,t)=>{const{pinbuilder:i}=t(),{selectedPinDraftIds:n}=i;n.forEach((t=>{e(u(t))}))}}function g(e){return(t,i)=>{const o=i(),{selectedPinDraftIds:s}=o.pinbuilder,{publishOption:r,scheduledDate:l,scheduledTime:d,selectedItem:c,...u}=e;s.forEach((e=>{t((0,a.NA)(e,{...null!=r?{publishOption:r}:Object.freeze({}),...void 0!==c?{selectedItem:c}:Object.freeze({}),...void 0!==l?{scheduledDate:l}:Object.freeze({}),...void 0!==d?{scheduledTime:d}:{}})),u.editorInstanceId=(0,n.Z)(),t((0,a.to)(e,u))}))}}function m(e){return{type:"PIN_BUILDER_ADD_ASSET",payload:{asset:e}}}function f(e,t){const{pinDrafts:i,pinItems:n}=e.pinbuilder,{selectedItem:o,pinItemIds:s,publishOption:r}=i[t];return!o&&"publish-immediately"===r&&s.every((e=>{const{description:t,link:i,media:o,title:s}=n[e];return!(t||i||s||o)}))}function x(e){return{type:"PIN_BUILDER_SET_FAILURE_ERROR_LOGGED",payload:{failureErrorLogged:e}}}function b(e){return{type:"PIN_BUILDER_SET_BATCH_EDIT_MODE",payload:{isBatchEditMode:e}}}function y(e){return{type:"PIN_EDITOR_SET_PIN_DRAFT",payload:{editedPinDraftId:e}}}function v(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t,upload:i}}}function P(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_STATUS",payload:{pinDraftId:e,pinItemId:t,status:i}}}function w(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_XHR",payload:{pinDraftId:e,pinItemId:t,xhr:i}}}function I(e){return{type:"PIN_BUILDER_REMOVE_CREATED_PIN_ID",payload:{pinId:e}}}function A(){return{type:"PIN_BUILDER_CLEAR_CREATED_PIN_IDS"}}function E(e){return{type:"PIN_BUILDER_SET_CLOSEUP_IMAGE_SIGNATURE",payload:{closeupImageSignature:e}}}function C(e){return{type:"PIN_BUILDER_ENTRY_POINT",payload:{entryPoint:e}}}function S(e){return{type:"PIN_BUILDER_SHOW_FEEDBACK_MODAL",payload:{showFeedbackModal:e}}}function j(e){return{type:"PIN_BUILDER_SHOW_DISABLE_PIN_CREATION_BANNER",payload:{showDisabledPinCreationBanner:e}}}},305782:(e,t,i)=>{i.d(t,{$K:()=>W,BG:()=>z,By:()=>ye,Cj:()=>K,DL:()=>fe,Fu:()=>Ue,Fz:()=>ie,GX:()=>ae,I0:()=>H,Jr:()=>Oe,KF:()=>Ze,KN:()=>xe,KT:()=>X,N$:()=>J,NA:()=>Pe,Nv:()=>Z,QZ:()=>q,Qc:()=>oe,R6:()=>Q,RR:()=>V,Si:()=>Re,TD:()=>B,Ug:()=>_e,Ve:()=>$,WE:()=>Te,WT:()=>Se,Wo:()=>ee,X3:()=>de,XB:()=>se,YN:()=>pe,YY:()=>he,Yr:()=>G,_B:()=>Y,_e:()=>we,c8:()=>O,c_:()=>ge,dI:()=>ne,dj:()=>ue,e5:()=>R,ej:()=>te,f9:()=>ce,hb:()=>me,iX:()=>Be,kp:()=>ve,lT:()=>N,m_:()=>Fe,n6:()=>M,p3:()=>L,q0:()=>be,qF:()=>re,rS:()=>F,th:()=>Ne,to:()=>Ae,u9:()=>Ie,vS:()=>Ce,xb:()=>U,z0:()=>ze});var n=i(172045),o=i(214494),s=i(299295),r=i(665866),a=i(573545),l=i(840839),d=i(414327),c=i(451105),u=i(801815),h=i(69183),p=i(623320),_=i(254176),g=i(956800),m=i(314123),f=i(761218),x=i(205474),b=i(174807),y=i(502890),v=i(798477),P=i(458253),w=i(827628),I=i(923490),A=i(31100),E=i(554410),C=i(472278),S=i(90326),j=i(492583),T=i(52925);const D=1e3;function k(e,t,i,n){return(0,c.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:n,dispatchId:i})}function z(){return{type:"PIN_DRAFT_CLEAR_STATE"}}function O(e,t){return{type:"PIN_DRAFT_SET_VIEW",payload:{pinDraftId:e,view:t}}}function R(e,t){return{type:"PIN_DRAFT_SET_CREATE_METHOD",payload:{pinDraftId:e,createMethod:t}}}function L(e,t){return{type:"PIN_DRAFT_SET_STATUS",payload:{pinDraftId:e,status:t}}}function M(e,t){return{type:"PIN_DRAFT_SET_PUBLISHING_STATUS",payload:{pinDraftId:e,publishingStatus:t}}}function B(e,t){return{type:"PIN_DRAFT_SET_IS_AD_INELIGIBLE",payload:{pinDraftId:e,isAdIneligible:t}}}function N(e,t,i){return{type:"PIN_DRAFT_SET_API_ERROR",payload:{pinDraftId:e,apiError:t,apiErrorCode:i}}}function Z(e,t){return{type:"PIN_DRAFT_SET_SELECTED_ITEM",payload:{pinDraftId:e,selectedItem:t}}}function F(e,t){return{type:"PIN_DRAFT_SET_ADS_ONLY_STATUS",payload:{pinDraftId:e,pinIsAdsOnly:t}}}function U(e,t){return{type:"PIN_DRAFT_SET_BOARD_ERROR",payload:{pinDraftId:e,boardError:t}}}function V(e,t){return{type:"PIN_DRAFT_SET_PUBLISH_OPTION",payload:{pinDraftId:e,publishOption:t}}}function H(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE",payload:{pinDraftId:e,scheduledDate:t}}}function G(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE_ERROR",payload:{pinDraftId:e,scheduledDateError:t}}}function W(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME",payload:{pinDraftId:e,scheduledTime:t}}}function $(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME_ERROR",payload:{pinDraftId:e,scheduledTimeError:t}}}function q(e,t){return{type:"PIN_DRAFT_SET_LAST_EDITED_TIME",payload:{pinDraftId:e,lastEditedTime:t}}}function X(e,t){return{type:"PIN_DRAFT_SET_LAST_SAVED_TIME",payload:{pinDraftId:e,lastSavedTime:t}}}function Y(e,t){return{type:"PIN_DRAFT_SET_MEDIA_ERROR",payload:{pinDraftId:e,mediaError:t}}}function K(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_INDEX",payload:{pinDraftId:e,pinItemIndex:t}}}function J(e,t){return{type:"PIN_DRAFT_SET_PIN_ID",payload:{pinDraftId:e,pinId:t}}}function Q(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_PIN",payload:{pinDraftId:e,scheduledPin:t}}}function ee(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN",payload:{pinDraftId:e,storyPin:t}}}function te(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_DRAFT_ID",payload:{pinDraftId:e,storyPinDraftId:t}}}function ie(e,t){return{type:"PIN_DRAFT_UPDATE_STORY_PIN_METADATA",payload:{pinDraftId:e,storyPinMetadata:t}}}function ne(e,t){return{type:"PIN_DRAFT_SET_IS_COMMENTS_ALLOWED",payload:{pinDraftId:e,isCommentsAllowed:t}}}function oe(e,t){return{type:"PIN_DRAFT_SET_IS_SHOPPING_REC_ALLOWED",payload:{pinDraftId:e,isShoppingRecAllowed:t}}}function se(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function re(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function ae(e){return{type:"PIN_DRAFT_RESET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e}}}function le(e,t){return{type:"PIN_DRAFT_SET_URL_CREATION_SOURCE",payload:{pinDraftId:e,urlCreationSource:t}}}function de(e,t){return{type:"PIN_DRAFT_REMOVE_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t}}}function ce(e,t,i,n){return{type:"PIN_DRAFT_SET_WEBSITE_LINK",payload:{pinDraftId:e,websiteLink:t,websiteDefaultImageUrl:n,error:i}}}function ue(e,t){return{type:"PIN_DRAFT_ADD_WEBSITE_MEDIA",payload:{pinDraftId:e,media:t}}}function he(e,t){return{type:"PIN_DRAFT_REMOVE_WEBSITE_MEDIA",payload:{pinDraftId:e,mediaUrl:t}}}function pe(e,t){return{type:"PIN_DRAFT_ADD_INTEREST_TAG",payload:{pinDraftId:e,tag:t}}}function _e(e,t){return{type:"PIN_DRAFT_REMOVE_INTEREST_TAG",payload:{pinDraftId:e,id:t}}}function ge(e){return{type:"PIN_DRAFT_CLEAR_INTEREST_TAGS",payload:{pinDraftId:e}}}function me(e){return{type:"PIN_DRAFT_CLEAR_WEBSITE_MEDIA",payload:{pinDraftId:e}}}function fe(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT",payload:{pinDraftId:e,altText:t}}}function xe(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT_ERROR",payload:{pinDraftId:e,altTextError:t}}}function be(e,t="upload",i){return(o,s)=>{const{pinbuilder:{pinDrafts:a}}=s(),{pinItemIds:l,pinItemIndex:d,websiteLink:c,websiteMedia:u}=a[e];if(u.length>0){const t=l[d];o((0,y.mO)(t,u[0])),o((0,y.PF)(t,"webImage"===u[0].type&&u[0].sourceURL?u[0].sourceURL:c)),o((0,y.lZ)(t,null)),o(le(e,i))}u.length>1&&(r.Z.enabled("multi_pin")||r.Z.enabled("multi_pin_pinner")?u.slice(1).forEach((e=>{const t=(0,n.Z)();o((0,x.Z)(t));const s=(0,n.Z)();o((0,b.Z)(t,s,{media:e,link:"webImage"===e.type?e.sourceURL:c})),o(le(t,i))})):u.slice(1).forEach((t=>{const s=(0,n.Z)();o((0,b.Z)(e,s,{media:t,link:c})),o(le(s,i))}))),o(me(e)),o(ce(e,"")),o(O(e,t))}}function ye(e){return(t,i)=>{const n=i(),{pinItemIds:o,pinItemIndex:s,websiteLink:r,websiteMedia:a}=n.pinbuilder.pinDrafts[e],l=[];if(a.length>0){const e=o[s];t((0,y.mO)(e,a[0])),t((0,y.PF)(e,"webImage"===a[0].type&&a[0].sourceURL?a[0].sourceURL:r)),t((0,y.lZ)(e,null)),a.forEach((e=>{l.push(e)}))}return t(O(e,"board")),l}}function ve(e,t){return(i,o)=>{const s=o(),{pinDrafts:r,pinItems:a,storyPinItems:l}=s.pinbuilder,{pinItemIds:d,type:c}=r[e],u=d.indexOf(t),h=d.length-1,p="story"===c?C.hC:y.mO;if(u===h){const{media:n}="story"===c?l[t]:a[t];n&&"webImage"===n.type&&i((0,y.PF)(t,"")),n&&"localVideo"===n.type&&i((0,m.$Z)(e,t)),i(p(t,null))}else i(de(e,t)),"carousel"===c&&a[d[h]].media&&i((0,b.Z)(e,(0,n.Z)(),null,{saveIndex:!0}))}}function Pe(e,t){return{type:"PIN_DRAFT_UPDATE_DATA",payload:{pinDraftId:e,pinDraft:t}}}function we(e,t){return{type:"PIN_DRAFT_SET_UPLOAD_START_TIME",payload:{pinDraftId:e,uploadStartTime:t}}}function Ie(e,t){return(i,n)=>{const o=n(),{pinItemIds:s,pinItemIndex:r}=o.pinbuilder.pinDrafts[e];if(i(function(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_SHAREABLE",payload:{pinDraftId:e,pinItemShareable:t}}}(e,t)),t){const e=s[r],{description:t,descriptionError:n,link:a,linkError:l,title:d,titleError:c}=o.pinbuilder.pinItems[e];s.forEach((e=>i((0,y.nh)(e,{description:t,descriptionError:n,link:a,linkError:l,title:d,titleError:c}))))}}}function Ae(e,t){return(i,n)=>{const o=n(),{pinItemIds:s,pinItemIndex:r,pinItemShareable:a}=o.pinbuilder.pinDrafts[e];(a?s:[s[r]]).forEach((e=>i((0,y.nh)(e,t))))}}function Ee(e,t){const i=t?(0,u.Z)(e,t):null;if(e.customCoverImg){if(i){const{origin_x:t=0,origin_y:n=0,width:o=e.width,height:s=e.height}=i;return(0,h.B)(e.customCoverImg.src,{x:t,y:n,width:o,height:s})}return Promise.resolve(e.customCoverImg.src)}if(i){const{origin_x:t=0,origin_y:n=0,width:o=e.width,height:s=e.height}=i,{trimmedStartTime:r,trimmedEndTime:a,duration:l,thumbnail:d}=e,c=r||0,u=d>=c&&d<=(a||l)?d:c;return(0,h.v)(e,u,{x:t,y:n,width:o,height:s})}return(0,h.v)(e,e.thumbnail,null)}function Ce(e,t,i,n=2){return async(s,r)=>{const a=r(),{pinbuilder:l}=a,{pinDrafts:d}=l,{interestTags:c}=d[t],u=c.map((e=>e.id));if(u.length>0){const s={pinId:i,interestIds:u,zenSource:n};try{await o.Z.create("InterestTaggingResource",s).callCreate(),e({event_type:8521,aux_data:{pin_id:i,story_pin_creation_id:t}})}catch(h){const{api_error_code:n,message:o,message_detail:s}=h||{};throw e({event_type:8522,aux_data:{error_message:s||o,pin_id:i,status_code:n,story_pin_creation_id:t}}),new Error("Cannot add tags to the Pin.")}}}}function Se(e,t){return(i,n)=>{const o=n(),{pinDrafts:r}=o.pinbuilder;i(q(e,new Date)),!t&&s.qm.includes(r[e].status)||i(L(e,"edited"))}}function je(e,t,i,n,o,r,l,d,c,u){const{advertiser:h,pinbuilder:_}=t,{pinDrafts:g,pinItems:m}=_,{altText:f,pinIsAdsOnly:x,pinItemIds:b,pinItemIndex:y,selectedItem:v,type:P}=g[e],w=c&&c("ads_only_pin_creation",{dangerouslySkipActivation:!0}).anyEnabled;if(w&&!x&&!v)throw new Error(l.bt("Cannot create a Pin without a board.", "Cannot create a Pin without a board.", "pinBuilder.error.noBoard", undefined, true));if(!P)throw new Error("PinBuilder Exception: Undefined PinDraft type");const I=o&&h&&(h.owner_user_id!==o||h.client_business_id)?h.id:null,A={field_set_key:"create_success",skip_pin_create_log:!0,...f?{alt_text:f}:Object.freeze({}),...v&&v.sectionId?{section:v.sectionId}:Object.freeze({}),...v&&v.boardId?{board_id:v.boardId}:Object.freeze({}),...I?{advertiser_id:I}:Object.freeze({}),...n?{orbac_subject_id:n}:Object.freeze({}),...w&&x?{is_removable:!0,create_default_board:!0}:Object.freeze({})};return new Promise(((t,n)=>{if("carousel"===P)(0,p.Ch)(b.map((e=>m[e])),e,d).then((e=>{t({...A,...e.metadata,carousel_data_json:{carousel_slots:e.slots}})})).catch((e=>{n(e)}));else if("single"===P){const o=b[y],{description:c,link:h,media:_,canvasJson:f,title:x,userMentionTags:v}=m[o];if(!_)throw new Error(l.bt("Cannot create a Pin without an image or video.", "Cannot create a Pin without an image or video.", "pinBuilder.error.noMedia", undefined, true));const P=x.substring(0,s.Ke),w=c.substring(0,s.JO);if("localImage"===_.type)(0,p.xc)(_.src,e,d,u).then((({signature:e})=>{e?t({...A,image_signature:e,description:w,link:h,title:P,method:"uploaded",upload_metric:{source:(0,a.Z)(r)},user_mention_tags:v}):n()})).catch((()=>{const t=l.bt("Your upload failed for some reason. Please try again.", "Hmm, your upload failed for some reason. Please try again.", "pinBuilder.mediaUpload.error", undefined, true);i(Y(e,t)),n(new Error(l.bt("Cannot create Pin because the image could not be uploaded.", "Cannot create Pin because the image could not be uploaded.", "pinBuilder.error.noImageUploaded", undefined, true)))}));else if("webImage"===_.type){const{createMethod:i}=g[e];t({...A,description:w,link:h,title:P,image_url:_.src,method:i||"scraped",scrape_metric:{source:"www_url_scrape"},user_mention_tags:v})}else{if("localVideo"!==_.type)throw new Error(l.bt("Cannot create Pin because the media type is not recognised.", "Cannot create Pin because the media type is not recognized.", "pinBuilder.error.noMediaRecognized", undefined, true));Ee(_,f).then((t=>(0,p.xc)(t,e,d,u))).then((({signature:e})=>{if(!e)throw new Error;t({...A,image_signature:e,description:w,link:h,title:P,media_upload_id:_.uploadId,user_mention_tags:v})})).catch((()=>{const t=l.bt("Hmm, your upload failed. Please try again.", "Hmm, your upload failed for some reason. Please try again.", "Error message uploading a video file and process fails", undefined, true);i(Y(e,t)),n(new Error(l.bt("Cannot create Pin because the video could not be uploaded.", "Cannot create Pin because the video could not be uploaded.", "pinBuilder.error.noVideoUploaded", undefined, true)))}))}}}))}function Te(e,t,i,n,o,s,r){return new Promise(((i,n)=>{const{pinbuilder:{pinDrafts:a,pinItems:l,storyPinItems:d,storyPinItemBlocks:c}}=t,{pinItemIds:u,type:h}=a[e],_=u[0];let g;if("story"===h){var m;g=null===(m=d[_].blockIds.map((e=>c[e])).filter((e=>{var t;return["localImage","localVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)}))[0])||void 0===m?void 0:m.media}else g=l[_].media;if(!g)throw new Error("Invalid media");if("localImage"===g.type)(0,p.wL)(g.src,e,o,s,r).then((e=>{i({image_signature:e})})).catch((()=>{n(new Error("Cannot schedule the Pin."))}));else{if("localVideo"!==g.type)throw new Error("Cannot upload this media type.");{const t=g.uploadId;Ee(g,null).then((t=>(0,p.wL)(t,e,o,s,r))).then((e=>i({image_signature:e,media_upload_id:t}))).catch((()=>{n(new Error("Cannot schedule the Pin"))}))}}}))}function De(e,t,i,n,o){return(s,r)=>{const a=r();if(t&&(t.message||t.message_detail)){const r=t.message_detail||t.message,{pinItemIds:l,pinItemIndex:d}=a.pinbuilder.pinDrafts[e],c=l[d],u=[];switch(t.api_error_code){case 9:switch((t.data||{}).source_field){case"description":u.push({...k("DESCRIPTION_INVALID",i,c,o),message:r});break;case"title":u.push({...k("TITLE_INVALID",i,c,o),message:r});break;default:u.push({...k("URL_INVALID",i,c,o),message:r})}break;case 2378:u.push({...k("CAROUSEL_DIFFERENT_RATIOS",i,e,o),dispatchId:e,message:r});break;default:s(N(e,r,t.api_error_code))}u.length>0&&s((0,w.d)(u,n))}}}function ke(e,t,i,n,o,s,a){return(d,c)=>{const{pinbuilder:{pinDrafts:u}}=c();d(function(e,t,i){return(n,o)=>{const s=o(),{pinbuilder:{pinDrafts:a,pinDraftIds:d,pinItems:c,storyPinItems:u}}=s,{pinItemIds:h,type:p,interestTags:_,urlCreationSource:g}=a[e],m=h[0],f="story"===p,{title:x,description:b,media:y}=f?u[m]:c[m],v=f?[]:c[m].userMentionTags,P=f?u[m].linkBlock&&u[m].linkBlock.srcUrl:c[m].link,w=y&&"localVideo"===y.type?"video":"image",I="single"===p?w:p,A=!!x,E=!!b,C=!!P,{canvasJsons:S,signals:j}=h.reduce(((e,t)=>{const i=f?u[t]:c[t],{canvasJson:n,signals:o}=i,s=Object.keys(o).map((e=>({signal:e,value:o[e]})));return{canvasJsons:[...e.canvasJsons,n],signals:[...e.signals,...s]}}),{canvasJsons:[],signals:[]}),T={signals:j,is_multi_pin_create:d.length>1,num_images:!!S&&Math.max(...S.map((e=>e&&e.layout?e.layout.sections.length:1)))||1,text:S.reduce(((e,t)=>(t&&t.text&&e.push({font_family:t.text.fontFamily,position:t.text.position,font_size:t.text.fontSize,margin:t.text.margin,bg_color:t.text.backgroundColor,bg_opacity:t.text.backgroundOpacity,text_color:t.text.textColor}),e)),[]),logo:S.reduce(((e,t)=>(t&&t.logo&&e.push({position:t.logo.position,margin:t.logo.margin,size:t.logo.size,bg_color:t.logo.backgroundColor,bg_opacity:t.logo.backgroundOpacity}),e)),[])};y&&"localVideo"===y.type&&r.Z.enabled("videoTagging")&&(T.interest_tags=_.length);const D={pin_draft_id:e,has_description:E,has_link:C,has_title:A,is_video:"video"===I,media_upload_id:y&&"localVideo"===y.type?y.uploadId:void 0,pin_builder_data:JSON.stringify(T),pin_format:I,num_user_mention_tags:v.length,signals:JSON.stringify(j),..."image"===I||"carousel"===I||"video"===I&&r.Z.enabled("videoEditing")?{has_logo:S.some((e=>!!e&&!!e.logo)),has_text:S.some((e=>!!e&&!!e.text)),is_cropped:S.some((e=>{if(!e||!e.layout)return!1;const t=e.layout.sections.map((e=>e.media));return t.length>1||1===t.length&&!!t[0]&&(0!==t[0].angle||t[0].flipX||t[0].flipY||t[0].viewbox&&(1!==t[0].viewbox.width||1!==t[0].viewbox.height))})),is_trimmed:y&&"localVideo"===y.type?!!y.trimmedStartTime&&!!y.trimmedEndTime&&!!y.duration&&(y.trimmedStartTime>0||y.duration-y.trimmedEndTime>.01):void 0}:Object.freeze({}),pin_builder_scenario:r.Z.scenario(),...g?{url_creation_source:g}:Object.freeze({})};if((0,l.Z)(i,{event_type:1,object_id_str:t,aux_data:{...D}}),y&&"localVideo"===y.type)if(y.customCoverImg)(0,l.Z)(i,{event_type:7896,object_id_str:t});else{const e=(100*y.thumbnail/y.duration).toFixed(2);(0,l.Z)(i,{event_type:7517,object_id_str:t,aux_data:{percentage_scrubbed:e}})}}}(e,t.id,i));const{pinItemIds:h,pinItemIndex:p,selectedItem:m}=u[e],f=h[p],x=t.board&&t.board.id||m&&m.boardId;return d((0,y.f5)(f,t.id,n&&n.advertiser_id,o,i,a)).then((()=>{d(J(e,t.id)),d((0,_.Br)({boardId:x,sectionId:t.section?t.section.id:null,increment:1})),d((0,g.vX)({feedId:t.section?t.section.id:x,feedType:t.section?j.Z.BOARD_SECTION_PINS:j.Z.BOARDFEED,itemIds:[t.id],itemType:"pin"})),d((0,S.JS)({userId:s,increment:1}))}))}}function ze(e,t,i){return(n,o)=>{const s=o(),{pinDrafts:r}=s.pinbuilder,{selectedItem:a}=r[e],{board:l}=t,d=l&&l.id||a&&a.boardId;n(J(e,t.id)),n((0,_.Br)({boardId:d,sectionId:t.section?t.section.id:null,increment:1})),n((0,g.vX)({feedId:t.section?t.section.id:d,feedType:t.section?j.Z.BOARD_SECTION_PINS:j.Z.BOARDFEED,itemIds:[t.id],itemType:"pin"})),n((0,g.vX)({feedId:i,feedType:j.Z.STORY_PINS_FEED,itemIds:[t.id],itemType:"pin",prepend:!0})),n((0,S.JS)({userId:i,increment:1}))}}function Oe(e){return(t,i)=>{const n=i(),{pinbuilder:{pinDraftIdUploadStatusMap:o}}=n;return!(!o||!o[e]||"uploading"!==o[e].status)}}function Re(e,t,i,n){return async o=>{let s=!0;try{await o((0,w.Z)({pinDraftId:e,validationKey:"save",i18n:t,ideaPinRenamingEnabled:n,logContextEvent:i}))}catch(r){s=!1}return{pinDraftId:e,isValid:s}}}function Le(e){const t=(i=0)=>o.Z.create("StoryPinResource",e).callCreate().catch((e=>i<s.g1?new Promise((e=>setTimeout(e,s.VP))).then((()=>t(i+1))):Promise.reject(e)));return new Promise(((e,i)=>{t().then((t=>e(t))).catch((e=>i(e)))}))}function Me({contextLogInfo:e,country:t,i18n:i,ideaPinRenamingEnabled:n,isPartner:o,logContextEvent:s,orbacSubjectId:r,pinDraftId:a,storyPinPublishStopwatch:l,userId:c}){return(u,h)=>{const p=h(),{pinDrafts:_,storyPinItemBlocks:g,storyPinItems:m}=p.pinbuilder,f=_[a],{pinItemIds:x}=f,b=x.reduce(((e,t)=>[...e,...m[t].blockIds.map((e=>g[e]))]),[]),y=b.filter((e=>{var t;return["localImage","webImage"].includes(null===(t=e.media)||void 0===t?void 0:t.type)})).length,v=b.filter((e=>{var t;return["localVideo","webVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)})).length;return null==l||l.addBinaryAnnotation("image.count",y,"I16"),null==l||l.addBinaryAnnotation("video.count",v,"I16"),null==l||l.addBinaryAnnotation("page.count",_[a].pinItemIds.length,"I16"),u(L(a,"publishing")),s({event_type:8787,event_data:{storyPinData:{isExpressive:!0,numImages:y,numVideos:v,numPages:_[a].pinItemIds.length}},aux_data:{...e?(0,T.V3)(e):{},story_pin_upload_id:a}}),_[a].uploadStartTime||u(we(a,new Date)),u((0,w.Z)({pinDraftId:a,validationKey:"save",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:s})).then((()=>(u(N(a,null)),u(function(e,t,i,n,o,s){return(r,a)=>{const l=a(),{pinDraftIdUploadStatusMap:d,storyPinItemBlocks:c,storyPinItems:u}=l.pinbuilder;if(d[e]){const a=Object.keys(d[e].items).filter((t=>"queueEdit"===d[e].items[t].status));if(a.length>0)return a.forEach((a=>{const l=u[a].blockIds.find((e=>{var t;return"localVideo"===(null===(t=c[e].media)||void 0===t?void 0:t.type)}));l&&c[l].media&&c[l].media.signature&&r((0,I.wY)({country:i,i18n:n,ideaPinRenamingEnabled:s,logContextEvent:o,pinDraftId:e,pinItemId:a,userId:t}))})),!0}return!1}}(a,c,t,i,s,n))||u(Oe(a))?(u((0,P.g)(a,"queueCreate")),null):u((0,E.Wh)(a,i,s)).then((()=>u((0,E.Eu)(a,s)))).then((()=>u((0,w.Z)({pinDraftId:a,validationKey:"publishStoryPin",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:s})))).then((()=>{const e=h();return je(a,e,u,r,c,o,i,s)})).then((e=>Promise.all([Le(e),e]))).then((([t,i])=>{const n=h(),{pinDrafts:o}=n.pinbuilder,{data:l}=t.resource_response,{uploadStartTime:p}=o[a],_=p?new Date-p:-1;u((0,d.Sr)("StoryPinResource",i,t)),u(ee(a,l)),u(ze(a,l,c)),o[a].interestTags.length&&u(Ce(s,a,l.id,3)),u(function({contextLogInfo:e,imageSig:t,numImages:i,numPages:n,numVideos:o,pinDraftId:s,pinId:r,storyPinDataId:a,uploadTime:l},d){return()=>{d({event_type:7590,event_data:{storyPinData:{numImages:i,numPages:n,numVideos:o,isExpressive:!0,storyPinDataIdStr:a}},object_id_str:r,aux_data:{...e?(0,T.V3)(e):{},image_signature:t,pin_id:r,story_pin_upload_id:s,upload_time:l}})}}({contextLogInfo:e,numImages:y,numVideos:v,pinDraftId:a,imageSig:l.imageSignature,numPages:o[a].pinItemIds.length,pinId:l.id,storyPinDataId:l.story_pin_data_id,uploadTime:_},s)),f.storyPinDraftId?u((0,E.XJ)(f.storyPinDraftId,c,r)).finally((()=>u(L(a,"succeeded")))):u(L(a,"succeeded"))}))))).catch((t=>{const o=h(),{pinDrafts:r}=o.pinbuilder,{uploadStartTime:l}=r[a],d=l?new Date-l:-1,{api_error_code:c,message:p,message_detail:_}=t||{};u(De(a,t,i,s,n)),s({event_type:7726,event_data:{storyPinData:{isExpressive:!0,numImages:y,numVideos:v,numPages:r[a].pinItemIds.length}},aux_data:{...e?(0,T.V3)(e):{},status_code:c,story_pin_create_failure_message:_||p,story_pin_upload_id:a,upload_time:d}}),u(L(a,"attempted")),u(we(a,null))}))}}function Be({pinDraftId:e,storyPinPublishStopwatch:t,userId:i,orbacSubjectId:n,country:a,isPartner:l,i18n:c,ideaPinRenamingEnabled:u,logContextEvent:h,contextLogInfo:p,checkExperiment:_,siteType:g}){return(m,x)=>{const{pinbuilder:{pinDrafts:b}}=x(),{scheduledDate:y,scheduledTime:I,type:E}=b[e];m(y&&I?function({pinDraftId:e,userId:t,i18n:i,logContextEvent:n,orbacSubjectId:a,siteType:l,ideaPinRenamingEnabled:d}){return(c,u)=>{const h=u(),{pinbuilder:{pinDrafts:p,pinItems:_}}=h;c(L(e,"publishing"));const{altText:g,pinItemIds:m,pinItemIndex:f,scheduledDate:x,scheduledTime:b,selectedItem:y}=p[e],I=m[f],{description:E,link:C,media:j,title:T}=_[I];return c((0,w.Z)({pinDraftId:e,validationKey:"save",i18n:i,ideaPinRenamingEnabled:d,logContextEvent:n})).then((()=>{if(c(Oe(e)))return r.Z.enabled("multi_pin")||r.Z.enabled("multi_pin_pinner")?(c((0,P.g)(e,"queueCreate")),c(L(e,"uploading"))):c((0,v.Z)(e)),null;if(!x||!b)throw new Error("Cannot schedule a Pin without a scheduled date or time.");const i=new Date(x.getFullYear(),x.getMonth(),x.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()).getTime()/D;return Promise.all([Te(e,h,0,0,n,a,l),i]).then((([e,t])=>{if(!y)throw new Error("Cannot schedule a Pin without a board.");const i=T.substring(0,s.Ke),n=E.substring(0,s.JO),{image_signature:r,media_upload_id:l}=e,d={board:y.boardId,description:n,image_signature:r,link:C,media_upload_id:l,scheduled_timestamp:t,title:i,...g?{alt_text:g}:Object.freeze({}),...y.sectionId?{section:y.sectionId}:{},...a?{orbac_subject_id:a}:{}};return o.Z.create("ScheduledPinResource",d).callCreate()})).then((i=>{if(!j)throw new Error("Cannot schedule a Pin without an image.");const{data:n}=i.resource_response,o={...n,localMedia:j.src};c(Q(e,o)),c((0,A.Tn)(n)),c((0,S.h6)({userId:a||t,increment:1})),c(L(e,"succeeded"))}))})).catch((()=>{throw c(L(e,"attempted")),new Error("Cannot schedule the Pin.")}))}}({pinDraftId:e,userId:i,i18n:c,ideaPinRenamingEnabled:u,logContextEvent:h,orbacSubjectId:n,siteType:g}):"story"===E?Me({contextLogInfo:p,country:a,i18n:c,ideaPinRenamingEnabled:u,isPartner:l,logContextEvent:h,orbacSubjectId:n,pinDraftId:e,storyPinPublishStopwatch:t,userId:n||i}):function({checkExperiment:e,country:t,i18n:i,ideaPinRenamingEnabled:n,isPartner:s,logContextEvent:a,orbacSubjectId:l,pinDraftId:c,siteType:u,userId:h}){return(p,_)=>{const g=_(),{pinbuilder:m}=g,{pinDrafts:x}=m,{status:b}=x[c];return"uploading"!==b&&p(L(c,"publishing")),p((0,w.Z)({pinDraftId:c,validationKey:"save",i18n:i,ideaPinRenamingEnabled:n,logContextEvent:a})).then((()=>(p(M(c,"publishing")),p(Oe(c))?(p((0,P.g)(c,"queueCreate")),r.Z.enabled("multi_pin")||r.Z.enabled("multi_pin_pinner")?p(L(c,"uploading")):p((0,v.Z)(c)),null):je(c,g,p,l,h,s,i,a,e,u).then((e=>Promise.all([o.Z.create("PinResource",e).callCreate(),e]))).then((([e,i])=>{const{data:n}=e.resource_response;p((0,d.Sr)("PinResource",i,e)),r.Z.enabled("videoTagging")&&p(Ce(a,c,n.id)),p(ke(c,n,a,i,t,h,l)).then((()=>{p(L(c,"succeeded")),p(M(c,"succeeded")),p((0,f.F)(n.id))}))})).catch((e=>{p(De(c,e,i,a,n)),p(L(c,"attempted")),p(M(c,"serverError"))}))))).catch((()=>{p(L(c,"created")),p(M(c,"clientError"))}))}}({checkExperiment:_,country:a,i18n:c,ideaPinRenamingEnabled:u,isPartner:l,logContextEvent:h,orbacSubjectId:n,pinDraftId:e,siteType:g,userId:i}))}}function Ne({pinDraftId:e,i18n:t,logContextEvent:i,siteType:n,ideaPinRenamingEnabled:o}){return(s,r)=>{const a=r(),{pinbuilder:l}=a,{pinDrafts:d,pinItems:c,storyPinItems:u}=l,{pinItemIds:h,pinItemIndex:_,type:g}=d[e];if("single"===g||"story"===g){const r=h[_],{media:a}="story"===g?u[r]:c[r];if(a&&!a.signature){const{src:l}=a,d=3===n?"ads-builder-pinimage":"pinimage";(0,p.GV)(l,d).then((({signature:n})=>{s((0,y.Sz)(r,{signature:n})),s((0,w.Z)({pinDraftId:e,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:o,logContextEvent:i,options:{fieldToCheck:"image_signature"}})).catch((()=>{}))}))}}}}function Ze({pinDraftId:e,selectedId:t,cachedItems:i,editedMedia:n,canvasJson:o,userId:s,country:r,i18n:a,logContextEvent:l,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{const p=h(),{pinItemIds:_,type:g}=p.pinbuilder.pinDrafts[e];_.forEach((e=>{const{canvasJson:s,media:r}=i[e]||{},a=t===e?n:r,l=t===e?o:s,d="story"===g?C.WZ:y.k8;l&&a&&u(d(e,a,l))}));const{media:m}=i[t];"single"===g&&m&&"localVideo"===m.type?u((0,I.qX)({pinDraftId:e,userId:s,country:r,i18n:a,ideaPinRenamingEnabled:c,logContextEvent:l})):u(Ne({pinDraftId:e,i18n:a,logContextEvent:l,siteType:d,ideaPinRenamingEnabled:c}))}}function Fe({pinDraftId:e,userId:t,country:i,isPartner:o,i18n:s,logContextEvent:r,orbacSubjectId:a,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{const{pinbuilder:{pinDrafts:p}}=h(),{pinItemIds:_,pinItemIndex:g,websiteLink:m,websiteMedia:f,selectedItem:x,createMethod:v}=p[e],P="webImage"===f[0].type&&f[0].sourceURL?f[0].sourceURL:m,w=_[g];u((0,y.mO)(w,f[0])),u((0,y.PF)(w,P)),u(Be({pinDraftId:e,userId:t,orbacSubjectId:a,country:i,isPartner:o,i18n:s,logContextEvent:r,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c})),f.slice(1).forEach((e=>{const h=(0,n.Z)(),p=(0,n.Z)();u((0,b.Z)(h,p,{media:e,link:P})),u(Z(h,x)),v&&u(R(h,v)),u(Be({pinDraftId:h,userId:t,orbacSubjectId:a,country:i,isPartner:o,i18n:s,logContextEvent:r,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:c}))}))}}function Ue(e){return(t,i)=>{const n=i(),{pinbuilder:{pinDrafts:o}}=n;for(const[s,r]of Object.entries(o))if(r.pinId===e)return void t((0,v.Z)(s))}}},502890:(e,t,i)=>{i.d(t,{C_:()=>b,OD:()=>f,PF:()=>g,Sz:()=>_,b0:()=>S,f5:()=>I,hL:()=>C,jP:()=>u,k8:()=>y,kS:()=>h,kf:()=>A,lZ:()=>m,mO:()=>p,nh:()=>v,oe:()=>E,yV:()=>w});var n=i(172045),o=i(214494),s=i(954931),r=i(623320),a=i(622296),l=i(277348),d=i(562501),c=i(957025);function u(e,t,i){return{type:"PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t,signals:i}}}function h(e,t,i){return{type:"PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t,signals:i}}}function p(e,t){return{type:"PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function g(e,t){return{type:"PIN_ITEM_SET_LINK",payload:{pinItemId:e,link:t}}}function m(e,t,i){return{type:"PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t,signals:i}}}function f(e,t){return{type:"PIN_ITEM_SET_TAG_ERROR",payload:{pinItemId:e,tagError:t}}}function x(e,t){return(i,n)=>{const{pinbuilder:{pinTags:o}}=n(),{status:s}=o[t];i("created"===s?function(e,t){return{type:"PIN_ITEM_REMOVE_PIN_TAG",payload:{pinItemId:e,pinTagId:t}}}(e,t):(0,l.Cf)(t,"deleted"))}}function b(e,t){return{type:"PIN_ITEM_SET_SELECTED_PIN_TAG_ID",payload:{pinItemId:e,selectedPinTagId:t}}}function y(e,t,i){return{type:"PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function v(e,t){return{type:"PIN_ITEM_UPDATE_DATA",payload:{pinItemId:e,pinItem:t}}}const P=(e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})};function w(e){const t=(0,c.A$)();return(i,n)=>{const o=n(),{selectedPinTagId:s}=o.pinbuilder.pinItems[e];i(b(e,null)),s&&0===t(o,{pinTagId:s}).length&&i(x(e,s))}}function I(e,t,i,n,a,l){return(d,c)=>{const{pinbuilder:u}=c(),{pinItems:h,pinTags:p,taggedObjects:_}=u;if(!h[e])return Promise.resolve();const{pinTagIds:g}=h[e],m=g.reduce(((e,t)=>{const{taggedObjectIds:i}=p[t];return i.forEach((t=>e.push(_[t]))),e}),[]);return m.length>0?(0,r.Fv)(l).then((e=>{const d=function(e,t,i){return e.map((e=>{const{id:n,link:o,media:a,type:l}=e;return(0,s.Z)(o)&&/\/pin\/[\w-]+\/?$/.test(o)||"pin"===l?{id:n}:(0,r.iX)({link:o,board_id:t,image_url:a?a.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...i?{orbac_subject_id:i}:Object.freeze({})})}))}(m,e.id,l);return Promise.all(d).then((e=>{const s=e.map((e=>e.id)),r=g.map((e=>{const{taggedObjectIds:t,x:i,y:o}=p[e],r=s.splice(0,t.length);return{country:n,height:0,tagged_objects:r,width:0,x_coord:100*i,y_coord:100*o}}));o.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:r,advertiserId:i,...l?{orbacSubjectId:l}:Object.freeze({})}).callUpdate({}).catch((e=>{P(e,a)}))}))})):Promise.resolve()}}function A(e,t){return{type:"PIN_ITEM_SET_IS_TAGGABLE",payload:{pinItemId:e,isTaggable:t}}}function E(e,t){return i=>{i((0,a.Z)(e,t,{id:t,x:0,y:0})),i(b(e,t))}}function C(e,t,i){return o=>{const s=(0,n.Z)();o((0,a.Z)(e,s,{id:s,x:t,y:i})),o(b(e,s))}}function S(e){const t=(0,d.vd)(),i=(0,c.A$)();return(n,o)=>{const s=o();n(f(e,null));t(s,{pinItemId:e}).forEach((t=>{0===i(s,{pinTagId:t}).length&&n(x(e,t))}))}}},277348:(e,t,i)=>{i.d(t,{Cf:()=>a,Dn:()=>d,Go:()=>l,mz:()=>r,uM:()=>s});var n=i(347619),o=i(647117);function s(e,t,i){return{type:"PIN_TAG_SET_COORDINATES",payload:{pinTagId:e,x:t,y:i}}}function r(e,t,i){return{type:"PIN_TAG_SET_LINK",payload:{pinTagId:e,link:t,error:i}}}function a(e,t){return{type:"PIN_TAG_SET_STATUS",payload:{pinTagId:e,status:t}}}function l(e,t){return(i,n)=>{const{pinbuilder:{taggedObjects:s}}=n(),{status:r}=s[t];i("created"===r?function(e,t){return{type:"PIN_TAG_REMOVE_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t}}}(e,t):(0,o.k)(t,"deleted"))}}function d(e,t,i){return(o,s)=>{o((0,n.Z)(e,t,{...i,id:t,link:s().pinbuilder.pinTags[e].link})),o(r(e,""))}}},98432:(e,t,i)=>{i.d(t,{Z:()=>P});var n=i(172045),o=i(172071),s=i(299295),r=i(665866),a=i(388628),l=i(573545),d=i(224496),c=i(123463),u=i(265696),h=i(314123),p=i(174807),_=i(305782),g=i(502890),m=i(923490),f=i(998285),x=i(554410),b=i(472278),y=i(843030),v=i(296342);function P({pinDraftId:e,files:t,isPartner:i,userId:P,country:w,i18n:I,logContextEvent:A,orbacSubjectId:E,checkExperiment:C,ideaPinRenamingEnabled:S,isMaxVideo:j}){return(T,D)=>{const k=D(),{pinItemIds:z,pinItemIndex:O,pinItemShareable:R,status:L,type:M}=k.pinbuilder.pinDrafts[e],B=z.length,N="story"===M,Z=L;T((0,_.p3)(e,"processing")),T((0,_._B)(e,null));const F=(t=!1)=>new Promise((i=>{T(t&&N?(0,_.WT)(e,!0):(0,_.p3)(e,Z)),i()})),U=t.map((e=>(0,c.Z)({i18n:I,file:e,options:{allowVideo:r.Z.enabled("video"),forStoryPin:N},ideaPinRenamingEnabled:S})));return Promise.all(U).then((t=>{let c=!1;const D=[],L=[],Z=z[0],{pinItems:U,storyPinItemBlocks:V,storyPinItems:H}=k.pinbuilder,{description:G,media:W,title:$}=N?H[Z]:U[Z],q=N&&H[Z].blockIds||[],X=z.length<=1&&(!W&&!N||N&&!q.length),Y=z[O],K=H[Y];let J=!1;K&&(J=N?!!K.blockIds.find((e=>!!V[e].media)):!!K.media);const Q=!N||N&&!J||X,ee=function(e,t){return"story"===t?e:"carousel"!==t&&e.length>0&&"localVideo"===e[0].type?e.slice(0,1):e.filter((e=>"localVideo"!==e.type))}(t,M);if(ee.forEach((e=>{"localImage"===e.type?(L.push(e),o.Z.increment("pin_builder.media_upload.image_selected",1,{source:(0,l.Z)(i)})):"localVideo"===e.type?(L.push(e),o.Z.increment("pin_builder.media_upload.video_selected",1,{source:(0,l.Z)(i)})):D.push(e)})),N&&D.length&&function(e){e.forEach((e=>{switch(e.id){case"STORY_PIN_VIDEO_OVER_MAX_DURATION":o.Z.increment("story_pin.upload.video.over_max_duration",1,{app_type:"web"});break;case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":o.Z.increment("story_pin.upload.video.over_max_file_size",1,{app_type:"web"});break;case"VIDEO_UNRECOGNIZED_ENCODING":o.Z.increment("story_pin.upload.video.invalid_format",1,{app_type:"web"})}}))}(D),!L.length)return D.length>0&&(D.length>1?T((0,_._B)(e,I.bt("Sorry, your files could not be uploaded. Please make sure the files chosen meet our requirements", "Uh oh, your files could not be uploaded. Please make sure the files chosen fit within our requirements", "pinbuilder.processFiles.invalidFiles", undefined, true))):T((0,_._B)(e,D[D.length-1].message))),F();D.length>0&&T((0,_._B)(e,I.bt("One or more of your files could not be uploaded", "Uh oh, one or more of your files could not be uploaded", "pinbuilder.processFiles.invalidFiles", undefined, true)));const te="carousel"===M||"single"===M&&L.length>1,ie=W||L[0],ne=N?s.yX:s.dS,oe=(t,i,o,s,r)=>{const a=s?Object.assign(t,s.getCanvasOutput({width:r})):t;N&&"localImage"===a.type&&delete a.fileSrc;const l=s?s.toJSON():null,u=N?void 0:U[Z].link,_={media:a,canvasJson:l};let E=z[O];if(N)if(0===i&&Q){const{media:t}=H[E];c=!!t&&1===L.length,t&&"localVideo"===t.type&&T((0,h.$Z)(e,E)),T((0,b.JQ)({canvasAspectRatio:d.ap,pinDraftId:e,pinItemId:E,pinItem:_})),N&&0===O&&(T((0,y.Uo)(e,E,(0,n.Z)(),v.j7)),T((0,b.d5)(e,E,7)))}else E=(0,n.Z)(),T((0,f.Z)({canvasAspectRatio:d.ap,options:{saveIndex:X},pinDraftId:e,pinItem:_,pinItemId:E})),N&&T((0,b.d5)(e,E,7));else{const t={...R?{description:G,link:u,title:$}:{},..._};if(0===i){const{media:i}=U[E];c=!!i&&1===L.length,i&&"localVideo"===i.type&&T((0,h.$Z)(e,E)),T((0,g.nh)(E,t))}else E=(0,n.Z)(),T((0,p.Z)(e,E,t))}"localVideo"===a.type?T((0,m.dG)({pinDraftId:e,pinItemId:E,userId:P,country:w,i18n:I,logContextEvent:A,orbacSubjectId:o,checkExperiment:C,ideaPinRenamingEnabled:S,isMaxVideo:j})):"localImage"===a.type&&N&&T((0,x.Uz)(e,E,A))},se=t=>L.slice(0,Q?ne-B+1:ne-B).reduce(((e,i,n)=>e.then((()=>"localImage"===i.type&&t?(t.resize(i.width,i.height),t.setImage(i.src).then((()=>{let{width:e}=ie;if(t)if(N){const t=i.width/i.height;if(t<1)e=Math.min(v.er,i.width);else{e=Math.min(v.er,i.height)*t}}else{var o,s;const e=X&&L.length>1?(0,a.Z)(null!==(o=ie.width)&&void 0!==o?o:1,null!==(s=ie.height)&&void 0!==s?s:1):{w:ie.width,h:ie.height};t.setAspectRatio(e)}return oe(i,n,E,t,e)}))):oe(i,n,E)))),Promise.resolve()).then((()=>{!D.length&&te&&!c&&B+L.length<=s.dS&&T((0,p.Z)(e,(0,n.Z)(),null,{saveIndex:!0})),T((0,_._B)(e,D.length?D[D.length-1].message:null)),N||te||!r.Z.enabled("imageSignals")||T((0,_.th)({pinDraftId:e,i18n:I,logContextEvent:A,ideaPinRenamingEnabled:S}))}));return te||N?(0,u.Z)().then((e=>{const t=new e(document.createElement("div"));return se(t).then((()=>F(!0)))})):se().then((()=>F(!0)))}))}}},264938:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(474394),o=i(838548);function s(e,t,i,s,r,a,l,d){return(c,u)=>{const{pinbuilder:h}=u(),{selectedPinDraftIds:p}=h;p.forEach((u=>{c((0,n.deselectPinBuilderPinDraft)(u)),c((0,o.Z)({pinDraftId:u,storyPinPublishStopwatch:void 0,userId:e,orbacSubjectId:a,country:t,isPartner:i,i18n:s,logContextEvent:r,contextLogInfo:void 0,checkExperiment:l,siteType:d,ideaPinRenamingEnabled:!1}))}))}}},798477:(e,t,i)=>{function n(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_ID",payload:{pinDraftId:e}}}i.d(t,{Z:()=>n})},838548:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(665866),o=i(214494),s=i(668627),r=i(200915),a=i(414327),l=i(954931),d=i(623320),c=i(798477);const u=(e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})};function h(e,t,i){return e.map((e=>{const{id:n,link:o,media:s,type:r}=e;return!!(0,l.Z)(o)&&/\/pin\/[\w-]+\/?$/.test(o)||"pin"===r?{id:n}:(0,d.iX)({link:o,board_id:t,image_url:s?s.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...i?{orbac_subject_id:i}:Object.freeze({})})}))}function p(e,t,i,n,l){return(p,_)=>{const g=_(),{pinItems:m,pinTags:f}=g.pinbuilder,{pinTagIds:x}=m[e],b=x.map((e=>{const{status:s}=f[e];if("deleted"===s){const{taggedObjectIds:i}=f[e];return function(e,t,i,n,s){return o.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,orbacSubjectId:s,taggedObjectIds:i}).callDelete()}(e,t,i,0,l)}return"created"===s?function(e,t,i,n,s,r){const{pinbuilder:a}=i,{pinTags:l,taggedObjects:c}=a,{taggedObjectIds:p,x:_,y:g}=l[e];return(0,d.Fv)(r).then((e=>{const i=h(p.map((e=>c[e])),e.id,r);return Promise.all(i).then((e=>o.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:[{country:n,height:0,tagged_objects:e.map((e=>e.id)),width:0,x_coord:100*_,y_coord:100*g}],...r?{orbacSubjectId:r}:Object.freeze({})}).callUpdate().catch((e=>{u(e,s)}))))}))}(e,t,g,i,n,l):"edited"===s?function(e,t,i,n){const{pinTags:s,taggedObjects:r}=i.pinbuilder,{pinTagKey:a,taggedObjectIds:l,x:c,y:u}=s[e];return(0,d.Fv)(n).then((i=>{const s=l.filter((e=>"created"===r[e].status)).map((e=>r[e])),d=h(s,i.id,n);return Promise.all(d).then((i=>{const d=[o.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:[{height:0,tagged_objects:s.map((e=>e.id)),width:0,x_coord:100*c,y_coord:100*u}],...n?{orbacSubjectId:n}:Object.freeze({})}).callUpdate(),o.Z.create("ApiResource",{url:"/v3/visual_links/pin_tags/tagged_objects/batch/",options:{method:"POST",data:{pin_tag_key:a,tagged_objects:i.map((e=>e.id)).join(","),tagged_object_source:"pinterest-client",...n?{orbac_subject_id:n}:Object.freeze({})}}}),o.Z.create("VisualLinkTaggedObjectsResource",{id:t,pinTagId:e,taggedObjectIds:l.filter((e=>"deleted"===r[e].status))}).callDelete()];return Promise.all(d).then((()=>o.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,pinTag:{dimensions:{x:100*c,y:100*u}},taggedObjectIds:l,...n?{orbacSubjectId:n}:Object.freeze({})}).callCreate()))}))}))}(e,t,g,l):null}));Promise.all(b).then((()=>{p((0,a.jB)("PinResource",(0,s.Z)(t))),p((0,a.jB)("VisualLinkTopTaggedObjectsResource",(0,r.topTaggedObjectsResourceOptions)(t,!0))),p((0,c.Z)(t))}))}}var _=i(474394),g=i(305782),m=i(458253),f=i(923490);function x({pinDraftId:e,storyPinPublishStopwatch:t,userId:i,orbacSubjectId:o,country:s,isPartner:r,i18n:a,logContextEvent:l,contextLogInfo:d,checkExperiment:c,siteType:u,ideaPinRenamingEnabled:h}){return(x,b)=>{const{pinbuilder:{pinDrafts:y,pinDraftIds:v,pinItems:P,storyPinItems:w}}=b(),{mode:I,pinItemIds:A,pinItemIndex:E,type:C}=y[e],S=A[E],{media:j}="story"===C?w[S]:P[S];if("create"===I){if(j&&["localVideo","webVideo"].includes(j.type)&&n.Z.enabled("disabledVideoPinCreation"))return void x((0,_.setShowDisabledPinCreationBanner)(!0));if(j&&["assetImage","localImage","webImage"].includes(j.type)&&n.Z.enabled("disabledPinCreation"))return void x((0,_.setShowDisabledPinCreationBanner)(!0));if(j&&"localVideo"===j.type&&0===v.length)return x((0,f.dG)({pinDraftId:e,pinItemId:S,userId:i,country:s,i18n:a,logContextEvent:l,checkExperiment:c,ideaPinRenamingEnabled:h})),void x((0,m.g)(e,"queueCreate"));x((0,g.iX)({checkExperiment:c,contextLogInfo:d,country:s,i18n:a,ideaPinRenamingEnabled:h,isPartner:r,logContextEvent:l,orbacSubjectId:o,pinDraftId:e,siteType:u,storyPinPublishStopwatch:t,userId:i}))}else"edit"===I&&x(function(e,t,i,n){return(o,s)=>{const{pinbuilder:{pinDrafts:r}}=s(),{pinItemIds:a,pinItemIndex:l}=r[e];o(p(a[l],e,t,i,n))}}(e,s,l,o))}}},458253:(e,t,i)=>{function n(e,t){return{type:"PIN_BUILDER_SET_PIN_DRAFT_UPLOAD_STATUS",payload:{pinDraftId:e,status:t}}}i.d(t,{g:()=>n})},647117:(e,t,i)=>{function n(e,t){return{type:"TAGGED_OBJECT_SET_STATUS",payload:{taggedObjectId:e,status:t}}}i.d(t,{k:()=>n})},827628:(e,t,i)=>{i.d(t,{Z:()=>c,d:()=>d});var n=i(451105),o=i(346360),s=i(305782),r=i(502890),a=i(472278),l=i(395164);function d(e,t,i){return(o,d)=>{e.forEach((e=>{const c=e.dispatchId||"";switch((0,l.T)({name:"React PinBuilder Exception",message:Array.isArray(e.message)?e.message.join(""):e.message,message_detail:JSON.stringify({dispatchId:e.dispatchId,pinDraftId:i})}),(0,n.GB)(e.id,e.message,t),e.id){case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":o((0,s.KN)(c,e.message));break;case"BOARD_MISSING":o((0,s.xb)(c,e.message));break;case"DATE_TOO_FAR_IN_FUTURE":case"DATE_TOO_FAR_IN_FUTURE_EXTENDED":case"DATE_IN_PAST":case"DATE_MISSING":o((0,s.Yr)(c,e.message));break;case"CAROUSEL_DIFFERENT_RATIOS":case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":case"STORY_PIN_COVER_PAGE_TITLE_MISSING":case"STORY_PIN_TITLE_MISSING":case"STORY_PIN_NOT_ENOUGH_PAGES":case"STORY_PIN_VIDEO_ON_COVER":o((0,s.lT)(c,e.message));break;case"CAROUSEL_INVALID_FORMAT":case"MEDIA_MISSING":o((0,s._B)(c,e.message));break;case"TIME_MISSING":o((0,s.Ve)(c,e.message));break;case"TITLE_INVALID":o((0,r.kS)(c,e.message));break;case"DESCRIPTION_INVALID":o((0,r.jP)(c,e.message));break;case"IMAGE_IS_BLURRY":case"IMAGE_IS_SCREENSHOT":case"LINK_LOADS_SLOWLY":case"LINK_IS_AGGREGATOR":case"IMAGE_UNDER_MIN_DIMENSIONS":case"VIDEO_UNDER_MIN_DIMENSIONS":case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":o((0,r.nh)(c,{signals:{[e.id]:!0}}));break;case"TAG_INVALID":case"URL_INVALID":case"URL_IS_REDIRECT":case"URL_MISSING":case"URL_UNREACHABLE":case"URL_CONTAINS_PORN_DOMAIN":{const{pinbuilder:t}=d(),{pinDrafts:i,pinDraftIds:n}=t,s="URL_UNREACHABLE"===e.id||"URL_CONTAINS_PORN_DOMAIN"===e.id?{[e.id]:!0}:void 0;n&&"story"===i[n[0]].type?(o((0,a.qG)(c,e.message)),o((0,a.pq)(c,{isFetching:!1}))):o((0,r.lZ)(c,e.message,s));break}}}))}}const c=function({pinDraftId:e,validationKey:t,i18n:i,logContextEvent:n,options:s,ideaPinRenamingEnabled:r}){return(a,c)=>a(function({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:n,options:s}){return r=>{try{switch(t){case"save":return r((0,o.x)(e,i,n));case"edit":return r((0,o.J6)(e,i,n));case"publishStoryPin":return r((0,o.f5)(e,i,n));case"link":return Promise.all(r((0,o.Oc)(e,i,n))).then((e=>e.filter(Boolean).flat()));case"signal":const t=s?s.fieldToCheck:null;return r((0,o.DY)(e,i,t,n)).then((e=>e.filter(Boolean)));default:return Promise.resolve([])}}catch(a){return(0,l.T)({name:"React PinBuilder Validation Exception",message:a.message,message_detail:JSON.stringify({pinDraftId:e,validationKey:t,options:s}),...a.lineNumber&&{line:a.lineNumber},...a.stack&&{stack:a.stack}}),Promise.resolve([])}}}({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:r,options:s})).then((t=>{if(t.length>0&&(a(d(t,n,e)),t.some((e=>e.blocking))))throw new Error;return Promise.resolve()}))}},923490:(e,t,i)=>{i.d(t,{dG:()=>b,qX:()=>y,wY:()=>x});var n=i(172071),o=i(299295),s=i(665866),r=i(724565),a=i(840839),l=i(471155),d=i(801815),c=i(623320),u=i(314123),h=i(474394),p=i(305782),_=i(502890),g=i(458253),m=i(472278),f=i(843030);function x({country:e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:n,pinDraftId:o,pinItemId:s,userId:a}){return(l,d)=>{const _=d(),{pinbuilder:{storyPinItemBlocks:g,storyPinItems:m}}=_;if(m[s]&&m[s].blockIds.length){const _=m[s].blockIds.find((e=>"story_pin_video_block"===g[e].type)),x=_?g[_].media:null;if(_&&x&&"localVideo"===x.type&&x.signature&&void 0!==x.trimmedEndTime&&void 0!==x.trimmedStartTime&&(0!==x.trimmedStartTime||x.trimmedEndTime!==x.duration)){const{signature:g,trimmedEndTime:m,trimmedStartTime:b}=x;l((0,h.setPinBuilderPinItemUploadStatus)(o,s,"uploadingEdit")),l((0,f.PF)(o,_,{signature:null})),(0,c.Yv)(g,"video-story-pin",{time_start:(0,r.TA)(b),time_end:(0,r.TA)(m)},{onStartEdits:e=>l((0,f.PF)(o,_,{uploadId:e}))}).then((r=>{const c=d(),{pinbuilder:g}=c,{pinDraftIdUploadStatusMap:m}=g;l((0,f.PF)(o,_,{signature:r.signature})),m[o]&&l((0,h.setPinBuilderPinItemUploadStatus)(o,s,"completed"));const x=Object.keys(m[o].items).filter((e=>m[o].items[e].status.startsWith("uploading")||m[o].items[e].status.startsWith("queue")));(0===x.length||1===x.length&&x[0]===s)&&"queueCreate"===m[o].status&&(l((0,p.iX)({pinDraftId:o,userId:a,country:e,isPartner:!1,i18n:t,logContextEvent:n,ideaPinRenamingEnabled:i})),l((0,u.y2)(o)))})).catch((()=>{l((0,p._B)(o,t.bt("Video edit upload failed", "Video edit upload failed", "pinbuilder.upload.video.edit.error", undefined, true))),l((0,p.p3)(o,"attempted")),l((0,f.PF)(o,_,{signature:g})),l((0,h.setPinBuilderPinItemUploadStatus)(o,s,"queueEdit"))}))}}}}function b({pinDraftId:e,pinItemId:t,userId:i,country:r,i18n:d,logContextEvent:c,orbacSubjectId:b,checkExperiment:y,ideaPinRenamingEnabled:v,isMaxVideo:P}){return(w,I)=>{const A=I(),{pinbuilder:E}=A,{pinDrafts:C,pinDraftIds:S,pinItems:j,storyPinItemBlocks:T,storyPinItems:D}=E,{pinItemIds:k,status:z,type:O}=C[e],R="story"===O,{media:L}=R?D[t]:j[t],M=R?k.findIndex((e=>e===t)):void 0,B=R&&D[t]&&D[t].blockIds.length?D[t].blockIds.find((e=>"story_pin_video_block"===T[e].type)):null,N=B?T[B].media:L;if(!N||"localVideo"!==N.type)throw new Error("Unable to upload video - media is invalid.");w((0,p._B)(e,null)),"succeeded"===z&&w((0,p.p3)(e,"uploading")),w((0,g.g)(e,"uploading")),w((0,h.addPinBuilderPinDraftItemUpload)(e,t,{status:"uploading",xhr:null}));let Z,F=e=>w((0,m.Bl)(t,{uploadProgress:Math.round(e.loaded/e.total*100)}));R&&B&&(F=t=>w((0,f.PF)(e,B,{uploadProgress:Math.round(t.loaded/t.total*100)}))),Z=R?"video-story-pin":"ad_creation"===s.Z.scenario()?"ads-video":"video",P&&["ads-video","video"].includes(Z)&&(Z="premiere-ads-video");const U=(b,P=0)=>{(0,l.Z)(N.fileSrc,Z,R||!s.Z.enabled("videoEditing"),{onCancelUpload:e=>function(e,t,i,n){(0,a.Z)(e,{event_type:7684,aux_data:{file_size_mb:i.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:n,video_duration:i.duration}})}(c,e,N,M),onFailureUpload:({message:e,failureReason:t,uploadId:i})=>function(e,t,i,o,s,r){(0,a.Z)(e,{event_type:8786,aux_data:{error_message:i,file_size_mb:s.fileSrc.size/Math.pow(1024,2),media_upload_failure_reason:o||"general",media_upload_id:t,story_pin_page_id:r,video_duration:s.duration}}),n.Z.increment("video_pin_creation.uploading.failure",1,{failure_reason:i})}(c,i,e,t,N,M),onFinishProcessing:({processingTime:e,signature:t,uploadId:i})=>function(e,t,i,n,o,s){(0,a.Z)(e,{event_type:7520,aux_data:{file_size_mb:o.fileSrc.size/Math.pow(1024,2),media_upload_id:t,processing_time:i,story_pin_page_id:s,video_duration:o.duration,video_signature:n}}),(0,a.Z)(e,{event_type:7521,aux_data:{file_size_mb:o.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:s,video_duration:o.duration,video_signature:n}})}(c,i,e,t,N,M),onFinishUpload:({amzId2:e,amzRequestId:t,statusCode:i,uploadId:o,uploadTime:s})=>function({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:o,uploadId:s,uploadTime:r,video:l},d){(0,a.Z)(d,{event_type:7519,aux_data:{aws_tracking_ids:JSON.stringify([t,e]),file_size_mb:l.fileSrc.size/Math.pow(1024,2),media_upload_id:s,status_code:i,story_pin_page_id:o,upload_time:r,video_duration:l.duration}}),n.Z.increment("video_pin_creation.uploading.success",1,{app_type:"web"})}({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:M,uploadId:o,uploadTime:s,video:N},c),onProgress:e=>R?F(e):w((0,_.Sz)(t,{uploadProgress:Math.round(e.loaded/e.total*100)})),onStartProcessing:({signature:e,uploadId:t})=>function(e,t,i,n,o){(0,a.Z)(e,{event_type:8809,aux_data:{file_size_mb:n.fileSrc.size/Math.pow(1024,2),media_upload_id:t,story_pin_page_id:o,video_duration:n.duration,video_signature:i}})}(c,t,e,N,M),onStartUpload:({uploadId:i})=>w(function(e,t,i,n,o,s,r){return(l,d)=>{const c=d(),{pinbuilder:u}=c,{storyPinItemBlocks:h,storyPinItems:p}=u;if(s)if(p[t]&&p[t].blockIds.length){const n=p[t].blockIds.find((e=>"story_pin_video_block"===h[e].type));n&&l((0,f.PF)(e,n,{uploadId:i}))}else l((0,m.Bl)(t,{uploadId:i}));else l((0,_.Sz)(t,{uploadId:i}));(0,a.Z)(o,{event_type:7518,aux_data:{file_size_mb:n.fileSrc.size/Math.pow(1024,2),media_upload_id:i,story_pin_page_id:r,video_duration:n.duration}})}}(e,t,i,N,c,R,M)),setXhr:i=>w((0,h.setPinBuilderPinItemUploadXhr)(e,t,i))}).then((n=>{const o=I(),{pinbuilder:a}=o,{pinDraftIdUploadStatusMap:l}=a;if(l[e]&&w((0,h.setPinBuilderPinItemUploadXhr)(e,t,null)),R)if(B){if(w((0,f.PF)(e,B,{signature:n.signature})),l[e]&&l[e].items[t]&&"queueEdit"===l[e].items[t].status)return void("queueCreate"===l[e].status&&w(x({country:r,i18n:d,ideaPinRenamingEnabled:v,logContextEvent:c,pinDraftId:e,pinItemId:t,userId:i})))}else w((0,m.Bl)(t,{signature:n.signature}));else w((0,_.Sz)(t,{signature:n.signature}));l[e]&&w((0,h.setPinBuilderPinItemUploadStatus)(e,t,"completed"));const P=Object.keys(l[e].items).filter((t=>l[e].items[t].status.startsWith("uploading")||l[e].items[t].status.startsWith("queue")));"queueCreate"===l[e].status&&(0===P.length||1===P.length&&P[0]===t)&&(w((0,p.iX)({pinDraftId:e,userId:i,orbacSubjectId:b,country:r,isPartner:!1,i18n:d,logContextEvent:c,checkExperiment:y,ideaPinRenamingEnabled:v})),w((0,g.g)(e,"completed")));(0===P.length||1===P.length&&!!l[e].items[t])&&(s.Z.enabled("multi_pin")||s.Z.enabled("multi_pin_pinner")||s.Z.enabled("offsite_pin_creation_multi_select")||R||"queueCreate"!==l[e].status)&&w((0,u.y2)(e))})).catch((i=>{const n=I(),{pinbuilder:s}=n,{pinDraftIdUploadStatusMap:r}=s;if(!i||i.isError)if(R&&P<o.g1)U(b,P+1);else{const i=S.length>1?d.bt("Upload failed", "Upload failed", "pinbuilder.upload.video.upload.error", undefined, true):d.bt("Upload failed. Try again?", "Upload failed. Try again?", "pinbuilder.upload.video.upload.error", undefined, true);w((0,p._B)(e,i)),w((0,p.p3)(e,"attempted")),w((0,u.su)(e,t)),1===Object.keys(r[e].items).length&&w((0,u.y2)(e))}}))};U(b)}}function y({pinDraftId:e,userId:t,country:i,i18n:n,logContextEvent:o,ideaPinRenamingEnabled:s}){return(r,a)=>{const l=a(),{pinbuilder:h}=l,{pinDrafts:g,pinItems:m,pinDraftIds:f}=h,{pinItemIds:x,pinItemIndex:b,type:y}=g[e];if("single"===y){const l=x[b],{media:h,canvasJson:g}=m[l],y=h&&h.signature?h.signature:null;if(h&&y){const m=g?(0,d.Z)(h,g):null;m&&(0,c.Yv)(y,"video",m,{onStartEdits:e=>r((0,_.Sz)(l,{uploadId:e}))}).then((()=>{const l=a(),{pinbuilder:d}=l,{pinDraftIdUploadStatusMap:c}=d;"queueCreate"===c[e].status&&r((0,p.iX)({pinDraftId:e,userId:t,country:i,isPartner:!1,i18n:n,logContextEvent:o,ideaPinRenamingEnabled:s})),r((0,u.y2)(e))})).catch((()=>{const t=f.length>1?n.bt("Upload failed", "Upload failed", "pinbuilder.upload.video.edit.error", undefined, true):n.bt("Upload failed. Try again?", "Upload failed. Try again?", "pinbuilder.upload.video.edit.error", undefined, true);r((0,p._B)(e,t)),r((0,p.p3)(e,"attempted")),r((0,u.y2)(e))}))}}}}},31100:(e,t,i)=>{i.d(t,{Jc:()=>l,TX:()=>r,Tn:()=>s,hg:()=>a});var n=i(214494),o=i(90326);function s(e){return{type:"SCHEDULED_PIN_CREATE_COMPLETE",payload:{scheduledPin:e}}}function r(e,t,i){return s=>(s(function(e){return{type:"SCHEDULED_PIN_DELETE_COMPLETE",payload:{scheduledPinId:e}}}(e)),s((0,o.h6)({userId:t,increment:-1})),n.Z.create("ScheduledPinResource",{scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callDelete())}function a(e,t,i){return s=>(s(function(e){return{type:"SCHEDULED_PIN_PUBLISH_COMPLETE",payload:{scheduledPinId:e}}}(e)),s((0,o.h6)({userId:t,increment:-1})),n.Z.create("ScheduledPinResource",{method:"publish",scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callCreate())}function l(e){return t=>{const{boardId:i,description:o,ideaPinDetails:s,ideaPinDetailsTemplateType:r,link:a,sectionId:l,scheduledPinId:d,scheduledTimestamp:c,userMentionTags:u,title:h}=e,p=n.Z.create("ScheduledPinResource",{board:i,description:o,idea_pin_details:s,idea_pin_details_template_type:r,link:a,section:l,scheduled_pin_id:d,scheduled_timestamp:c,user_mention_tags:u,title:h}).callUpdate();return t({type:"SCHEDULED_PIN_UPDATE_COMPLETE",payload:e}),p}}},748254:(e,t,i)=>{function n(e,t,i,n){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:n}}}i.d(t,{Z:()=>n})},690374:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(172071);var o=i(296342),s=i(172045),r=i(186656),a=i(349700),l=i(665866),d=i(623320);const c=[200,201,204];async function u(e,t,i,n,o,s,r){const l=o.upload_id||"",d=o.upload_url||"",u=o.upload_parameters||{};null==s||s.addSubspan({name:`${t}_page_publish-${l}`,startTime:performance.now(),bypassIsTimingCheck:!0});const{onFailure:h,onFinishUpload:p,onStartUpload:_,onUploadProgress:g}=n;_&&_(l);const m=new Date,f=new XMLHttpRequest;"image"===t?f.open("POST",d.replace("pinterest-media-upload.s3.amazonaws","u.pinimg"),!0):f.open("POST",d,!0),f.onload=()=>{if(c.includes(f.status)){if(p){const e=(new Date-m)/1e3,t=f.getResponseHeader("x-amz-request-id"),i=f.getResponseHeader("x-amz-id-2");p(l,{amzId2:i,amzRequestId:t,uploadTimeSec:e,statusCode:f.status})}}else{const e="image"===t?1:8,i=(0,a.nk)(r.bt("Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}", "Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}", "uploadMedia.xhrOnLoad.failure", undefined, true),{mediaType:t,xhrStatus:f.status}).join();h({uploadId:l,errorMsg:i,mediaUploadFailureReason:e,retry:!0})}},f.onerror=()=>{const e="image"===t?1:8,i=(0,a.nk)(r.bt("Failed to upload the {{ mediaType }}", "Failed to upload the {{ mediaType }}", "uploadMedia.xhrOnError.failure", undefined, true),{mediaType:t}).join();h({uploadId:l,errorMsg:i,mediaUploadFailureReason:e,retry:!0})},g&&(f.upload.onprogress=e=>{g(Math.round(e.loaded/e.total*100))});const x=new FormData;return Object.keys(u).forEach((e=>{e&&u[e]&&x.append(e,u[e])})),x.append("file",e),f.send(x),{uploadId:l,xhr:f}}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=["webImage","webVideo"];class _{constructor(e){h(this,"upload",(()=>{})),h(this,"onFailure",(({errorMsg:e,mediaUploadFailureReason:t,retry:i,uploadId:n})=>{i&&this.numAttempts<this.maxUploadAttempts?this.upload():(this.status="failed",this.callbackHandlers.onFailure({errorMsg:e,mediaUploadFailureReason:t,uploadId:n,storyPinPublishStopwatch:this.storyPinPublishStopwatch}))})),h(this,"onFinishProcessing",((e,t)=>{this.signature=t.signature,this.callbackHandlers.onFinishProcessing&&this.callbackHandlers.onFinishProcessing(e,t,this.storyPinPublishStopwatch)})),h(this,"onFinishUpload",((e,t)=>{this.status="uploaded",this.callbackHandlers.onFinishUpload&&this.callbackHandlers.onFinishUpload(e,t,this.storyPinPublishStopwatch)})),h(this,"onStartProcessing",((e,t)=>{this.signature=t.signature,this.callbackHandlers.onStartProcessing&&this.callbackHandlers.onStartProcessing(e,t,this.storyPinPublishStopwatch)})),h(this,"cancel",(()=>{this.xhr&&(this.xhr.abort(),this.callbackHandlers.onCancel&&this.callbackHandlers.onCancel(this.uploadId||"",this.storyPinPublishStopwatch))})),this.i18n=e.i18n,this.maxUploadAttempts=e.maxUploadAttempts||1,this.media=e.media,this.numAttempts=0,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.vipRegistration=e.vipRegistration,this.vipType=e.vipType,this.callbackHandlers=e.callbackHandlers}}class g extends _{constructor(e){super(e),h(this,"getClassName",(()=>"ImageUpload")),h(this,"onProcessingFailed",(e=>{if(this.uploadId){const t=(0,a.nk)(this.i18n.bt("Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.ImageUpload.onProcessingFailed", undefined, false),{failureCode:e,uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:3,mediaStatusFailureReason:e})}})),h(this,"onProcessingTimeout",(()=>{if(this.uploadId){const e=(0,a.nk)(this.i18n.bt("Timed out on processing image with uploadId {{ uploadId }}", "Timed out on processing image with uploadId {{ uploadId }}", "MediaUpload.ImageUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:4})}})),h(this,"upload",(()=>{"localImage"===this.media.type&&(this.numAttempts+=1,u((0,d.Mi)(this.media.src),"image",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then((e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"})))})),this.signature=p.includes(e.media.type)?e.media.signature:null,this.status=p.includes(e.media.type)?"uploaded":"pending"}}class m extends _{constructor(e){super(e),h(this,"getClassName",(()=>"VideoUpload")),h(this,"onProcessingFailed",(e=>{if(this.uploadId){const t=(0,a.nk)(this.i18n.bt("Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.VideoUpload.onProcessingFailed", undefined, false),{uploadId:this.uploadId,failureCode:e}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:10,mediaStatusFailureReason:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}})),h(this,"onProcessingTimeout",(()=>{if(this.uploadId){const e=(0,a.nk)(this.i18n.bt("Timed out on processing video with uploadId {{ uploadId }}", "Timed out on processing video with uploadId {{ uploadId }}", "MediaUpload.VideoUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:11,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}})),h(this,"upload",(()=>{"localVideo"===this.media.type&&(this.numAttempts+=1,u(this.media.fileSrc,"video",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then((e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"})))})),this.signature=p.includes(e.media.type)?e.media.signature:null,this.status=p.includes(e.media.type)?"uploaded":"pending"}}var f=i(214494);function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const b=1e3,y=3e3,v=1e3;class P{constructor(e){var t=this;x(this,"getMediaRegistrationsFromVIP",(async function({durationMs:e,mediaType:i,count:o=20}){var l;t.vipRegistrationPool[i].fetchingData=!0,t.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Getting media registration urls for ${i}s`);const d=[];for(;o>0;)d.push({id:(0,s.Z)(),media_type:"image"===i?"image-story-pin":"video-story-pin",...e?{upload_aux_data:{clips:[{durationMs:e,isFromImage:"image"===i,startTimestampMs:-1}]}}:{}}),o-=1;const{requestCount:c}=t.vipRegistrationPool[i];return t.vipRegistrationPool[i].requestCount+=1,null===(l=t.storyPinPublishStopwatch)||void 0===l||l.subspanStart({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0}),(0,r.Z)({url:"/v3/media/uploads/register/batch/",method:"POST",data:{media_info_list:JSON.stringify(d)},callOptions:{showError:3===t.vipRegistrationPool[i].retries}}).then((e=>{var n,o;const s="object"==typeof(null===(n=e.resource_response)||void 0===n?void 0:n.data)?Object.values(e.resource_response.data):[];t.vipRegistrationPool[i].data=s,t.vipRegistrationPool[i].retries=0,t.vipRegistrationPool[i].fetchedLast=performance.now(),t.vipRegistrationPool[i].fetchingData=!1,null===(o=t.storyPinPublishStopwatch)||void 0===o||o.subspanStop({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0})}),(o=>{var s;n.Z.increment(`storypin.publish.registration.${i}.failure`,1,{reason:o.message,retryCount:t.vipRegistrationPool[i].retries}),t.vipRegistrationPool[i].retries<3?(t.inDebugMode&&console.log(`${i} registration failed. ${3-t.vipRegistrationPool[i].retries} retries remaining`,o),t.vipRegistrationPool[i].retries+=1,t.getMediaRegistrationsFromVIP({durationMs:e,mediaType:i})):(t.inDebugMode&&console.log(`${i} registration failed.`,o),t.onFailure((0,a.nk)(t.i18n.bt("Failed to register {{ mediaType }} upload with message: {{ error }}", "Failed to register {{ mediaType }} upload with message: {{ error }}", "MediaUploadManager.getMediaRegistrationsFromVIP.failure", undefined, false),{error:o,mediaType:i}).join(""),"image"===i?13:7)),null===(s=t.storyPinPublishStopwatch)||void 0===s||s.subspanStop({name:`${i}_registration_${c}`,bypassIsTimingCheck:!0})}))})),x(this,"initVIPRegistrationPools",(()=>{this.getMediaRegistrationsFromVIP({mediaType:"image"}),this.getMediaRegistrationsFromVIP({mediaType:"video"})})),x(this,"checkAllUploadsProcessingOrCompleted",(()=>{let e=0;const t=Object.keys(this.mediaUploadsMap);for(const i of t){const t=this.mediaUploadsMap[i];this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Status of media upload ID",i,t.mediaUpload.getClassName(),t.status),("completed"===t.status||"processing"===t.status&&"VideoUpload"===t.mediaUpload.getClassName())&&(e+=1)}return this.inDebugMode&&(console.log("[MEDIA UPLOAD MANAGER] - Checking if all upload processes completed"),console.log(`Completed ${e} out of ${Object.keys(this.mediaUploadsMap).length}`)),e===Object.keys(this.mediaUploadsMap).length})),x(this,"checkUploadsFailed",(()=>!!Object.keys(this.mediaUploadsMap).find((e=>"failed"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].processingRetryCount>2)))),x(this,"updateUploadStatus",((e,t)=>this.mediaUploadsMap[e].status=t)),x(this,"updateVIPStatusMap",(e=>{const t=new Date,i=({mediaId:e,mediaUpload:i,signature:n,uploadId:o})=>{const s=(t-this.vipStatusMap[o].timeSet)/b;i.onFinishProcessing(o,{processingTimeSec:s,signature:n}),this.updateUploadStatus(e,"completed")};for(const n of Object.keys(e)){const{failureCode:o,signature:s,status:r}=e[n];if(n in this.vipStatusMap){const{mediaId:e}=this.vipStatusMap[n],a=this.mediaUploadsMap[e];if(o&&this.mediaUploadsMap[e].processingRetryCount>2){a.mediaUpload.onProcessingFailed(o),this.updateUploadStatus(e,"failed");break}if(this.vipStatusMap[n].status!==r||"failed"===r)if(this.vipStatusMap[n]={...this.vipStatusMap[n],status:r,timeSet:t},"processing"===r){a.mediaUpload.onStartProcessing(n,{signature:s});l.Z.enabled("ideaPinPublishBeforeMediaCompletedCloseupPwt")&&l.Z.enabled("ideaPinPublishPwtPublishBeforeMediaCompleted")?(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Skipping media completion"),i({mediaId:e,mediaUpload:a.mediaUpload,signature:s,uploadId:n})):this.updateUploadStatus(e,"processing")}else"succeeded"===r?(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - Waited for media completion"),i({mediaId:e,mediaUpload:a.mediaUpload,signature:s,uploadId:n})):"failed"===r&&(this.mediaUploadsMap[e].processingRetryCount+=1,this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Media upload ${n} failed, but will keep checking ${3-this.mediaUploadsMap[e].processingRetryCount} times if a retry succeeds.`));else this.statusTimeoutMap[r]&&(t-this.vipStatusMap[n].timeSet)/b>=this.statusTimeoutMap[r].timeoutSec&&(a.mediaUpload.onProcessingTimeout(),this.statusTimeoutMap[r].onTimeout(n,e,this.mediaUploadsMap[e].mediaUpload.getClassName()))}}})),x(this,"refreshImageRegistration",(async function(e){t.vipRegistrationPool.image={fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},await t.getMediaRegistrationsFromVIP({mediaType:"image",count:e})})),x(this,"getMediaRegistration",(async function({durationMs:e,mediaType:i}){if(!e&&t.vipRegistrationPool[i]){t.vipRegistrationPool[i].fetchingData&&await new Promise((e=>{let n=0;const o=setInterval((()=>{n+=1,t.vipRegistrationPool[i].fetchingData&&100!==n||(clearInterval(o),e())}),100)}));const n=performance.now()-t.vipRegistrationPool[i].fetchedLast>=18e5;(0===t.vipRegistrationPool[i].data.length||n)&&await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e})}else await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e});return Promise.resolve(t.vipRegistrationPool[i].data.pop())})),x(this,"hasAnyVideoUploads",(()=>{for(const e of Object.keys(this.mediaUploadsMap))if("VideoUpload"===this.mediaUploadsMap[e].mediaUpload.getClassName())return!0;return!1})),x(this,"getVipMapStatusesToString",(()=>{let e="{";for(const i of Object.keys(this.vipStatusMap)){var t;e+=`[${i}]:${null!==(t=this.vipStatusMap[i].status)&&void 0!==t?t:"null"} `}return e+"}"})),x(this,"handleFailure",((e,t)=>{this.failed||(this.onFailure(e,t),this.failed=!0)})),x(this,"handleCheckUploadsCompleted",(()=>{const e=this.checkAllUploadsProcessingOrCompleted();return e&&this.onCompleted&&!this.completed&&(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] - All uploads have completed & we are triggering the onCompleted callback"),this.completed=!0,this.onCompleted()),e})),x(this,"onFinishUpload",((e,t)=>{this.vipStatusMap[e]={mediaId:t,status:null,timeSet:new Date},this.updateUploadStatus(t,"uploaded"),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Finished uploading media ID",t),this.statusCheckInProgress||(this.statusCheckInProgress=!0,setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&l.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?v:y))})),x(this,"onUploadFailed",((e,t,i)=>{this.updateUploadStatus(e,"failed"),this.handleFailure(t,i),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Failed uploading media ID",e)})),x(this,"removeMediaUpload",(e=>{this.mediaUploadsMap[e]&&(this.mediaUploadsMap[e].mediaUpload.cancel(),delete this.mediaUploadsMap[e])})),x(this,"addMediaUpload",((e,t,i,n)=>{const o="localImage"===e.type||"webImage"===e.type?"image":"video",s=Math.round((e.duration||0)*b);this.getMediaRegistration({mediaType:o,durationMs:s}).then((i=>{const o={...n,onFailure:({uploadId:e,errorMsg:i,mediaUploadFailureReason:o})=>{this.onUploadFailed(t,i,o),n.onFailure({uploadId:e,errorMsg:i,mediaUploadFailureReason:o})},onFinishUpload:(e,i)=>{this.onFinishUpload(e,t),n.onFinishUpload&&n.onFinishUpload(e,i)}},s="localImage"===e.type||"webImage"===e.type?new g({callbackHandlers:o,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:i,vipType:"image-story-pin"}):new m({callbackHandlers:o,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:i,vipType:"video-story-pin"});if(this.mediaUploadsMap[t]){this.mediaUploadsMap[t].mediaUpload.cancel();const{uploadId:e}=this.mediaUploadsMap[t].mediaUpload;e&&e in this.vipStatusMap&&delete this.vipStatusMap[e]}this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Added media ID to upload",t),this.mediaUploadsMap[t]={mediaUpload:s,status:"pending",processingRetryCount:0},s.upload(),this.updateUploadStatus(t,"uploading")}))})),x(this,"reset",(()=>{this.failed=!1,this.statusCheckFailureCount=0,this.completed=!1})),x(this,"cancelAll",(()=>{for(const e of Object.keys(this.mediaUploadsMap))"uploading"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].mediaUpload.cancel()})),x(this,"checkStatus",(()=>{if(this.checkUploadsFailed())return this.statusCheckInProgress=!1,void(this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] There is a failure in check status",this.getVipMapStatusesToString()));this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Checking status",this.getVipMapStatusesToString()),this.statusCheckInProgress=!0;const e=Object.keys(this.vipStatusMap);e.length>0?async function(e,t){try{const i=await f.Z.create("VIPResource",{upload_ids:e}).callGet(),{data:o}=i.resource_response;return e.reduce(((e,i)=>(o[i]?e[i]={failureCode:o[i].failure_code,signature:o[i].signature,status:o[i].status}:n.Z.increment("storypin.publish.vip_status_check.missing_upload_id",1,{retryCount:t}),e)),{})}catch(i){throw i}}(e,this.statusCheckFailureCount).then((e=>{this.updateVIPStatusMap(e),this.inDebugMode&&console.log("[MEDIA UPLOAD MANAGER] Check status response received",this.getVipMapStatusesToString());const t=this.handleCheckUploadsCompleted(),i=Object.keys(this.vipStatusMap);for(const r of i){const{mediaId:e}=this.vipStatusMap[r];if(this.mediaUploadsMap[e]){if("completed"===this.mediaUploadsMap[e].status){const t=this.mediaUploadsMap[e].mediaUpload.signature;var o,s;if(this.mediaUploadsMap[e].mediaUpload.vipType.includes("video")&&t)null===(o=this.storyPinPublishStopwatch)||void 0===o||o.updateSubspanName({currentName:`video_page_upload-${r}`,newName:`video_page_upload-${t}`,bypassIsTimingCheck:!0}),null===(s=this.storyPinPublishStopwatch)||void 0===s||s.updateSubspanName({currentName:`video_page_publish-${r}`,newName:`video_page_publish-${t}`,bypassIsTimingCheck:!0});delete this.vipStatusMap[r]}}else n.Z.increment("storypin.publish.media_uploads_map.missing_upload_id",1,{retryCount:this.statusCheckFailureCount,mediaId:e,vipId:r,mediaType:this.mediaUploadsMap[e].mediaUpload.getClassName()})}t?this.statusCheckInProgress=!1:setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&l.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?v:y)})).catch((e=>{this.statusCheckFailureCount+=1,this.statusCheckFailureCount>4?(this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Failing upload because status check failed ${this.statusCheckFailureCount} times`),this.handleFailure((0,a.nk)(this.i18n.bt("Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "MediaUploadManager.checkStatus.error", undefined, false),{errorName:null==e?void 0:e.name,errorMessage:null==e?void 0:e.message}).join(""),14),this.statusCheckInProgress=!1):(this.inDebugMode&&console.log(`[MEDIA UPLOAD MANAGER] - Continuing upload because status check only failed ${this.statusCheckFailureCount} times`),setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&l.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?v:y))})):this.handleCheckUploadsCompleted()||setTimeout((()=>this.checkStatus()),!this.hasAnyVideoUploads()&&l.Z.enabled("ideaPinPublishPwtReduceMediaStatusWaiting")?v:y)})),this.onCancel=e.onCancel,this.onCompleted=e.onCompleted||null,this.onFailure=e.onFailure,this.statusTimeoutMap=e.statusTimeoutMap,this.maxMediaUploadAttempts=e.maxMediaUploadAttempts,this.inDebugMode=e.inDebugMode,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.i18n=e.i18n,this.statusCheckInProgress=!1,this.completed=!1,this.failed=!1,this.vipRegistrationPool={image:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},video:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1}},this.statusCheckFailureCount=0,this.mediaUploadsMap={},this.vipStatusMap={}}}function w({i18n:e,isEmployee:t,pinDraftId:i,storyPinPublishStopwatch:s}){return r=>{const a=new P({i18n:e,inDebugMode:t,maxMediaUploadAttempts:o.dD,onCancel:()=>{},onFailure:()=>{},statusTimeoutMap:{registered:{onTimeout:(e,t,i)=>{n.Z.increment("storypin.publish.media_uploads_map.timeout.registered",1,{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i})},timeoutSec:240},processing:{onTimeout:(e,t,i)=>{n.Z.increment("storypin.publish.media_uploads_map.timeout.processing",1,{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i})},timeoutSec:180}},storyPinPublishStopwatch:s});a.initVIPRegistrationPools(),r(function(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_UPLOAD_MANAGER",payload:{pinDraftId:e,uploadManager:t}}}(i,a))}}},998285:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(172045),o=i(748254),s=i(472278),r=i(843030),a=i(252570),l=i(52925),d=i(296342);function c({canvasAspectRatio:e,options:t,pinDraftId:i,pinItem:c,pinItemId:u}){return h=>{if(h((0,o.Z)(i,u,{...c,backgroundColor:d.Lh,media:null},t)),null!=c&&c.media){const{media:t}=c;"localImage"===t.type?h((0,r.Uo)(i,u,(0,n.Z)(),{media:t,edits:(0,a.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_image_block"},0)):"localVideo"===t.type&&h((0,r.Uo)(i,u,(0,n.Z)(),{media:t,edits:(0,a.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_video_block"},0));("localImage"===t.type?(0,l.MW)(t):Promise.resolve([])).then((e=>{h((0,s.iY)(u,e)),e.length>0&&h((0,s.vi)(i,u,e[0]))}))}}}},789167:(e,t,i)=>{function n(e,t){return{type:"STORY_PIN_ITEM_SET_COVER_IMAGE_SIGNATURE",payload:{pinItemId:e,coverImgSignature:t}}}i.d(t,{Z:()=>n})},554410:(e,t,i)=>{i.d(t,{XJ:()=>y,Eu:()=>x,Wh:()=>f,Uz:()=>b});var n=i(172071),o=i(186656),s=i(956800),r=i(798477),a=i(789167),l=i(843030);var d=i(122668),c=i(840839),u=i(69183),h=i(623320),p=i(730078),_=i(170583),g=i(147693);function m(e,t,i,n){return new Promise(((o,s)=>{if(e.startsWith("data")){const r=(0,h.Mi)(e);(0,h.GV)(r,"image-story-pin",{onFailureUpload:({fileSizeBytes:e,uploadId:o})=>function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:n},o){(0,c.Z)(o,{event_type:8785,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:n,story_pin_page_id:i,story_pin_upload_id:t}})}({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:o},n),onFinishProcessing:({fileSizeBytes:e,processingTime:o,signature:s,uploadId:r,uploadTime:a})=>function({fileSizeBytes:e,imageSig:t,pinDraftId:i,storyPageNumber:n,uploadId:o,uploadTimeSec:s},r){(0,c.Z)(r,{event_type:8781,aux_data:{file_size_mb:e/Math.pow(1024,2),image_signature:t,media_upload_id:o,story_pin_page_id:n,story_pin_upload_id:i,upload_time:s}})}({fileSizeBytes:e,imageSig:s,pinDraftId:t,storyPageNumber:i,uploadId:r,uploadTimeSec:a+o},n),onStartUpload:({fileSizeBytes:e,uploadId:o})=>function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:n},o){(0,c.Z)(o,{event_type:8780,aux_data:{file_size_mb:e/Math.pow(1024,2),media_upload_id:n,story_pin_page_id:i,story_pin_upload_id:t}})}({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:o},n)}).then((({signature:e,uploadId:t})=>o({uploadId:t,signature:e||""}))).catch((e=>{s(e)}))}else s(new Error("Image must be of b64 format"))}))}function f(e,t,i){return(t,n)=>{const o=n(),{pinDrafts:s,storyPinItemBlocks:r}=o.pinbuilder,a=(n,s)=>{var a;const c=(0,d.X4)(o,{pinItemId:n},"story_pin_image_block"),u=c?r[c]:null;if(c&&u&&"localImage"===(null===(a=u.media)||void 0===a?void 0:a.type)&&u.media.signatureEdited){return function(e,t,i,n,o){return(0,p.Z)({image:e,edits:t,target:_.D.EXPRESSIVE_RENDER}).then((e=>m(e.src,i,n,o)))}(u.media,u.edits,e,s,i).then((({signature:i,uploadId:n})=>t((0,l.PF)(e,c,{uploadId:n,signatureEdited:i}))))}return Promise.resolve()};return new Promise(((t,i)=>Promise.all(s[e].pinItemIds.map(((e,t)=>a(e,t)))).then((()=>t())).catch((e=>i(e)))))}}function x(e,t){return(i,n)=>{const{fonts:o,pinDrafts:s,storyPinItemBlocks:r,storyPinItems:l}=n().pinbuilder;return(()=>{const n=s[e].pinItemIds.length>0?s[e].pinItemIds[0]:null,d=n&&l[n];if(n&&d&&!d.coverImgSignature){const{backgroundColor:s,blockIds:l}=d,c=l.map((e=>r[e]));return c.find((e=>{var t;return["localImage","localVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)}))?function(e,t,i,n,o){const s=e.find((e=>!!e.media&&["localImage","localVideo"].includes(e.media.type))),{edits:r,media:a}=s||{};if(!s||!a)return Promise.resolve({signature:"",uploadId:""});const l=(0,g.Zn)(e,i);return new Promise((e=>{"localVideo"===a.type?(0,u.v)(a,a.thumbnail||0).then((t=>{e({height:a.height,id:`${a.id}-${a.thumbnail}`,name:`${a.name}-coverImg`,size:(0,h.Mi)(t).size,src:t,type:"localImage",width:a.width})})):"localImage"===a.type&&e(a)})).then((e=>(0,p.Z)({backgroundColor:t,edits:r,image:e,preservePageDimension:!0,target:_.D.IMAGE_SIGNATURE,textBlocksWithFont:l}))).then((e=>m(e.src,n,0,o)))}(c,s,o,e,t).then((({signature:e})=>i((0,a.Z)(n,e)))):Promise.resolve()}return Promise.resolve()})()}}function b(e,t,i){return(n,o)=>{var s;const{pinDrafts:r,storyPinItemBlocks:a,storyPinItems:d}=o().pinbuilder,c=r[e].pinItemIds.findIndex((e=>e===t)),u=d[t].blockIds.find((e=>{var t;return"localImage"===(null===(t=a[e].media)||void 0===t?void 0:t.type)}));if(u&&"localImage"===(null===(s=a[u].media)||void 0===s?void 0:s.type)){m(a[u].media.src,e,c,i).then((({signature:t,uploadId:i})=>n((0,l.PF)(e,u,{signature:t,uploadId:i}))))}}}function y(e,t,i){return(a,l)=>{const{pinDrafts:d}=l().pinbuilder;return new Promise(((l,c)=>{(0,o.Z)({url:`/v3/storypins/drafts/${e}/`,method:"DELETE",data:{...i?{orbac_subject_id:i}:Object.freeze({})}}).then((()=>{a((0,s.EX)({feedType:"storyPinData",feedId:t,itemIds:[e],itemType:"storypindata"})),a(function(e){return{type:"STORY_PIN_DATA_DELETE",payload:{storyPinDataId:e}}}(e));const i=Object.keys(d).find((t=>d[t].storyPinDraftId===e));i&&a((0,r.Z)(i)),l()})).catch((()=>{n.Z.increment("story_pin.drafts.delete.failure",1,{app_type:"web"}),c(new Error("Unable to delete the draft"))}))}))}}},472278:(e,t,i)=>{i.d(t,{Bl:()=>p,Dt:()=>c,JQ:()=>w,WZ:()=>m,d5:()=>v,dP:()=>x,eU:()=>b,h4:()=>u,hC:()=>h,iY:()=>P,j8:()=>d,kh:()=>l,pq:()=>_,qG:()=>g,vi:()=>y});var n=i(172045),o=i(843030),s=i(252570),r=i(52925),a=i(296342);function l(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION",payload:{pinItemId:e,description:t}}}function d(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t}}}function c(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE",payload:{pinItemId:e,title:t}}}function u(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t}}}function h(e,t){return{type:"STORY_PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function p(e,t){return{type:"STORY_PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"STORY_PIN_ITEM_UPDATE_LINK_BLOCK",payload:{pinItemId:e,linkBlock:t}}}function g(e,t){return{type:"STORY_PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t}}}function m(e,t,i){return{type:"STORY_PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function f(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_DATA",payload:{pinDraftId:e,pinItemId:t,pinItem:i}}}function x(e,t){return{type:"STORY_PIN_ITEM_SET_BLOCK_IDS",payload:{pinItemId:e,blockIds:t}}}function b(e,t){return{type:"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID",payload:{pinItemId:e,blockId:t}}}function y(e,t,i){return{type:"STORY_PIN_ITEM_SET_BACKGROUND_COLOR",payload:{pinDraftId:e,pinItemId:t,backgroundColor:i}}}function v(e,t,i){return{type:"STORY_PIN_ITEM_SET_LAYOUT",payload:{pinDraftId:e,pinItemId:t,layout:i}}}function P(e,t){return{type:"STORY_PIN_ITEM_SET_DOMINANT_COLORS",payload:{pinItemId:e,dominantColors:t}}}function w({canvasAspectRatio:e,pinDraftId:t,pinItem:i,pinItemId:l}){return d=>{if(i.media){const{media:c}=i;"localImage"===c.type?d((0,o.Uo)(t,l,(0,n.Z)(),{media:c,edits:(0,s.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_image_block"},0)):"localVideo"===c.type&&d((0,o.Uo)(t,l,(0,n.Z)(),{media:c,edits:(0,s.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_video_block"},0));("localImage"===c.type?(0,r.MW)(c):Promise.resolve([])).then((e=>d(f(t,l,{...i,backgroundColor:e.length>0?e[0]:a.Lh,dominantColors:e,media:null}))))}else d(f(t,l,i))}}},843030:(e,t,i)=>{function n(e,t,i,n,o){return{type:"STORY_PIN_ITEM_ADD_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i,storyPinItemBlock:n,index:o}}}function o(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_EDITS",payload:{pinDraftId:e,blockId:t,edits:i}}}function s(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_MEDIA",payload:{pinDraftId:e,blockId:t,media:i}}}function r(e,t){return{type:"STORY_PIN_ITEM_BLOCK_SET_PLAYING",payload:{blockId:e,playing:t}}}function a(e,t,i){return{type:"STORY_PIN_ITEM_REMOVE_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i}}}function l(e,t,i){return{type:"STORY_PIN_ITEM_REORDER_BLOCKS",payload:{pinDraftId:e,pinItemId:t,blockIds:i}}}function d(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_BLOCK",payload:{pinDraftId:e,blockId:t,storyPinItemBlock:i}}}i.d(t,{Ny:()=>a,PF:()=>s,Uo:()=>n,_E:()=>o,_Z:()=>d,gs:()=>r,mI:()=>l})},461773:(e,t,i)=>{i.d(t,{KF:()=>c,ZN:()=>a,fv:()=>d,kE:()=>h,yA:()=>l});var n=i(214494),o=i(186656),s=i(90326);function r(e,t){return n.Z.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function a(e,t=null){return i=>{r(e,t).callCreate().catch((()=>i((0,s.P_)(e,!1)))),i((0,s.P_)(e,!0))}}function l(e,t=null){return async i=>{i((0,s.P_)(e,!0)),await r(e,t).callCreate().catch((t=>{throw i((0,s.P_)(e,!1)),t}))}}function d(e,t=null){return i=>{r(e,t).callDelete().catch((()=>i((0,s.P_)(e,!0)))),i((0,s.P_)(e,!1))}}function c(e,t=null){return async i=>{i((0,s.P_)(e,!1)),await r(e,t).callDelete().catch((t=>{throw i((0,s.P_)(e,!0)),t}))}}const u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),h=e=>t=>{e.length>0&&((0,o.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch((()=>t(u(e,!1)))),t(u(e,!0)))}},205992:(e,t,i)=>{i.d(t,{Cp:()=>p,GT:()=>l,V6:()=>r,W2:()=>c,W6:()=>_,_L:()=>h,fm:()=>a,hT:()=>d});var n=i(214494),o=i(56528),s=i(248327);function r(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}const a=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),l=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function d(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}const c=(e,t,i)=>n=>{n({type:"USER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})},u=e=>{const t=e.split(" ");return{first_name:t[0],last_name:t[1]}},h=({field:e,value:t,passcode:i,onSettingSavedHn:o,showErrorHn:r,surfaceTag:a,userId:l})=>(d,h)=>{const p=h().users[l],_={user_id:l,surface_tag:a};if("full_name"===e)if(p.is_partner)_.business_name=t;else{const e=u(t);_.first_name=e.first_name,_.last_name=e.last_name||""}else _[e]=t;i&&(_.passcode=i),n.Z.create("UserSettingsResource",_).callUpdate().then((()=>{if("profile_image_url"===e)d((0,s.b)("UserResource",{options:_}));else if("full_name"===e)if(p.is_partner)d(c(l,"first_name",t));else{const e=u(t);d(c(l,"first_name",e.first_name)),d(c(l,"last_name",e.last_name))}!p.is_partner||"account_type"!==e&&"contact_name"!==e?d(c(l,e,t)):d(((e,t,i)=>n=>{n({type:"USER_PARTNER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})})(l,e,t)),o()}),r)},p=(e,t,i,n,s,r)=>()=>{(0,o.Z)({new:t,new_confirm:i,old:e,passcode:n}).then(s,r)},_=(e,t,i,o,s,r)=>a=>{a(c(e,`${t}.${i}`,o));let l={},d="EmailSettingsResource";void 0!==s?(l={section:t,option:i,value:o,od:s.od,user_id:s.user_id},d="UnsubEmailSettingsResource"):l={section:t,option:i,value:o},n.Z.create(d,l).callUpdate().then(r).catch((()=>a(c(e,`${t}.${i}`,!o))))}},90326:(e,t,i)=>{i.d(t,{Ge:()=>d,JS:()=>r,OF:()=>f,P_:()=>a,Q_:()=>h,b8:()=>p,eR:()=>m,h2:()=>c,h6:()=>u});var n=i(214494),o=i(186656),s=i(735422);function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}const a=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:i,blockContext:o})=>s=>(s(l(e,!0)),n.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t,block_source:i,block_context:o}).callCreate().catch((()=>s(l(e,!1))))),c=e=>t=>(t(l(e,!1)),n.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch((()=>t(l(e,!0)))));function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}const h=(e,t)=>()=>n.Z.create("UserStateResource",{state:e,value:t}).callCreate(),p=(e,t,i)=>(n,r)=>{(0,o.Z)({url:"/v3/users/me/",method:"POST"}).then((()=>{i({event_type:48,object_id_str:r().session.userId}),e(),(0,s.Dm)()}),t)};const _=async(e,t,i)=>{var o;const s=await n.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(null!==(o=s.resource_response)&&void 0!==o&&o.data[e]){const n=s.resource_response.data[e],{status:o,signature:r}=n;if("processing"===o||"registered"===o)setTimeout((async()=>{_(e,t,i)}),5e3);else if("succeeded"===o){const e=((e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"")(r);t(e)}else i()}else i()},g=e=>new Promise(((t,i)=>{var o,s,r,a,l;o=e,s="pinimage",r=()=>{},a=e=>{t(e)},l=e=>{i(e)},(new FormData).append("img",o),n.Z.create("VIPResource",{type:s}).callCreate().then((e=>{var t;if(null!==(t=e.resource_response)&&void 0!==t&&t.data){const{upload_id:t,upload_url:i,upload_parameters:n}=e.resource_response.data,s=new XMLHttpRequest;s.open("POST",i,!0),s.onload=()=>{var e;(e=s.status)>=200&&e<400?(r(100),_(t,a,l)):l()},s.upload.onprogress=e=>{const t=Math.round(100*e.loaded/e.total);r(t)};const d=new FormData;for(const e in n)d.append(e,n[e]);d.append("file",o),s.send(d)}}),(()=>{l()}))})),m=e=>new Promise(((t,i)=>{"string"==typeof e?e.startsWith("data")&&g(function(e,t=512){const i=e.split(";"),n=i[0].split(":")[1],o=i[1].split(",")[1],s=atob(o),r=[];for(let a=0;a<s.length;a+=t){const e=s.slice(a,a+t),i=new Array(e.length);for(let t=0;t<e.length;t+=1)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);r.push(n)}return new Blob(r,{type:n})}(e)).then((e=>t(e))):i("Invalid Image")})),f=e=>()=>(0,o.Z)({url:"/v3/register/exists/",data:{email:e}})},492583:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",CALL_TO_CREATE_RESPONSES_FEED:"callToCreateResponsesFeed",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed",INTEREST_TAB_FEED:"interestTabFeed"}},20064:(e,t,i)=>{i.d(t,{E:()=>s,Z:()=>r});var n=i(682492),o=i.n(n);const s={description:"",descriptionError:null,editorInstanceId:"",isTaggable:!0,link:"",linkError:null,media:null,pinTagIds:[],selectedPinTagId:null,tagError:null,title:"",titleError:null,canvasJson:null,signals:{},userMentionTags:[]},r=(e=s,t)=>{switch(t.type){case"PIN_DRAFT_ADD_PIN_ITEM":case"PIN_ITEM_UPDATE_DATA":{const{pinItem:i}=t.payload;return{...e,...i,signals:{...e.signals,...null==i?void 0:i.signals}}}case"PIN_ITEM_ADD_PIN_TAG":{const{pinTagId:i}=t.payload;return{...e,pinTagIds:[...e.pinTagIds,i]}}case"PIN_ITEM_REMOVE_PIN_TAG":{const{pinTagId:i}=t.payload;return{...e,pinTagIds:e.pinTagIds.filter((e=>e!==i))}}case"PIN_ITEM_SET_DESCRIPTION":{const{description:i}=t.payload;return{...e,description:i}}case"PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:i,signals:n}=t.payload;return{...e,descriptionError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_IS_TAGGABLE":{const{isTaggable:i}=t.payload;return{...e,isTaggable:i}}case"PIN_ITEM_SET_LINK":{const{link:i}=t.payload;return{...e,link:i}}case"PIN_ITEM_SET_LINK_ERROR":{const{linkError:i,signals:n}=t.payload;return{...e,linkError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_MEDIA":{const{media:i}=t.payload,n=!(!i||e.link)||e.isTaggable;return{...e,media:i,isTaggable:(!i||"localVideo"!==i.type)&&n,pinTagIds:[],selectedPinTagId:null,canvasJson:null}}case"PIN_ITEM_UPDATE_MEDIA":{const{media:i}=t.payload;return{...e,media:e.media?o()({},e.media,i):null}}case"PIN_ITEM_SET_SELECTED_PIN_TAG_ID":{const{selectedPinTagId:i}=t.payload;return{...e,selectedPinTagId:i}}case"PIN_ITEM_SET_TAG_ERROR":{const{tagError:i}=t.payload;return{...e,tagError:i}}case"PIN_ITEM_SET_TITLE":{const{title:i}=t.payload;return{...e,title:i}}case"PIN_ITEM_SET_TITLE_ERROR":{const{titleError:i,signals:n}=t.payload;return{...e,titleError:i,signals:{...e.signals,...n}}}case"PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:i,canvasJson:n}=t.payload;return{...e,media:i,canvasJson:n}}default:return e}}},106331:(e,t,i)=>{i.d(t,{FQ:()=>f,JT:()=>u,ND:()=>p,Ob:()=>v,Qj:()=>b,VK:()=>g,d_:()=>m,gF:()=>h,gI:()=>P,gl:()=>c,jP:()=>y,nJ:()=>d,p:()=>x,vd:()=>_,xA:()=>l});var n=i(442279),o=i(47615),s=i(490072),r=i(562501);function a(e){return e.values().next().value}const l=e=>e.pinbuilder.selectedPinDraftIds,d=e=>e.pinbuilder.createdPinIds,c=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).reduce(((e,i)=>t.includes(i.pinId)&&"carousel"===i.type?[...e,i.pinId||""]:e),[])},u=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i,pinDraftIds:n}}=e;return Object.keys(i).reduce(((e,o)=>{const s=i[o],r=s&&s.pinId;return n.includes(o)&&r&&t.includes(r)&&!0!==s.isAdIneligible&&!0!==s.isShowcase&&!0!==s.isQuizAd?[...e,r]:e}),[])},h=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).filter((e=>e&&e.pinId&&e.isShowcase&&t.includes(e.pinId))).map((e=>e.pinId||""))},p=e=>{const{pinbuilder:{pinDrafts:t}}=e;return Object.values(t).filter((e=>e&&e.isShowcase&&!e.pinId&&"created"!==e.status)).map((e=>e.status))},_=e=>e.pinbuilder.pinDraftIds,g=(0,n.P1)([_,s.OW],((e,t)=>e.filter((e=>"story"!==t[e].type)))),m=(0,n.P1)([_,s.OW],((e,t)=>e.filter((e=>"succeeded"!==t[e].status)))),f=(0,n.P1)([_,s.OW],((e,t)=>e.filter((e=>"succeeded"!==t[e].status&&"story"!==t[e].type)))),x=(0,n.P1)([l,s.OW,r.ng],((e,t,i)=>{const{descriptions:n,links:o,publishOptions:s,scheduledDates:r,scheduledTimes:l,selectedItems:d,titles:c}=e.reduce(((e,n)=>{const{pinItemIds:o,publishOption:s,scheduledDate:r,scheduledTime:a,selectedItem:l}=t[n];return e.publishOptions.add(s),e.scheduledDates.add(r?r.toDateString():null),e.scheduledTimes.add(a?a.toTimeString():null),e.selectedItems.add(l?JSON.stringify(l,Object.keys(l).sort()):null),o.forEach((t=>{const{description:n,link:o,title:s}=i[t];e.descriptions.add(n),e.titles.add(s),e.links.add(o)})),e}),{descriptions:new Set,links:new Set,publishOptions:new Set,scheduledDates:new Set,scheduledTimes:new Set,selectedItems:new Set,titles:new Set}),u=a(r),h=a(l),p=a(d),_=u&&new Date(u),g=h&&new Date(`${(new Date).toDateString()} ${h}`),m=p&&JSON.parse(p);return{initialDescription:1===n.size?a(n):void 0,initialLink:1===o.size?a(o):void 0,initialPublishOption:1===s.size?a(s):void 0,initialScheduledDate:1===r.size?_:void 0,initialScheduledTime:1===l.size?g:void 0,initialSelectedItem:1===d.size?m:void 0,initialTitle:1===c.size?a(c):void 0}})),b=(e,t,i)=>{const{pinTags:n,pinDrafts:s,pinItems:a}=e.pinbuilder,{type:l}=s[t],{media:d}=a[i];if("carousel"===l)return"CAROUSEL";if(n&&Object.keys(n).length>0){if((0,r.jk)()(e,{pinItemId:i}).length>0)return"COLLECTIONS"}return"localVideo"===(null==d?void 0:d.type)?"VIDEO":(0,o.Sl)(d)?"STATIC":null},y=(e,t)=>{const i={};for(const o of e){var n;const{publishingStatus:e}=t[o];i[e]=(null!==(n=i[e])&&void 0!==n?n:0)+1}return i},v=({pinbuilder:e})=>e.isBatchEditMode,P=e=>{const{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).reduce(((e,i)=>{const n=i&&i.pinId;return n&&t.includes(n)&&i.isQuizAd?[...e,n]:e}),[])}},490072:(e,t,i)=>{i.d(t,{DJ:()=>x,Dt:()=>b,Fh:()=>I,IF:()=>d,NW:()=>a,OK:()=>r,OW:()=>s,Sg:()=>f,V$:()=>m,W3:()=>y,Xe:()=>l,fw:()=>v,kD:()=>h,mR:()=>P,mf:()=>u,nL:()=>w,pc:()=>g,pq:()=>c,q7:()=>p,uO:()=>_,wN:()=>A,xA:()=>E});var n=i(442279),o=i(122668);const s=e=>e.pinbuilder.pinDrafts,r=(e,t)=>e.pinbuilder.pinDrafts[t],a=e=>{const{pinDrafts:t}=e.pinbuilder,i={};return Object.keys(t).forEach((e=>{"story"!==t[e].type&&(i[e]=t[e])})),i},l=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].view,d=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIndex,c=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds,u=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isCommentsAllowed,h=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isShoppingRecAllowed,p=(e,t)=>{const{pinDrafts:i,storyPinItems:n}=e.pinbuilder,{pinItemIds:o}=i[t.pinDraftId];return o.map((e=>n[e]))},_=(e,t)=>{const{pinDrafts:i,storyPinItemBlocks:n,storyPinItems:o}=e.pinbuilder;return i[t.pinDraftId].pinItemIds.map((e=>o[e].blockIds.map((e=>n[e])))).flat()},g=(e,t)=>{var i,n;const{pinDrafts:s}=e.pinbuilder,{pinItemIds:r,storyPinMetadata:a}=s[t.pinDraftId],l=(0,o.YE)(e,{pinItemId:r[0]}),d=Object.keys(l);return null!==(i=null==a||null===(n=a.title)||void 0===n?void 0:n.trim())&&void 0!==i?i:l&&d.length>0?l[d[d.length-1]].text.trim():""},m=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.description)&&void 0!==i?i:""},f=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.userMentionTags)&&void 0!==i?i:[]},x=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return(null==o||null===(i=o.link)||void 0===i?void 0:i.trim())||""},b={PENDING:0,VALID:1,INVALID:2},y=(e,t)=>{var i;const{pinDrafts:n}=e.pinbuilder,{storyPinMetadata:o}=n[t.pinDraftId];return null!==(i=null==o?void 0:o.linkStatus)&&void 0!==i?i:b.VALID},v=(e,t)=>{const{pinDrafts:i}=e.pinbuilder,{storyPinMetadata:n}=i[t.pinDraftId];return null==n?void 0:n.linkError},P=(e,t,i)=>_(e,t).filter((e=>i.includes(e.type))),w=()=>(0,n.P1)([c,d],((e,t)=>e[t])),I=(e,t)=>{const i=e.pinDrafts[t.pinDraftId],n=i.pinItemIds,o=!!(i.apiError||i.boardError||i.mediaError),s=n.reduce(((t,i)=>{const n=e.pinItems[i]||e.storyPinItems[i];return!!(t||n.descriptionError||n.linkError||n.tagError||n.titleError)}),!1);return o||s},A=(e,t)=>{const{pinItemIds:i,selectedItem:n=null}=e.pinDrafts[t.pinDraftId],o=!!n,s=i.reduce(((t,i)=>{const n=e.pinItems[i]||e.storyPinItems[i];return!!(t||n.description||n.link||n.media||n.title)}),!1);return o||s},E=({pinbuilder:e})=>e.selectedPinDraftIds},562501:(e,t,i)=>{i.d(t,{Bg:()=>c,CQ:()=>p,M:()=>l,jk:()=>_,ng:()=>r,vd:()=>h,wc:()=>a});var n=i(442279),o=i(957025),s=i(351870);const r=e=>e.pinbuilder.pinItems,a=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].isTaggable,l=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].selectedPinTagId,d=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].pinTagIds,c=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].media,u=(0,n.P1)([d,o.Oo],((e,t)=>e.reduce(((e,i)=>{const{status:n,taggedObjectIds:o}=t[i];return"deleted"!==n&&o.forEach((t=>e.push(t))),e}),[]))),h=()=>(0,n.P1)([d,o.Oo],((e,t)=>e.filter((e=>"deleted"!==t[e].status)))),p=()=>(0,n.P1)([u,s.Z],((e,t)=>e.map((e=>t[e])).filter((e=>"deleted"!==e.status)))),_=()=>(0,n.P1)([u,s.Z],((e,t)=>e.filter((e=>"deleted"!==t[e].status))))},957025:(e,t,i)=>{i.d(t,{A$:()=>a,Oo:()=>s});var n=i(442279),o=i(351870);const s=e=>e.pinbuilder.pinTags,r=(e,t)=>e.pinbuilder.pinTags[t.pinTagId].taggedObjectIds,a=()=>(0,n.P1)([r,o.Z],((e,t)=>e.filter((e=>"deleted"!==t[e].status))))},122668:(e,t,i)=>{i.d(t,{AC:()=>d,CI:()=>s,NR:()=>l,X4:()=>h,YE:()=>c,bS:()=>a,mX:()=>r,wH:()=>o,wv:()=>n,yp:()=>u});const n=["story_pin_heading_block","story_pin_paragraph_block"],o=(e,t)=>e.pinbuilder.storyPinItems[t];function s({storyPinItemBlocks:e,storyPinItemBlockIds:t}){return t.find((t=>!!e[t].media))}const r=(e,t)=>{const i=e.pinbuilder.storyPinItems[t.pinItemId];return i?s({storyPinItemBlocks:e.pinbuilder.storyPinItemBlocks,storyPinItemBlockIds:i.blockIds}):null};function a({storyPinItemBlockIds:e,storyPinItemBlocks:t}){return e.find((e=>n.includes(t[e].type)))}const l=(e,t)=>e.pinbuilder.storyPinItems[t.pinItemId].selectedBlockId;function d({pinItemId:e,storyPinItemBlocks:t,storyPinItems:i}){const o=i[e],s={};return o&&o.blockIds.filter((e=>n.includes(t[e].type))).forEach((e=>{s[e]=t[e]})),s}const c=(e,t)=>{const{pinItemId:i}=t,{storyPinItemBlocks:n,storyPinItems:o}=e.pinbuilder;return d({storyPinItems:o,pinItemId:i,storyPinItemBlocks:n})},u=(e,t)=>{const i=e.pinbuilder.storyPinItems[t.pinItemId];return i?i.blockIds.map((t=>e.pinbuilder.storyPinItemBlocks[t])):[]},h=(e,t,i)=>e.pinbuilder.storyPinItems[t.pinItemId].blockIds.find((t=>e.pinbuilder.storyPinItemBlocks[t].type===i))},351870:(e,t,i)=>{function n(e){return e.pinbuilder.taggedObjects}i.d(t,{Z:()=>n})},960278:(e,t,i)=>{i.d(t,{I:()=>l,Z:()=>a});var n=i(773285),o=i(784590),s=i(845772);const r=({boardId:e,ownerUsername:t,ownerName:i,ownerImgSrc:r})=>{const{anyEnabled:a}=(0,n.F)().checkExperiment("web_m10n_business_access_orbac_ga"),l=(0,s.Z)(),{data:d,isLoaded:c}=(0,o.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...a&&l?{orbac_subject_id:l}:{}}}),u=[{name:i,src:r,href:`/${t}/`,isDim:!1}];return c&&d&&d.length>0&&d.forEach((e=>{u.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),u},a=r;function l({children:e,...t}){return e(r(t))}},902840:(e,t,i)=>{i.d(t,{Z:()=>G});var n=i(667294),o=i(167912),s=i(616550),r=i(883119),a=i(121151),l=i(898781),d=i(773285),c=i(780280),u=i(19121),h=i(845772),p=i(407043),_=i(720247),g=i(743473),m=i(319915),f=i(499128),x=i(947599),b=i(343341),y=i(785893);const v=(0,n.lazy)((()=>i.e(4603).then(i.t.bind(i,774855,23))));function P({linkURL:e,onDidFocus:t,onDidClickCopyButton:i}){const n=(0,l.ZP)(),{showOneToast:o}=(0,b.F9)(),s=n.bt("Copy link", "Copy link", "[button] copy a URL link shown, to paste in another place", undefined, true);return(0,y.jsxs)(r.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,y.jsx)(r.xu,{flex:"grow",marginEnd:2,children:(0,y.jsx)(r.nv,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})}),(0,y.jsx)(m.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,y.jsx)(x.Z,{fallback:(0,y.jsx)(r.zx,{text:s,disabled:!0}),children:(0,y.jsx)(v,{text:e,onCopy:(e,t)=>{t&&o((({hideToast:e})=>(0,y.jsx)(f.ZP,{onHide:e,text:n.bt("Link copied to clipboard!", "Link copied to clipboard!", "toast message to confirm if users copied the url successfully", undefined, true)}))),i()},children:(0,y.jsx)(r.zx,{text:s,size:"lg"})})})})]})}var w=i(750869);const I=(e,t)=>({invite_category:4,invite_channel:12,object_type:w.d.BOARD,object_id:e,...t?{orbac_subject_id:t}:{}}),A=e=>({component:13305,element:10921,object_id_str:e,view_type:5,view_parameter:3059});function E({boardId:e,relayEnvironment:t}){const{logContextEvent:i}=(0,p.v)(),[o,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),{anyEnabled:l}=(0,d.F)().checkExperiment("web_m10n_business_access_orbac_ga"),c=(0,h.Z)();(0,n.useEffect)((()=>{if(!r){const i=I(e,l?c:""),{cancel:n,promise:o}=(0,_.Z)(g.Z.createShareInviteData({...i,path:"",invite_category:i.invite_category},t));return o.then((e=>a(e))),()=>{n()}}}),[]);const u=r?r.invite_url:"...",m=()=>{null===r||o||(s(!0),g.Z.logShareInvite(I(e),r))};return(0,y.jsx)(P,{linkURL:u,onDidClickCopyButton:()=>{i({event_type:101,...A(e)}),m()},onDidFocus:m})}var C=i(774763),S=i(349700),j=i(784590),T=i(829407),D=i(860426);const k=3e3;function z({boardId:e}){const{logContextEvent:t}=(0,p.v)(),i=(0,l.ZP)(),o=(0,b.F9)(),{checkExperiment:s}=(0,d.F)(),{anyEnabled:a}=s("web_m10n_business_access_orbac_ga"),c=(0,h.Z)(),u=(0,n.useRef)(!1),{refresh:_}=(0,j.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...a&&c?{orbac_subject_id:c}:{}},noCache:!0}),{refresh:g}=(0,j.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval",...a&&c?{orbac_subject_id:c}:{}},noCache:!0}),{data:m,isLoaded:x}=(0,j.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board",...c?{orbac_subject_id:c}:{}},noCache:!0});(0,n.useEffect)((()=>{if(x){const e=m&&m.length>0?7511:7512;t({event_type:e,component:13305,element:10592,view_type:5,view_parameter:3059})}}),[x]),(0,T.Z)((()=>(t({event_type:7120,object_id_str:e,view_type:5,view_parameter:3059}),t({event_type:10520,object_id_str:e,view_type:5,component:13305,element:10592}),()=>{u.current||t({event_type:10521,object_id_str:e,view_type:5,component:13305,element:13478})})));const v=(e,t=!1)=>{o.showOneToast((({hideToast:i})=>(0,y.jsx)(f.ZP,{duration:k,onHide:i,text:e,type:t?"error":void 0})))};return x?(0,y.jsx)(D.ZP,{boardId:e,onInvitesDidUpdate:()=>{_(),g(),u.current=!0},onInviteDidComplete:(e,t,n)=>{t?v(i.bt("1 invitation sent", "1 invite sent!", "BoardCollabInviteFormContainer.showInviteSuccessToast.text", undefined, true)):((e,t)=>{const n=i.bt("Failed to invite {{userIdentifier}} to collaborate", "Failed to invite {{userIdentifier}} to collaborate", "Toast for failing to send invitation of collaborating a board", undefined, true);v(t&&t.message?t.message:(0,S.nk)(n,{userIdentifier:e}).join(""),!0)})(e,n)},shareSuggestions:m||[]}):(0,y.jsx)(r.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,y.jsx)(r.$j,{accessibilityLabel:i.bt("Loading contacts", "Loading contacts", "BoardCollab.BoardCollabInviteFormContainer", undefined, true),show:!0})})}var O=i(741),R=i(150963);const L="INVITE_SETTING",M="REQUEST_TO_JOIN_SETTING";function B({boldHeading:e,setting:t,viewerIsOwner:i}){const o=(0,l.ZP)(),s={0:{name:o.bt("Do (almost) everything", "Do (almost) everything", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("Add, move or delete Pins and sections, and comment and react", "Add, move or delete Pins and sections, comment and react", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)},1:{name:o.bt("Save and comment", "Save and comment", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:i?o.bt("Save Pins, organise them, comment and react", "Save Pins, organize them, comment and react", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true):o.bt("Save Pins, organise them, comment and react. For more permissions, contact the board owner.", "Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!", "save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab", undefined, true)},[L]:{name:o.bt("Invite other people", "Invite other people", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("Collaborators can invite others to this board", "Collaborators can invite others to this board", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)},[M]:{name:o.bt("Board requests", "Board requests", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true),description:o.bt("People can request to join this board", "People can request to join this board", "save.board.BoardPage.ModalContents.BoardCollabSettings", undefined, true)}};return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(r.xv,{color:"default",size:e?"300":"200",weight:e?"bold":"normal",children:s[t].name}),(0,y.jsx)(r.xu,{paddingY:1,children:(0,y.jsx)(r.xv,{color:"subtle",size:"300",children:s[t].description})})]})}function N({board:e,currentPermissionLevel:t,fromBoardEditModal:i,navigateToPermissions:p,onDismiss:_}){var g,m;const f=(0,l.ZP)(),x="number"==typeof e.collaborator_count&&e.collaborator_count>0,[b,v]=(0,n.useState)(!x),P=(0,c.B)(),w=(0,u.Z)(),I=(0,s.useHistory)(),A=(0,h.Z)(),S=w.isAuth&&((null===(g=e.owner)||void 0===g?void 0:g.id)===w.id||(null===(m=e.owner)||void 0===m?void 0:m.id)===A),j=S||e.collaborator_invites_enabled,T=b&&!x||!b,{checkExperiment:D}=(0,d.F)(),k=D("graphql_migration_board_sgrowth").anyEnabled,L=(0,o.useRelayEnvironment)();return(0,y.jsx)(R.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:S,children:(0,y.jsx)(a.ZP,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:b?f.bt("Invite collaborators", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):f.bt("Collaborators", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),footer:j&&!b?(0,y.jsx)(r.iP,{onTap:()=>v(!0),rounding:8,children:(0,y.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(r.hU,{accessibilityLabel:f.bt("Invite collaborators", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"add",bgColor:"red",iconColor:"white",size:"md"}),(0,y.jsx)(r.xu,{paddingX:3,children:(0,y.jsx)(r.xv,{size:"300",weight:"bold",children:f.bt("Invite collaborators", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})})]})}):null,heading:(0,y.jsxs)(r.xu,{marginStart:5,padding:8,children:[i&&(0,y.jsx)(r.xu,{position:"absolute",top:!0,left:!P.isRTL,right:P.isRTL,paddingY:8,paddingX:6,children:(0,y.jsx)(r.hU,{accessibilityLabel:f.bt("Back", "Back", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:_,size:"md"})}),(0,y.jsx)(r.X6,{align:"center",size:"500",children:b?f.bt("Invite collaborators", "Invite collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):f.bt("Collaborators", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})]}),onDismiss:_,children:(0,y.jsxs)(r.xu,{marginBottom:5,children:[T&&(0,y.jsxs)(r.xu,{paddingX:6,children:[(0,y.jsx)(r.xu,{paddingY:3,children:(0,y.jsx)(r.xv,{size:"100",children:S?f.bt("Collaborators can...", "Collaborators can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true):f.bt("You can...", "You can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,y.jsxs)(r.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,y.jsx)(r.xu,{width:"60%",children:(0,y.jsx)(B,{boldHeading:!0,viewerIsOwner:S,setting:t})}),S&&(0,y.jsx)(r.hU,{accessibilityLabel:f.bt("Edit board permissions", "Edit board permissions", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-forward",onClick:p,iconColor:"gray",size:"md"})]})]}),b?(0,y.jsxs)(r.xu,{paddingX:2,children:[(0,y.jsx)(E,{boardId:e.id,relayEnvironment:k?L:void 0}),(0,y.jsx)(z,{boardId:e.id})]}):(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(r.xu,{paddingX:6,paddingY:5,children:(0,y.jsx)(r.xv,{size:"100",children:f.bt("Collaborators", "Collaborators", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,y.jsx)(O.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=w.isAuth?`/${w.username}`:"/";I.replace(e)},renderInvite:(e,t,i)=>{if(!e.invited_user)return null;const n={invite:e,invitedUser:e.invited_user,onBoardLeave:t,onInviteDidUpdate:i,useGestaltModal:!0,isDim:!1};return(0,y.jsx)(C.Z,{...n})}})]})]})})})}var Z=i(702664),F=i(576028);const U=0,V=1;function H({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:i},currentPermissionLevel:o,navigateToCollaborators:s,onDismiss:d}){const{logContextEvent:c}=(0,p.v)(),u=(0,l.ZP)(),[h,_]=(0,n.useState)(o),[g,m]=(0,n.useState)(e),[f,x]=(0,n.useState)(t),[b,v]=(0,n.useState)(!1),P=(0,Z.useDispatch)();return(0,y.jsx)(a.ZP,{accessibilityModalLabel:u.bt("Board permissions", "Board permissions", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),heading:(0,y.jsxs)(r.xu,{paddingY:8,display:"flex",justifyContent:"start",alignItems:"center",children:[(0,y.jsx)(r.xu,{paddingX:6,children:(0,y.jsx)(r.hU,{accessibilityLabel:u.bt("Back", "Back", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:s,size:"md"})}),(0,y.jsx)(r.kC,{justifyContent:"center",flex:"grow",alignItems:"center",children:(0,y.jsx)(r.X6,{align:"center",size:"500",children:u.bt("Collaborators can...", "Collaborators can...", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true)})}),(0,y.jsx)(r.xu,{paddingX:6,children:(0,y.jsx)(r.hU,{accessibilityLabel:u.bt("Close", "Close", "save.board.BoardPage.ModalContents.BoardCollaboratorsModal", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:d,size:"md"})})]}),footer:(0,y.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,y.jsx)(r.zx,{color:"red",disabled:b||h===o&&g===e&&f===t,onClick:()=>{v(!0);const n={},s={view_type:5,view_parameter:3472};g!==e&&(n.collaborator_invites_enabled=g,c({event_type:g?106:107,element:11896,...s})),h!==o&&(n.collaborator_permissions_setting=h,c({event_type:8841,...s})),f!==t&&(n.collaborator_requests_enabled=f),P((0,F.V)(i,n)).then((()=>d()))},size:"lg",text:u.bt("Done", "Done", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),onDismiss:d,children:(0,y.jsxs)(r.xu,{paddingX:12,children:[(0,y.jsx)(r.xu,{paddingY:3,children:(0,y.jsx)(r.xv,{size:"100",children:u.bt("Permissions", "Permissions", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),(0,y.jsxs)(r.FX,{id:"permissions_modal_invite_options",legend:u.bt("Permissions", "Permissions", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true),legendDisplay:"hidden",children:[(0,y.jsxs)(r.kC,{alignItems:"center",children:[(0,y.jsx)(r.FX.RadioButton,{checked:h===U,id:"ALL",onChange:()=>_(U),value:U}),(0,y.jsx)(r.xu,{marginEnd:12,paddingX:2,children:(0,y.jsx)(B,{setting:U})})]}),(0,y.jsxs)(r.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,y.jsx)(r.FX.RadioButton,{checked:h===V,id:"SAVE_ONLY",onChange:()=>_(V),value:V}),(0,y.jsx)(r.xu,{marginEnd:12,paddingX:2,children:(0,y.jsx)(B,{setting:V})})]})]}),(0,y.jsx)(r.xu,{paddingY:3,children:(0,y.jsx)(r.xv,{size:"100",children:u.bt("Invitations", "Invitations", "save.board.BoardPage.ModalContents.PermissionsModal", undefined, true)})}),(0,y.jsxs)(r.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,y.jsx)(r.XZ,{checked:g,id:"inviteSetting",onChange:({checked:e})=>m(e)}),(0,y.jsx)(r.xu,{marginEnd:12,paddingX:2,children:(0,y.jsx)(B,{setting:L})})]}),(0,y.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(r.XZ,{checked:f,id:"inviteSetting",onChange:({checked:e})=>x(e)}),(0,y.jsx)(r.xu,{marginEnd:12,paddingX:2,children:(0,y.jsx)(B,{setting:M})})]})]})})}function G({board:e,fromBoardEditModal:t,onDismiss:i}){const[o,s]=(0,n.useState)("collaboratorsView"),{collaborator_permissions_setting:r}=e;return"collaboratorsView"===o?(0,y.jsx)(N,{board:e,currentPermissionLevel:r,fromBoardEditModal:t,navigateToPermissions:()=>s("permissionsView"),onDismiss:i}):(0,y.jsx)(H,{board:e,currentPermissionLevel:r,navigateToCollaborators:()=>s("collaboratorsView"),onDismiss:i})}},217641:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(883119),s=i(785893);function r(e){const{accessibilityLabel:t,focused:i,id:r,onBlur:a,onChange:l,onFocus:d,placeholder:c,value:u,size:h="lg"}=e,p=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(i){const e=p.current;window.requestAnimationFrame((()=>{const t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}))}}),[i]),(0,s.jsx)(o.xu,{ref:p,children:(0,s.jsx)(o.Um,{accessibilityLabel:t,id:r,onBlur:a,onChange:l,onFocus:d,placeholder:c,size:h,value:u})})}},488769:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);const r=function({type:e}){const t=(0,o.ZP)(),i={group:{accessibilityLabel:t.bt("group board", "group board", "Board picker group board icon", undefined, true),icon:"people"},protected:{accessibilityLabel:t.bt("protected board", "protected board", "Board picker protected board icon", undefined, true),icon:"protect"},secret:{accessibilityLabel:t.bt("Secret board", "secret board", "Board picker secret board icon", undefined, true),icon:"lock"},sections:{accessibilityLabel:t.bt("board with sections", "board with sections", "Board picker board with sections icon", undefined, true),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t.bt("board with sections", "board with sections", "Board picker board with sections icon", undefined, true),icon:"arrow-down"}}[e];return(0,s.jsx)(n.xu,{marginStart:1,children:(0,s.jsx)(n.xu,{marginStart:2,children:"sections"===e||"sectionsInline"===e?(0,s.jsx)(n.JO,{accessibilityLabel:i.accessibilityLabel,icon:i.icon,size:"12",color:"default"}):(0,s.jsx)(n.JO,{accessibilityLabel:i.accessibilityLabel,icon:i.icon,size:16,color:"default"})})})}},553751:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(702664),s=i(883119),r=i(898781),a=i(755742),l=i(19121),d=i(717615),c=i(231947),u=i(274495),h=i(678638),p=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(e){super(e),_(this,"onCreateSection",(()=>{const{board:e,dispatch:t,completeCreateSectionAction:i,pinImport:n,viewer:o,orbacActingAs:s}=this.props,r=(0,c.lJ)(o,s);return this.setState({isSaving:!0}),t((0,h.vB)({boardId:e.id,name:this.state.inputName.trim(),pinImport:n},this.props.i18n,r)).then((e=>{this.setState({isSaving:!1}),i(e)})).catch((e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})}))})),_(this,"handleKeyDown",(({event:e})=>{const{createError:t,inputName:i}=this.state;[a.Z.ENTER,a.Z.NUMPAD_ENTER].includes(e.which)&&!t&&i.trim()&&this.onCreateSection()})),_(this,"handleChangeName",(({value:e})=>{this.setState({createError:null,inputName:e})})),_(this,"handleInputRef",(e=>{this.setState({inputRef:e})})),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:i,inputRef:n}=this.state;!n||t.inputRef&&!i||n.focus()}render(){const{showTitle:e,positionRelative:t}=this.props,{createError:i,inputName:n,isSaving:o}=this.state,r=!!n.trim()&&!i;return(0,p.jsxs)(s.xu,{display:"flex",direction:"column",color:"default",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,p.jsx)(s.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,p.jsx)(s.X6,{size:"400",children:this.props.i18n.bt("Add section", "Add section", "Title in the add section modal", undefined, true)})}),(0,p.jsxs)(s.xu,{padding:4,children:[(0,p.jsx)(s.xu,{marginBottom:2,children:(0,p.jsx)(s.__,{htmlFor:"sectionEditName",children:(0,p.jsx)(s.xv,{size:"200",color:i?"error":"subtle",children:this.props.i18n.bt("Name", "Name", "Board section name", undefined, true)})})}),(0,p.jsx)(s.xu,{children:(0,p.jsx)(s.xu,{ref:this.handleInputRef,children:(0,p.jsx)(s.nv,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n.bt("Like \"Lighting\"", "Like \"Lighting\"", "Placeholder for board section name", undefined, true),size:"lg",type:"text",value:n})})})]}),(0,p.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,p.jsx)(s.xu,{padding:4,children:(0,p.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(u.Z,{disabled:!r||o,onClick:this.onCreateSection,submitting:o,text:this.props.i18n.bt("Add", "Add", "add a new section", undefined, true)})})})]})}}const m=function(e){const t=(0,o.useDispatch)(),i=(0,r.ZP)(),n=(0,l.Z)(),s=(0,d.Z)();return(0,p.jsx)(g,{...e,dispatch:t,i18n:i,viewer:n,orbacActingAs:s})}},818747:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(89254),s=i(785893);const r="#8fa7bf";function a({url:e,description:t,color:i}){return i=i||r,(0,s.jsx)(n.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:i}},children:(0,s.jsxs)(n.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,s.jsx)(n.xu,{marginBottom:2,children:(0,s.jsx)(n.xv,{color:"inverse",size:"100",children:(0,o.Z)(e).hostname||e})}),(0,s.jsx)(n.xu,{maxHeight:144,children:(0,s.jsx)(n.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},850760:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(883119),s=i(407043),r=i(312918),a=i(142103),l=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(...e){super(...e),d(this,"state",{}),d(this,"handleUserFollow",((e,t)=>{this.setState({isFollowing:t}),t?this.props.logContextEvent({event_type:45,object_id_str:e,view_type:3,view_parameter:73}):this.props.logContextEvent({event_type:46,object_id_str:e,view_type:3,view_parameter:73})}))}static getDerivedStateFromProps(e,t){return void 0===t.isFollowing&&e.user?{isFollowing:e.user.followed_by_me}:Object.freeze({})}render(){const{user:e}=this.props,{id:t,full_name:i,image_medium_url:n,username:s}=e,d=s?`/${s}/`:"";return t&&i?(0,l.jsxs)(o.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,children:[(0,l.jsx)(o.xu,{flex:"grow",paddingX:1,children:(0,l.jsx)(r.default,{fullName:i,imageUrl:n,profileUrl:d,openNewTab:!0})}),(0,l.jsx)(o.xu,{flex:"none",paddingX:1,children:(0,l.jsx)(a.Z,{fullName:i,suppressToasts:!0,id:t,imageUrl:n||"",isOwnProfile:!1,onUserFollow:e=>this.handleUserFollow(t,e),profileUrl:d,size:"md"})})]}):null}}const u=function(e){const{logContextEvent:t}=(0,s.v)();return(0,l.jsx)(c,{...e,logContextEvent:t})}},475970:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(667294),o=i(616550),s=i(883119),r=i(172071),a=i(827896),l=i(407043),d=i(499128),c=i(898781),u=i(53987),h=i(773285),p=i(743473),_=i(867060),g=i(785893);function m({size:e,iconColor:t,backgroundColor:i,disabled:n,onClick:o}){const r=(0,c.ZP)(),a=48===e?"lg":"xl";return(0,g.jsx)(s.hU,{accessibilityLabel:r.bt("Copy link", "Copy Link", "shareMenu.icon.accessibilityLabel.copy", undefined, true),bgColor:i,icon:"link",iconColor:t||i&&!["white","lightGray","transparent"].includes(i)?t:"gray",size:a,disabled:n,onClick:o})}var f=i(343341),x=i(375436),b=i(67428);const y=3e3;function v({backgroundColor:e,iconColor:t,iconSize:i,iconWrapperWidth:v,isCloseupActionBar:P,marginEnd:w,onClick:I,sharedObject:A,spaceBelowIcon:E,viewType:C,viewParameter:S,relayEnvironment:j}){const T=(0,c.ZP)(),{logContextEvent:D}=(0,l.v)(),{checkExperiment:k}=(0,h.F)(),z=k("web_share_menu_logging").anyEnabled,O=(0,f.F9)(),[R,L]=(0,n.useState)(""),[M,B]=(0,n.useState)(!1),[N,Z]=(0,n.useState)(!1),F=(0,o.useLocation)(),U=(0,a.Z)(),V=T.bt("Link copied", "Link copied!", "shareSheet.socialBar.copyLinkButton.LinkCopied", undefined, true),H=e=>{P?navigator.clipboard.writeText(e).then((()=>{var e;e=T.bt("Copied link to your clipboard to share", "Copied link to your clipboard to share", "web.unauth.pinbar.copylink", undefined, true),O.showToast((({hideToast:t})=>(0,g.jsx)(s.xu,{top:!0,children:(0,g.jsx)(d.ZP,{duration:y,onHide:t,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{Z(!0),setTimeout((()=>{Z(!1)}),y)}))},G=async()=>{if(R)return void H(R);B(!0);const e=(e=>{let t;if("pin"===A.type&&A.id){const e={shouldTrackForPrevLocation:!0};t=U(A.id,e)}return{invite_category:3,invite_channel:e,object_type:A.type,object_id:A.id,name:A.name,description:A.description||"",path:A.url,picture:A.imageUrl,client_tracking_params:t}})(12);p.Z.createShareInviteData(e,j).then((t=>{const{invite_url:i}=t;B(!1),i&&(L(i),p.Z.logShareInvite(e,t,j),H(i))}))},W=()=>{if(G(),z){const e=_.yF[A.type];e||r.Z.increment("social.web.copyLinkButton.sharedObject.type",void 0,{type:A.type}),P&&D({event_type:101,component:14147,element:13103,object_id_str:A.id,view_type:C,view_parameter:S,aux_data:e?{invite_object:e}:void 0}),I&&I()}};return(0,u.am)(F)&&P&&k("web_copy_link_btn_replace").anyEnabled?(0,g.jsx)(s.xu,{marginStart:1,children:(0,g.jsx)(s.zx,{accessibilityLabel:T.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),text:T.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true),onClick:()=>W(),size:"lg",color:"gray",fullWidth:!0})}):(0,g.jsxs)(b.Z,{isCloseupActionBar:!0,width:v||i,marginEnd:w||!1,children:[(0,g.jsx)(s.xu,{alignItems:P?"center":"stretch",display:P?"flex":"block",marginBottom:E,width:P?"100%":"auto",children:(0,g.jsx)(s.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:i,children:(0,g.jsx)(m,{backgroundColor:e,iconColor:t,size:i,onClick:W,disabled:M})})}),!P&&(0,g.jsx)(x.Z,{text:N?V:T.bt("Copy link", "Copy link", "shareSheet.socialBar.copyLinkButton.CopyLink", undefined, true)})]})}},750869:(e,t,i)=>{i.d(t,{d:()=>n});const n={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article"}},827021:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ie});var n=i(667294),o=i(883119),s=i(172071),r=i(407043),a=i(385740),l=i(773285),d=i(867060),c=i(977558),u=i(214494),h=i(499128),p=i(898781),_=i(343341),g=i(19121),m=i(717615),f=i(231947),x=i(697247),b=i(313951);const y="200",v=48,P=26,w=2,I=81,A=49,E=4,C=9,S=3,j=1,T=(E+1)*(v+P)+2*S*4,D="error";var k=i(784590),z=i(116303),O=i(349700),R=i(785893);function L({idx:e,item:t,onSendMessage:i,onViewConversation:s,sentHistory:d,objectAttachment:u,component:h}){var _;const g=(0,p.ZP)(),{logContextEvent:m}=(0,r.v)(),[f,x]=(0,n.useState)(!1),{viewType:b,viewParameter:y}=(0,a.SU)(),I=t.id||"string"==typeof t.email&&t.email||"",A=d[I]===D,E=Object.prototype.hasOwnProperty.call(d,I)&&!A,C=null!==(_=d[I])&&void 0!==_?_:"";(0,n.useEffect)((()=>{A&&x(!1)}),[A]);let S="";const{full_name:j,email:T}=t;"string"!=typeof j||j.match(/^\s*$/)?"string"!=typeof T||T.match(/^\s*$/)||(S=T):S=j;let k,L,M="";E?M=g.bt("View chat", "View chat", "shareSheet.ContactItem.viewChat", undefined, true):f&&(M=g.bt("Sent", "Sent", "shareSheet.ContactItem.sent", undefined, true)),"pinner"===u.type||"user"===u.type?(k=13530,L=13532):"board"===u.type?(k=13527,L=13529):(k=13524,L=13526);const{checkExperiment:B}=(0,l.F)(),N=B("web_share_show_more_contacts").anyEnabled;return(0,R.jsx)(o.xu,{"data-test-id":"sharesheet-contact-item",width:v+P,marginBottom:5,children:(0,R.jsx)(o.iP,{onTap:E?()=>{m({view_type:b,view_parameter:y,event_type:10399,component:h,element:L}),s(C)}:()=>{m({event_type:101,component:13029,element:1039,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),m({view_type:b,view_parameter:y,event_type:10399,component:h,element:k,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),x(!0),i(t)},children:(0,R.jsxs)(o.kC,{direction:"column",alignItems:"center",children:[(0,R.jsxs)(o.xu,{alignItems:"center","data-test-id":f?"sharesheet-viewchat-link":"sharesheet-contact-item-button",display:"flex",height:v,justifyContent:"center",marginBottom:w,width:v,children:[f&&(0,R.jsx)(o.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"sharesheet-contact-item-sent-icon",display:"flex",height:v,justifyContent:"center",position:"absolute",rounding:"circle",width:v,zIndex:new o.Ry(c.fe),children:(0,R.jsx)(o.JO,{accessibilityLabel:(0,O.Wc)(g.bt("Sent to {{recipientName}}", "Sent to {{recipientName}}", "shareSheet.ContactItem.sentIcon.accessibilityLabel", undefined, true),{recipientName:S}),icon:"check",color:"light",size:24})}),(0,R.jsx)(z.Z,{size:"fit",src:t.image_large_url,name:S})]}),(0,R.jsxs)(o.xu,{"data-test-id":"sharesheet-contact-item-label",width:N?"100%":v,paddingX:N?1:void 0,children:[(0,R.jsx)(o.xv,{lineClamp:1,size:"100",align:"center",children:S}),(0,R.jsx)(o.xv,{color:"subtle",size:"100",align:"center",children:M})]})]})})})}var M=i(17676);function B(e){var t;const{logContextEvent:i}=(0,r.v)(),s=(0,p.ZP)(),{onHide:d,onSendMessage:c,onShowImportContacts:u,objectAttachment:h,sentHistory:_}=e,{isLoaded:g}=(0,k.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),{checkExperiment:m}=(0,l.F)(),f=m("web_share_show_more_contacts").anyEnabled?C:E,{shareSuggestions:x}=(0,M.E)(),S=(null===(t=x[""])||void 0===t?void 0:t.slice(0,f))||[],j=S.length>0,{viewType:T,viewParameter:D}=(0,a.SU)();(0,n.useEffect)((()=>{if(g){i({event_type:j?7511:7512,component:56,view_type:70,view_parameter:256})}}),[j,i,g]);const{dropdownOpen:z,conversationOpen:O,newMessageOpen:B}=(0,b.Z5)(),N=e=>{O(e),z(),d()},Z=S.map(((t,i)=>{const n=`${t.id||t.email||i}`,o={item:t,idx:i,onSendMessage:c,onViewConversation:N,sentHistory:_,objectAttachment:h},{component:s}=e;return(0,R.jsx)(L,{...o,component:s},n)})),F=!j&&!g;return(0,R.jsxs)(o.kC,{direction:"column",children:[(0,R.jsx)(o.kC,{alignItems:"center",height:A,justifyContent:"center",children:(0,R.jsx)(o.xv,{align:"center",size:y,weight:"bold",children:s.bt("Send on Pinterest", "Send on Pinterest", "ContactsSuggestions.Header.text", undefined, true)})}),(0,R.jsx)(o.kC,{flex:"none",minHeight:I,justifyContent:F?"center":void 0,children:F?(0,R.jsx)(o.xu,{paddingY:2,children:(0,R.jsx)(o.$j,{accessibilityLabel:s.bt("Loading conversation messages", "Loading Conversation Messages", "SendObject.contactList.spinner", undefined, true),show:!0})}):(0,R.jsxs)(o.kC,{wrap:!0,children:[(0,R.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:v+P,children:[(0,R.jsx)(o.xu,{height:v,marginBottom:w,width:v,children:(0,R.jsx)(o.hU,{accessibilityLabel:s.bt("Search for users", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:()=>{e.onSearchClick&&e.onSearchClick();const{component:t}=e;let n;n="pinner"===h.type||"user"===h.type?13531:"board"===h.type?13528:13525,i({view_type:T,view_parameter:D,event_type:10399,component:t,element:n}),B(h),z(),d()},size:"lg"})}),(0,R.jsx)(o.xv,{lineClamp:1,size:"100",children:s.bt("Search", "Search", "ContactsSuggestions.SearchOption.text", undefined, true)})]}),j?Z:(0,R.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:v+P,children:[(0,R.jsx)(o.xu,{height:v,marginBottom:w,width:v,children:(0,R.jsx)(o.hU,{accessibilityLabel:s.bt("Search for users", "Search for users", "ContactsSuggestsions.SearchIcon.accessibilityLabel", undefined, true),bgColor:"lightGray",icon:"people",iconColor:"darkGray",onClick:u,size:"lg"})}),(0,R.jsx)(o.xv,{lineClamp:1,size:"100",children:s.bt("Import", "Import", "ContactsSuggestions.ImportOption.text", undefined, true)})]})]})})]})}function N(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridProductDetailPage":case"ShoppingGridShippedMetadata":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;default:return e}}var Z=i(936776),F=i(750869);function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class V extends n.Component{constructor(...e){super(...e),U(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),U(this,"handleSendEmail",((e,t)=>{if(e){const i={type:"email_share_suggestion",id:"",email:e,debug_reason:{reason:"",readable_reason:""}};this.props.onSendMessage(i,t)}})),U(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),U(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}renderCloseButton(){const{i18n:e,onCancelDraft:t}=this.props;return(0,R.jsx)(o.hU,{accessibilityLabel:e.bt("Cancel share with user", "Cancel share to user", "accessibility label for close button", undefined, true),icon:"arrow-back",onClick:t,size:"sm",iconColor:"gray"})}render(){const{width:e}=this.props;return(0,R.jsxs)(o.xu,{display:"flex",direction:"column",column:12,paddingX:4,paddingY:2,width:e,color:"default",children:[(0,R.jsxs)(o.xu,{display:"flex",alignItems:"center",paddingY:4,children:[this.renderCloseButton(),(0,R.jsx)(o.xu,{flex:"grow",marginEnd:8,children:(0,R.jsx)(o.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Send to", "Send to", "shareSheet.SendToEmail.label", undefined, true)})})]}),(0,R.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,R.jsx)(o.xu,{paddingY:1,marginBottom:4,children:(0,R.jsx)(o.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n.bt("Enter email address", "Enter email address", "Email address to send to", undefined, true),value:this.state.emailValue||"",rows:1})}),(0,R.jsx)(o.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n.bt("Add a message", "Add a message", "shareSheet.SendToEmail.textareaPlaceholder", undefined, true),value:this.state.textValue||""}),(0,R.jsx)(o.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,R.jsx)(o.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n.bt("Send", "Send", "shareSheet.SendToEmail.sendButton", undefined, true),disabled:!(0,Z.Z)(this.state.emailValue)})})]})]})}}function H(e){const t=(0,p.ZP)();return(0,R.jsx)(V,{...e,i18n:t})}var G=i(167912),W=i(827896),$=i(107193),q=i(780280),X=i(743473),Y=i(31149),K=i(659522),J=i(331744),Q=i(757146),ee=i(464240),te=i(22641),ie=i(567831),ne=i(475970);function oe({size:e=48}){return(0,R.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,R.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,R.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,R.jsx)("path",{d:"M39 19.5c0 1.381-1.119 2.5-2.5 2.5S34 20.881 34 19.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5ZM18.5 28c0-.69-.56-1.25-1.25-1.25S16 27.31 16 28s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25ZM26.75 38.75c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25S28.69 40 28 40s-1.25-.56-1.25-1.25Z",fill:"#E60023"}),(0,R.jsx)("path",{d:"M29.25 17.25c0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25S27.31 16 28 16s1.25.56 1.25 1.25ZM17 36.5c0-1.381 1.119-2.5 2.5-2.5s2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5-2.5-1.119-2.5-2.5ZM38.75 26.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25S40 28.69 40 28s-.56-1.25-1.25-1.25Z",fill:"#FFD63F"}),(0,R.jsx)("path",{d:"M19.5 22c1.381 0 2.5-1.119 2.5-2.5S20.881 17 19.5 17 17 18.119 17 19.5s1.119 2.5 2.5 2.5ZM36.5 34c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.119 2.5-2.5-1.119-2.5-2.5-2.5Z",fill:"#46CC88"}),(0,R.jsx)("path",{d:"M28 21c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7Z",fill:"#3869FF"})]})}var se=i(375436),re=i(67428);function ae({iconSize:e,iconWrapperWidth:t,marginBottom:i,marginEnd:n,onCreatePincodeClick:s,sharedObject:r}){const a=(0,p.ZP)(),l=(0,g.Z)();return s&&[F.d.BOARD,F.d.PINNER,F.d.USER].includes(r.type)&&l.isAuth&&(r.id===l.id||l.isEmployee)?(0,R.jsxs)(re.Z,{width:t,marginEnd:n,children:[(0,R.jsx)(o.xu,{marginBottom:i,children:(0,R.jsx)(o.iP,{fullWidth:!1,onTap:s,children:(0,R.jsx)(oe,{size:e})})}),(0,R.jsx)(se.Z,{text:a.bt("Pincode", "Pincode", "Share via pincode", undefined, true)})]},"pincode"):null}function le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const de={backgroundColor:"#ffffff",border:"none",padding:0},ce=new Set(["JP","TW","TH"]),ue=(e,t)=>{(0,$.default)((t=>{t&&(t.getUserID()?e():t.login((()=>{e()})))}),t)};class he extends n.Component{constructor(...e){super(...e),le(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),le(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:t}=this.state,i=this.getShareOptions(12);e||(X.Z.logShareInvite(i,t,this.props.relayEnvironment),this.setState({copyLinkLogged:!0}))}))}componentDidMount(){this.getWhatsAppURL()}getShareOptions(e){let t;const{sharedObject:i,getClientTrackingParams:n}=this.props;if("pin"===i.type&&i.id){const e={shouldTrackForPrevLocation:!0};t=n(i.id,e)}return{invite_category:3,invite_channel:e,object_type:i.type,object_id:i.id,name:i.name,description:i.description||"",path:i.url,picture:i.imageUrl,client_tracking_params:t}}getWhatsAppURL(){const e=this.getShareOptions(10);X.Z.createShareInviteData(e,this.props.relayEnvironment).then((e=>{const t=`${e.title}\n${e.invite_url}`;if(t){const i=encodeURIComponent(t);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+i})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,ie.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!this.props.viewer.isWriteBanned}handleSocialShareClick(e,t){if(this.checkWritePermissions())return;const{onCreatePincodeClick:i,onExternalSend:n,logContextEvent:o,viewType:r,viewParameter:a,inShareMenuLoggingExp:l,sharedObject:c,component:u}=this.props;let h=l?d.cc[t]:46;"facebook"===e||5===t?(this.openFacebookDialog(),l||(h=257)):"twitter"===e||9===t?(this.openTwitterDialog(),l||(h=256)):"messenger"===e||6===t?(this.openFbMessengerDialog(),l||(h=950)):"whatsapp"===e||10===t?(this.openWhatsAppDialog(),l||(h=951)):"pincode"===e||16===t?i&&i():"copylink"===e||12===t?(this.openShareUrlLink(),l||(h=100)):"email"===e||1===t?(this.openEmailDialog(),l||(h=258)):"line"!==e&&8!==t||(this.openLineDialog(),l||(h=952)),n&&n();const p=d.yF[c.type];p||s.Z.increment("social.web.legoShareSocialBar.sharedObject.type",void 0,{type:c.type}),o({event_type:101,component:l?14121:153,element:h,object_id_str:l?c.id:void 0,view_type:l?r:void 0,view_parameter:l?a:void 0,aux_data:l?{invite_object:p}:void 0});const _={board:d.LO,pinner:d.Pu,user:d.Pu,pin:d.dB,did_it:d.dB,today_article:d.dB};o({event_type:10399,component:u,object_id_str:c.id||void 0,view_type:r,view_parameter:a,aux_data:{invite_object:p},element:_[c.type][t]})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){const{unauthId:e,viewer:t}=this.props;ue((()=>{X.Z.shareFacebookInvite({options:this.getShareOptions(5),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openFbMessengerDialog(){const{unauthId:e,viewer:t}=this.props;ue((()=>{X.Z.shareFbMessengerInvite({options:this.getShareOptions(6),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(X.Z.logShareInvite(e,this.state.whatsappInviteData,this.props.relayEnvironment),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){X.Z.shareTwitterInvite(this.getShareOptions(9),this.props.relayEnvironment)}openLineDialog(){X.Z.shareLineInvite(this.getShareOptions(8),this.props.relayEnvironment)}renderEmail(){const e=v,t=v+P,i=w;return(0,R.jsxs)(re.Z,{width:t,marginEnd:!1,children:[(0,R.jsx)(o.xu,{display:"inlineBlock",marginBottom:i,children:(0,R.jsx)("button",{"aria-label":this.props.i18n.bt("Share by email", "Share on Email", "sharesheet.shareSocialBar.ShareEmail", undefined, true),onClick:()=>this.handleSocialShareClick("email",1),style:de,children:(0,R.jsx)(Y.Z,{size:e})})}),(0,R.jsx)(se.Z,{text:this.props.i18n.bt("Email address", "Email", "Share via email", undefined, true)})]},"email")}renderShareOptions(){const{i18n:e,onCreatePincodeClick:t,sharedObject:i,showLineShare:s,showMessengerShare:r,showEmailOption:a,viewType:l,viewParameter:d}=this.props,c=v,u=v+P,h=w;return(0,R.jsx)(n.Fragment,{children:(0,R.jsxs)(o.kC,{justifyContent:"start",wrap:!0,children:[s&&(0,R.jsxs)(re.Z,{width:u,marginEnd:!1,children:[(0,R.jsx)(o.xu,{marginBottom:h,children:(0,R.jsx)("button",{"aria-label":e.bt("Share on LINE", "Share on LINE", "sharesheet.shareSocialBar.ShareLine", undefined, true),onClick:()=>this.handleSocialShareClick("line",8),style:de,children:(0,R.jsx)(J.Z,{size:c})})}),(0,R.jsx)(se.Z,{text:e.bt("LINE", "LINE", "sharesheet.shareSocialBar.ShareLineLabel", undefined, true)})]}),(0,R.jsxs)(re.Z,{width:u,marginEnd:!1,children:[(0,R.jsx)(o.xu,{marginBottom:h,children:(0,R.jsx)("button",{"aria-label":e.bt("Share on WhatsApp", "Share on WhatsApp", "sharesheet.shareSocialBar.ShareWhatsapp", undefined, true),onClick:()=>this.handleSocialShareClick("whatsapp",10),style:de,tabIndex:"-1",children:(0,R.jsx)(o.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,R.jsx)(te.Z,{size:c})})})}),(0,R.jsx)(se.Z,{text:e.bt("WhatsApp", "WhatsApp", "sharesheet.shareSocialBar.ShareWhatsappLabel", undefined, true)})]}),r&&(0,R.jsxs)(re.Z,{width:u,marginEnd:!1,children:[(0,R.jsx)(o.xu,{marginBottom:h,children:(0,R.jsx)("button",{"aria-label":e.bt("Share on Messenger", "Share on Messenger", "sharesheet.shareSocialBar.ShareMessenger", undefined, true),onClick:()=>this.handleSocialShareClick("messenger",6),style:de,children:(0,R.jsx)(Q.Z,{size:c})})}),(0,R.jsx)(se.Z,{text:e.bt("Messenger", "Messenger", "sharesheet.shareSocialBar.ShareMessengerLabel", undefined, true)})]}),(0,R.jsxs)(re.Z,{width:u,marginEnd:!1,children:[(0,R.jsx)(o.xu,{marginBottom:h,children:(0,R.jsx)("button",{"aria-label":e.bt("Share on Facebook", "Share on Facebook", "sharesheet.shareSocialBar.ShareFacebook", undefined, true),onClick:()=>this.handleSocialShareClick("facebook",5),style:de,children:(0,R.jsx)(K.Z,{size:c})})}),(0,R.jsx)(se.Z,{text:e.bt("Facebook", "Facebook", "sharesheet.shareSocialBar.ShareFacebookLabel", undefined, true)})]}),(0,R.jsxs)(re.Z,{width:u,marginEnd:!1,children:[(0,R.jsx)(o.xu,{marginBottom:h,children:(0,R.jsx)("button",{"aria-label":e.bt("Share on Twitter", "Share on Twitter", "sharesheet.shareSocialBar.ShareTwitter", undefined, true),onClick:()=>this.handleSocialShareClick("twitter",9),style:de,"data-test-id":"twitter-share-icon",children:(0,R.jsx)(ee.Z,{size:c})})}),(0,R.jsx)(se.Z,{text:e.bt("Twitter", "Twitter", "sharesheet.shareSocialBar.ShareTwitterLabel", undefined, true)})]}),(0,R.jsxs)(n.Fragment,{children:[(0,R.jsx)(ae,{iconSize:c,iconWrapperWidth:u,marginBottom:h,marginEnd:!1,onCreatePincodeClick:t,sharedObject:i}),(0,R.jsx)(ne.default,{sharedObject:i,backgroundColor:"lightGray",iconColor:"darkGray",iconSize:c,iconWrapperWidth:u,onClick:()=>this.handleSocialShareClick("copylink",12),isCloseupActionBar:!1,spaceBelowIcon:h,viewType:l,viewParameter:d,relayEnvironment:this.props.relayEnvironment},"copylink"),a&&this.renderEmail()]})]})})}render(){const{paddingX:e}=this.props;return(0,R.jsxs)(o.xu,{paddingX:e,children:[(0,R.jsx)(o.kC,{alignContent:"center",alignItems:"center",height:A,justifyContent:"center",children:(0,R.jsx)(o.xv,{size:y,weight:"bold",children:this.props.i18n.bt("Share", "Share", "Sharesheet.ShareSocialBar", undefined, true)})}),(0,R.jsx)(o.kC,{alignContent:"start",alignItems:"stretch",justifyContent:"start",minHeight:I,children:this.renderShareOptions()})]})}}function pe(e){const{logContextEvent:t}=(0,r.v)(),{checkExperiment:i}=(0,l.F)(),n=(0,p.ZP)(),o=(0,g.Z)(),s=o.isAuth&&ce.has(o.country),a=i("web_messenger_share_channel").anyEnabled,d=(0,q.B)(),c=i("web_share_menu_logging").anyEnabled,u=i("graphql_migration_sharesheet_sgrowth_web").anyEnabled,h=(0,G.useRelayEnvironment)();return(0,R.jsx)(he,{...e,toastManagerContext:(0,_.F9)(),viewer:(0,g.Z)(),showLineShare:s,showMessengerShare:a,i18n:n,logContextEvent:t,unauthId:d.unauthId,inShareMenuLoggingExp:c,shareSheetExpEnabled:u,relayEnvironment:u?h:void 0,getClientTrackingParams:(0,W.Z)()})}const _e=(e,t)=>e.reduce(((e,i)=>({...e,[i]:t})),{}),ge=(e,t)=>"today_article"===e?t.bt("Check out this article on Pinterest!", "Check out this article on Pinterest!", "sendObject.initialTextValue.todayArticle", undefined, true):"";function me(e){const{logContextEvent:t}=(0,r.v)(),i=(0,p.ZP)(),[a,d]=(0,n.useState)(!1),[c,y]=(0,n.useState)(null),[v,P]=(0,n.useState)({}),[w]=(0,n.useState)(ge(e.sendType,i)),{showOneToast:I}=(0,_.F9)(),{surface:A}=(0,x.$)(),E=(0,g.Z)(),C=(0,m.Z)(),{conversationCreate:k}=(0,b.Z5)(),z=(0,b.NG)(),O=(0,n.useRef)();(0,n.useEffect)((()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.focus()}),[]);const L=(i,n)=>{d(!1),e.onMessageSent(),((i,n)=>{const{sharedObject:o}=e,r=o.id;s.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),t({event_type:180,element:276,object_id_str:r,aux_data:{conversation_id:i,pin_id:n}})})(i,n)},M=(e,t)=>{s.Z.increment("web.sharesheet.internal.send",1,{status:"fail"}),P({...v,..._e(e,D)});const i=t.message_detail||t.message;i&&I((({hideToast:e})=>(0,R.jsx)(h.ZP,{type:"error",duration:5e3,onHide:e,text:i})))},Z=async(t,i,n)=>{const{sharedObject:o,sendType:s}=e,r=o.id,a={emails:i,user_ids:t,text:n,source:N(A)};a[s]=r;const l=u.Z.create("ConversationsResource",a),d=t.length>0?t:i;try{const e=await l.callCreate(),t=e&&e.resource_response.data;k(t),L(t.id,"pin"===s?r:null),P({...v,..._e(d,t.id)})}catch(c){M(d,c)}},F=(i,n)=>{"conversation_share_suggestion"===i.type?((t,i)=>{const{sharedObject:n,sendType:o}=e;let s;switch(o){case"pin":s="pinId";break;case"board":s="boardId";break;case"did_it":s="didItId";break;case"user":case"pinner":s="userId"}const r=s?z(t,{text:i,[s]:n.id,source:N(A)},void 0,E):void 0;r&&r.then((()=>{L(t,"pin"===o?n.id:null),P({...v,[t]:t})})).catch((e=>{M([t],e)}))})(i.id,n):"user_share_suggestion"===i.type&&i.username?Z([i.id],[],n):Z([],[i.email],n),t({event_type:101,component:56,element:276})},{onCreatePincodeClick:U,onShowImport:V,sendType:G,sharedObject:W,onHide:$,onExternalSend:q,viewType:X,viewParameter:Y,onSearchClick:K,component:J}=e,Q="user"===e.sendType&&(0,f.q6)(E,e.sharedObject.id,C),ee=("board"===e.sendType||"pin"===e.sendType)&&void 0!==e.sharedObject.ownerId&&(0,f.q6)(E,e.sharedObject.ownerId,C),te=Q||ee,ie=E.should_show_messaging&&!te,{checkExperiment:ne}=(0,l.F)(),oe=ie&&ne("web_share_show_more_contacts").anyEnabled,se=(0,R.jsx)(o.xu,{paddingY:1,paddingX:3,children:(0,R.jsx)(o.iz,{})}),re=(0,R.jsxs)(n.Fragment,{children:[oe&&se,(0,R.jsx)(pe,{onCreatePincodeClick:U,onEmailIconClick:()=>{d(!0),y("email")},onExternalSend:q,onHide:$,sharedObject:W,showEmailOption:ie,viewType:X,viewParameter:Y,component:J}),!oe&&ie&&se]});return a&&"email"===c?(0,R.jsx)(H,{initialTextValue:w,objectId:W.id,objectType:G,onCancelDraft:()=>{d(!1),y(null)},onHide:$,onSendMessage:F,width:T}):(0,R.jsxs)(o.xu,{color:"default",paddingX:S,paddingY:j,width:T,tabIndex:0,ref:O,children:[!oe&&re,ie&&(0,R.jsx)(B,{objectAttachment:{type:G,id:W.id},onHide:$,onSendMessage:F,onSearchClick:K,onShowImportContacts:V,sentHistory:v,component:J}),oe&&re]})}var fe=i(177471);const xe=["facebook","google"];function be(e,t){return"facebook"===e?t.bt("Facebook", "Facebook", " - ", undefined, true):"google"===e?t.bt("Google", "Google", " - ", undefined, true):t.bt("Other", "Other", " - ", undefined, true)}function ye(e,t,i){return"facebook"===e?i.bt("Friends who are on Pinterest", "Friends who are on Pinterest", " - ", undefined, true):"google"===e&&t&&-1!==t.indexOf("@gmail")?t:null}function ve({onBack:e}){const t=(0,p.ZP)(),i=(0,g.Z)(),n=i.isAuth?i.email:null,s=xe.filter((e=>!i.isAuth||!1===i.socialNetwork[e].connected)),r=(0,fe.k)();return(0,R.jsx)(o.xu,{paddingX:1,paddingY:2,children:(0,R.jsxs)(o.kC,{gap:{row:0,column:2},direction:"column",children:[(0,R.jsxs)(o.kC,{gap:{row:2,column:0},alignItems:"center",children:[(0,R.jsx)(o.hU,{accessibilityLabel:t.bt("Back", "Back", " - ", undefined, true),icon:"arrow-back",iconColor:"darkGray",onClick:e,size:"md"}),(0,R.jsx)(o.xv,{size:"300",weight:"bold",children:t.bt("Upload contacts from ...", "Upload contacts from...", " - ", undefined, true)})]}),(0,R.jsx)(o.kC,{direction:"column",gap:{row:0,column:4},children:s.map((e=>(0,R.jsx)(o.xu,{paddingX:2,children:(0,R.jsxs)(o.iP,{onTap:()=>(e=>{r.handleConnect(e,!0,Object.freeze({}),t)})(e),children:[(0,R.jsx)(o.xv,{size:"200",children:be(e,t)}),(0,R.jsx)(o.xv,{size:"200",children:ye(e,n,t)})]})},e)))})]})})}var Pe=i(749049);const we=14121;function Ie({element:e,onCreatePincodeClick:t,onExternalSend:i,onHide:u,sendType:h,sharedObject:p,viewType:_,viewParameter:g,component:m}){const{logContextEvent:f}=(0,r.v)(),[x,b]=(0,n.useState)(!1),{checkExperiment:y}=(0,l.F)(),v=y("web_share_menu_logging").anyEnabled,P=(0,n.useRef)(!1),{viewParameter:w}=(0,a.SU)();(0,n.useEffect)((()=>{const t=d.yF[h];return t||s.Z.increment("social.web.sendObjectWrapper.sendType",void 0,{type:h}),f({event_type:7120,component:v?we:void 0,object_id_str:p.id,element:v?e:void 0,view_type:_,view_parameter:g,aux_data:v?{invite_object:t}:void 0}),f({event_type:10400,component:m,object_id_str:p.id,element:(0,Pe.O)(t),view_type:_,view_parameter:g||w,aux_data:{invite_object:t}}),()=>{v||f({event_type:7121,object_id_str:p.id,view_type:_,view_parameter:g}),P.current||f({event_type:10403,component:m,object_id_str:p.id,element:13478,view_type:_,view_parameter:w,aux_data:{invite_object:t}});const e=P.current?7493:7492;f({event_type:e,component:v?we:void 0,object_id_str:v?p.id:void 0,element:v?13097:void 0,view_type:_,view_parameter:g,aux_data:v?{invite_object:t}:void 0})}}),[]);const I=()=>{b(!0)},A=()=>{b(!1)},E=()=>{P.current=!0},C=()=>{P.current=!0},S=()=>{P.current=!0,i&&i()};return x?(0,R.jsx)(ve,{onBack:A}):(0,R.jsx)(o.xu,{overflow:"hidden",rounding:4,zIndex:new o.Ry(c.fe-1),color:"default",children:(0,R.jsx)(me,{onCreatePincodeClick:t,onHide:u,onShowImport:I,onMessageSent:C,onExternalSend:S,onSearchClick:E,sendType:h,sharedObject:p,viewType:_,viewParameter:g,component:m})})}},375436:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(207112),s=i(785893);const r=({text:e})=>(0,s.jsx)(n.xv,{align:"center",size:"100",children:(0,s.jsx)(o.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},67428:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(785893);const s=({width:e,marginEnd:t,children:i,isCloseupActionBar:s})=>(0,o.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:t?2:0,width:e,marginBottom:s?0:5,children:i})},749049:(e,t,i)=>{i.d(t,{O:()=>n});const n=e=>{switch(e){case 2:return 331;case 3:return 12631;default:return 72}}},980968:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(667294),o=i(883119),s=i(112690),r=i(329900),a=i(698330),l=i(898781),d=i(785893);const c=15;function u({user:e}){const t=(0,l.ZP)(),{full_name:i="",username:n,image_large_url:s}=e,r=i.length<=c?i:`${i.substring(0,c)}...`;return(0,d.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(o.xu,{paddingX:1,children:(0,d.jsx)(o.HE,{role:"link",href:`/${encodeURIComponent(n)}/`,accessibilityLabel:t.bt("User's avatar", "User`s Avatar", "User`s Avatar", undefined, true),collaborators:[{name:i,src:null!=s?s:void 0}],size:"xs"})}),(0,d.jsx)(o.xu,{paddingX:1,children:(0,d.jsx)(o.xv,{size:"200",weight:"bold",children:(0,d.jsx)(o.rU,{href:`/${encodeURIComponent(n)}/`,rounding:2,tapStyle:"compress",children:(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{color:"#005062"}},children:r})})})})]})}const h=()=>{const e=(0,l.ZP)();return(0,d.jsx)(o.xu,{marginTop:1,children:(0,d.jsx)(o.iP,{role:"link",href:"/",tapStyle:"none",children:(0,d.jsx)("svg",{"aria-label":e.bt("Pinterest", "Pinterest", "InviteLandingPageV2.headerLogo.pinterestLogo", undefined, true),viewBox:"0 0 168 40",height:20,width:83,children:(0,d.jsxs)("g",{fill:"#005062",fillRule:"nonzero",children:[(0,d.jsxs)("g",{transform:"translate(47.213 6.557)",children:[(0,d.jsx)("path",{d:"M18.689 7.721h5.295v16.64h-5.295zM25.098 7.721h5.099V10h.098c1.23-1.787 2.82-2.754 5.131-2.754 3.64 0 5.787 2.606 5.787 6.311v10.82h-5.295v-9.754c0-1.754-.885-2.95-2.607-2.95-1.754 0-2.918 1.458-2.918 3.507v9.197h-5.295V7.721z"}),(0,d.jsx)("circle",{cx:"21.344",cy:"3.279",r:"3.18"}),(0,d.jsx)("path",{d:"M78.459 7.475c-.148-.016-.328-.016-.525-.016-2.016 0-3.377.885-4.557 2.852h-.098v-2.59h-5.066v16.64h5.295v-7.476c0-3.459 1.918-5.065 4.951-4.787V7.475zM104.459 13.869c-2.115-.394-4-.558-4-1.721 0-1.033 1-1.525 2.311-1.525 1.46 0 2.476.459 2.673 1.95h4.868c-.262-3.278-2.786-5.327-7.508-5.327-3.934 0-7.18 1.82-7.18 5.328 0 3.901 3.082 4.672 5.984 5.164 2.213.393 4.23.557 4.23 2.049 0 1.065-1 1.656-2.607 1.656-1.59 0-2.656-.673-2.984-2.05h-5.05c.378 3.427 3.378 5.492 8.066 5.492 4.361 0 7.574-1.885 7.574-5.524-.016-4.263-3.459-5-6.377-5.492zM86.967 21.05c-2.18 0-3.41-1.394-3.737-3.64h11.95c.033-3.377-.934-6.279-2.918-8.099-1.426-1.295-3.311-2.081-5.688-2.081-5.066 0-8.541 3.803-8.541 8.77 0 5.033 3.377 8.836 8.869 8.836 2.114 0 3.803-.557 5.196-1.525 1.46-1 2.443-2.442 2.787-3.934h-5.164c-.442 1.05-1.344 1.672-2.754 1.672zM86.672 11c1.721 0 2.951 1.262 3.148 3.246h-6.558c.361-1.967 1.41-3.246 3.41-3.246zM120.148 20.443c-.246.016-.574.016-.886.016-1.13 0-1.852-.328-1.852-1.623v-7.803h2.738V7.72h-2.738V2.46h-5.164v5.262h-1.623v3.312h1.623v8.934c0 3.574 2.213 4.59 5.295 4.59 1.18 0 2.066-.082 2.607-.196v-3.918zM50.672 20.443c-.213 0-.459.016-.688.016-1.132 0-1.853-.328-1.853-1.623v-7.803h2.541V7.72h-2.54V2.46h-5.165v5.262h-1.721v3.312h1.721v8.934c0 3.574 2.213 4.59 5.295 4.59 1.05 0 1.87-.065 2.41-.164v-3.95z"}),(0,d.jsx)("path",{d:"M50.41 16.016c0-4.967 3.475-8.77 8.54-8.77 2.378 0 4.263.787 5.69 2.082 1.983 1.82 2.95 4.705 2.917 8.098h-11.95c.327 2.246 1.557 3.64 3.737 3.64 1.394 0 2.312-.623 2.754-1.656h5.164c-.36 1.492-1.328 2.918-2.787 3.934-1.393.967-3.082 1.525-5.196 1.525-5.492-.017-8.87-3.82-8.87-8.853zm11.803-1.754c-.197-1.983-1.426-3.246-3.147-3.246-2.017 0-3.05 1.263-3.41 3.246h6.557zM.066 1.131h9.196c2.82 0 4.902.787 6.345 2.148C17.098 4.672 17.95 6.656 17.95 9c0 4.459-3.082 7.607-7.869 7.607H5.426v7.77H.066V1.131zM9.492 12.05c2.082 0 3.246-1.23 3.246-3.082 0-1.852-1.197-2.983-3.246-2.983H5.426v6.082h4.066v-.017z"})]}),(0,d.jsx)("path",{d:"M19.934 0C8.918 0 .016 8.918.016 19.918c0 8.443 5.246 15.656 12.656 18.557-.18-1.573-.328-4 .066-5.72.36-1.558 2.328-9.903 2.328-9.903s-.59-1.196-.59-2.95c0-2.77 1.606-4.836 3.606-4.836 1.705 0 2.525 1.278 2.525 2.803 0 1.705-1.082 4.262-1.656 6.64-.476 1.983 1 3.606 2.95 3.606 3.542 0 6.263-3.738 6.263-9.115 0-4.77-3.426-8.098-8.328-8.098-5.672 0-9 4.246-9 8.639 0 1.705.656 3.541 1.475 4.541.164.197.18.377.132.574-.148.623-.492 1.983-.558 2.262-.082.36-.295.443-.672.262-2.459-1.18-4-4.82-4-7.737 0-6.28 4.557-12.05 13.164-12.05 6.902 0 12.279 4.918 12.279 11.509 0 6.868-4.328 12.393-10.328 12.393-2.017 0-3.918-1.05-4.558-2.295l-1.245 4.738c-.443 1.737-1.656 3.901-2.476 5.23 1.869.573 3.836.884 5.902.884 11 0 19.918-8.918 19.918-19.918C39.852 8.918 30.934 0 19.934 0z"})]})})})})};function p({user:e}){return(0,d.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,d.jsx)(h,{}),e&&(0,d.jsx)(u,{user:e})]})}const _={container:{backgroundColor:"#FFE4C1"},header:{fontWeight:"normal"}};function g({titleText:e,bodyText:t,buttonText:i,deeplink:l}){const c=(0,s.Z)(),u=(0,a.Tt)();(0,n.useEffect)((()=>{c({event_type:13,view_type:3594})}),[c]);return(0,d.jsx)(o.mh,{children:(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:_.container},position:"fixed",top:!0,bottom:!0,left:!0,right:!0,height:"100%",overflow:"auto","data-test-id":"v2-story-pin-invite-landing-page",role:"dialog","aria-label":e,children:(0,d.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:"100%",children:[(0,d.jsx)(o.xu,{paddingX:5,paddingY:9,children:(0,d.jsx)(p,{user:u})}),(0,d.jsxs)(o.kC,{alignItems:"center",direction:"column",children:[(0,d.jsx)(o.xu,{marginBottom:8,maxWidth:240,children:(0,d.jsx)(o.X6,{size:"500",accessibilityLevel:1,align:"center",color:"default",children:(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:_.header},children:e})})}),(0,d.jsx)(o.xu,{maxWidth:310,marginBottom:12,children:(0,d.jsx)(o.xv,{align:"center",color:"default",children:t})}),(0,d.jsx)(r.Z,{children:e=>(0,d.jsx)(o.xu,{marginBottom:12,children:(0,d.jsx)(o.zx,{size:"lg",color:"red",text:i,onClick:()=>{c({event_type:102,view_type:3594,element:12406}),e(l,"app-upsell-story")}})})})]})]})})})}},854907:(e,t,i)=>{function n(e){const t=[];let i="";for(const n of e)if(i){const e=!!n.match(/\s/),o=!!i.match(/\s/);if(e===o)i+=n;else if(!o&&i.includes("-")){let e=0;for(let n=0;n<i.length;n+=1)"-"===i[n]&&(t.push(i.substring(e,n+1)),e=n+1);t.push(i.substring(e)),i=n}else t.push(i),i=n}else i=n;return i.length&&t.push(i),t}function o({font:e,fontSize:t,textList:i,width:o}){var s,r;if("undefined"==typeof document||!document.body||o<=0||t<=0)return[];const{body:a}=document,l=document.createElement("div");a.appendChild(l);const d=null!=(null===(s=e.fontOverrides)||void 0===s?void 0:s.letterSpacing)?`${e.fontOverrides.letterSpacing}px`:void 0,c=(null===(r=e.fontOverrides)||void 0===r?void 0:r.lineHeight)||1.1,u={letterSpacing:d,lineHeight:String(c),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(l.style,u);const h=document.createElement("div");h.style.display="inline",l.appendChild(h);const p=document.createTextNode("");h.appendChild(p);const _=[];let g="";const m=e=>{const t=e.trim();return p.textContent=t,{text:t,width:h.offsetWidth}},f=e=>{const t=!!e.match(/\s/),i=0===g.length;if(p.textContent=`${g}${e}`,h.offsetWidth>o)if(t)_.push(m(g)),g="";else if(i)for(const n of e)f(n);else _.push(m(g)),g="",f(e);else g+=e};for(const x of null!=i?i:[]){0===x.length&&_.push(m(g));n(x).forEach((e=>f(e))),g.length&&(_.push(m(g)),g="")}return h.remove(),l.remove(),_}function s({boxHeight:e,boxWidth:t,font:i,startFontSize:n,text:s}){var r,a;if("undefined"==typeof document||!document.body)return{fontSize:n,lines:[]};const{body:l}=document,d=document.createElement("div");l.appendChild(d);const c=null==s?void 0:s.split(/\r?\n/g);let u=n;const h=null!=(null===(r=i.fontOverrides)||void 0===r?void 0:r.letterSpacing)?`${i.fontOverrides.letterSpacing}px`:void 0,p=(null===(a=i.fontOverrides)||void 0===a?void 0:a.lineHeight)||1.1,_={letterSpacing:h,lineHeight:String(p),fontFamily:i.fontFamily,fontSize:`${u}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(d.style,_);const g=document.createElement("div");for(g.style.display="inline",d.appendChild(g),(null!=c?c:[]).forEach(((e,t)=>{const i=document.createElement("span");i.style.wordBreak="break-word",g.appendChild(i),i.appendChild(document.createTextNode(e)),t!==(null!=s?s:"").length-1&&i.appendChild(document.createElement("br"))}));(g.offsetHeight>e||g.offsetWidth>t)&&u>0;)u-=1,d.style.fontSize=`${u}px`;return g.remove(),d.remove(),{fontSize:u,lines:u>0?o({font:i,fontSize:u,textList:c,width:t}):[]}}i.d(t,{K:()=>s,Y:()=>n})},962047:(e,t,i)=>{i.d(t,{CP:()=>o,Iz:()=>l,K3:()=>r,Lr:()=>_,NF:()=>h,R4:()=>d,RJ:()=>g,RO:()=>c,S8:()=>a,XG:()=>p,Z0:()=>u,iS:()=>n,uK:()=>s});const n=320,o=10,s=100,r=250,a=100,l=5,d=3,c=2,u=1,h="#E60023",p=20,_=6,g={upload:228,design:226,details:437,target:432}},919974:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(898781),s=i(785893);const r=function(){const e=(0,o.ZP)();return(0,s.jsx)(n.xu,{paddingX:10,width:"100%",children:(0,s.jsx)(n.xu,{color:"errorWeak",display:"flex",direction:"column",smDirection:"row",padding:7,position:"relative",rounding:4,children:(0,s.jsxs)(n.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,s.jsx)(n.xu,{flex:"none",children:(0,s.jsx)(n.JO,{accessibilityLabel:e.bt("Workflow status problem icon", "Workflow status problem icon", "disablePinCreationBanner.icon.accessibilityLabel", undefined, true),color:"error",icon:"workflow-status-problem",size:32})}),(0,s.jsxs)(n.xu,{marginBottom:"auto",marginTop:"auto",paddingX:4,display:"flex",direction:"column",flex:"grow",children:[(0,s.jsx)(n.X6,{size:"400",children:e.bt("Oops...", "Oops...", "disablePinCreationBanner.icon.title", undefined, true)}),(0,s.jsx)(n.xu,{marginTop:2,children:(0,s.jsx)(n.xv,{children:e.bt("Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "disablePinCreationBanner.icon.message", undefined, true)})})]})]})})})}},52925:(e,t,i)=>{i.d(t,{Cl:()=>m,MW:()=>c,Nq:()=>h,St:()=>d,V3:()=>x,Zy:()=>p,dz:()=>u,eE:()=>f,qk:()=>g,uq:()=>b,x5:()=>_});var n=i(16243),o=i.n(n),s=i(170168),r=i(962047),a=i(296342),l=i(854907);function d(e){return["#111111","#370052","#00205C","#01564C","#363F03","#573700","#5E031A","#97026D","#8000BD","#0045CC"][e]}function c(e,t=5){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.body&&window.document.body?new Promise((i=>{const{height:n,src:s,width:r}=e,a=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t},l=document.createElement("canvas");l.width=r,l.height=n;const d=document.createElement("img");d.onload=()=>{const e=l.getContext("2d");e.drawImage(d,0,0);const s=e.getImageData(0,0,r,n).data,c=[],u=r*n;for(let t=0;t<u;t+=10){const e=4*t;c.push([s[e],s[e+1],s[e+2]])}const h=o()(c,t).palette();l.remove(),d.remove(),i(h.map((e=>{return t=e[0],i=e[1],n=e[2],"#"+a(t)+a(i)+a(n);var t,i,n})))},d.src=s})):Promise.reject([])}function u({blockStyle:e,canvasAspectRatio:t,media:i}){if(!e)return{left:0,scale:1,top:0,transform:{rotate:0,scaleX:1,scaleY:1}};const n=a.q8/t,{height:o=100,width:s=100,x_coord:r=0,y_coord:l=0}=e;let d;return d=i.width>i.height?a.q8/i.width*(s/100):n/i.height*(o/100),{left:r?r/100*a.q8:0,scale:d,top:l?l/100*n:0,transform:{rotate:0,scaleX:1,scaleY:1}}}function h(e,t,i){const n=e.split(/\r?\n/g),o=[];let s="";const r=e=>{const t=e.trim();return{text:t,width:i.measureText(t).width}},a=e=>{const n=!!e.match(/\s/),l=0===s.length;if(i.measureText(`${s}${e}`).width>t)if(n)o.push(r(s)),s="";else if(l)for(const t of e)a(t);else o.push(r(s)),s="",a(e);else s+=e};for(const d of n){0===d.length&&o.push(r(s));(0,l.Y)(d).forEach((e=>a(e))),s.length&&(o.push(r(s)),s="")}return o}function p(e,t,i,n,o,s,r){e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-s,i),e.quadraticCurveTo(t+n,i,t+n,i+s),e.lineTo(t+n,i+o-s),e.quadraticCurveTo(t+n,i+o,t+n-s,i+o),e.lineTo(t+s,i+o),e.quadraticCurveTo(t,i+o,t,i+o-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+s,i),e.closePath(),e.fillStyle=r,e.fill()}function _(e){return e.includes("ads-latest")||0===e.indexOf(s.vI)}function g(e){return e.includes("analytics-latest")||0===e.indexOf(s.YD)}function m(e){return e.includes("trends-latest")||0===e.indexOf(s.L1)}function f(e,t){return e.isAuth&&e.isEmployee&&"true"===new URLSearchParams(t).get("debug")}function x(e){const{entryType:t,isAdsManagerIdeaPinDraft:i,isDraft:n}=e;return{entry_type:t,is_ads_manager_idea_pin_draft:null!=i&&i,is_draft:n}}function b(e,t){const i=e.length>r.S8,n=!e||e.length>r.S8;return t?i:n}},252570:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(296342);const o={rotate:0,scaleX:1,scaleY:1};function s({canvasAspectRatio:e,media:t}){const i=t.width/t.height,s=n.q8/e,r=e=>(s-t.height*e)/2,a=({left:e,scale:t})=>({left:e||0,scale:t,top:r(t),transform:o});if(i<e){return a({scale:n.q8/t.width})}{const e=s/t.height,i=t.width*e;return a({left:(n.q8-i)/2,scale:e})}}},296342:(e,t,i)=>{i.d(t,{Ei:()=>l,Lh:()=>h,U:()=>c,Zy:()=>a,dD:()=>s,er:()=>u,j7:()=>p,n5:()=>r,q8:()=>d,xH:()=>o});var n=i(224496);const o=1048576,s=3,r=20,a=3,l=10,d=375,c=d/n.ap,u=1200,h="#FFFFFF",p={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"}},730078:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(224496),o=i(623320),s=i(52925),r=i(296342),a=i(170583);function l({backgroundColor:e,canvasAspectRatio:t,edits:i,image:l,preservePageDimension:d,textBlocksWithFont:c,target:u}){return new Promise((h=>{const p=(0,a.Z)({canvasAspectRatio:null!=t?t:n.ap,edits:i,preservePageDimension:!!d,srcHeight:l.height,srcWidth:l.width,target:u}),_=document.createElement("canvas"),g=_.getContext("2d"),m=-1===i.transform.scaleX,f=-1===i.transform.scaleY;_.height=p.fullCanvasHeight,_.width=p.fullCanvasWidth,c&&e&&(g.beginPath(),g.rect(0,0,p.fullCanvasWidth,p.fullCanvasHeight),g.fillStyle=e,g.fill()),g.save();const x=document.createElement("img");x.onload=()=>{g.scale(i.transform.scaleX,i.transform.scaleY),g.drawImage(x,p.image.x,p.image.y,p.image.width,p.image.height,m?-1*(p.canvas.x+p.image.width):p.canvas.x,f?-1*(p.canvas.y+p.image.height):p.canvas.y,p.canvas.width,p.canvas.height),g.restore(),c&&c.forEach((e=>{var t;if(!e.style||!e.blockStyle||!e.font)return;const{font:i,text:n,blockStyle:{width:o=100,x_coord:a=0,y_coord:l=0},style:{alignment:d=0,font_size:c,hex_color:u,highlight_color:h=null}}=e,_=null!=c?c:24,m=null!=u?u:"#FFFFFF";g.font=`${_}px ${null!==(t=i.fontFamily)&&void 0!==t?t:""}`;const f=(0,s.Nq)(n,r.q8*(o/100),g);if(f.length){var x,b;const e=p.fullCanvasWidth/r.q8;g.font=`${_*e}px ${null!==(x=i.fontFamily)&&void 0!==x?x:""}`,g.textAlign=0===d?"left":"center",g.textBaseline="top";const t=0===d?a/100*r.q8*e:a/100*r.q8*e+o/100*r.q8*e/2,n=_*e*Math.max((null===(b=i.fontOverrides)||void 0===b?void 0:b.lineHeight)||1.1);let c=l/100*p.fullCanvasHeight+(n-_*e);if(h){let i=c;f.forEach((o=>{const r=_*e,a=0===d?t:t-o.width/2*e,l=.05*r,c=.2*r;o.text&&o.text.length>0&&(0,s.Zy)(g,a-c,i-l,o.width*e+2*c,r+2*l,5,h),i+=n}))}g.fillStyle=m,"#ffffff"===m.toLowerCase()&&(g.shadowColor="rgba(0, 0, 0, 0.2)",g.shadowOffsetY=1,g.shadowBlur=4),f.forEach((e=>{g.fillText(e.text,t,c),c+=n}))}}));const e=_.toDataURL();h({height:_.height,id:l.id,name:l.name,size:(0,o.Mi)(e).size,src:e,type:"localImage",width:_.width})},x.src=l.src}))}},170583:(e,t,i)=>{i.d(t,{D:()=>o,Z:()=>s});var n=i(296342);const o=Object.freeze({CLOSEUP:"closeup",EXPRESSIVE_RENDER:"expressive-render",IMAGE_SIGNATURE:"image-signature",THUMBNAIL:"thumbnail"});function s({canvasAspectRatio:e,edits:t,preservePageDimension:i,srcHeight:s,srcWidth:r,target:a}){const l=a===o.THUMBNAIL,d=n.q8/e,{left:c,scale:u,top:h,transform:{scaleX:p,scaleY:_}}=t,g=c<0?Math.min(r*u+c,n.q8):Math.min(n.q8-c,r*u),m=h<0?Math.min(s*u+h,d):Math.min(d-h,s*u),f=g/(r*u),x=m/(s*u),{fullCanvasHeight:b,fullCanvasWidth:y}=l?{fullCanvasHeight:d,fullCanvasWidth:n.q8}:function({imageDisplayHeightPercent:e,imageDisplayWidthPercent:t,preservePageDimension:i,scale:o,srcHeight:s,srcWidth:r}){const a=i?Math.max(n.q8/o,n.q8):t*r;return{fullCanvasHeight:i?Math.max(n.U/o,n.U):e*s,fullCanvasWidth:a}}({imageDisplayHeightPercent:x,imageDisplayWidthPercent:f,preservePageDimension:i,scale:u,srcHeight:s,srcWidth:r}),v=g/n.q8,P=i?v*y:f*r,w=i?m/d*b:x*s,{fullCanvasHeight:I,fullCanvasWidth:A}=l?{fullCanvasHeight:n.q8/e,fullCanvasWidth:n.q8}:{fullCanvasWidth:y,fullCanvasHeight:b},E=e=>l?e:e/u,C=function({imageDisplayHeightPercent:e,imageDisplayWidthPercent:t,left:i,scale:n,scaleX:o,scaleY:s,srcHeight:r,srcWidth:a,top:l}){const d=({isMirrored:e,position:t,percentDisplayed:i})=>e?1===i||t<0?0:Math.abs(t)/n:t<0?Math.abs(t)/n:0;return{height:e*r,width:t*a,x:d({position:i,isMirrored:-1===o,percentDisplayed:t}),y:d({position:l,isMirrored:-1===s,percentDisplayed:e})}}({imageDisplayHeightPercent:x,imageDisplayWidthPercent:f,srcWidth:r,srcHeight:s,left:c,top:h,scale:u,scaleX:p,scaleY:_});return{fullCanvasHeight:I,fullCanvasWidth:A,canvas:{height:w,width:P,x:c<0||!i?0:E(c),y:h<0||!i?0:E(h)},image:C}}},147693:(e,t,i)=>{i.d(t,{uJ:()=>c,ng:()=>h,Zn:()=>p});var n=i(224496),o=i(296342);const s=0,r=1,a=2,l=3;function d({canvasAspectRatio:e,isDraft:t,storyPinBlocks:i}){const d=[],c=i=>{var s,r;const a=(null===(s=i.media)||void 0===s?void 0:s.height)||0,l=(null===(r=i.media)||void 0===r?void 0:r.width)||0;return function({canvasAspectRatio:e,edits:t,srcHeight:i,srcWidth:s,displayHeight:r,keepSrcDimensions:a}){const l=t.left<0&&!a?0:t.left,d=t.top<0&&!a?0:t.top;let c,u;a?(c=s*t.scale,u=i*t.scale):(c=t.left<0?Math.min(s*t.scale+t.left,o.q8):Math.min(o.q8-t.left,s*t.scale),u=t.top<0?Math.min(i*t.scale+t.top,r):Math.min(r-t.top,i*t.scale));const h=o.q8/(e||n.ap);return{height:u/h*100,width:c/o.q8*100,x_coord:l/o.q8*100,y_coord:d/h*100}}({canvasAspectRatio:e,edits:i.edits,srcHeight:a,srcWidth:l,displayHeight:o.q8/(e||n.ap),keepSrcDimensions:t})};return i.forEach((e=>{var i,n,o,u,h;switch(e.type){case"story_pin_image_block":const g=t?null===(i=e.media)||void 0===i?void 0:i.signature:(null===(n=e.media)||void 0===n?void 0:n.signatureEdited)||(null===(o=e.media)||void 0===o?void 0:o.signature);var p;if(g)d.push({block_style:c(e),image_signature:g,tracking_id:"localImage"===(null===(p=e.media)||void 0===p?void 0:p.type)?e.media.uploadId:void 0,type:a});break;case"story_pin_video_block":const m=(null===(u=e.media)||void 0===u?void 0:u.signatureEdited)||(null===(h=e.media)||void 0===h?void 0:h.signature);var _;if(m)d.push({block_style:c(e),tracking_id:"localVideo"===(null===(_=e.media)||void 0===_?void 0:_.type)?e.media.uploadId:void 0,video_signature:m,type:l});break;case"story_pin_paragraph_block":(t||e.text)&&d.push({block_style:e.blockStyle,style:{...e.style,vertical_alignment:0},text:e.text,type:s});break;case"story_pin_heading_block":(t||e.text)&&d.push({block_style:e.blockStyle,style:{...e.style,vertical_alignment:0},text:e.text,type:r})}})),d}function c({canvasAspectRatio:e,storyPinItem:t,storyPinItemBlocks:i}){const{layout:n}=t;return null!=n?{blocks:d({canvasAspectRatio:e,isDraft:!0,storyPinBlocks:i}),layout:n,style:{background_color:t.backgroundColor}}:null}function u(e){return e.filter((e=>["story_pin_image_block","story_pin_video_block"].includes(e.type))).map((e=>{var t,i;const n=(null===(t=e.media)||void 0===t?void 0:t.height)||0,o=(null===(i=e.media)||void 0===i?void 0:i.width)||0;return function({clipType:e,srcHeight:t,srcWidth:i}){return{clip_type:e,end_time_ms:-1,is_converted_from_image:!1,source_media_height:Math.round(t),source_media_width:Math.round(i),start_time_ms:-1}}({clipType:"story_pin_image_block"===e.type?0:1,srcHeight:n,srcWidth:o})}))}function h({canvasAspectRatio:e,index:t,storyPinItem:i,storyPinItemBlocks:n}){const{layout:o}=i;if(n&&n.length&&null!=o){const s=d({canvasAspectRatio:e,isDraft:!1,storyPinBlocks:n}),r=u(n);return{blocks:s,...null!=r&&r.length?{clips:r}:{},layout:0===t?0:o,style:{background_color:i.backgroundColor}}}return null}function p(e,t){return e.filter((e=>"story_pin_paragraph_block"===e.type)).map((e=>({...e,font:t.find((t=>{var i;return t.id===String(null===(i=e.style)||void 0===i?void 0:i.font_id)}))||t[0]})))}},201155:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(883119),o=i(499128),s=i(898781),r=i(784590),a=i(50286),l=i(785893);const d=28,c=40,u=48,h=48,p=28,_="#696969";function g({ideaPinImages:e}){const t={1:d,2:c,3:u},i=e.map(((e,t)=>{var i,o,s;return(0,l.jsx)(n.xu,{height:h,width:p,color:"default",borderStyle:"sm",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},children:(0,l.jsx)(n.Ee,{alt:"",src:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",color:_,fit:"cover",naturalHeight:null!==(o=null==e?void 0:e.height)&&void 0!==o?o:1,naturalWidth:null!==(s=null==e?void 0:e.width)&&void 0!==s?s:1})},t)}));return(0,l.jsx)(n.kC,{justifyContent:"center",children:(0,l.jsx)(n.kC,{justifyContent:"start",width:t[e.length],children:i})})}const m=3,f=5e3;function x({handleHide:e,text:t,userId:i,href:d,imageUrl:c}){const u=(0,s.ZP)(),h=(0,a.HG)(),p=(0,r.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:i}}),_=Array.isArray(t)?t.join(" "):t;if(0===(p.data||[]).length)return(0,l.jsx)(o.ZP,{duration:f,onHide:e,text:_,href:d,thumbnail:c?{image:(0,l.jsx)(n.Ee,{alt:u.bt("Image of who you followed", "Image of who you followed", "userFollowingToast.thumbnail.userImage", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:c})}:void 0});const x=(p.data||[]).slice(0,m).map((e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[h?"236x":"170x"]})),b=(0,l.jsx)(g,{ideaPinImages:x});return(0,l.jsx)(o.ZP,{href:d,duration:f,onHide:e,_dangerouslySetThumbnail:b,text:_})}},109892:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(702664),o=i(782677),s=i(214494),r=i(332611),a=i(886858),l=i(248327),d=i(414327);function c(){const e=(0,n.useDispatch)(),t=(0,n.useSelector)((e=>e.resources));return async function({boardCreateOptions:i,deprecatedSchemaForNormalization:n}){var c,u;const h=await s.Z.create("BoardResource",i).callCreate(),p=null===(c=h.resource_response)||void 0===c?void 0:c.data,_=n?(0,o.Fv)(p,n):void 0;e((0,d.XM)("BoardResource",i,h,_)),e((0,r.fO)({event_type:20})),null!==(u=p.owner)&&void 0!==u&&u.id&&e((0,l.b)("UserResource",{options:{user_id:p.owner.id,field_set_key:"save_behavior"}}));const g=t.BoardsResource||{},m=t.BoardsFeedResource||{};return Object.keys(g).forEach((t=>{var i;(0,a.k)(t).username===(null===(i=p.owner)||void 0===i?void 0:i.username)&&e((0,d.jB)("BoardsResource",t))})),Object.keys(m).forEach((t=>{var i;(0,a.k)(t).username===(null===(i=p.owner)||void 0===i?void 0:i.username)&&e((0,d.jB)("BoardsFeedResource",t))})),p}}},152028:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(883119),o=i(81226),s=i(898781),r=i(785893);const a=24;function l({duration:e}){const t=(0,s.ZP)();return(0,r.jsxs)(n.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:a,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,r.jsx)(n.JO,{accessibilityLabel:t.bt("Video camera icon", "Video camera icon", "Video camera indicator icon for a Pin", undefined, true),color:"light",icon:"video-camera"}),(0,r.jsx)(n.xu,{marginStart:1,children:(0,r.jsx)(n.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,o.Z)(e)})})]})}},714922:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(310147).Z},216834:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(310147).Z},76510:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(310147).Z},705064:(e,t,i)=>{i.d(t,{wH:()=>o,MM:()=>s,uo:()=>r});var n=i(425288);const{Provider:o,useHook:s}=(0,n.Z)("HandlerId");function r(){return function(e){const[t,i]=e.split(/\/(.*)+/);return{filepath:i,site:t}}(s()).site}},373897:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},163405:(e,t,i)=>{var n=i(373897);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},474704:(e,t,i)=>{var n=i(386116);e.exports=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw r}}}},e.exports.__esModule=!0,e.exports.default=e.exports},238416:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},564836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},379498:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},742281:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},242122:(e,t,i)=>{var n=i(238416);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}e.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},600861:(e,t,i)=>{var n=i(163405),o=i(379498),s=i(386116),r=i(742281);e.exports=function(e){return n(e)||o(e)||s(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},386116:(e,t,i)=>{var n=i(373897);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},497326:(e,t,i)=>{function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{Z:()=>n})},487462:(e,t,i)=>{function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(this,arguments)}i.d(t,{Z:()=>n})},875068:(e,t,i)=>{function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}i.d(t,{Z:()=>o})},172875:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i.d(t,{Z:()=>s})},263366:(e,t,i)=>{function n(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}i.d(t,{Z:()=>n})}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,35074,16550,26067,31551,6284,35303,42298,73878,87072,50040,54176,99961,76030,27405,31583,23468,32585,57009,10966,72621],(()=>(t(367677),t(644551),t(61746))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/idea-ads-tool.en_GB-2995cf614a348563.mjs.map